(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{FNJc:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,i=a("bx4M"),r=(a("14J3"),a("BMrR")),d=(a("+L6B"),a("2/Rp")),o=(a("iQDF"),a("+eQT")),l=(a("5NDa"),a("5rEg")),c=(a("jCWc"),a("kPKH")),s=a("MVZn"),m=a.n(s),u=(a("+BJd"),a("mr32")),p=a("lwsE"),f=a.n(p),y=a("W8MJ"),h=a.n(y),v=a("a1gu"),x=a.n(v),w=a("Nsbk"),g=a.n(w),E=a("7W2i"),S=a.n(E),T=(a("OaEy"),a("2fM7")),L=(a("y8nQ"),a("Vl3Y")),k=a("q1tI"),N=a.n(k),F=a("MuoO"),b=a("wd/R"),M=a.n(b),I=a("mf+E"),Y=a("CkN6"),H=a("+n12"),O=a("9zHi"),D=a.n(O),R=a("ns75"),V=a.n(R),C=L.a.Item,A=T.a.Option,P=["/lawment/combine"],z={pageNo:1,pageSize:10},J=Object(F.connect)(function(e){return{TrafficApiV2Static:e.TrafficApiV2Static,loading:e.loading.models.TrafficApiV2Static}})(n=L.a.create()(n=function(e){function t(){var e,a;f()(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=x()(this,(e=g()(t)).call.apply(e,[this].concat(i)))).state={formValues:{},newSiteList:[]},a.columns=[{title:"车牌号",dataIndex:"carNo",width:100,fixed:!0},{title:"轴数",width:60,dataIndex:"axisNum"},{title:"误差量(t)",dataIndex:"wxl",render:function(e,t){return((t.staticTotalLoad-t.dynamicTotalLoad)/1e3).toFixed(2)}},{title:"误差率(%)",dataIndex:"wxlv",render:function(e,t){return((t.staticTotalLoad-t.dynamicTotalLoad)/t.staticTotalLoad*100).toFixed(2)}},{title:"静态",children:[{title:"站点名称",dataIndex:"staticSiteName",key:"staticSiteName"},{title:"检测时间",dataIndex:"staticPreviewTime",key:"staticPreviewTime",render:function(e){return M()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"车货总重(t)",dataIndex:"staticTotalLoad",key:"staticTotalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"超重(t)",dataIndex:"staticOverLoad",key:"staticOverLoad",render:function(e){return e>0?N.a.createElement(u.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"staticOverLoadRate",key:"staticOverLoadRate",render:function(e){return(1*e).toFixed(2)}}]},{title:"动态",children:[{title:"站点名称",dataIndex:"dynamicSiteName",key:"dynamicSiteName"},{title:"检测时间",dataIndex:"dynamicPreviewTime",key:"dynamicPreviewTime",render:function(e){return M()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"车货总重(t)",dataIndex:"dynamicTotalLoad",key:"dynamicTotalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"超重(t)",dataIndex:"dynamicOverLoad",key:"dynamicOverLoad",render:function(e){return e>0?N.a.createElement(u.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"dynamicOverLoadRate",key:"dynamicOverLoadRate",render:function(e){return(100*e).toFixed(2)}}]}],a.getUserSite=function(){(0,a.props.dispatch)({type:"system/userSite",payload:{siteType:2},callback:function(e){if(e.length){var t=e.map(function(e){var t=Object.keys(e);return{code:t[0],name:e[t[0]]}});a.setState({newSiteList:t})}}})},a.getList=function(e){(0,a.props.dispatch)({type:"TrafficApiV2Static/dynamicAndStaticCompare",payload:m()({},e)})},a.handleStandardTableChange=function(e){var t=a.state.formValues,n=m()({pageNo:e.current,pageSize:e.pageSize},t);a.getList(n)},a.handleFormReset=function(){a.props.form.resetFields(),a.setState({formValues:{}}),a.getList(z)},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n="YYYY-MM-DDTHH:mm:ss",i=t.previewTime?{startPreviewTime:M()(t.previewTime[0]).format(n),endPreviewTime:M()(t.previewTime[1]).format(n)}:{},r=m()({},t,i);delete r.previewTime,a.setState({formValues:r}),a.getList(m()({},z,r))}})},a.renderOption=function(){return a.state.newSiteList.map(function(e){return N.a.createElement(A,{key:e.code,value:e.code},e.name)})},a}return S()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.getUserSite(),this.getList(z)}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return N.a.createElement(L.a,{onSubmit:this.handleSearch,layout:"inline"},N.a.createElement(r.a,{gutter:16},N.a.createElement(c.a,{md:5,sm:24},N.a.createElement("div",{className:V.a.inputMain},N.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"站点"),N.a.createElement(C,{style:{flex:1}},e("siteCodes")(N.a.createElement(T.a,{dropdownMatchSelectWidth:!1,className:V.a.inputGroupLeftRadius,placeholder:"请选择"},this.renderOption()))))),N.a.createElement(c.a,{md:5,sm:24},N.a.createElement(C,null,e("carNo")(N.a.createElement(l.a,{placeholder:"车牌号",addonBefore:"车牌号"})))),N.a.createElement(c.a,{md:6,sm:24},N.a.createElement("div",{className:V.a.inputMain},N.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),N.a.createElement(C,{style:{flex:1}},e("previewTime")(N.a.createElement(o.a.RangePicker,{className:V.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[M()("00:00:00","HH:mm:ss"),M()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"}))))),N.a.createElement(c.a,{md:6,sm:24},N.a.createElement("span",{className:D.a.submitButtons,style:{float:"right"}},N.a.createElement(d.a,{type:"primary",htmlType:"submit"},"查询"),N.a.createElement(d.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,t=e.TrafficApiV2Static.dyAndStCompareData,a=e.loading;return N.a.createElement(k.Fragment,null,Object(H.c)(P[0])?null:N.a.createElement(I.a,{to:"/exception/403"}),N.a.createElement(i.a,{bordered:!1},N.a.createElement("div",{className:D.a.tableList},N.a.createElement("div",{className:D.a.tableListForm},this.renderSimpleForm()),N.a.createElement(Y.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:a,data:t,scroll:{x:"130%"},columns:this.columns,onChange:this.handleStandardTableChange}))))}}]),t}(k.PureComponent))||n)||n;t.default=J}}]);