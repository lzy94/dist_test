(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{sqB9:function(e,t,a){"use strict";a.r(t);var l=a("pVnL"),n=a.n(l),r=(a("IzEo"),a("bx4M")),i=(a("14J3"),a("BMrR")),o=(a("jCWc"),a("kPKH")),s=(a("5NDa"),a("5rEg")),c=(a("miYZ"),a("tsqr")),d=(a("2qtc"),a("kLXV")),m=(a("P2fV"),a("NJEC")),u=(a("/zsF"),a("PArb")),p=(a("5Dmo"),a("3S7+")),h=(a("+L6B"),a("2/Rp")),f=a("lwsE"),g=a.n(f),E=a("W8MJ"),y=a.n(E),b=a("a1gu"),C=a.n(b),k=a("Nsbk"),v=a.n(k),M=a("7W2i"),w=a.n(M),F=(a("OaEy"),a("2fM7")),V=(a("y8nQ"),a("Vl3Y")),B=a("q1tI"),D=a.n(B),S=a("MuoO"),P=a("CkN6"),T=a("MVZn"),q=a.n(T),N=(a("giR+"),a("fyUT")),R=(a("iQDF"),a("+eQT")),Y=a("wd/R"),L=a.n(Y),j=a("NWc4"),O=a.n(j),I=V.a.Item,W=F.a.Option,x=["高速公路","国省干线","农村公路"];var H=V.a.create({mapPropsToFields:function(e){return function(e){for(var t=Object.keys(e),a={},l=0;l<t.length;l+=1)a[t[l]]=V.a.createFormField({value:"startWorkTime"===t[l]||"completeWorkTime"===t[l]||"registerTime"===t[l]?L()(new Date(e[t[l]]),"YYYY-MM-DD HH:mm:ss"):e[t[l]]});return a}(e.field)},onValuesChange:function(e,t){e.onChange(t)}})(function(e){var t=e.form;return D.a.createElement("table",{className:O.a.table},D.a.createElement("tbody",null,D.a.createElement("tr",null,D.a.createElement("td",null,"项目名称"),D.a.createElement("td",{colSpan:2},D.a.createElement(I,null,t.getFieldDecorator("projectName",{rules:[{required:!0,message:"请输入项目名称"}]})(D.a.createElement(s.a,{placeholder:"请输入"})))),D.a.createElement("td",null,"项目类型"),D.a.createElement("td",{colSpan:2},D.a.createElement(I,null,t.getFieldDecorator("projectCategory",{rules:[{required:!0,message:"请选择项目类型"}]})(D.a.createElement(F.a,{style:{width:"100%"}},x.map(function(e){return D.a.createElement(W,{key:e},e)})))))),D.a.createElement("tr",null,D.a.createElement("td",null,"开工时间"),D.a.createElement("td",null,D.a.createElement(I,null,t.getFieldDecorator("startWorkTime",{rules:[{required:!0,message:"请选择开工时间"}]})(D.a.createElement(R.a,{showTime:!0,style:{minWidth:"100%"},placeholder:"请选择"})))),D.a.createElement("td",null,"完工时间"),D.a.createElement("td",null,D.a.createElement(I,null,t.getFieldDecorator("completeWorkTime",{rules:[{required:!0,message:"请选择完工时间"}]})(D.a.createElement(R.a,{showTime:!0,style:{minWidth:"100%"},placeholder:"请选择"})))),D.a.createElement("td",null,"登记时间"),D.a.createElement("td",null,D.a.createElement(I,null,t.getFieldDecorator("registerTime",{rules:[{required:!0,message:"请选择登记时间"}]})(D.a.createElement(R.a,{showTime:!0,style:{minWidth:"100%"},placeholder:"请选择"}))))),D.a.createElement("tr",null,D.a.createElement("td",null,"总里程（km）"),D.a.createElement("td",null,D.a.createElement(I,null,t.getFieldDecorator("totalMileage",{rules:[{required:!0,message:"请输入"}]})(D.a.createElement(N.a,{min:0,style:{width:"100%"},placeholder:"请选择"})))),D.a.createElement("td",null,"累计完成里程（km）"),D.a.createElement("td",null,D.a.createElement(I,null,t.getFieldDecorator("cumulativeMileage",{rules:[{required:!0,message:"请输入"}]})(D.a.createElement(N.a,{min:0,style:{width:"100%"},placeholder:"请选择"})))),D.a.createElement("td",null,"当年完成里程（km）"),D.a.createElement("td",null,D.a.createElement(I,null,t.getFieldDecorator("yearCompletedMileage",{rules:[{required:!0,message:"请输入"}]})(D.a.createElement(N.a,{min:0,style:{width:"100%"},placeholder:"请选择"}))))),D.a.createElement("tr",null,D.a.createElement("td",null,"工程总投资（万元）"),D.a.createElement("td",null,D.a.createElement(I,null,t.getFieldDecorator("totalInvestment",{rules:[{required:!0,message:"请输入"}]})(D.a.createElement(N.a,{min:0,style:{width:"100%"},placeholder:"请选择"})))),D.a.createElement("td",null,"累计完成投资（万元）"),D.a.createElement("td",null,D.a.createElement(I,null,t.getFieldDecorator("accumulatedInvestment",{rules:[{required:!0,message:"请输入"}]})(D.a.createElement(N.a,{min:0,style:{width:"100%"},placeholder:"请选择"})))),D.a.createElement("td",null,"当年完成投资（万元）"),D.a.createElement("td",null,D.a.createElement(I,null,t.getFieldDecorator("yearCompletedInvestment",{rules:[{required:!0,message:"请输入"}]})(D.a.createElement(N.a,{min:0,style:{width:"100%"},placeholder:"请选择"})))))))});H.defaultProps={field:{},onChange:function(){}};var U,z,J,A,Q,Z,K,X=H,G=a("ZP6J"),$=a.n(G),_=Object(S.connect)(function(e){return{BuildProgressControl:e.BuildProgressControl,loading:e.loading.models.BuildProgressControl}})((J=z=function(e){function t(e){var a;return g()(this,t),(a=C()(this,v()(t).call(this,e))).state={field:{}},a.save=function(){a.MyForm.current.validateFields(function(e,t){if(!e){var l=a.props,n=l.dispatch,r=l.modalCallback;n({type:"BuildProgressControl/add",payload:q()({},t),callback:function(){c.a.success("添加成功"),r(),a.cancelClick()}})}})},a.cancelClick=function(){(0,a.props.handleModalVisible)()},a.MyForm=D.a.createRef(),a}return w()(t,e),y()(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.modalVisible,l=this.state.field;return D.a.createElement(d.a,{destroyOnClose:!0,title:"新建项目进度",className:$.a.formModal,visible:a,onCancel:this.cancelClick,width:1e3,footer:[D.a.createElement(h.a,{key:"back",onClick:this.cancelClick},"取消"),D.a.createElement(h.a,{key:"submit",type:"primary",loading:t,onClick:this.save},"确定")]},D.a.createElement(r.a,{bordered:!1},D.a.createElement(X,{onChange:this.fieldChange,field:l,ref:this.MyForm})))}}]),t}(B.PureComponent),z.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},U=J))||U,ee=Object(S.connect)(function(e){return{BuildProgressControl:e.BuildProgressControl,loading:e.loading.models.BuildProgressControl}})((Z=Q=function(e){function t(e){var a;return g()(this,t),(a=C()(this,v()(t).call(this,e))).state={fileList:[],field:{},isSet:!1},a.save=function(){a.MyForm.current.validateFields(function(e,t){if(!e){for(var l=a.props,n=l.dispatch,r=l.modalCallback,i=a.state.field,o=q()({},i),s=Object.keys(t),d=0;d<s.length;d+=1)o[s[d]]=t[s[d]];if("object"==typeof t.improveUrl){var m=t.improveUrl.file.response;o.improveUrl=m?m.filePath:""}a.setState({field:o}),n({type:"BuildProgressControl/add",payload:o,callback:function(){c.a.success("编辑成功"),r("edit"),a.cancelClick()}})}})},a.cancelClick=function(){(0,a.props.handleModalVisible)()},a.MyForm=D.a.createRef(),a}return w()(t,e),y()(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.modalVisible,l=this.state.field;return D.a.createElement(d.a,{destroyOnClose:!0,title:"编辑项目进度",className:$.a.formModal,visible:a,onCancel:this.cancelClick,width:1e3,footer:[D.a.createElement(h.a,{key:"back",onClick:this.cancelClick},"取消"),D.a.createElement(h.a,{key:"submit",type:"primary",loading:t,onClick:this.save},"确定")]},D.a.createElement(r.a,{bordered:!1},D.a.createElement(X,{onChange:this.fieldChange,field:l,ref:this.MyForm})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.detail,l=t.isSet;return l?null:{isSet:!l,field:a}}}]),t}(B.PureComponent),Q.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},A=Z))||A,te=a("9zHi"),ae=a.n(te),le=a("ns75"),ne=a.n(le),re=V.a.Item,ie=F.a.Option,oe=["高速公路","国省干线","农村公路"],se=Object(S.connect)(function(e){return{BuildProgressControl:e.BuildProgressControl,loading:e.loading.models.BuildProgressControl}})(K=V.a.create()(K=function(e){function t(){var e,a;g()(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=C()(this,(e=v()(t)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,updateModalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},a.columns=[{title:"项目名称",dataIndex:"projectName"},{title:"项目类型",dataIndex:"projectCategory"},{title:"开工时间",dataIndex:"startWorkTime",render:function(e){return L()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"完工时间",dataIndex:"completeWorkTime",render:function(e){return L()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"登记时间",dataIndex:"registerTime",render:function(e){return L()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"操作",width:100,render:function(e,t){return D.a.createElement(B.Fragment,null,D.a.createElement(p.a,{placement:"left",title:"编辑"},D.a.createElement(h.a,{onClick:function(){return a.showDetailModal(t.id)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),D.a.createElement(u.a,{type:"vertical"}),D.a.createElement(m.a,{title:"是否删除数据?",onConfirm:function(){return a.delUtil(t.id)},okText:"确定",cancelText:"取消"},D.a.createElement(p.a,{placement:"left",title:"删除"},D.a.createElement(h.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],a.batchDel=function(){d.a.confirm({title:"提示",content:"确定要删除数据吗？",okType:"danger",onOk:function(){var e=a.state.selectedRows;a.delUtil(e.map(function(e){return e.id}).join())}})},a.delUtil=function(e){(0,a.props.dispatch)({type:"BuildProgressControl/remove",payload:{ids:e},callback:function(){c.a.success("删除成功");var e=a.state.pageBean;a.getList({pageBean:e}),a.setState({selectedRows:[]})}})},a.getList=function(e){(0,a.props.dispatch)({type:"BuildProgressControl/fetch",payload:e})},a.showDetailModal=function(e){(0,a.props.dispatch)({type:"BuildProgressControl/detail",payload:e,callback:function(e){a.setState({detail:e},function(){return a.handleUpdateModalVisible(!0)})}})},a.handleStandardTableChange=function(e){var t=a.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:t};a.getList(l)},a.handleFormReset=function(){var e=a.props.form,t=a.state.pageBean;e.resetFields(),a.setState({formValues:[],selectedRows:[]}),a.getList({pageBean:t})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props.form,l=a.state.pageBean;t.validateFields(function(e,t){if(!e){var n={projectName:t.name,projectCategory:t.cate},r=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});a.setState({formValues:r}),a.getList({pageBean:l,querys:r})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleUpdateModalVisible=function(e){a.setState({updateModalVisible:!!e}),e||a.setState({detail:{}})},a.modalCallback=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",t=a.state,l=t.pageBean,n=t.formValues;return"add"===e?a.getList({pageBean:l}):a.getList({pageBean:l,querys:n})},a}return w()(t,e),y()(t,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return D.a.createElement(V.a,{onSubmit:this.handleSearch,layout:"inline"},D.a.createElement(i.a,{gutter:16},D.a.createElement(o.a,{md:5,sm:24},D.a.createElement(re,null,e("name")(D.a.createElement(s.a,{addonBefore:"项目名称",placeholder:"请输入"})))),D.a.createElement(o.a,{md:5,sm:24},D.a.createElement("div",{className:ne.a.inputMain},D.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"项目类型"),D.a.createElement(re,{style:{flex:1}},e("cate")(D.a.createElement(F.a,{style:{width:"100%"},placeholder:"请选择",onChange:this.pointChange},oe.map(function(e){return D.a.createElement(ie,{key:e},e)})))))),D.a.createElement(o.a,{md:4,sm:24},D.a.createElement("span",{className:ae.a.submitButtons},D.a.createElement(h.a,{type:"primary",htmlType:"submit"},"查询"),D.a.createElement(h.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.BuildProgressControl.data,l=t.loading,i=this.state,o=i.selectedRows,s=i.modalVisible,c=i.updateModalVisible,d=i.detail,m={modalCallback:this.modalCallback},u={handleModalVisible:this.handleModalVisible},p={detail:d,handleModalVisible:this.handleUpdateModalVisible};return D.a.createElement(B.Fragment,null,D.a.createElement(r.a,{bordered:!1},D.a.createElement("div",{className:ae.a.tableList},D.a.createElement("div",{className:ae.a.tableListForm},this.renderSimpleForm()),D.a.createElement("div",{className:ae.a.tableListOperator},D.a.createElement(h.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"),o.length>0&&D.a.createElement(h.a,{type:"danger",onClick:this.batchDel},"批量删除")),D.a.createElement(P.a,{tableAlert:!0,selectedRows:o,loading:l,data:a,size:"middle",columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),s&&D.a.createElement(_,n()({},m,u,{modalVisible:s})),c&&Object.keys(d).length&&D.a.createElement(ee,n()({},m,p,{modalVisible:c})))}}]),t}(B.PureComponent))||K)||K;t.default=se}}]);