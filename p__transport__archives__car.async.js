(window.webpackJsonp=window.webpackJsonp||[]).push([[195],{mac9:function(e,a,t){"use strict";t.r(a);var l,r,n,i,s,o,c,d=t("pVnL"),m=t.n(d),u=(t("IzEo"),t("bx4M")),p=(t("14J3"),t("BMrR")),h=(t("jCWc"),t("kPKH")),f=(t("5NDa"),t("5rEg")),g=(t("miYZ"),t("tsqr")),E=(t("2qtc"),t("kLXV")),b=(t("P2fV"),t("NJEC")),y=(t("/zsF"),t("PArb")),v=(t("5Dmo"),t("3S7+")),V=(t("+L6B"),t("2/Rp")),C=t("lwsE"),k=t.n(C),F=t("W8MJ"),S=t.n(F),w=t("a1gu"),D=t.n(w),L=t("Nsbk"),M=t.n(L),T=t("7W2i"),N=t.n(T),A=(t("OaEy"),t("2fM7")),q=(t("y8nQ"),t("Vl3Y")),x=t("q1tI"),B=t.n(x),I=t("MuoO"),j=t("CkN6"),O=t("+n12"),P=(t("7Kak"),t("9yH6")),R=(t("DZo9"),t("8z0m")),z=(t("Pwec"),t("CtXQ")),U=(t("giR+"),t("fyUT")),G=t("MVZn"),H=t.n(G),J=t("y01j"),X=t("ZP6J"),Z=t.n(X),K=q.a.Item,Q=Object(I.connect)(function(e){return{TransportArchivesCar:e.TransportArchivesCar,loading:e.loading.models.TransportArchivesCar}})(l=q.a.create()((n=r=function(e){function a(){var e,t;k()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=D()(this,(e=M()(a)).call.apply(e,[this].concat(r)))).state={modalFirmVisible:!1,fileList:[],companyTel:""},t.handleFirmModalVisible=function(e){t.setState({modalFirmVisible:!!e})},t.setSelectData=function(e){var a=t.props.form;t.setState({companyTel:e.account}),a.setFieldsValue({companyName:e.companyName})},t.uploadConfig=function(){return{name:"files",action:"/result/api/file/v1/fileUpload",listType:"picture",accept:".jpg,.jpeg,.png",className:"upload-list-inline",data:{type:9},headers:{Authorization:"Bearer ".concat(Object(O.z)("token")[0]),"x-requested-with":"XMLHttpRequest"},beforeUpload:O.D,onChange:t.uploadChange}},t.uploadChange=function(e){"done"===e.file.status?200===e.file.response.code?(g.a.success("上传成功"),t.setState({fileList:e.fileList})):g.a.error(e.file.response.code.msg):"error"===e.file.status?g.a.error("上传失败"):"removed"===e.file.status&&t.setState({fileList:e.fileList})},t.save=function(){var e=t.props,a=e.dispatch,l=e.form,r=e.modalCallback,n=e.handleModalVisible,i=t.state,s=i.fileList,o=i.companyTel;l.validateFields(function(e,t){if(!e){if(!s.length)return g.a.error("请选择图片");var l=H()({},t,{companyTel:o,carImg:s.length?s[0].response.filePath:"",status:2});delete l.img,a({type:"TransportArchivesCar/AUData",payload:l,callback:function(){g.a.success("添加成功"),n(),setTimeout(function(){return r()},300)}})}})},t.cancelClick=function(){var e=t.props.handleModalVisible;t.setState({fileList:[]}),e()},t}return N()(a,e),S()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.form,l=a.modalVisible,r=a.loading,n=this.state,i=n.modalFirmVisible,s=n.fileList;return B.a.createElement(x.Fragment,null,B.a.createElement(E.a,{destroyOnClose:!0,title:"添加",className:Z.a.formModal,visible:l,width:800,onCancel:this.cancelClick,footer:[B.a.createElement(V.a,{key:"back",onClick:this.cancelClick},"取消"),B.a.createElement(V.a,{key:"submit",type:"primary",loading:r,onClick:this.save},"确定")]},B.a.createElement("div",{className:Z.a.formModalBody},B.a.createElement(p.a,{gutter:40},B.a.createElement(h.a,{md:12,sm:24},B.a.createElement(K,{label:"车牌号"},t.getFieldDecorator("carNo",{rules:[{required:!0,message:"请输入车牌号！"}]})(B.a.createElement(f.a,{placeholder:"请输入"}))),B.a.createElement(K,{label:"吨位(kg)"},t.getFieldDecorator("tonnage",{rules:[{required:!0,message:"请输入吨位！"}]})(B.a.createElement(U.a,{min:0,style:{width:"100%"},placeholder:"请输入"}))),B.a.createElement(K,{label:"座位"},t.getFieldDecorator("seat",{rules:[{required:!0,message:"请输入座位！"}]})(B.a.createElement(U.a,{min:1,style:{width:"100%"},placeholder:"请输入"}))),B.a.createElement(K,{label:"公司名称"},t.getFieldDecorator("companyName",{rules:[{required:!0,message:"请输入公司名称！"}]})(B.a.createElement(f.a,{readOnly:!0,placeholder:"请输入",onClick:function(){return e.handleFirmModalVisible(!0)}}))),B.a.createElement(K,{label:"照片"},t.getFieldDecorator("img",{rules:[{required:!0,message:"请上传照片"}]})(B.a.createElement(R.a,m()({},this.uploadConfig(),{defaultFileList:s}),s.length>0?null:B.a.createElement(V.a,null,B.a.createElement(z.a,{type:"upload"})," 请上传照片(jpg,jpeg,png)"))))),B.a.createElement(h.a,{md:12,sm:24},B.a.createElement(K,{label:"车辆类型"},t.getFieldDecorator("carType",{rules:[{required:!0,message:"请输入车辆类型！"}]})(B.a.createElement(f.a,{placeholder:"请输入"}))),B.a.createElement(K,{label:"道路运输证号"},t.getFieldDecorator("transportLicense",{rules:[{required:!0,message:"请输入道路运输证号！"}]})(B.a.createElement(f.a,{placeholder:"请输入"}))),B.a.createElement(K,{label:"车辆状态"},t.getFieldDecorator("type",{initialValue:0,rules:[{required:!0,message:"请选择！"}]})(B.a.createElement(P.a.Group,null,B.a.createElement(P.a,{value:0},"营运"),B.a.createElement(P.a,{value:1},"停运")))),B.a.createElement(K,{label:"GPS入网"},t.getFieldDecorator("isAccessNetwork",{initialValue:1,rules:[{required:!0,message:"请选择！"}]})(B.a.createElement(P.a.Group,null,B.a.createElement(P.a,{value:1},"是"),B.a.createElement(P.a,{value:2},"否")))),B.a.createElement(K,{label:"经营范围"},t.getFieldDecorator("businessScope",{rules:[{required:!0,message:"请输入经营范围！"}]})(B.a.createElement(f.a.TextArea,{placeholder:"请输入"}))))))),i?B.a.createElement(J.a,{modalVisible:i,setSelectData:this.setSelectData,handleModalVisible:this.handleFirmModalVisible}):null)}}]),a}(x.PureComponent),r.defaultProps={modalVisible:!1,handleModalVisible:function(){}},l=n))||l)||l,W=q.a.Item,Y=["审核中","已审核","已驳回","已报废","已删除"],$=Object(I.connect)(function(e){return{TransportArchivesCar:e.TransportArchivesCar,loading:e.loading.models.TransportArchivesCar}})(i=q.a.create()((o=s=function(e){function a(){var e,t;k()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=D()(this,(e=M()(a)).call.apply(e,[this].concat(r)))).state={modalFirmVisible:!1,fileList:[],companyTel:"",isSet:!1},t.handleFirmModalVisible=function(e){t.setState({modalFirmVisible:!!e})},t.setSelectData=function(e){var a=t.props.form;t.setState({companyTel:e.account}),a.setFieldsValue({companyName:e.companyName})},t.uploadConfig=function(){return{name:"files",action:"/result/api/file/v1/fileUpload",listType:"picture",accept:".jpg,.jpeg,.png",className:"upload-list-inline",data:{type:9},headers:{Authorization:"Bearer ".concat(Object(O.z)("token")[0]),"x-requested-with":"XMLHttpRequest"},beforeUpload:O.D,onChange:t.uploadChange}},t.uploadChange=function(e){"done"===e.file.status?200===e.file.response.code?(g.a.success("上传成功"),t.setState({fileList:e.fileList})):g.a.error(e.file.response.code.msg):"error"===e.file.status?g.a.error("上传失败"):"removed"===e.file.status&&t.setState({fileList:e.fileList})},t.save=function(){var e=t.props,a=e.dispatch,l=e.form,r=e.modalCallback,n=e.handleModalVisible,i=t.state,s=i.companyTel,o=i.detail,c=i.fileList;l.validateFields(function(e,t){if(!e){if(!c.length)return g.a.error("请选择图片");var l=H()({},t,{companyTel:s});if("object"==typeof l.img){var i=l.img.file.response;l.carImg=i?i.filePath:""}delete l.img;for(var d=JSON.parse(JSON.stringify(o)),m=Object.keys(l),u=0;u<m.length;u+=1)d[m[u]]=l[m[u]];a({type:"TransportArchivesCar/AUData",payload:d,callback:function(){g.a.success("编辑成功"),n(),setTimeout(function(){return r()},300)}})}})},t.cancelClick=function(){var e=t.props.handleModalVisible;t.setState({fileList:[]}),e()},t}return N()(a,e),S()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.form,l=a.modalVisible,r=a.loading,n=this.state,i=n.modalFirmVisible,s=n.fileList,o=n.detail;return B.a.createElement(x.Fragment,null,B.a.createElement(E.a,{destroyOnClose:!0,title:"添加",className:Z.a.formModal,visible:l,width:800,onCancel:this.cancelClick,footer:[B.a.createElement(V.a,{key:"back",onClick:this.cancelClick},"取消"),B.a.createElement(V.a,{key:"submit",type:"primary",loading:r,onClick:this.save},"确定")]},B.a.createElement("div",{className:Z.a.formModalBody},B.a.createElement(p.a,{gutter:40},B.a.createElement(h.a,{md:12,sm:24},B.a.createElement(W,{label:"车牌号"},t.getFieldDecorator("carNo",{initialValue:o.carNo,rules:[{required:!0,message:"请输入车牌号！"}]})(B.a.createElement(f.a,{placeholder:"请输入"}))),B.a.createElement(W,{label:"吨位(kg)"},t.getFieldDecorator("tonnage",{initialValue:o.tonnage,rules:[{required:!0,message:"请输入吨位！"}]})(B.a.createElement(U.a,{min:0,style:{width:"100%"},placeholder:"请输入"}))),B.a.createElement(W,{label:"座位"},t.getFieldDecorator("seat",{initialValue:o.seat,rules:[{required:!0,message:"请输入座位！"}]})(B.a.createElement(U.a,{min:1,style:{width:"100%"},placeholder:"请输入"}))),B.a.createElement(W,{label:"公司名称"},t.getFieldDecorator("companyName",{initialValue:o.companyName,rules:[{required:!0,message:"请输入公司名称！"}]})(B.a.createElement(f.a,{readOnly:!0,placeholder:"请输入",onClick:function(){return e.handleFirmModalVisible(!0)}}))),B.a.createElement(W,{label:"照片"},t.getFieldDecorator("img",{initialValue:o.carImg,rules:[{required:!0,message:"请上传照片"}]})(B.a.createElement(R.a,m()({},this.uploadConfig(),{defaultFileList:s}),s.length>0?null:B.a.createElement(V.a,null,B.a.createElement(z.a,{type:"upload"})," 请上传照片(jpg,jpeg,png)")))),B.a.createElement(W,{label:"状态"},t.getFieldDecorator("status",{initialValue:o.status,rules:[{required:!0,message:"请选择状态！"}]})(B.a.createElement(P.a.Group,null,Y.map(function(e,a){return B.a.createElement(P.a,{value:a+1,key:a},e)}))))),B.a.createElement(h.a,{md:12,sm:24},B.a.createElement(W,{label:"车辆类型"},t.getFieldDecorator("carType",{initialValue:o.carType,rules:[{required:!0,message:"请输入车辆类型！"}]})(B.a.createElement(f.a,{placeholder:"请输入"}))),B.a.createElement(W,{label:"道路运输证号"},t.getFieldDecorator("transportLicense",{initialValue:o.transportLicense,rules:[{required:!0,message:"请输入道路运输证号！"}]})(B.a.createElement(f.a,{placeholder:"请输入"}))),B.a.createElement(W,{label:"车辆状态"},t.getFieldDecorator("type",{initialValue:o.type,rules:[{required:!0,message:"请选择！"}]})(B.a.createElement(P.a.Group,null,B.a.createElement(P.a,{value:0},"营运"),B.a.createElement(P.a,{value:1},"停运")))),B.a.createElement(W,{label:"GPS入网"},t.getFieldDecorator("isAccessNetwork",{initialValue:o.isAccessNetwork,rules:[{required:!0,message:"请选择！"}]})(B.a.createElement(P.a.Group,null,B.a.createElement(P.a,{value:1},"是"),B.a.createElement(P.a,{value:2},"否")))),B.a.createElement(W,{label:"经营范围"},t.getFieldDecorator("businessScope",{initialValue:o.businessScope,rules:[{required:!0,message:"请输入经营范围！"}]})(B.a.createElement(f.a.TextArea,{placeholder:"请输入"}))))))),i?B.a.createElement(J.a,{modalVisible:i,setSelectData:this.setSelectData,handleModalVisible:this.handleFirmModalVisible}):null)}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t=e.detail,l=a.isSet;if(!l){var r=t.companyTel,n=t.carImg;return{isSet:!l,detail:t,companyTel:r,fileList:n?[{uid:"-1",name:"当前图片",status:"done",url:/http/.test(n)?n:O.E+n}]:[]}}return null}}]),a}(x.PureComponent),s.defaultProps={modalVisible:!1,handleModalVisible:function(){}},i=o))||i)||i,_=t("ytuB"),ee=t("ns75"),ae=t.n(ee),te=t("9zHi"),le=t.n(te),re=t("15hv"),ne=t.n(re),ie=q.a.Item,se=A.a.Option,oe=["审核中","已审核","已驳回","已报废","已删除"],ce=Object(I.connect)(function(e){return{TransportArchivesCar:e.TransportArchivesCar,loading:e.loading.models.TransportArchivesCar}})(c=q.a.create()(c=function(e){function a(){var e,t;k()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=D()(this,(e=M()(a)).call.apply(e,[this].concat(r)))).state={exportVisible:!1,modalVisible:!1,updateModalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"车牌号",dataIndex:"carNo",width:100},{title:"所属公司",dataIndex:"companyName"},{title:"道路运输证号",dataIndex:"transportLicense"},{title:"座位",dataIndex:"seat",width:80},{title:"吨位(t)",dataIndex:"tonnage",width:80,render:function(e){return e/1e3}},{title:"GPS入网",dataIndex:"isAccessNetwork",render:function(e){return 1===e?"是":"否"}},{title:"车辆状态",dataIndex:"type",render:function(e){return 0===e?"运营":"停运"}},{title:"车辆类型",dataIndex:"carType"},{title:"照片",dataIndex:"carImg",width:110,render:function(e){var a=/http/.test(e)?e:O.E+e;return B.a.createElement("img",{style:{width:90},src:a,alt:"照片",onError:function(e){e.target.onerror=null,e.target.src=ne.a}})}},{title:"状态",width:90,dataIndex:"status",render:function(e){return oe[e-1]}},{title:"操作",width:90,render:function(e,a){return B.a.createElement(x.Fragment,null,B.a.createElement(v.a,{placement:"left",title:"编辑"},B.a.createElement(V.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"edit",size:"small"})),B.a.createElement(y.a,{type:"vertical"}),B.a.createElement(b.a,{title:"是否删除数据?",onConfirm:function(){return t.dataDel(a.id)},okText:"确定",cancelText:"取消"},B.a.createElement(v.a,{placement:"left",title:"删除"},B.a.createElement(V.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.getList=function(e){(0,t.props.dispatch)({type:"TransportArchivesCar/fetch",payload:e})},t.showDetailModal=function(e){return t.setState({detail:e},function(){return t.handleUpdateModalVisible(!0)})},t.dataDel=function(e){t.delUtil(e)},t.batchDel=function(){var e=t.state.selectedRows;e.length&&E.a.confirm({title:"提示",content:"是否删除数据？",onOk:function(){var a=e.map(function(e){return e.id});t.delUtil(a.join(),function(){t.setState({selectedRows:[]})})}})},t.delUtil=function(e,a){(0,t.props.dispatch)({type:"TransportArchivesCar/remove",payload:{ids:e},callback:function(){g.a.success("删除成功");var e=t.state.pageBean;t.getList({pageBean:e}),a&&a()}})},t.handleStandardTableChange=function(e){var a=t.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(l)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[],selectedRows:[]}),t.getList({pageBean:a})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props.form,l=t.state.pageBean;a.validateFields(function(e,a){if(!e){var r={companyName:a.comName,carNo:a.CPH,status:a.state},n=Object.keys(r).map(function(e){return r[e]?{property:e,value:r[e],group:"main",operation:"status"===e?"EQUAL":"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:n}),t.getList({pageBean:l,querys:n})}})},t.handleExportVisible=function(e){t.setState({exportVisible:!!e})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e}),e||t.setState({detail:{}})},t.modalCallback=function(){var e=t.state.pageBean;t.getList({pageBean:e})},t}return N()(a,e),S()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return B.a.createElement(q.a,{onSubmit:this.handleSearch,layout:"inline"},B.a.createElement(p.a,{gutter:16},B.a.createElement(h.a,{md:6,sm:24},B.a.createElement(ie,null,e("CPH")(B.a.createElement(f.a,{addonBefore:"车牌号",placeholder:"请输入"})))),B.a.createElement(h.a,{md:6,sm:24},B.a.createElement(ie,null,e("comName")(B.a.createElement(f.a,{addonBefore:"所属企业",placeholder:"请输入"})))),B.a.createElement(h.a,{md:5,sm:24},B.a.createElement("div",{className:ae.a.inputMain},B.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"状态"),B.a.createElement(ie,{style:{flex:1,flexShrink:0}},e("state")(B.a.createElement(A.a,{placeholder:"请选择",style:{width:"100%"}},oe.map(function(e,a){return B.a.createElement(se,{value:a+1,key:a},e)})))))),B.a.createElement(h.a,{md:6,sm:24},B.a.createElement("span",{className:le.a.submitButtons},B.a.createElement(V.a,{type:"primary",htmlType:"submit"},"查询"),B.a.createElement(V.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.TransportArchivesCar.data,l=a.loading,r=this.state,n=r.selectedRows,i=r.exportVisible,s=r.modalVisible,o=r.updateModalVisible,c=r.detail,d={modalCallback:this.modalCallback,handleModalVisible:this.handleModalVisible},p={detail:c,modalCallback:this.modalCallback,handleModalVisible:this.handleUpdateModalVisible};return B.a.createElement(x.Fragment,null,B.a.createElement(u.a,{bordered:!1},B.a.createElement("div",{className:le.a.tableList},B.a.createElement("div",{className:le.a.tableListForm},this.renderSimpleForm()),B.a.createElement("div",{className:le.a.tableListOperator},B.a.createElement(V.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"),B.a.createElement(V.a,{className:ae.a.import,icon:"export",onClick:function(){return e.handleExportVisible(!0)}},"导入"),n.length>0&&B.a.createElement(V.a,{style:{marginLeft:10},type:"danger",onClick:this.batchDel},"批量删除")),B.a.createElement(j.a,{size:"middle",tableAlert:!0,selectedRows:n,loading:l,data:t,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),B.a.createElement(Q,m()({},d,{modalVisible:s})),o&&Object.keys(c).length?B.a.createElement($,m()({},p,{modalVisible:o})):null,i&&B.a.createElement(_.a,{modalVisible:i,path:"/transport/transportAdmin/practitionersCar/v1/importCarInfo",modalCallback:this.modalCallback,handleModalVisible:this.handleExportVisible}))}}]),a}(x.PureComponent))||c)||c;a.default=ce}}]);