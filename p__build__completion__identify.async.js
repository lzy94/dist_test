(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{WlEg:function(e,t,a){"use strict";a.r(t);var l=a("pVnL"),n=a.n(l),r=(a("IzEo"),a("bx4M")),c=(a("14J3"),a("BMrR")),i=(a("jCWc"),a("kPKH")),o=(a("5NDa"),a("5rEg")),d=(a("miYZ"),a("tsqr")),s=(a("2qtc"),a("kLXV")),m=(a("P2fV"),a("NJEC")),u=(a("/zsF"),a("PArb")),E=(a("5Dmo"),a("3S7+")),p=(a("+L6B"),a("2/Rp")),f=a("lwsE"),h=a.n(f),g=a("W8MJ"),y=a.n(g),b=a("a1gu"),C=a.n(b),v=a("Nsbk"),D=a.n(v),k=a("7W2i"),F=a.n(k),w=(a("y8nQ"),a("Vl3Y")),S=a("q1tI"),B=a.n(S),M=a("wd/R"),V=a.n(M),q=a("MuoO"),N=a("CkN6"),x=a("MVZn"),I=a.n(x),T=(a("giR+"),a("fyUT")),A=(a("iQDF"),a("+eQT")),j=a("NWc4"),L=a.n(j),R=w.a.Item;var P=w.a.create({mapPropsToFields:function(e){return function(e){for(var t=Object.keys(e),a={},l=0;l<t.length;l+=1)a[t[l]]=w.a.createFormField({value:"completionDate"===t[l]||"startDate"===t[l]?V()(new Date(e[t[l]]),"YYYY-MM-DD"):e[t[l]]});return a}(e.field)},onValuesChange:function(e,t){e.onChange(t)}})(function(e){var t=e.form;return B.a.createElement("table",{className:L.a.table,style:{tableLayout:"auto"}},B.a.createElement("colgroup",null,B.a.createElement("col",{width:80})),B.a.createElement("tbody",null,B.a.createElement("tr",null,B.a.createElement("td",{colSpan:3,className:L.a.title},"（一）交工验收情况登记")),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title},"一"),B.a.createElement("td",null,"工程名称"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("projectName",{rules:[{required:!0,message:"请输入工程名称"}]})(B.a.createElement(o.a,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title},"二"),B.a.createElement("td",null,"工程地点及主要控制点"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("projectPlace",{rules:[{required:!0,message:"请输入工程地点及主要控制点"}]})(B.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title},"三"),B.a.createElement("td",null,"建设依据"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("construcBasis",{rules:[{required:!0,message:"请输入建设依据"}]})(B.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title},"四"),B.a.createElement("td",null,"技术标准与主要指标"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("technicalStandard",{rules:[{required:!0,message:"请输入技术标准与主要指标"}]})(B.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title},"五"),B.a.createElement("td",null,"建设规模及性质"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("construcNature",{rules:[{required:!0,message:"请输入建设规模及性质"}]})(B.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title,rowSpan:2},"六"),B.a.createElement("td",null,"开工日期"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("startDate",{rules:[{required:!0,message:"请选择开工日期"}]})(B.a.createElement(A.a,{style:{width:"100%"},placeholder:"请选择"}))))),B.a.createElement("tr",null,B.a.createElement("td",null,"完工日期"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("completionDate",{rules:[{required:!0,message:"请选择完工日期"}]})(B.a.createElement(A.a,{style:{width:"100%"},placeholder:"请选择"}))))),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title,rowSpan:3},"七"),B.a.createElement("td",null,"原批准概算"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("budget",{rules:[{required:!0,message:"请输入原批准概算"}]})(B.a.createElement(T.a,{style:{width:"100%"},placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",null,"调整概算"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("adjustBudget",{rules:[{required:!0,message:"请输入调整概算"}]})(B.a.createElement(T.a,{style:{width:"100%"},placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",null,"竣工决算"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("completionBudget",{rules:[{required:!0,message:"请输入竣工决算算"}]})(B.a.createElement(T.a,{style:{width:"100%"},placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title},"八"),B.a.createElement("td",null,"工程建设主要内容"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("construcContent",{rules:[{required:!0,message:"请输入工程建设主要内容"}]})(B.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title},"九"),B.a.createElement("td",null,"主要材料实际消耗"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("materialConsumption",{rules:[{required:!0,message:"请输入主要材料实际消耗"}]})(B.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title},"十"),B.a.createElement("td",null,"实际征用土地数（亩）"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("landNumber",{rules:[{required:!0,message:"请输入实际征用土地数（亩）"}]})(B.a.createElement(T.a,{style:{width:"100%"},placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title,rowSpan:3},"十一"),B.a.createElement("td",null,"交工验收基本情况"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("completionAcceptance",{rules:[{required:!0,message:"请输入交工验收基本情况"}]})(B.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",null,"质量监督机构竣工质量鉴定情况"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("qualityAppraisal",{rules:[{required:!0,message:"请输入质量监督机构竣工质量鉴定情况"}]})(B.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",null,"竣工验收鉴定结论及质量评价"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("appraisalConclusion",{rules:[{required:!0,message:"请输入竣工验收鉴定结论及质量评价"}]})(B.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title,rowSpan:4},"十二"),B.a.createElement("td",null,"对建设单位的综合评价"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("buildEvaluation",{rules:[{required:!0,message:"请输入对建设单位的综合评价"}]})(B.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",null,"对设计单位的综合评价"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("designEvaluation",{rules:[{required:!0,message:"请输入对设计单位的综合评价"}]})(B.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",null,"对施工单位的综合评价"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("construcEvaluation",{rules:[{required:!0,message:"请输入对施工单位的综合评价"}]})(B.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",null,"对监理单位的综合评价"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("superEvaluation",{rules:[{required:!0,message:"请输入对监理单位的综合评价"}]})(B.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title,rowSpan:6},"十三"),B.a.createElement("td",null,"建设管理综合评分"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("buildScore",{rules:[{required:!0,message:"请输入建设管理综合评分"}]})(B.a.createElement(T.a,{style:{width:"100%"},min:0,max:100,placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",null,"设计工作综合评分"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("designScore",{rules:[{required:!0,message:"请输入设计工作综合评分"}]})(B.a.createElement(T.a,{style:{width:"100%"},min:0,max:100,placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",null,"监理工作综合评分"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("superScore",{rules:[{required:!0,message:"请输入监理工作综合评分"}]})(B.a.createElement(T.a,{style:{width:"100%"},min:0,max:100,placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",null,"施工管理综合评分"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("construcScore",{rules:[{required:!0,message:"请输入施工管理综合评分"}]})(B.a.createElement(T.a,{style:{width:"100%"},min:0,max:100,placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",null,"建设项目综合评分"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("projectScore",{rules:[{required:!0,message:"请输入建设项目综合评分"}]})(B.a.createElement(T.a,{style:{width:"100%"},min:0,max:100,placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",null,"工程建设项目综合评价等级"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("projectBuildScore",{rules:[{required:!0,message:"请输入工程建设项目综合评价等级"}]})(B.a.createElement(o.a,{placeholder:"请输入"}))))),B.a.createElement("tr",null,B.a.createElement("td",{className:L.a.title},"十四"),B.a.createElement("td",null,"有关问题的决定和建议"),B.a.createElement("td",null,B.a.createElement(R,null,t.getFieldDecorator("decideOpinion",{rules:[{required:!0,message:"有关问题的决定和建议"}]})(B.a.createElement(o.a,{placeholder:"请输入"})))))))});P.defaultProps={field:{},fileList:[],uploadChange:function(){},onChange:function(){}};var Y,O,U,z,J,W,Q,Z=P,H=a("ZP6J"),K=a.n(H),X=Object(q.connect)(function(e){return{BuildCompletionIdentify:e.BuildCompletionIdentify,loading:e.loading.models.BuildCompletionIdentify}})((U=O=function(e){function t(e){var a;return h()(this,t),(a=C()(this,D()(t).call(this,e))).state={field:{}},a.fieldChange=function(e){a.setState(function(t){var a=t.field;return{field:I()({},a,e)}})},a.save=function(){a.MyForm.current.validateFields(function(e,t){if(!e){var l=a.props,n=l.dispatch,r=l.modalCallback,c=I()({},t);t.startDate>t.completionDate?d.a.error("完工时间必须大于开工时间"):n({type:"BuildCompletionIdentify/add",payload:c,callback:function(){d.a.success("添加成功"),r(),a.cancelClick()}})}})},a.cancelClick=function(){(0,a.props.handleModalVisible)()},a.MyForm=B.a.createRef(),a}return F()(t,e),y()(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.modalVisible,l=this.state.field;return B.a.createElement(s.a,{destroyOnClose:!0,title:"新建验收鉴定情况登记",className:K.a.formModal,visible:a,onCancel:this.cancelClick,width:800,footer:[B.a.createElement(p.a,{key:"back",onClick:this.cancelClick},"取消"),B.a.createElement(p.a,{key:"submit",type:"primary",loading:t,onClick:this.save},"确定")]},B.a.createElement(r.a,{bordered:!1},B.a.createElement(Z,{onChange:this.fieldChange,field:l,ref:this.MyForm})))}}]),t}(S.PureComponent),O.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},Y=U))||Y,G=Object(q.connect)(function(e){return{BuildCompletionIdentify:e.BuildCompletionIdentify,loading:e.loading.models.BuildCompletionIdentify}})((W=J=function(e){function t(e){var a;return h()(this,t),(a=C()(this,D()(t).call(this,e))).state={field:{},isSet:!1},a.fieldChange=function(e){a.setState(function(t){var a=t.field;return{field:I()({},a,e)}})},a.save=function(){a.MyForm.current.validateFields(function(e,t){if(!e){var l=a.props,n=l.dispatch,r=l.modalCallback,c=a.state.field,i=I()({},c);if(t.startDate>t.completionDate)d.a.error("完工时间必须大于开工时间");else{for(var o=Object.keys(t),s=0;s<o.length;s+=1)i[o[s]]=t[o[s]];if("object"==typeof t.annexUrl){var m=t.annexUrl.file.response;i.annexUrl=m?m.filePath:""}a.setState({field:i}),n({type:"BuildCompletionIdentify/add",payload:i,callback:function(){d.a.success("编辑成功"),r(),a.cancelClick()}})}}})},a.cancelClick=function(){(0,a.props.handleModalVisible)()},a.MyForm=B.a.createRef(),a}return F()(t,e),y()(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.modalVisible,l=this.state.field;return B.a.createElement(s.a,{destroyOnClose:!0,title:"编辑验收鉴定情况登记",className:K.a.formModal,visible:a,onCancel:this.cancelClick,width:800,footer:[B.a.createElement(p.a,{key:"back",onClick:this.cancelClick},"取消"),B.a.createElement(p.a,{key:"submit",type:"primary",loading:t,onClick:this.save},"确定")]},B.a.createElement(r.a,{bordered:!1},B.a.createElement(Z,{onChange:this.fieldChange,field:l,ref:this.MyForm})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.detail,l=t.isSet;return l?null:{isSet:!l,field:a}}}]),t}(S.PureComponent),J.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},z=W))||z,$=a("9zHi"),_=a.n($),ee=w.a.Item,te=Object(q.connect)(function(e){return{BuildCompletionIdentify:e.BuildCompletionIdentify,loading:e.loading.models.BuildCompletionIdentify}})(Q=w.a.create()(Q=function(e){function t(){var e,a;h()(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=C()(this,(e=D()(t)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,updateModalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},a.columns=[{title:"工程名称",dataIndex:"projectName"},{title:"工程地点及主要控制点",dataIndex:"projectPlace"},{title:"建设依据",dataIndex:"construcBasis"},{title:"技术标准与主要指标",dataIndex:"technicalStandard"},{title:"建设规模及性质",dataIndex:"construcNature"},{title:"开工日期",dataIndex:"startDate",render:function(e){return V()(e).format("YYYY-MM-DD")}},{title:"完工日期",dataIndex:"completionDate",render:function(e){return V()(e).format("YYYY-MM-DD")}},{title:"操作",width:100,render:function(e,t){return B.a.createElement(S.Fragment,null,B.a.createElement(E.a,{placement:"left",title:"编辑"},B.a.createElement(p.a,{onClick:function(){return a.showDetailModal(t.id)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),B.a.createElement(u.a,{type:"vertical"}),B.a.createElement(m.a,{title:"是否删除数据?",onConfirm:function(){return a.delUtil(t.id)},okText:"确定",cancelText:"取消"},B.a.createElement(E.a,{placement:"left",title:"删除"},B.a.createElement(p.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],a.batchDel=function(){s.a.confirm({title:"提示",content:"确定要删除数据吗？",okType:"danger",onOk:function(){var e=a.state.selectedRows;a.delUtil(e.map(function(e){return e.id}).join())}})},a.delUtil=function(e){(0,a.props.dispatch)({type:"BuildCompletionIdentify/remove",payload:{ids:e},callback:function(){d.a.success("删除成功");var e=a.state.pageBean;a.getList({pageBean:e}),a.setState({selectedRows:[]})}})},a.getList=function(e){(0,a.props.dispatch)({type:"BuildCompletionIdentify/fetch",payload:e})},a.showDetailModal=function(e){(0,a.props.dispatch)({type:"BuildCompletionIdentify/detail",payload:e,callback:function(e){a.setState({detail:e},function(){return a.handleUpdateModalVisible(!0)})}})},a.handleStandardTableChange=function(e){var t=a.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:t};a.getList(l)},a.handleFormReset=function(){var e=a.props.form,t=a.state.pageBean;e.resetFields(),a.setState({formValues:[],selectedRows:[]}),a.getList({pageBean:t})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props.form,l=a.state.pageBean;t.validateFields(function(e,t){if(!e){var n={projectName:t.name},r=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});a.setState({formValues:r}),a.getList({pageBean:l,querys:r})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleUpdateModalVisible=function(e){a.setState({updateModalVisible:!!e}),e||a.setState({detail:{}})},a.modalCallback=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",t=a.state,l=t.pageBean,n=t.formValues;return"add"===e?a.getList({pageBean:l}):a.getList({pageBean:l,querys:n})},a}return F()(t,e),y()(t,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return B.a.createElement(w.a,{onSubmit:this.handleSearch,layout:"inline"},B.a.createElement(c.a,{gutter:16},B.a.createElement(i.a,{md:5,sm:24},B.a.createElement(ee,null,e("name")(B.a.createElement(o.a,{addonBefore:"工程名称",placeholder:"请输入"})))),B.a.createElement(i.a,{md:4,sm:24},B.a.createElement("span",{className:_.a.submitButtons},B.a.createElement(p.a,{type:"primary",htmlType:"submit"},"查询"),B.a.createElement(p.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.BuildCompletionIdentify.data,l=t.loading,c=this.state,i=c.selectedRows,o=c.modalVisible,d=c.updateModalVisible,s=c.detail,m={modalCallback:this.modalCallback},u={handleModalVisible:this.handleModalVisible},E={detail:s,handleModalVisible:this.handleUpdateModalVisible};return B.a.createElement(S.Fragment,null,B.a.createElement(r.a,{bordered:!1},B.a.createElement("div",{className:_.a.tableList},B.a.createElement("div",{className:_.a.tableListForm},this.renderSimpleForm()),B.a.createElement("div",{className:_.a.tableListOperator},B.a.createElement(p.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"),i.length>0&&B.a.createElement(p.a,{type:"danger",onClick:this.batchDel},"批量删除")),B.a.createElement(N.a,{tableAlert:!0,selectedRows:i,loading:l,data:a,size:"middle",columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),o&&B.a.createElement(X,n()({},m,u,{modalVisible:o})),d&&Object.keys(s).length&&B.a.createElement(G,n()({},m,E,{modalVisible:d})))}}]),t}(S.PureComponent))||Q)||Q;t.default=te}}]);