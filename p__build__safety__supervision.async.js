(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{ClNT:function(e,a,t){"use strict";t.r(a);var l=t("pVnL"),n=t.n(l),r=(t("IzEo"),t("bx4M")),c=(t("14J3"),t("BMrR")),i=(t("jCWc"),t("kPKH")),o=(t("5NDa"),t("5rEg")),s=(t("miYZ"),t("tsqr")),d=(t("2qtc"),t("kLXV")),u=(t("P2fV"),t("NJEC")),m=(t("/zsF"),t("PArb")),p=(t("5Dmo"),t("3S7+")),E=(t("+L6B"),t("2/Rp")),f=t("lwsE"),h=t.n(f),g=t("W8MJ"),S=t.n(g),b=t("a1gu"),y=t.n(b),v=t("Nsbk"),k=t.n(v),C=t("7W2i"),F=t.n(C),B=(t("y8nQ"),t("Vl3Y")),V=t("q1tI"),w=t.n(V),D=t("MuoO"),M=t("CkN6"),x=t("MVZn"),N=t.n(x),q=(t("wd/R"),t("+n12")),j=t("NWc4"),L=t.n(j),R=B.a.Item;var P=B.a.create({mapPropsToFields:function(e){return function(e){for(var a=Object.keys(e),t={},l=0;l<a.length;l+=1)t[a[l]]=B.a.createFormField({value:e[a[l]]});return t}(e.field)}})(function(e){var a=e.form;return w.a.createElement("table",{className:L.a.table},w.a.createElement("tbody",null,w.a.createElement("tr",null,w.a.createElement("td",{colSpan:2},"工程项目名称"),w.a.createElement("td",{colSpan:8},w.a.createElement(R,null,a.getFieldDecorator("projectName",{rules:[{required:!0,message:"请输入工程项目段名称"}]})(w.a.createElement(o.a,{placeholder:"请输入"}))))),w.a.createElement("tr",null,w.a.createElement("td",{colSpan:2},"监理单位名称"),w.a.createElement("td",{colSpan:8},w.a.createElement(R,null,a.getFieldDecorator("construcUnit",{rules:[{required:!0,message:"请输入监理单位名称"}]})(w.a.createElement(o.a,{placeholder:"请输入"}))))),w.a.createElement("tr",null,w.a.createElement("td",{colSpan:2},"工程项目内容"),w.a.createElement("td",{colSpan:8},w.a.createElement(R,null,a.getFieldDecorator("projectDesc",{rules:[{required:!0,message:"请输入工程项目内容"}]})(w.a.createElement(o.a,{placeholder:"请输入"}))))),w.a.createElement("tr",null,w.a.createElement("td",{colSpan:2},"工程合同工期"),w.a.createElement("td",{colSpan:8},w.a.createElement(R,null,a.getFieldDecorator("contractDuration",{rules:[{required:!0,message:"请输入工程合同工期"}]})(w.a.createElement(o.a,{placeholder:"请输入（xxxx-xx-xx ~ xxxx-xx-xx）"}))))),w.a.createElement("tr",null,w.a.createElement("td",{rowSpan:3,className:L.a.title},"监理单位"),w.a.createElement("td",null,"名称"),w.a.createElement("td",{colSpan:8},w.a.createElement(R,null,a.getFieldDecorator("superName",{rules:[{required:!0,message:"请输入监理单位名称"}]})(w.a.createElement(o.a,{placeholder:"请输入"}))))),w.a.createElement("tr",null,w.a.createElement("td",null,"等级及编号"),w.a.createElement("td",{colSpan:2},w.a.createElement(R,null,a.getFieldDecorator("superGrade",{rules:[{required:!0,message:"请输入等级及编号"}]})(w.a.createElement(o.a,{placeholder:"请输入"})))),w.a.createElement("td",{colSpan:3},"发证机关"),w.a.createElement("td",{colSpan:3},w.a.createElement(R,null,a.getFieldDecorator("superLssueOrgan",{rules:[{required:!0,message:"请输入发证机关"}]})(w.a.createElement(o.a,{placeholder:"请输入"}))))),w.a.createElement("tr",null,w.a.createElement("td",null,"地址"),w.a.createElement("td",{colSpan:2},w.a.createElement(R,null,a.getFieldDecorator("superAddr",{rules:[{required:!0,message:"请输入地址"}]})(w.a.createElement(o.a,{placeholder:"请输入"})))),w.a.createElement("td",{colSpan:3},"联系方式"),w.a.createElement("td",{colSpan:3},w.a.createElement(R,null,a.getFieldDecorator("superPhone",{rules:[{required:!0,message:"请输入联系方式"}]})(w.a.createElement(o.a,{placeholder:"请输入"}))))),w.a.createElement("tr",null,w.a.createElement("td",{rowSpan:2,className:L.a.title},"现场监理机构"),w.a.createElement("td",null,"详细地址"),w.a.createElement("td",{colSpan:8},w.a.createElement(R,null,a.getFieldDecorator("siteSuperAddr",{rules:[{required:!0,message:"请输入详细地址"}]})(w.a.createElement(o.a,{placeholder:"请输入"}))))),w.a.createElement("tr",null,w.a.createElement("td",null,"联系方式"),w.a.createElement("td",null,"电话"),w.a.createElement("td",{colSpan:3},w.a.createElement(R,null,a.getFieldDecorator("siteSuperPhone",{rules:[{required:!0,message:"请输入电话"}]})(w.a.createElement(o.a,{placeholder:"请输入"})))),w.a.createElement("td",null,"传真"),w.a.createElement("td",{colSpan:3},w.a.createElement(R,null,a.getFieldDecorator("siteSuperFax",{rules:[{required:!0,message:"请输入传真"}]})(w.a.createElement(o.a,{placeholder:"请输入"}))))),w.a.createElement("tr",null,w.a.createElement("td",{rowSpan:2,className:L.a.title},"现场监理负责人"),w.a.createElement("td",null,"姓名"),w.a.createElement("td",{colSpan:4},w.a.createElement(R,null,a.getFieldDecorator("principalName",{rules:[{required:!0,message:"请输入姓名"}]})(w.a.createElement(o.a,{placeholder:"请输入"})))),w.a.createElement("td",null,"联系电话"),w.a.createElement("td",{colSpan:3},w.a.createElement(R,null,a.getFieldDecorator("principalPhone",{rules:[{required:!0,validator:q.h}]})(w.a.createElement(o.a,{placeholder:"请输入"}))))),w.a.createElement("tr",null,w.a.createElement("td",null,"职称/资格"),w.a.createElement("td",{colSpan:4},w.a.createElement(R,null,a.getFieldDecorator("principalJobTitle",{rules:[{required:!0,message:"请输入职称/资格"}]})(w.a.createElement(o.a,{placeholder:"请输入"})))),w.a.createElement("td",null,"资格证书"),w.a.createElement("td",{colSpan:3},w.a.createElement(R,null,a.getFieldDecorator("principalCredebtials",{rules:[{required:!0,message:"请输入资格证书"}]})(w.a.createElement(o.a,{placeholder:"请输入"})))))))});P.defaultProps={field:{},onChange:function(){}};var O,z,T,I,U,J,A,W=P,Z=t("ZP6J"),H=t.n(Z),K=Object(D.connect)(function(e){return{BuildSafetySupervision:e.BuildSafetySupervision,loading:e.loading.models.BuildSafetySupervision}})((T=z=function(e){function a(e){var t;return h()(this,a),(t=y()(this,k()(a).call(this,e))).state={},t.save=function(){t.MyForm.current.validateFields(function(e,a){if(!e){var l=t.props,n=l.dispatch,r=l.modalCallback;n({type:"BuildSafetySupervision/add",payload:N()({},a),callback:function(){s.a.success("添加成功"),r(),t.cancelClick()}})}})},t.cancelClick=function(){(0,t.props.handleModalVisible)()},t.MyForm=w.a.createRef(),t}return F()(a,e),S()(a,[{key:"render",value:function(){var e=this.props,a=e.loading,t=e.modalVisible;return w.a.createElement(d.a,{destroyOnClose:!0,title:"新建监理登记备案",className:H.a.formModal,visible:t,onCancel:this.cancelClick,width:1e3,footer:[w.a.createElement(E.a,{key:"back",onClick:this.cancelClick},"取消"),w.a.createElement(E.a,{key:"submit",type:"primary",loading:a,onClick:this.save},"确定")]},w.a.createElement(r.a,{bordered:!1},w.a.createElement(W,{ref:this.MyForm})))}}]),a}(V.PureComponent),z.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},O=T))||O,Y=Object(D.connect)(function(e){return{BuildSafetySupervision:e.BuildSafetySupervision,loading:e.loading.models.BuildSafetySupervision}})((J=U=function(e){function a(e){var t;return h()(this,a),(t=y()(this,k()(a).call(this,e))).state={detail:{},isSet:!1},t.save=function(){t.MyForm.current.validateFields(function(e,a){if(!e){for(var l=t.props,n=l.dispatch,r=l.modalCallback,c=t.state.detail,i=N()({},c),o=Object.keys(a),d=0;d<o.length;d+=1)i[o[d]]=a[o[d]];t.setState({detail:i}),n({type:"BuildSafetySupervision/add",payload:i,callback:function(){s.a.success("编辑成功"),r(),t.cancelClick()}})}})},t.cancelClick=function(){(0,t.props.handleModalVisible)()},t.MyForm=w.a.createRef(),t}return F()(a,e),S()(a,[{key:"render",value:function(){var e=this.props,a=e.loading,t=e.modalVisible,l=this.state.detail;return w.a.createElement(d.a,{destroyOnClose:!0,title:"编辑监理登记备案",className:H.a.formModal,visible:t,onCancel:this.cancelClick,width:1e3,footer:[w.a.createElement(E.a,{key:"back",onClick:this.cancelClick},"取消"),w.a.createElement(E.a,{key:"submit",type:"primary",loading:a,onClick:this.save},"确定")]},w.a.createElement(r.a,{bordered:!1},w.a.createElement(W,{field:l,ref:this.MyForm})))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t=e.detail,l=a.isSet;return l?null:{isSet:!l,detail:t}}}]),a}(V.PureComponent),U.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},I=J))||I,G=t("9zHi"),Q=t.n(G),X=B.a.Item,$=Object(D.connect)(function(e){return{BuildSafetySupervision:e.BuildSafetySupervision,loading:e.loading.models.BuildSafetySupervision}})(A=B.a.create()(A=function(e){function a(){var e,t;h()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=y()(this,(e=k()(a)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,updateModalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"工程项目名称",dataIndex:"projectName"},{title:"监理单位名称",dataIndex:"construcUnit"},{title:"项目内容",dataIndex:"projectDesc"},{title:"机构负责人",dataIndex:"principalName"},{title:"合同工期",dataIndex:"contractDuration"},{title:"操作",width:100,render:function(e,a){return w.a.createElement(V.Fragment,null,w.a.createElement(p.a,{placement:"left",title:"编辑"},w.a.createElement(E.a,{onClick:function(){return t.showDetailModal(a.id)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),w.a.createElement(m.a,{type:"vertical"}),w.a.createElement(u.a,{title:"是否删除数据?",onConfirm:function(){return t.delUtil(a.id)},okText:"确定",cancelText:"取消"},w.a.createElement(p.a,{placement:"left",title:"删除"},w.a.createElement(E.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.batchDel=function(){d.a.confirm({title:"提示",content:"确定要删除数据吗？",okType:"danger",onOk:function(){var e=t.state.selectedRows;t.delUtil(e.map(function(e){return e.id}).join())}})},t.delUtil=function(e){(0,t.props.dispatch)({type:"BuildSafetySupervision/remove",payload:{ids:e},callback:function(){s.a.success("删除成功");var e=t.state.pageBean;t.getList({pageBean:e}),t.setState({selectedRows:[]})}})},t.getList=function(e){(0,t.props.dispatch)({type:"BuildSafetySupervision/fetch",payload:e})},t.showDetailModal=function(e){(0,t.props.dispatch)({type:"BuildSafetySupervision/detail",payload:e,callback:function(e){t.setState({detail:e},function(){return t.handleUpdateModalVisible(!0)})}})},t.handleStandardTableChange=function(e){var a=t.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(l)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[],selectedRows:[]}),t.getList({pageBean:a})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props.form,l=t.state.pageBean;a.validateFields(function(e,a){if(!e){var n={projectName:a.name,construcUnit:a.jldw,principalName:a.jgfzr},r=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:r}),t.getList({pageBean:l,querys:r})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e}),e||t.setState({detail:{}})},t.modalCallback=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",a=t.state,l=a.pageBean,n=a.formValues;return"add"===e?t.getList({pageBean:l}):t.getList({pageBean:l,querys:n})},t}return F()(a,e),S()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return w.a.createElement(B.a,{onSubmit:this.handleSearch,layout:"inline"},w.a.createElement(c.a,{gutter:16},w.a.createElement(i.a,{md:5,sm:24},w.a.createElement(X,null,e("name")(w.a.createElement(o.a,{addonBefore:"项目名称",placeholder:"请输入"})))),w.a.createElement(i.a,{md:5,sm:24},w.a.createElement(X,null,e("jldw")(w.a.createElement(o.a,{addonBefore:"监理单位",placeholder:"请输入"})))),w.a.createElement(i.a,{md:5,sm:24},w.a.createElement(X,null,e("jgfzr")(w.a.createElement(o.a,{addonBefore:"机构负责人",placeholder:"请输入"})))),w.a.createElement(i.a,{md:4,sm:24},w.a.createElement("span",{className:Q.a.submitButtons},w.a.createElement(E.a,{type:"primary",htmlType:"submit"},"查询"),w.a.createElement(E.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.BuildSafetySupervision.data,l=a.loading,c=this.state,i=c.selectedRows,o=c.modalVisible,s=c.updateModalVisible,d=c.detail,u={modalCallback:this.modalCallback},m={handleModalVisible:this.handleModalVisible},p={detail:d,handleModalVisible:this.handleUpdateModalVisible};return w.a.createElement(V.Fragment,null,w.a.createElement(r.a,{bordered:!1},w.a.createElement("div",{className:Q.a.tableList},w.a.createElement("div",{className:Q.a.tableListForm},this.renderSimpleForm()),w.a.createElement("div",{className:Q.a.tableListOperator},w.a.createElement(E.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"),i.length>0&&w.a.createElement(E.a,{type:"danger",onClick:this.batchDel},"批量删除")),w.a.createElement(M.a,{tableAlert:!0,selectedRows:i,loading:l,data:t,size:"middle",columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),o&&w.a.createElement(K,n()({},u,m,{modalVisible:o})),s&&Object.keys(d).length&&w.a.createElement(Y,n()({},u,p,{modalVisible:s})))}}]),a}(V.PureComponent))||A)||A;a.default=$}}]);