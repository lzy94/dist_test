(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{FEQ5:function(e,t,a){e.exports={videoPage:"antd-pro-pages-build-project-video-style-videoPage",left:"antd-pro-pages-build-project-video-style-left",pagination:"antd-pro-pages-build-project-video-style-pagination",listMain:"antd-pro-pages-build-project-video-style-listMain",list:"antd-pro-pages-build-project-video-style-list",disable:"antd-pro-pages-build-project-video-style-disable",active:"antd-pro-pages-build-project-video-style-active",nomal:"antd-pro-pages-build-project-video-style-nomal",right:"antd-pro-pages-build-project-video-style-right",header:"antd-pro-pages-build-project-video-style-header",tool:"antd-pro-pages-build-project-video-style-tool",videoMain:"antd-pro-pages-build-project-video-style-videoMain",videoCell:"antd-pro-pages-build-project-video-style-videoCell",nine:"antd-pro-pages-build-project-video-style-nine",sixteen:"antd-pro-pages-build-project-video-style-sixteen",video:"antd-pro-pages-build-project-video-style-video",selectCell:"antd-pro-pages-build-project-video-style-selectCell",mask:"antd-pro-pages-build-project-video-style-mask",title:"antd-pro-pages-build-project-video-style-title",close:"antd-pro-pages-build-project-video-style-close"}},"co/E":function(e,t,a){"use strict";a.r(t);a("DjyN");var i,n=a("NUBc"),o=(a("T2oS"),a("W9HT")),l=a("pVnL"),r=a.n(l),s=(a("R9oj"),a("ECub")),c=(a("miYZ"),a("tsqr")),d=a("RIqP"),u=a.n(d),p=a("lwsE"),v=a.n(p),g=a("W8MJ"),m=a.n(g),f=a("a1gu"),h=a.n(f),y=a("Nsbk"),b=a.n(y),E=a("7W2i"),L=a.n(E),N=(a("y8nQ"),a("Vl3Y")),j=a("q1tI"),C=a.n(j),k=a("MuoO"),x=a("zOGa"),I=a("FEQ5"),V=a.n(I),M=a("PCvj"),T=a.n(M),S=a("rtK1"),w=a.n(S),F=a("d5bk"),P=a.n(F),B=Object(k.connect)(function(e){return{Live:e.Live,ConserveMonitor:e.ConserveMonitor,loading:e.loading.models.ConserveMonitor}})(i=N.a.create()(i=function(e){function t(e){var a;return v()(this,t),(a=h()(this,b()(t).call(this,e))).state={index:-1,fullIndex:0,liveVideoList:[],formValue:[],defaultQuery:{property:"ponitObj",value:[-5],group:"main",operation:"IN",relation:"AND"},pageBean:{page:1,pageSize:15,showTotal:!0}},a.clearAutoTouch=function(){a.autoTouch&&clearInterval(a.autoTouch)},a.getList=function(e){(0,a.props.dispatch)({type:"ConserveMonitor/fetch",payload:e})},a.getVideoUrl=function(e,t){(0,a.props.dispatch)({type:"Live/GBSPath",payload:{serial:e},callback:function(i,n){a.setLiveVideo(i,t,e)}})},a.getTouch=function(e){(0,a.props.dispatch)({type:"Live/touch",payload:{serial:e}})},a.autoTouchFun=function(){a.autoTouch=setInterval(function(){for(var e=0;e<a.serialList.length;e+=1)a.getTouch(a.serialList[e])},12e3)},a.setLiveVideo=function(e,t,i){var n=a.state,o=n.liveVideoList,l=n.index,r=n.fullIndex;if(a.clearAutoTouch(),-1===l)o.length<a.fullNumber[r]?(a.serialList.push(i),a.setState({liveVideoList:[].concat(u()(o),[{title:t,node:C.a.createElement(x.a,{src:e})}])},function(){return a.autoTouchFun()})):c.a.error("没有播放位置");else{var s=Object.assign([],o);s[l]&&delete s[l],a.serialList[l]&&delete a.serialList[l],a.setState({liveVideoList:s},function(){var n=Object.assign([],a.state.liveVideoList);a.serialList[l]=i,n[l]={title:t,node:C.a.createElement(x.a,{src:e})},a.setState({liveVideoList:n,index:-1},function(){return a.autoTouchFun()})})}},a.paginationChange=function(e,t){var i=a.state,n=i.formValue,o=i.defaultQuery;a.getList({pageBean:{page:e,pageSize:t,showTotal:!0},querys:[].concat(u()(n),[o])})},a.search=function(e){var t=a.state,i=t.pageBean,n=t.defaultQuery,o=[{property:"pointName",value:e,group:"main",operation:"LIKE",relation:"AND"}].filter(function(e){return e.value});a.setState({formValue:o}),a.getList({pageBean:i,querys:[].concat(u()(o),[n])})},a.itemClick=function(e){var t=e.serial,i=e.pointName;a.getVideoUrl(t,i)},a.renderList=function(){var e=a.props.ConserveMonitor.data;return e.list.length?e.list.map(function(e){var t=e.cameraStatus?{className:V.a.nomal,onClick:function(){return a.itemClick(e)}}:{className:V.a.disable};return C.a.createElement("li",r()({key:e.id_},t),e.pointName,C.a.createElement("span",null))}):C.a.createElement(s.a,{image:s.a.PRESENTED_IMAGE_SIMPLE})},a.renderLive=function(){for(var e=a.state,t=e.liveVideoList,i=e.index,n=e.fullIndex,o=[],l=function(e){o.push(C.a.createElement("div",{key:e,className:"".concat(V.a.videoCell," ").concat(0===n?V.a.videoCell:1===n?V.a.nine:V.a.sixteen)},C.a.createElement("div",{className:"".concat(V.a.video," ").concat(i===e?V.a.selectCell:null)},C.a.createElement("div",{className:V.a.mask,onClick:function(){return a.getIndex(e)}},C.a.createElement("div",{className:V.a.title},t[e]?t[e].title:null)),t[e]?t[e].node:null)))},r=0;r<a.fullNumber[n];r+=1)l(r);return o},a.getIndex=function(e){a.setState({index:e})},a.getFullIndex=function(e){var t=a.state.liveVideoList,i=u()(t);t.length>a.fullNumber[e]&&(i=i.slice(0,e)),a.setState({fullIndex:e,liveVideoList:i})},a.autoTouch=null,a.serialList=[],a.fullNumber=[4,9,16],a}return L()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.pageBean,a=e.defaultQuery;this.getList({pageBean:t,querys:[a]})}},{key:"componentWillUnmount",value:function(){this.clearAutoTouch()}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,i=t.ConserveMonitor.data;return C.a.createElement("div",{className:V.a.videoPage},C.a.createElement("div",{className:V.a.left},C.a.createElement("div",{className:V.a.listMain},C.a.createElement(o.a,{spinning:a},C.a.createElement("ul",{className:V.a.list},this.renderList()))),C.a.createElement("div",{className:V.a.pagination},C.a.createElement(n.a,{size:"small",simple:!0,total:i.pagination.total,pageSize:15,onChange:this.paginationChange}))),C.a.createElement("div",{className:V.a.right},C.a.createElement("div",{className:V.a.header},"分屏：",C.a.createElement("div",{className:V.a.tool},C.a.createElement("img",{width:20,src:w.a,alt:"",onClick:function(){return e.getFullIndex(0)}}),C.a.createElement("img",{width:20,src:T.a,alt:"",onClick:function(){return e.getFullIndex(1)}}),C.a.createElement("img",{width:20,src:P.a,alt:"",onClick:function(){return e.getFullIndex(2)}}))),C.a.createElement("div",{className:V.a.videoMain},this.renderLive())))}}]),t}(j.PureComponent))||i)||i;t.default=B}}]);