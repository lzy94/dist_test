(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{orgs:function(e,a,t){"use strict";t.r(a);var n,l=t("pVnL"),r=t.n(l),i=(t("IzEo"),t("bx4M")),o=(t("14J3"),t("BMrR")),s=(t("jCWc"),t("kPKH")),d=(t("miYZ"),t("tsqr")),c=(t("P2fV"),t("NJEC")),m=(t("/zsF"),t("PArb")),u=(t("5Dmo"),t("3S7+")),p=(t("+L6B"),t("2/Rp")),h=t("lwsE"),f=t.n(h),g=t("W8MJ"),b=t.n(g),y=t("a1gu"),E=t.n(y),v=t("Nsbk"),V=t.n(v),M=t("7W2i"),D=t.n(M),S=(t("2qtc"),t("kLXV")),w=(t("5NDa"),t("5rEg")),C=(t("y8nQ"),t("Vl3Y")),k=t("q1tI"),B=t.n(k),F=t("MuoO"),N=t("CkN6"),L=t("ZP6J"),R=t.n(L),T=t("9zHi"),O=t.n(T),U=C.a.Item,z=C.a.create()(function(e){var a=e.modalVisible,t=e.form,n=e.handleAdd,l=e.handleModalVisible;return B.a.createElement(S.a,{destroyOnClose:!0,title:"添加",className:R.a.formModal,visible:a,onOk:function(){t.validateFields(function(e,a){e||(t.resetFields(),n(a))})},onCancel:function(){return l()}},B.a.createElement("div",{className:R.a.formModalBody},B.a.createElement(U,{label:"名称"},t.getFieldDecorator("name",{rules:[{required:!0,message:"请输入分类名称！"}]})(B.a.createElement(w.a,{placeholder:"请输入"})))))}),A=C.a.create()(function(e){var a=e.modalVisible,t=e.form,n=e.handleUpdate,l=e.handleModalVisible,r=e.detail;return B.a.createElement(S.a,{destroyOnClose:!0,title:"编辑",className:R.a.formModal,visible:a,onOk:function(){t.validateFields(function(e,a){e||(t.resetFields(),n(a))})},onCancel:function(){return l()}},B.a.createElement("div",{className:R.a.formModalBody},B.a.createElement(U,{label:"名称"},t.getFieldDecorator("name",{initialValue:r.name,rules:[{required:!0,message:"请输入分类名称！"}]})(B.a.createElement(w.a,{placeholder:"请输入"})))))}),J=Object(F.connect)(function(e){return{TransportDangerCategory:e.TransportDangerCategory,loading:e.loading.models.TransportDangerCategory}})(n=C.a.create()(n=function(e){function a(){var e,t;f()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=E()(this,(e=V()(a)).call.apply(e,[this].concat(l)))).state={modalVisible:!1,updateModalVisible:!1,formValues:[],selectedRows:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"分类名称",dataIndex:"name"},{title:"操作",width:100,render:function(e,a){return B.a.createElement(k.Fragment,null,B.a.createElement(u.a,{placement:"left",title:"编辑"},B.a.createElement(p.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"edit",size:"small"})),B.a.createElement(m.a,{type:"vertical"}),B.a.createElement(c.a,{title:"是否删除数据?",onConfirm:function(){return t.dataDel(a.id)},okText:"确定",cancelText:"取消"},B.a.createElement(u.a,{placement:"left",title:"删除"},B.a.createElement(p.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.getList=function(e){(0,t.props.dispatch)({type:"TransportDangerCategory/fetch",payload:e})},t.showDetailModal=function(e){return t.setState({detail:e},function(){return t.handleUpdateModalVisible(!0)})},t.dataDel=function(e){t.delUtil(e)},t.batchDel=function(){var e=t.state.selectedRows;e.length&&S.a.confirm({title:"提示",content:"是否删除数据？",onOk:function(){var a=e.map(function(e){return e.id});t.delUtil(a.join(),function(){t.setState({selectedRows:[]})})}})},t.delUtil=function(e,a){(0,t.props.dispatch)({type:"TransportDangerCategory/remove",payload:{ids:e},callback:function(){d.a.success("删除成功");var e=t.state.pageBean;t.getList({pageBean:e}),a&&a()}})},t.handleStandardTableChange=function(e){var a=t.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(n)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[],selectedRows:[]}),t.getList({pageBean:a})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props.form,n=t.state.pageBean;a.validateFields(function(e,a){if(!e){var l={name:a.cateName},r=Object.keys(l).map(function(e){return l[e]?{property:e,value:l[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:r}),t.getList({pageBean:n,querys:r})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e}),e||t.setState({detail:{}})},t.handleAdd=function(e){t.saveData(e,"添加")},t.handleUpdate=function(e){var a=t.state.detail,n=JSON.parse(JSON.stringify(a));n.name=e.name,t.setState({detail:n}),t.saveData(n,"编辑")},t.saveData=function(e,a){var n=t.props.dispatch,l=t.state.pageBean;n({type:"TransportDangerCategory/UAData",payload:e,callback:function(){d.a.success("".concat(a,"成功")),"编辑"===a?t.handleUpdateModalVisible():t.handleModalVisible(),t.getList({pageBean:l})}})},t}return D()(a,e),b()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return B.a.createElement(C.a,{onSubmit:this.handleSearch,layout:"inline"},B.a.createElement(o.a,{gutter:{md:8,lg:16,xl:16}},B.a.createElement(s.a,{md:6,sm:24},B.a.createElement(U,null,e("cateName")(B.a.createElement(w.a,{addonBefore:"名称",placeholder:"请输入"})))),B.a.createElement(s.a,{md:6,sm:24},B.a.createElement("span",{className:O.a.submitButtons},B.a.createElement(p.a,{type:"primary",htmlType:"submit"},"查询"),B.a.createElement(p.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.TransportDangerCategory.data,n=a.loading,l=this.state,o=l.selectedRows,s=l.modalVisible,d=l.updateModalVisible,c=l.detail,m={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},u={detail:c,handleModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate};return B.a.createElement(k.Fragment,null,B.a.createElement(i.a,{bordered:!1},B.a.createElement("div",{className:O.a.tableList},B.a.createElement("div",{className:O.a.tableListForm},this.renderSimpleForm()),B.a.createElement("div",{className:O.a.tableListOperator},B.a.createElement(p.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"),o.length>0&&B.a.createElement(p.a,{type:"danger",onClick:this.batchDel},"批量删除")),B.a.createElement(N.a,{size:"middle",selectedRows:o,loading:n,data:t,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),B.a.createElement(z,r()({},m,{modalVisible:s})),d&&Object.keys(c).length?B.a.createElement(A,r()({},u,{modalVisible:d})):null)}}]),a}(k.PureComponent))||n)||n;a.default=J}}]);