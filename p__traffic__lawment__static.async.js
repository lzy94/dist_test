(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{"8dKD":function(e,t,a){"use strict";a.r(t);a("IzEo");var n,i,l,r,o,s,c,d,m,u,p,h,g,E,f,y,v,S,b,L,N,w,D,x,R=a("bx4M"),I=(a("R9oj"),a("ECub")),M=(a("2qtc"),a("kLXV")),C=a("lwsE"),T=a.n(C),V=a("W8MJ"),k=a.n(V),B=a("a1gu"),Y=a.n(B),A=a("Nsbk"),H=a.n(A),F=a("7W2i"),G=a.n(F),Q=(a("7Kak"),a("9yH6")),P=a("q1tI"),O=a.n(P),z=a("MuoO"),q=a("+n12"),W=a("y1Nh"),j=a("mf+E"),U=a("pVnL"),K=a.n(U),J=(a("14J3"),a("BMrR")),Z=(a("iQDF"),a("+eQT")),X=(a("5NDa"),a("5rEg")),_=(a("jCWc"),a("kPKH")),$=(a("nRaC"),a("5RzL")),ee=(a("5Dmo"),a("3S7+")),te=(a("+L6B"),a("2/Rp")),ae=(a("+BJd"),a("mr32")),ne=(a("OaEy"),a("2fM7")),ie=(a("y8nQ"),a("Vl3Y")),le=a("wd/R"),re=a.n(le),oe=a("CkN6"),se=(a("Pwec"),a("CtXQ")),ce=(a("miYZ"),a("tsqr")),de=a("ZP6J"),me=a.n(de),ue=a("smft"),pe=a("8ZFW"),he=a("faNv"),ge=Object(z.connect)(function(e){return{LawmentStatic:e.LawmentStatic,loading:e.loading.models.LawmentStatic}})(n=ie.a.create()((l=i=function(e){function t(e){var a;return T()(this,t),(a=Y()(this,H()(t).call(this,e))).state={openRecord:[],busStaticData:{},invalidVisible:!1},a.handleInvalidVisible=function(e){a.setState({invalidVisible:!!e})},a.getDetail=function(){var e=a.props;(0,e.dispatch)({type:"LawmentStatic/detail",payload:{id:e.detailID},callback:function(e){a.setState({openRecord:e.openRecord,busStaticData:e.busStaticData})}})},a.modalSuccess=function(){var e=a.props.handleModalVisible;setTimeout(function(){e(),a.props.modalSuccess()},300)},a.title=function(){var e=a.state.busStaticData;return O.a.createElement("div",{className:me.a.modalHeader},O.a.createElement("div",{className:me.a.title},O.a.createElement("span",{className:me.a.value},e.carNo),O.a.createElement("span",{className:me.a.time},re()(e.previewTime).format("YYYY-M-D HH:mm:ss"))),O.a.createElement("div",{className:me.a.titleRight},O.a.createElement(te.a,{type:"primary",style:{marginRight:8},onClick:function(){return a.verifyPassClick()}},"审核通过"),O.a.createElement(te.a,{type:"danger",onClick:function(){return a.handleInvalidVisible(!0)}},"数据作废")))},a.verifyPassClick=function(){var e=a.props,t=e.dispatch,n=e.detailID,i=e.modalSuccess,l=e.handleModalVisible;t({type:"LawmentStatic/examinationPassed",payload:{id:n},callback:function(){ce.a.success("操作成功"),setTimeout(function(){l(),i()},300)}})},a.columns=[{title:"操作员",dataIndex:"executor"},{title:"办理时间",dataIndex:"executorTime"},{title:"状态",dataIndex:"logType"},{title:"原因",dataIndex:"remark"}],a.myCarousel=O.a.createRef(),a}return G()(t,e),k()(t,[{key:"componentDidMount",value:function(){this.getDetail()}},{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.handleModalVisible,n=e.loading,i=e.detailID,l=this.state,r=l.busStaticData,o=l.openRecord,s=l.invalidVisible,c={detailID:i,modalSuccess:this.modalSuccess,handleModalVisible:this.handleInvalidVisible};return O.a.createElement(P.Fragment,null,O.a.createElement(M.a,{destroyOnClose:!0,className:me.a.modalStyle,title:this.title(),visible:t,onCancel:function(){return a()},footer:null,width:1150},O.a.createElement(he.a,{detail:r}),o.length?O.a.createElement("div",{className:me.a.detailMsg,style:{marginTop:16}},O.a.createElement("div",{className:me.a.detailMsgTitle},O.a.createElement(se.a,{type:"table"})," 操作记录"),O.a.createElement("div",{className:me.a.recordList,style:{padding:"0 20px 20px"}},O.a.createElement(ue.a,{loading:n,list:o,columns:this.columns}))):null),s?O.a.createElement(pe.a,K()({},c,{modalVisible:s})):null)}}]),t}(P.PureComponent),i.defaultProps={handleModalVisible:function(){}},n=l))||n)||n,Ee=a("9zHi"),fe=a.n(Ee),ye=a("ns75"),ve=a.n(ye),Se=ie.a.Item,be=ne.a.Option,Le=Object(z.connect)(function(e){var t=e.LawmentStatic,a=e.loading,n=e.system;return{Site:e.Site,system:n,LawmentStatic:t,loading:a.models.LawmentStatic}})(r=ie.a.create()(r=function(e){function t(){var e,a;T()(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Y()(this,(e=H()(t)).call.apply(e,[this].concat(i)))).state={modalVisible:!1,formValues:[],siteList:[],detailID:"",pageBean:{page:1,pageSize:10,showTotal:!0},baseQuery:[{property:"overLoad",value:0,group:"main",operation:"GREAT",relation:"AND"},{property:"isCheck",value:0,group:"main",operation:"EQUAL",relation:"AND"}]},a.columns=[{title:"监测站",dataIndex:"siteName"},{title:"车牌号",dataIndex:"carNo"},{title:"检测时间",dataIndex:"previewTime",render:function(e){return re()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"轴数",dataIndex:"axleNumber"},{title:"总重(t)",dataIndex:"totalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"限重(t)",dataIndex:"weightLimited",render:function(e){return O.a.createElement(ae.a,{color:"#87d068"},(e/1e3).toFixed(2)," ")}},{title:"超重(t)",dataIndex:"overLoad",render:function(e){return e>0?O.a.createElement(ae.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"overLoadRate",render:function(e){return(1*e).toFixed(2)}},{title:"操作",width:70,render:function(e,t){return O.a.createElement(P.Fragment,null,O.a.createElement(ee.a,{placement:"left",title:"审核"},O.a.createElement(te.a,{onClick:function(){return a.showDetailModal(t.id)},type:"primary",shape:"circle",icon:"solution",size:"small"})))}}],a.showDetailModal=function(e){a.setState({detailID:e}),a.handleModalVisible(!0)},a.modalSuccess=function(){var e=a.state,t=e.pageBean,n=e.baseQuery,i=e.formValues;a.getList({pageBean:t,querys:n.concat(i.length?i:a.getSiteIN())})},a.getList=function(e){(0,a.props.dispatch)({type:"LawmentStatic/fetch",payload:e})},a.getSiteIN=function(){return[{property:"siteCode",value:a.state.siteList.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}]},a.treeSelectChange=function(e,t){a.props.form.setFieldsValue({siteCode:""}),a.getSite(e),a.setState({organCode:e})},a.getSite=function(e,t){var n=a.props;(0,n.dispatch)({type:"Site/siteByUserSite",payload:{organId:e,siteIds:n.siteList.map(function(e){return e.code})},callback:function(e){var n=e.map(function(e){return"2"===e.siteType?{code:e.siteCode,name:e.siteName}:""});a.setState({siteList:n}),t&&t(n)}})},a.handleStandardTableChange=function(e){var t=a.state,n=t.formValues,i=t.baseQuery,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:i.concat(n.length?n:a.getSiteIN())};a.getList(l)},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.siteList,i=a.state,l=i.pageBean,r=i.baseQuery;t.resetFields(),a.setState({formValues:[],siteList:n},function(){a.getList({pageBean:l,querys:r.concat(a.getSiteIN())})})},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.state,i=n.pageBean,l=n.baseQuery,r=[t.siteCode?{property:"siteCode",value:t.siteCode||"",group:"main",operation:"EQUAL",relation:"AND"}:a.getSiteIN()[0].value.length?a.getSiteIN()[0]:{},{property:"overLoadRate",value:t.overLoadRateStart&&t.overLoadRateEnd?[t.overLoadRateStart,t.overLoadRateEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"axleNumber",value:"other"===t.axleNumber?6:t.axleNumber||"",group:"main",operation:"other"===t.axleNumber?"GREAT":"EQUAL",relation:"AND"},{property:"previewTime",value:t.previewTime?[re()(t.previewTime[0]).format("YYYY-MM-DD HH:mm:ss"),re()(t.previewTime[1]).format("YYYY-MM-DD HH:mm:ss")]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"totalLoad",value:t.totalLoadStart&&t.totalLoadEnd?[1e3*t.totalLoadStart,1e3*t.totalLoadEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"carNo",value:t.carNo||"",group:"main",operation:"LIKE",relation:"AND"}].filter(function(e){return e.value});a.setState({formValues:r}),a.getList({pageBean:i,querys:l.concat(r)})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e}),e||a.setState({detailID:""})},a}return G()(t,e),k()(t,[{key:"componentDidMount",value:function(){var e=this.props.siteList,t=this.state,a=t.pageBean,n=t.baseQuery,i=[{property:"siteCode",value:e.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}];this.getList({pageBean:a,querys:n.concat(i)}),this.setState({siteList:e})}},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.system.treeList,a=e.form.getFieldDecorator,n=this.state.siteList,i=Object(q.w)("organId").toString();return O.a.createElement(ie.a,{onSubmit:this.handleSearch,layout:"inline"},O.a.createElement(J.a,{gutter:16},O.a.createElement(_.a,{md:5,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),O.a.createElement(Se,{style:{flex:1}},a("name")(O.a.createElement($.a,{className:ve.a.inputGroupLeftRadius,treeData:t,treeDefaultExpandedKeys:[i],style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测点"),O.a.createElement(Se,{style:{flex:1}},a("siteCode")(O.a.createElement(ne.a,{dropdownMatchSelectWidth:!1,className:ve.a.inputGroupLeftRadius,placeholder:"请选择"},n.map(function(e){return O.a.createElement(be,{key:e.code,value:e.code},e.name)})))))),O.a.createElement(_.a,{md:5,sm:24},O.a.createElement(X.a.Group,{compact:!0},O.a.createElement(Se,{style:{display:"inline-block",width:"60%"}},a("overLoadRateStart")(O.a.createElement(X.a,{className:"".concat(ve.a.inputGroupRightRadius," ").concat(ve.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),O.a.createElement(Se,{style:{display:"inline-block",width:"40%"}},a("overLoadRateEnd")(O.a.createElement(X.a,{className:ve.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),O.a.createElement(Se,{style:{flex:1}},a("axleNumber")(O.a.createElement(ne.a,{className:ve.a.inputGroupLeftRadius,placeholder:"请选择"},O.a.createElement(be,{value:""},"全部轴数"),O.a.createElement(be,{value:2},"2"),O.a.createElement(be,{value:3},"3"),O.a.createElement(be,{value:4},"4"),O.a.createElement(be,{value:5},"5"),O.a.createElement(be,{value:6},"6"),O.a.createElement(be,{value:"other"},"其他")))))),O.a.createElement(_.a,{md:6,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),O.a.createElement(Se,{style:{flex:1}},a("previewTime")(O.a.createElement(Z.a.RangePicker,{className:ve.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[re()("00:00:00","HH:mm:ss"),re()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})))))),O.a.createElement(J.a,{gutter:16},O.a.createElement(_.a,{md:5,sm:24},O.a.createElement(X.a.Group,{compact:!0},O.a.createElement(Se,{style:{display:"inline-block",width:"50%"}},a("totalLoadStart")(O.a.createElement(X.a,{className:"".concat(ve.a.inputGroupRightRadius," ").concat(ve.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),O.a.createElement(Se,{style:{display:"inline-block",width:"50%"}},a("totalLoadEnd")(O.a.createElement(X.a,{className:ve.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement(Se,null,a("carNo")(O.a.createElement(X.a,{addonBefore:"车牌号",placeholder:"请输入"})))),O.a.createElement(_.a,{md:15,sm:24},O.a.createElement("div",{style:{overflow:"hidden"}},O.a.createElement("div",{style:{float:"right",marginBottom:24}},O.a.createElement(te.a,{type:"primary",htmlType:"submit"},"查询"),O.a.createElement(te.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,t=e.LawmentStatic.data,a=e.loading,n=this.state,i=n.modalVisible,l=n.detailID,r={handleModalVisible:this.handleModalVisible,detailID:l,modalSuccess:this.modalSuccess};return O.a.createElement(P.Fragment,null,O.a.createElement("div",{className:fe.a.tableList},O.a.createElement("div",{className:fe.a.tableListForm},this.renderSimpleForm()),O.a.createElement(oe.a,{tableAlert:!1,selectedRows:0,rowSelection:null,loading:a,data:t,size:"middle",columns:this.columns,onChange:this.handleStandardTableChange})),i&&l?O.a.createElement(ge,K()({},r,{modalVisible:i})):null)}}]),t}(P.PureComponent))||r)||r,Ne=(a("T2oS"),a("W9HT")),we=(a("sRBo"),a("kaz8")),De=ie.a.Item,xe=we.a.Group,Re=Object(z.connect)(function(e){var t=e.DynamicLaw,a=e.loading;return{DynamicLaw:t,LawmentStatic:e.LawmentStatic,dynamicLawLoading:a.models.DynamicLaw,loading:a.models.LawmentStatic}})(o=ie.a.create()((c=s=function(e){function t(){var e,a;T()(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Y()(this,(e=H()(t)).call.apply(e,[this].concat(i)))).state={printFileList:[]},a.getList=function(){var e=a.props;(0,e.dispatch)({type:"DynamicLaw/fileList",payload:{pageBean:{page:1,pageSize:1e5,showTotal:!0},querys:[{property:"organCode",value:e.organCode,group:"main",operation:"EQUAL",relation:"AND"}]},callback:function(e){a.setState({printFileList:e})}})},a.renderOption=function(){return a.state.printFileList.map(function(e){return O.a.createElement("div",{key:e.fileId},O.a.createElement(we.a,{value:e.fileId},e.fileName))})},a.templatePrint=function(e){var t=a.props,n=t.handleModalVisible;(0,t.dispatch)({type:"LawmentStatic/templateDownload",payload:{id:t.detailID,fileIds:e.template.join()},callback:function(e){404===e?ce.a.error("模板异常，下载失败"):setTimeout(function(){return n()},1e3)}})},a}return G()(t,e),k()(t,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this,t=this.props,a=t.modalVisible,n=t.handleModalVisible,i=t.form,l=t.loading,r=t.dynamicLawLoading,o=this.state.printFileList,s=o.length<=0?{footer:null}:{};return O.a.createElement(M.a,K()({destroyOnClose:!0,title:"打印预览选择",className:me.a.formModal,visible:a,onOk:function(){i.validateFields(function(t,a){t||e.templatePrint(a)})},onCancel:function(){return n()}},s),O.a.createElement(Ne.a,{spinning:l,tip:"正在下载······"},O.a.createElement(Ne.a,{spinning:r},O.a.createElement("div",{className:me.a.formModalBody},o.length<=0?O.a.createElement(I.a,{description:"暂无模板，请先上传"}):O.a.createElement(De,{label:"模板名称"},i.getFieldDecorator("template",{initialValue:o.map(function(e){return e.fileId})})(O.a.createElement(xe,null,this.renderOption())))))))}}]),t}(P.PureComponent),s.defaultProps={handleModalVisible:function(){}},o=c))||o)||o,Ie=Object(z.connect)(function(e){return{LawmentStatic:e.LawmentStatic,loading:e.loading.models.LawmentStatic}})(d=ie.a.create()((u=m=function(e){function t(e){var a;return T()(this,t),(a=Y()(this,H()(t).call(this,e))).state={openRecord:[],busStaticData:{},templateVisible:!1},a.getDetail=function(){var e=a.props;(0,e.dispatch)({type:"LawmentStatic/detail",payload:{id:e.detailID},callback:function(e){a.setState({openRecord:e.openRecord,busStaticData:e.busStaticData})}})},a.modalSuccess=function(){var e=a.props.handleModalVisible;setTimeout(function(){e(),a.props.modalSuccess()},300)},a.title=function(){var e=a.state.busStaticData;return O.a.createElement("div",{className:me.a.modalHeader},O.a.createElement("div",{className:me.a.title},O.a.createElement("span",{className:me.a.value},e.carNo),O.a.createElement("span",{className:me.a.time},re()(e.previewTime).format("YYYY-M-D HH:mm:ss"))),O.a.createElement("div",{className:me.a.titleRight},O.a.createElement(te.a,{style:{marginRight:8},type:"primary",onClick:function(){return a.verifyPassClick()}},"审核通过"),O.a.createElement(te.a,{className:ve.a.import,onClick:function(){return a.handleTemplateVisible(!0)}},"打印预览")))},a.verifyPassClick=function(){var e=a.props,t=e.dispatch,n=e.detailID,i=e.modalSuccess,l=e.handleModalVisible;t({type:"LawmentStatic/reviewPassed",payload:{id:n},callback:function(){ce.a.success("操作成功"),setTimeout(function(){l(),i()},300)}})},a.handleTemplateVisible=function(e){a.setState({templateVisible:!!e})},a.columns=[{title:"操作员",dataIndex:"executor"},{title:"办理时间",dataIndex:"executorTime"},{title:"状态",dataIndex:"logType"},{title:"原因",dataIndex:"remark"}],a.myCarousel=O.a.createRef(),a}return G()(t,e),k()(t,[{key:"componentDidMount",value:function(){this.getDetail()}},{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.handleModalVisible,n=e.loading,i=e.detailID,l=this.state,r=l.busStaticData,o=l.openRecord,s=l.templateVisible,c={handleModalVisible:this.handleTemplateVisible,detailID:i,organCode:r.organCode};return O.a.createElement(P.Fragment,null,O.a.createElement(M.a,{destroyOnClose:!0,className:me.a.modalStyle,title:this.title(),visible:t,onCancel:function(){return a()},footer:null,width:1150},O.a.createElement(he.a,{detail:r}),o.length?O.a.createElement("div",{className:me.a.detailMsg,style:{marginTop:16}},O.a.createElement("div",{className:me.a.detailMsgTitle},O.a.createElement(se.a,{type:"table"})," 操作记录"),O.a.createElement("div",{className:me.a.recordList,style:{padding:"0 20px 20px"}},O.a.createElement(ue.a,{loading:n,list:o,columns:this.columns}))):null),s&&i?O.a.createElement(Re,K()({},c,{modalVisible:s})):null)}}]),t}(P.PureComponent),m.defaultProps={handleModalVisible:function(){}},d=u))||d)||d,Me=ie.a.Item,Ce=ne.a.Option,Te=Object(z.connect)(function(e){var t=e.LawmentStatic,a=e.loading,n=e.system;return{Site:e.Site,system:n,LawmentStatic:t,loading:a.models.LawmentStatic}})(p=ie.a.create()(p=function(e){function t(){var e,a;T()(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Y()(this,(e=H()(t)).call.apply(e,[this].concat(i)))).state={modalVisible:!1,formValues:[],siteList:[],detailID:"",pageBean:{page:1,pageSize:10,showTotal:!0},baseQuery:[{property:"overLoad",value:0,group:"main",operation:"GREAT",relation:"AND"},{property:"isCheck",value:1,group:"main",operation:"EQUAL",relation:"AND"}]},a.columns=[{title:"监测站",dataIndex:"siteName"},{title:"车牌号",dataIndex:"carNo"},{title:"检测时间",dataIndex:"previewTime",render:function(e){return re()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"轴数",dataIndex:"axleNumber"},{title:"总重(t)",dataIndex:"totalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"限重(t)",dataIndex:"weightLimited",render:function(e){return O.a.createElement(ae.a,{color:"#87d068"},(e/1e3).toFixed(2)," ")}},{title:"超重(t)",dataIndex:"overLoad",render:function(e){return e>0?O.a.createElement(ae.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"overLoadRate",render:function(e){return(1*e).toFixed(2)}},{title:"操作",width:70,render:function(e,t){return O.a.createElement(P.Fragment,null,O.a.createElement(ee.a,{placement:"left",title:"复审"},O.a.createElement(te.a,{onClick:function(){return a.showDetailModal(t.id)},type:"primary",shape:"circle",icon:"file-sync",size:"small"})))}}],a.showDetailModal=function(e){a.setState({detailID:e}),a.handleModalVisible(!0)},a.modalSuccess=function(){var e=a.state,t=e.pageBean,n=e.baseQuery,i=e.formValues;a.getList({pageBean:t,querys:n.concat(i.length?i:a.getSiteIN())})},a.getList=function(e){(0,a.props.dispatch)({type:"LawmentStatic/fetch",payload:e})},a.getSiteIN=function(){return[{property:"siteCode",value:a.state.siteList.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}]},a.treeSelectChange=function(e,t){a.props.form.setFieldsValue({siteCode:""}),a.getSite(e),a.setState({organCode:e})},a.getSite=function(e,t){var n=a.props;(0,n.dispatch)({type:"Site/siteByUserSite",payload:{organId:e,siteIds:n.siteList.map(function(e){return e.code})},callback:function(e){var n=e.map(function(e){return"2"===e.siteType?{code:e.siteCode,name:e.siteName}:""});a.setState({siteList:n}),t&&t(n)}})},a.handleStandardTableChange=function(e){var t=a.state,n=t.formValues,i=t.baseQuery,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:i.concat(n.length?n:a.getSiteIN())};a.getList(l)},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.siteList,i=a.state,l=i.pageBean,r=i.baseQuery;t.resetFields(),a.setState({formValues:[],siteList:n},function(){a.getList({pageBean:l,querys:r.concat(a.getSiteIN())})})},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.state,i=n.pageBean,l=n.baseQuery,r=[t.siteCode?{property:"siteCode",value:t.siteCode||"",group:"main",operation:"EQUAL",relation:"AND"}:a.getSiteIN()[0].value.length?a.getSiteIN()[0]:{},{property:"overLoadRate",value:t.overLoadRateStart&&t.overLoadRateEnd?[t.overLoadRateStart,t.overLoadRateEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"axleNumber",value:"other"===t.axleNumber?6:t.axleNumber||"",group:"main",operation:"other"===t.axleNumber?"GREAT":"EQUAL",relation:"AND"},{property:"previewTime",value:t.previewTime?[re()(t.previewTime[0]).format("YYYY-MM-DD HH:mm:ss"),re()(t.previewTime[1]).format("YYYY-MM-DD HH:mm:ss")]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"totalLoad",value:t.totalLoadStart&&t.totalLoadEnd?[1e3*t.totalLoadStart,1e3*t.totalLoadEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"carNo",value:t.carNo||"",group:"main",operation:"LIKE",relation:"AND"}].filter(function(e){return e.value});a.setState({formValues:r}),a.getList({pageBean:i,querys:l.concat(r)})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e}),e||a.setState({detailID:""})},a}return G()(t,e),k()(t,[{key:"componentDidMount",value:function(){var e=this.props.siteList,t=this.state,a=t.pageBean,n=t.baseQuery,i=[{property:"siteCode",value:e.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}];this.getList({pageBean:a,querys:n.concat(i)}),this.setState({siteList:e})}},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.system.treeList,a=e.form.getFieldDecorator,n=this.state.siteList,i=Object(q.w)("organId").toString();return O.a.createElement(ie.a,{onSubmit:this.handleSearch,layout:"inline"},O.a.createElement(J.a,{gutter:16},O.a.createElement(_.a,{md:5,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),O.a.createElement(Me,{style:{flex:1}},a("name")(O.a.createElement($.a,{className:ve.a.inputGroupLeftRadius,treeData:t,treeDefaultExpandedKeys:[i],style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测点"),O.a.createElement(Me,{style:{flex:1}},a("siteCode")(O.a.createElement(ne.a,{dropdownMatchSelectWidth:!1,className:ve.a.inputGroupLeftRadius,placeholder:"请选择"},n.map(function(e){return O.a.createElement(Ce,{key:e.code,value:e.code},e.name)})))))),O.a.createElement(_.a,{md:5,sm:24},O.a.createElement(X.a.Group,{compact:!0},O.a.createElement(Me,{style:{display:"inline-block",width:"60%"}},a("overLoadRateStart")(O.a.createElement(X.a,{className:"".concat(ve.a.inputGroupRightRadius," ").concat(ve.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),O.a.createElement(Me,{style:{display:"inline-block",width:"40%"}},a("overLoadRateEnd")(O.a.createElement(X.a,{className:ve.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),O.a.createElement(Me,{style:{flex:1}},a("axleNumber")(O.a.createElement(ne.a,{className:ve.a.inputGroupLeftRadius,placeholder:"请选择"},O.a.createElement(Ce,{value:""},"全部轴数"),O.a.createElement(Ce,{value:2},"2"),O.a.createElement(Ce,{value:3},"3"),O.a.createElement(Ce,{value:4},"4"),O.a.createElement(Ce,{value:5},"5"),O.a.createElement(Ce,{value:6},"6"),O.a.createElement(Ce,{value:"other"},"其他")))))),O.a.createElement(_.a,{md:6,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),O.a.createElement(Me,{style:{flex:1}},a("previewTime")(O.a.createElement(Z.a.RangePicker,{className:ve.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[re()("00:00:00","HH:mm:ss"),re()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})))))),O.a.createElement(J.a,{gutter:16},O.a.createElement(_.a,{md:5,sm:24},O.a.createElement(X.a.Group,{compact:!0},O.a.createElement(Me,{style:{display:"inline-block",width:"50%"}},a("totalLoadStart")(O.a.createElement(X.a,{className:"".concat(ve.a.inputGroupRightRadius," ").concat(ve.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),O.a.createElement(Me,{style:{display:"inline-block",width:"50%"}},a("totalLoadEnd")(O.a.createElement(X.a,{className:ve.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement(Me,null,a("carNo")(O.a.createElement(X.a,{addonBefore:"车牌号",placeholder:"请输入"})))),O.a.createElement(_.a,{md:15,sm:24},O.a.createElement("div",{style:{overflow:"hidden"}},O.a.createElement("div",{style:{float:"right",marginBottom:24}},O.a.createElement(te.a,{type:"primary",htmlType:"submit"},"查询"),O.a.createElement(te.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,t=e.LawmentStatic.data,a=e.loading,n=this.state,i=n.modalVisible,l=n.detailID,r={handleModalVisible:this.handleModalVisible,detailID:l,modalSuccess:this.modalSuccess};return O.a.createElement(P.Fragment,null,O.a.createElement("div",{className:fe.a.tableList},O.a.createElement("div",{className:fe.a.tableListForm},this.renderSimpleForm()),O.a.createElement(oe.a,{tableAlert:!1,selectedRows:0,rowSelection:null,loading:a,data:t,size:"middle",columns:this.columns,onChange:this.handleStandardTableChange})),i&&l?O.a.createElement(Ie,K()({},r,{modalVisible:i})):null)}}]),t}(P.PureComponent))||p)||p,Ve=Object(z.connect)(function(e){return{LawmentStatic:e.LawmentStatic,loading:e.loading.models.LawmentStatic}})(h=ie.a.create()((E=g=function(e){function t(e){var a;return T()(this,t),(a=Y()(this,H()(t).call(this,e))).state={openRecord:[],busStaticData:{},templateVisible:!1},a.getDetail=function(){var e=a.props;(0,e.dispatch)({type:"LawmentStatic/detail",payload:{id:e.detailID},callback:function(e){a.setState({openRecord:e.openRecord,busStaticData:e.busStaticData})}})},a.modalSuccess=function(){var e=a.props.handleModalVisible;setTimeout(function(){e(),a.props.modalSuccess()},300)},a.title=function(){var e=a.state.busStaticData;return O.a.createElement("div",{className:me.a.modalHeader},O.a.createElement("div",{className:me.a.title},O.a.createElement("span",{className:me.a.value},e.carNo),O.a.createElement("span",{className:me.a.time},re()(e.previewTime).format("YYYY-M-D HH:mm:ss"))),O.a.createElement("div",{className:me.a.titleRight},O.a.createElement(te.a,{type:"primary",style:{marginRight:8},onClick:function(){return a.verifyPassClick()}},"立即签批"),O.a.createElement(te.a,{className:ve.a.import,onClick:function(){return a.handleTemplateVisible(!0)}},"打印预览")))},a.verifyPassClick=function(){var e=a.props,t=e.dispatch,n=e.detailID,i=e.modalSuccess,l=e.handleModalVisible;t({type:"LawmentStatic/signingPassed",payload:{id:n},callback:function(){ce.a.success("操作成功"),setTimeout(function(){l(),i()},300)}})},a.handleTemplateVisible=function(e){a.setState({templateVisible:!!e})},a.columns=[{title:"操作员",dataIndex:"executor"},{title:"办理时间",dataIndex:"executorTime"},{title:"状态",dataIndex:"logType"},{title:"原因",dataIndex:"remark"}],a.myCarousel=O.a.createRef(),a}return G()(t,e),k()(t,[{key:"componentDidMount",value:function(){this.getDetail()}},{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.handleModalVisible,n=e.loading,i=e.detailID,l=this.state,r=l.busStaticData,o=l.openRecord,s=l.templateVisible,c={handleModalVisible:this.handleTemplateVisible,detailID:i,organCode:r.organCode};return O.a.createElement(P.Fragment,null,O.a.createElement(M.a,{destroyOnClose:!0,className:me.a.modalStyle,title:this.title(),visible:t,onCancel:function(){return a()},footer:null,width:1150},O.a.createElement(he.a,{detail:r}),o.length?O.a.createElement("div",{className:me.a.detailMsg,style:{marginTop:16}},O.a.createElement("div",{className:me.a.detailMsgTitle},O.a.createElement(se.a,{type:"table"})," 操作记录"),O.a.createElement("div",{className:me.a.recordList,style:{padding:"0 20px 20px"}},O.a.createElement(ue.a,{loading:n,list:o,columns:this.columns}))):null),s&&i?O.a.createElement(Re,K()({},c,{modalVisible:s})):null)}}]),t}(P.PureComponent),g.defaultProps={handleModalVisible:function(){}},h=E))||h)||h,ke=ie.a.Item,Be=ne.a.Option,Ye=Object(z.connect)(function(e){var t=e.LawmentStatic,a=e.loading,n=e.system;return{Site:e.Site,system:n,LawmentStatic:t,loading:a.models.LawmentStatic}})(f=ie.a.create()(f=function(e){function t(){var e,a;T()(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Y()(this,(e=H()(t)).call.apply(e,[this].concat(i)))).state={modalVisible:!1,formValues:[],siteList:[],detailID:"",pageBean:{page:1,pageSize:10,showTotal:!0},baseQuery:[{property:"overLoad",value:0,group:"main",operation:"GREAT",relation:"AND"},{property:"isCheck",value:3,group:"main",operation:"EQUAL",relation:"AND"}]},a.columns=[{title:"监测站",dataIndex:"siteName"},{title:"车牌号",dataIndex:"carNo"},{title:"检测时间",dataIndex:"previewTime",render:function(e){return re()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"轴数",dataIndex:"axleNumber"},{title:"总重(t)",dataIndex:"totalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"限重(t)",dataIndex:"weightLimited",render:function(e){return O.a.createElement(ae.a,{color:"#87d068"},(e/1e3).toFixed(2)," ")}},{title:"超重(t)",dataIndex:"overLoad",render:function(e){return e>0?O.a.createElement(ae.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"overLoadRate",render:function(e){return(1*e).toFixed(2)}},{title:"操作",width:70,render:function(e,t){return O.a.createElement(P.Fragment,null,O.a.createElement(ee.a,{placement:"left",title:"签批"},O.a.createElement(te.a,{onClick:function(){return a.showDetailModal(t.id)},type:"primary",shape:"circle",icon:"file-protect",size:"small"})))}}],a.showDetailModal=function(e){a.setState({detailID:e}),a.handleModalVisible(!0)},a.modalSuccess=function(){var e=a.state,t=e.pageBean,n=e.baseQuery,i=e.formValues;a.getList({pageBean:t,querys:n.concat(i.length?i:a.getSiteIN())})},a.getList=function(e){(0,a.props.dispatch)({type:"LawmentStatic/fetch",payload:e})},a.getSiteIN=function(){return[{property:"siteCode",value:a.state.siteList.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}]},a.treeSelectChange=function(e,t){a.props.form.setFieldsValue({siteCode:""}),a.getSite(e),a.setState({organCode:e})},a.getSite=function(e,t){var n=a.props;(0,n.dispatch)({type:"Site/siteByUserSite",payload:{organId:e,siteIds:n.siteList.map(function(e){return e.code})},callback:function(e){var n=e.map(function(e){return"2"===e.siteType?{code:e.siteCode,name:e.siteName}:""});a.setState({siteList:n}),t&&t(n)}})},a.handleStandardTableChange=function(e){var t=a.state,n=t.formValues,i=t.baseQuery,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:i.concat(n.length?n:a.getSiteIN())};a.getList(l)},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.siteList,i=a.state,l=i.pageBean,r=i.baseQuery;t.resetFields(),a.setState({formValues:[],siteList:n},function(){a.getList({pageBean:l,querys:r.concat(a.getSiteIN())})})},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.state,i=n.pageBean,l=n.baseQuery,r=[t.siteCode?{property:"siteCode",value:t.siteCode||"",group:"main",operation:"EQUAL",relation:"AND"}:a.getSiteIN()[0].value.length?a.getSiteIN()[0]:{},{property:"overLoadRate",value:t.overLoadRateStart&&t.overLoadRateEnd?[t.overLoadRateStart,t.overLoadRateEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"axleNumber",value:"other"===t.axleNumber?6:t.axleNumber||"",group:"main",operation:"other"===t.axleNumber?"GREAT":"EQUAL",relation:"AND"},{property:"previewTime",value:t.previewTime?[re()(t.previewTime[0]).format("YYYY-MM-DD HH:mm:ss"),re()(t.previewTime[1]).format("YYYY-MM-DD HH:mm:ss")]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"totalLoad",value:t.totalLoadStart&&t.totalLoadEnd?[1e3*t.totalLoadStart,1e3*t.totalLoadEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"carNo",value:t.carNo||"",group:"main",operation:"LIKE",relation:"AND"}].filter(function(e){return e.value});a.setState({formValues:r}),a.getList({pageBean:i,querys:l.concat(r)})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e}),e||a.setState({detailID:""})},a}return G()(t,e),k()(t,[{key:"componentDidMount",value:function(){var e=this.props.siteList,t=this.state,a=t.pageBean,n=t.baseQuery,i=[{property:"siteCode",value:e.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}];this.getList({pageBean:a,querys:n.concat(i)}),this.setState({siteList:e})}},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.system.treeList,a=e.form.getFieldDecorator,n=this.state.siteList,i=Object(q.w)("organId").toString();return O.a.createElement(ie.a,{onSubmit:this.handleSearch,layout:"inline"},O.a.createElement(J.a,{gutter:16},O.a.createElement(_.a,{md:5,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),O.a.createElement(ke,{style:{flex:1}},a("name")(O.a.createElement($.a,{className:ve.a.inputGroupLeftRadius,treeData:t,treeDefaultExpandedKeys:[i],style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测点"),O.a.createElement(ke,{style:{flex:1}},a("siteCode")(O.a.createElement(ne.a,{dropdownMatchSelectWidth:!1,className:ve.a.inputGroupLeftRadius,placeholder:"请选择"},n.map(function(e){return O.a.createElement(Be,{key:e.code,value:e.code},e.name)})))))),O.a.createElement(_.a,{md:5,sm:24},O.a.createElement(X.a.Group,{compact:!0},O.a.createElement(ke,{style:{display:"inline-block",width:"60%"}},a("overLoadRateStart")(O.a.createElement(X.a,{className:"".concat(ve.a.inputGroupRightRadius," ").concat(ve.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),O.a.createElement(ke,{style:{display:"inline-block",width:"40%"}},a("overLoadRateEnd")(O.a.createElement(X.a,{className:ve.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),O.a.createElement(ke,{style:{flex:1}},a("axleNumber")(O.a.createElement(ne.a,{className:ve.a.inputGroupLeftRadius,placeholder:"请选择"},O.a.createElement(Be,{value:""},"全部轴数"),O.a.createElement(Be,{value:2},"2"),O.a.createElement(Be,{value:3},"3"),O.a.createElement(Be,{value:4},"4"),O.a.createElement(Be,{value:5},"5"),O.a.createElement(Be,{value:6},"6"),O.a.createElement(Be,{value:"other"},"其他")))))),O.a.createElement(_.a,{md:6,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),O.a.createElement(ke,{style:{flex:1}},a("previewTime")(O.a.createElement(Z.a.RangePicker,{className:ve.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[re()("00:00:00","HH:mm:ss"),re()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})))))),O.a.createElement(J.a,{gutter:16},O.a.createElement(_.a,{md:5,sm:24},O.a.createElement(X.a.Group,{compact:!0},O.a.createElement(ke,{style:{display:"inline-block",width:"50%"}},a("totalLoadStart")(O.a.createElement(X.a,{className:"".concat(ve.a.inputGroupRightRadius," ").concat(ve.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),O.a.createElement(ke,{style:{display:"inline-block",width:"50%"}},a("totalLoadEnd")(O.a.createElement(X.a,{className:ve.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement(ke,null,a("carNo")(O.a.createElement(X.a,{addonBefore:"车牌号",placeholder:"请输入"})))),O.a.createElement(_.a,{md:15,sm:24},O.a.createElement("div",{style:{overflow:"hidden"}},O.a.createElement("div",{style:{float:"right",marginBottom:24}},O.a.createElement(te.a,{type:"primary",htmlType:"submit"},"查询"),O.a.createElement(te.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,t=e.LawmentStatic.data,a=e.loading,n=this.state,i=n.modalVisible,l=n.detailID,r={handleModalVisible:this.handleModalVisible,detailID:l,modalSuccess:this.modalSuccess};return O.a.createElement(P.Fragment,null,O.a.createElement("div",{className:fe.a.tableList},O.a.createElement("div",{className:fe.a.tableListForm},this.renderSimpleForm()),O.a.createElement(oe.a,{tableAlert:!1,selectedRows:0,rowSelection:null,loading:a,data:t,size:"middle",columns:this.columns,onChange:this.handleStandardTableChange})),i&&l?O.a.createElement(Ve,K()({},r,{modalVisible:i})):null)}}]),t}(P.PureComponent))||f)||f,Ae=Object(z.connect)(function(e){return{LawmentStatic:e.LawmentStatic,loading:e.loading.models.LawmentStatic}})(y=ie.a.create()((S=v=function(e){function t(e){var a;return T()(this,t),(a=Y()(this,H()(t).call(this,e))).state={openRecord:[],busStaticData:{}},a.getDetail=function(){var e=a.props;(0,e.dispatch)({type:"LawmentStatic/detail",payload:{id:e.detailID},callback:function(e){a.setState({openRecord:e.openRecord,busStaticData:e.busStaticData})}})},a.modalSuccess=function(){var e=a.props.handleModalVisible;setTimeout(function(){e(),a.props.modalSuccess()},300)},a.title=function(){var e=a.state.busStaticData;return O.a.createElement("div",{className:me.a.modalHeader},O.a.createElement("div",{className:me.a.title},O.a.createElement("span",{className:me.a.value},e.carNo),O.a.createElement("span",{className:me.a.time},re()(e.previewTime).format("YYYY-M-D HH:mm:ss"))))},a.columns=[{title:"操作员",dataIndex:"executor"},{title:"办理时间",dataIndex:"executorTime"},{title:"状态",dataIndex:"logType"},{title:"原因",dataIndex:"remark"}],a.myCarousel=O.a.createRef(),a}return G()(t,e),k()(t,[{key:"componentDidMount",value:function(){this.getDetail()}},{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.handleModalVisible,n=e.loading,i=this.state,l=i.busStaticData,r=i.openRecord;return O.a.createElement(P.Fragment,null,O.a.createElement(M.a,{destroyOnClose:!0,className:me.a.modalStyle,title:this.title(),visible:t,onCancel:function(){return a()},footer:null,width:1150},O.a.createElement(he.a,{detail:l}),r.length?O.a.createElement("div",{className:me.a.detailMsg,style:{marginTop:16}},O.a.createElement("div",{className:me.a.detailMsgTitle},O.a.createElement(se.a,{type:"table"})," 操作记录"),O.a.createElement("div",{className:me.a.recordList,style:{padding:"0 20px 20px"}},O.a.createElement(ue.a,{loading:n,list:r,columns:this.columns}))):null))}}]),t}(P.PureComponent),v.defaultProps={handleModalVisible:function(){}},y=S))||y)||y,He=ie.a.Item,Fe=ne.a.Option,Ge=Object(z.connect)(function(e){var t=e.LawmentStatic,a=e.loading,n=e.system;return{Site:e.Site,system:n,LawmentStatic:t,loading:a.models.LawmentStatic}})(b=ie.a.create()(b=function(e){function t(){var e,a;T()(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Y()(this,(e=H()(t)).call.apply(e,[this].concat(i)))).state={modalVisible:!1,formValues:[],siteList:[],detailID:"",pageBean:{page:1,pageSize:10,showTotal:!0},baseQuery:[{property:"overLoad",value:0,group:"main",operation:"GREAT",relation:"AND"},{property:"isCheck",value:4,group:"main",operation:"EQUAL",relation:"AND"}]},a.columns=[{title:"监测站",dataIndex:"siteName"},{title:"车牌号",dataIndex:"carNo"},{title:"检测时间",dataIndex:"previewTime",render:function(e){return re()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"轴数",dataIndex:"axleNumber"},{title:"总重(t)",dataIndex:"totalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"限重(t)",dataIndex:"weightLimited",render:function(e){return O.a.createElement(ae.a,{color:"#87d068"},(e/1e3).toFixed(2)," ")}},{title:"超重(t)",dataIndex:"overLoad",render:function(e){return e>0?O.a.createElement(ae.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"overLoadRate",render:function(e){return(1*e).toFixed(2)}},{title:"操作",width:70,render:function(e,t){return O.a.createElement(P.Fragment,null,O.a.createElement(ee.a,{placement:"left",title:"详情"},O.a.createElement(te.a,{onClick:function(){return a.showDetailModal(t.id)},type:"primary",shape:"circle",icon:"eye",size:"small"})))}}],a.showDetailModal=function(e){a.setState({detailID:e}),a.handleModalVisible(!0)},a.getList=function(e){(0,a.props.dispatch)({type:"LawmentStatic/fetch",payload:e})},a.getSiteIN=function(){return[{property:"siteCode",value:a.state.siteList.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}]},a.treeSelectChange=function(e,t){a.props.form.setFieldsValue({siteCode:""}),a.getSite(e),a.setState({organCode:e})},a.getSite=function(e,t){var n=a.props;(0,n.dispatch)({type:"Site/siteByUserSite",payload:{organId:e,siteIds:n.siteList.map(function(e){return e.code})},callback:function(e){var n=e.map(function(e){return"2"===e.siteType?{code:e.siteCode,name:e.siteName}:""});a.setState({siteList:n}),t&&t(n)}})},a.handleStandardTableChange=function(e){var t=a.state,n=t.formValues,i=t.baseQuery,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:i.concat(n.length?n:a.getSiteIN())};a.getList(l)},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.siteList,i=a.state,l=i.pageBean,r=i.baseQuery;t.resetFields(),a.setState({formValues:[],siteList:n},function(){a.getList({pageBean:l,querys:r.concat(a.getSiteIN())})})},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.state,i=n.pageBean,l=n.baseQuery,r=[t.siteCode?{property:"siteCode",value:t.siteCode||"",group:"main",operation:"EQUAL",relation:"AND"}:a.getSiteIN()[0].value.length?a.getSiteIN()[0]:{},{property:"overLoadRate",value:t.overLoadRateStart&&t.overLoadRateEnd?[t.overLoadRateStart,t.overLoadRateEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"axleNumber",value:"other"===t.axleNumber?6:t.axleNumber||"",group:"main",operation:"other"===t.axleNumber?"GREAT":"EQUAL",relation:"AND"},{property:"previewTime",value:t.previewTime?[re()(t.previewTime[0]).format("YYYY-MM-DD HH:mm:ss"),re()(t.previewTime[1]).format("YYYY-MM-DD HH:mm:ss")]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"totalLoad",value:t.totalLoadStart&&t.totalLoadEnd?[1e3*t.totalLoadStart,1e3*t.totalLoadEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"carNo",value:t.carNo||"",group:"main",operation:"LIKE",relation:"AND"}].filter(function(e){return e.value});a.setState({formValues:r}),a.getList({pageBean:i,querys:l.concat(r)})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e}),e||a.setState({detailID:""})},a}return G()(t,e),k()(t,[{key:"componentDidMount",value:function(){var e=this.props.siteList,t=this.state,a=t.pageBean,n=t.baseQuery,i=[{property:"siteCode",value:e.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}];this.getList({pageBean:a,querys:n.concat(i)}),this.setState({siteList:e})}},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.system.treeList,a=e.form.getFieldDecorator,n=this.state.siteList,i=Object(q.w)("organId").toString();return O.a.createElement(ie.a,{onSubmit:this.handleSearch,layout:"inline"},O.a.createElement(J.a,{gutter:16},O.a.createElement(_.a,{md:5,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),O.a.createElement(He,{style:{flex:1}},a("name")(O.a.createElement($.a,{className:ve.a.inputGroupLeftRadius,treeData:t,treeDefaultExpandedKeys:[i],style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测点"),O.a.createElement(He,{style:{flex:1}},a("siteCode")(O.a.createElement(ne.a,{dropdownMatchSelectWidth:!1,className:ve.a.inputGroupLeftRadius,placeholder:"请选择"},n.map(function(e,t){return O.a.createElement(Fe,{key:t,value:e.code},e.name)})))))),O.a.createElement(_.a,{md:5,sm:24},O.a.createElement(X.a.Group,{compact:!0},O.a.createElement(He,{style:{display:"inline-block",width:"60%"}},a("overLoadRateStart")(O.a.createElement(X.a,{className:"".concat(ve.a.inputGroupRightRadius," ").concat(ve.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),O.a.createElement(He,{style:{display:"inline-block",width:"40%"}},a("overLoadRateEnd")(O.a.createElement(X.a,{className:ve.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),O.a.createElement(He,{style:{flex:1}},a("axleNumber")(O.a.createElement(ne.a,{className:ve.a.inputGroupLeftRadius,placeholder:"请选择"},O.a.createElement(Fe,{value:""},"全部轴数"),O.a.createElement(Fe,{value:2},"2"),O.a.createElement(Fe,{value:3},"3"),O.a.createElement(Fe,{value:4},"4"),O.a.createElement(Fe,{value:5},"5"),O.a.createElement(Fe,{value:6},"6"),O.a.createElement(Fe,{value:"other"},"其他")))))),O.a.createElement(_.a,{md:6,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),O.a.createElement(He,{style:{flex:1}},a("previewTime")(O.a.createElement(Z.a.RangePicker,{className:ve.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[re()("00:00:00","HH:mm:ss"),re()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})))))),O.a.createElement(J.a,{gutter:16},O.a.createElement(_.a,{md:5,sm:24},O.a.createElement(X.a.Group,{compact:!0},O.a.createElement(He,{style:{display:"inline-block",width:"50%"}},a("totalLoadStart")(O.a.createElement(X.a,{className:"".concat(ve.a.inputGroupRightRadius," ").concat(ve.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),O.a.createElement(He,{style:{display:"inline-block",width:"50%"}},a("totalLoadEnd")(O.a.createElement(X.a,{className:ve.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement(He,null,a("carNo")(O.a.createElement(X.a,{addonBefore:"车牌号",placeholder:"请输入"})))),O.a.createElement(_.a,{md:15,sm:24},O.a.createElement("div",{style:{overflow:"hidden"}},O.a.createElement("div",{style:{float:"right",marginBottom:24}},O.a.createElement(te.a,{type:"primary",htmlType:"submit"},"查询"),O.a.createElement(te.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,t=e.LawmentStatic.data,a=e.loading,n=this.state,i=n.modalVisible,l=n.detailID,r={handleModalVisible:this.handleModalVisible,detailID:l};return O.a.createElement(P.Fragment,null,O.a.createElement("div",{className:fe.a.tableList},O.a.createElement("div",{className:fe.a.tableListForm},this.renderSimpleForm()),O.a.createElement(oe.a,{tableAlert:!1,selectedRows:0,rowSelection:null,loading:a,data:t,size:"middle",columns:this.columns,onChange:this.handleStandardTableChange})),i&&l?O.a.createElement(Ae,K()({},r,{modalVisible:i})):null)}}]),t}(P.PureComponent))||b)||b,Qe=(a("sHG+"),Object(z.connect)(function(e){return{LawmentStatic:e.LawmentStatic,loading:e.loading.models.LawmentStatic}})(L=ie.a.create()((w=N=function(e){function t(e){var a;return T()(this,t),(a=Y()(this,H()(t).call(this,e))).state={openRecord:[],busStaticData:{}},a.getDetail=function(){var e=a.props;(0,e.dispatch)({type:"LawmentStatic/detail",payload:{id:e.detailID},callback:function(e){a.setState({openRecord:e.openRecord,busStaticData:e.busStaticData})}})},a.modalSuccess=function(){var e=a.props.handleModalVisible;setTimeout(function(){e(),a.props.modalSuccess()},300)},a.title=function(){var e=a.state.busStaticData;return O.a.createElement("div",{className:me.a.modalHeader},O.a.createElement("div",{className:me.a.title},O.a.createElement("span",{className:me.a.value},e.carNo),O.a.createElement("span",{className:me.a.time},re()(e.previewTime).format("YYYY-M-D HH:mm:ss"))))},a.columns=[{title:"操作员",dataIndex:"executor"},{title:"办理时间",dataIndex:"executorTime"},{title:"状态",dataIndex:"logType"},{title:"原因",dataIndex:"remark"}],a.myCarousel=O.a.createRef(),a}return G()(t,e),k()(t,[{key:"componentDidMount",value:function(){this.getDetail()}},{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.handleModalVisible,n=e.loading,i=this.state,l=i.busStaticData,r=i.openRecord;return O.a.createElement(P.Fragment,null,O.a.createElement(M.a,{destroyOnClose:!0,className:me.a.modalStyle,title:this.title(),visible:t,onCancel:function(){return a()},footer:null,width:1150},O.a.createElement(he.a,{detail:l}),O.a.createElement("div",{className:me.a.detailMsg,style:{marginTop:16}},O.a.createElement("div",{className:me.a.detailMsgTitle},O.a.createElement(se.a,{type:"stop"})," 作废原因"),O.a.createElement("p",{style:{padding:"0 20px 20px"}},l.reson)),r.length?O.a.createElement("div",{className:me.a.detailMsg,style:{marginTop:16}},O.a.createElement("div",{className:me.a.detailMsgTitle},O.a.createElement(se.a,{type:"table"})," 操作记录"),O.a.createElement("div",{className:me.a.recordList,style:{padding:"0 20px 20px"}},O.a.createElement(ue.a,{loading:n,list:r,columns:this.columns}))):null))}}]),t}(P.PureComponent),N.defaultProps={handleModalVisible:function(){}},L=w))||L)||L),Pe=ie.a.Item,Oe=ne.a.Option,ze=Object(z.connect)(function(e){var t=e.LawmentStatic,a=e.loading,n=e.system;return{Site:e.Site,system:n,LawmentStatic:t,loading:a.models.LawmentStatic}})(D=ie.a.create()(D=function(e){function t(){var e,a;T()(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Y()(this,(e=H()(t)).call.apply(e,[this].concat(i)))).state={modalVisible:!1,formValues:[],siteList:[],detailID:"",pageBean:{page:1,pageSize:10,showTotal:!0},baseQuery:[{property:"overLoad",value:0,group:"main",operation:"GREAT",relation:"AND"},{property:"isCheck",value:2,group:"main",operation:"EQUAL",relation:"AND"}]},a.columns=[{title:"监测站",dataIndex:"siteName"},{title:"车牌号",dataIndex:"carNo"},{title:"检测时间",dataIndex:"previewTime",render:function(e){return re()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"轴数",dataIndex:"axleNumber"},{title:"总重(t)",dataIndex:"totalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"限重(t)",dataIndex:"weightLimited",render:function(e){return O.a.createElement(ae.a,{color:"#87d068"},(e/1e3).toFixed(2)," ")}},{title:"超重(t)",dataIndex:"overLoad",render:function(e){return e>0?O.a.createElement(ae.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"overLoadRate",render:function(e){return(1*e).toFixed(2)}},{title:"状态",dataIndex:"isCheck",render:function(e){return 2===e?"已作废":"正常"}},{title:"操作",width:70,render:function(e,t){return O.a.createElement(P.Fragment,null,O.a.createElement(ee.a,{placement:"left",title:"详情"},O.a.createElement(te.a,{onClick:function(){return a.showDetailModal(t.id)},type:"primary",shape:"circle",icon:"eye",size:"small"})))}}],a.showDetailModal=function(e){a.setState({detailID:e}),a.handleModalVisible(!0)},a.getList=function(e){(0,a.props.dispatch)({type:"LawmentStatic/fetch",payload:e})},a.getSiteIN=function(){return[{property:"siteCode",value:a.state.siteList.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}]},a.treeSelectChange=function(e,t){a.props.form.setFieldsValue({siteCode:""}),a.getSite(e),a.setState({organCode:e})},a.getSite=function(e,t){var n=a.props;(0,n.dispatch)({type:"Site/siteByUserSite",payload:{organId:e,siteIds:n.siteList.map(function(e){return e.code})},callback:function(e){var n=e.map(function(e){return"2"===e.siteType?{code:e.siteCode,name:e.siteName}:""});a.setState({siteList:n}),t&&t(n)}})},a.handleStandardTableChange=function(e){var t=a.state,n=t.formValues,i=t.baseQuery,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:i.concat(n.length?n:a.getSiteIN())};a.getList(l)},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.siteList,i=a.state,l=i.pageBean,r=i.baseQuery;t.resetFields(),a.setState({formValues:[],siteList:n},function(){a.getList({pageBean:l,querys:r.concat(a.getSiteIN())})})},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.state,i=n.pageBean,l=n.baseQuery,r=[t.siteCode?{property:"siteCode",value:t.siteCode||"",group:"main",operation:"EQUAL",relation:"AND"}:a.getSiteIN()[0].value.length?a.getSiteIN()[0]:{},{property:"overLoadRate",value:t.overLoadRateStart&&t.overLoadRateEnd?[t.overLoadRateStart,t.overLoadRateEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"axleNumber",value:"other"===t.axleNumber?6:t.axleNumber||"",group:"main",operation:"other"===t.axleNumber?"GREAT":"EQUAL",relation:"AND"},{property:"previewTime",value:t.previewTime?[re()(t.previewTime[0]).format("YYYY-MM-DD HH:mm:ss"),re()(t.previewTime[1]).format("YYYY-MM-DD HH:mm:ss")]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"totalLoad",value:t.totalLoadStart&&t.totalLoadEnd?[1e3*t.totalLoadStart,1e3*t.totalLoadEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"carNo",value:t.carNo||"",group:"main",operation:"LIKE",relation:"AND"}].filter(function(e){return e.value});a.setState({formValues:r}),a.getList({pageBean:i,querys:l.concat(r)})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e}),e||a.setState({detailID:""})},a}return G()(t,e),k()(t,[{key:"componentDidMount",value:function(){var e=this.props.siteList,t=this.state,a=t.pageBean,n=t.baseQuery,i=[{property:"siteCode",value:e.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}];this.getList({pageBean:a,querys:n.concat(i)}),this.setState({siteList:e})}},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.system.treeList,a=e.form.getFieldDecorator,n=this.state.siteList,i=Object(q.w)("organId").toString();return O.a.createElement(ie.a,{onSubmit:this.handleSearch,layout:"inline"},O.a.createElement(J.a,{gutter:16},O.a.createElement(_.a,{md:5,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),O.a.createElement(Pe,{style:{flex:1}},a("name")(O.a.createElement($.a,{className:ve.a.inputGroupLeftRadius,treeData:t,treeDefaultExpandedKeys:[i],style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测点"),O.a.createElement(Pe,{style:{flex:1}},a("siteCode")(O.a.createElement(ne.a,{dropdownMatchSelectWidth:!1,className:ve.a.inputGroupLeftRadius,placeholder:"请选择"},n.map(function(e,t){return O.a.createElement(Oe,{key:e.code,value:e.code},e.name)})))))),O.a.createElement(_.a,{md:5,sm:24},O.a.createElement(X.a.Group,{compact:!0},O.a.createElement(Pe,{style:{display:"inline-block",width:"60%"}},a("overLoadRateStart")(O.a.createElement(X.a,{className:"".concat(ve.a.inputGroupRightRadius," ").concat(ve.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),O.a.createElement(Pe,{style:{display:"inline-block",width:"40%"}},a("overLoadRateEnd")(O.a.createElement(X.a,{className:ve.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),O.a.createElement(Pe,{style:{flex:1}},a("axleNumber")(O.a.createElement(ne.a,{className:ve.a.inputGroupLeftRadius,placeholder:"请选择"},O.a.createElement(Oe,{value:""},"全部轴数"),O.a.createElement(Oe,{value:2},"2"),O.a.createElement(Oe,{value:3},"3"),O.a.createElement(Oe,{value:4},"4"),O.a.createElement(Oe,{value:5},"5"),O.a.createElement(Oe,{value:6},"6"),O.a.createElement(Oe,{value:"other"},"其他")))))),O.a.createElement(_.a,{md:6,sm:24},O.a.createElement("div",{className:ve.a.inputMain},O.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),O.a.createElement(Pe,{style:{flex:1}},a("previewTime")(O.a.createElement(Z.a.RangePicker,{className:ve.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[re()("00:00:00","HH:mm:ss"),re()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})))))),O.a.createElement(J.a,{gutter:16},O.a.createElement(_.a,{md:5,sm:24},O.a.createElement(X.a.Group,{compact:!0},O.a.createElement(Pe,{style:{display:"inline-block",width:"50%"}},a("totalLoadStart")(O.a.createElement(X.a,{className:"".concat(ve.a.inputGroupRightRadius," ").concat(ve.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),O.a.createElement(Pe,{style:{display:"inline-block",width:"50%"}},a("totalLoadEnd")(O.a.createElement(X.a,{className:ve.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),O.a.createElement(_.a,{md:4,sm:24},O.a.createElement(Pe,null,a("carNo")(O.a.createElement(X.a,{addonBefore:"车牌号",placeholder:"请输入"})))),O.a.createElement(_.a,{md:15,sm:24},O.a.createElement("div",{style:{overflow:"hidden"}},O.a.createElement("div",{style:{float:"right",marginBottom:24}},O.a.createElement(te.a,{type:"primary",htmlType:"submit"},"查询"),O.a.createElement(te.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,t=e.LawmentStatic.data,a=e.loading,n=this.state,i=n.modalVisible,l=n.detailID,r={handleModalVisible:this.handleModalVisible,detailID:l};return O.a.createElement(P.Fragment,null,O.a.createElement("div",{className:fe.a.tableList},O.a.createElement("div",{className:fe.a.tableListForm},this.renderSimpleForm()),O.a.createElement(oe.a,{tableAlert:!1,selectedRows:0,rowSelection:null,loading:a,data:t,size:"middle",columns:this.columns,onChange:this.handleStandardTableChange})),i&&l?O.a.createElement(Qe,K()({},r,{modalVisible:i})):null)}}]),t}(P.PureComponent))||D)||D,qe=Q.a.Group,We=["/lawment/static"],je=Object(z.connect)(function(e){return{system:e.system}})(x=function(e){function t(){var e,a;T()(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Y()(this,(e=H()(t)).call.apply(e,[this].concat(i)))).state={tabKey:"",siteList:[],radioButtonList:""},a.tabChange=function(e){a.setState({tabKey:e.target.value})},a.renderTitle=function(){var e=a.state,t=e.tabKey,n=e.radioButtonList;if(t)return O.a.createElement("div",{style:{clear:"both"}},O.a.createElement("span",{style:{display:"inline-block",lineHeight:"32px"}},"静态执法"),O.a.createElement(qe,{defaultValue:t,style:{float:"right"},buttonStyle:"solid",onChange:a.tabChange},n.length?n.map(function(e){return O.a.createElement(Q.a.Button,{key:e.path,value:e.path},e.name)}):null))},a.renderChildrenByTabKey=function(e,t){var a="";switch(e){case"/traffic/lawment/static/check":a=O.a.createElement(Le,{siteList:t});break;case"/traffic/lawment/static/casehand":a=O.a.createElement(Te,{siteList:t});break;case"/traffic/lawment/static/archive":a=O.a.createElement(Ye,{siteList:t});break;case"/traffic/lawment/static/caseArchive":a=O.a.createElement(Ge,{siteList:t});break;case"/traffic/lawment/static/invalid":a=O.a.createElement(ze,{siteList:t});break;default:a=null}return a},a}return G()(t,e),k()(t,[{key:"componentDidMount",value:function(){var e=this;if(Object(q.b)(We[0])){var t=Object(q.G)(this.props.match.url);this.setState({radioButtonList:t,tabKey:t.length?t[0].path:""}),(0,this.props.dispatch)({type:"system/userSite",payload:{siteType:2},callback:function(t){if(t.length){var a=t.map(function(e){var t=Object.keys(e);return{code:t[0],name:e[t[0]]}});e.setState({siteList:a})}else M.a.error({title:"提示",content:"您没有绑定站点！！！"})}})}}},{key:"render",value:function(){var e=this.state,t=e.tabKey,a=e.siteList;return O.a.createElement(W.GridContent,null,Object(q.b)(We[0])?O.a.createElement(R.a,{bordered:!1,title:this.renderTitle()},"[]"!==JSON.stringify(a)?this.renderChildrenByTabKey(t,a):O.a.createElement(I.a,{image:I.a.PRESENTED_IMAGE_SIMPLE})):O.a.createElement(j.a,{to:"/exception/403"}))}}]),t}(P.PureComponent))||x;t.default=je}}]);