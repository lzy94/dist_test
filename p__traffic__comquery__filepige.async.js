(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{IzSM:function(e,a,t){"use strict";t.r(a);var n,r=t("pVnL"),i=t.n(r),o=(t("IzEo"),t("bx4M")),l=(t("14J3"),t("BMrR")),s=(t("jCWc"),t("kPKH")),c=(t("5NDa"),t("5rEg")),d=(t("miYZ"),t("tsqr")),m=(t("/zsF"),t("PArb")),p=(t("5Dmo"),t("3S7+")),u=(t("+L6B"),t("2/Rp")),h=(t("+BJd"),t("mr32")),y=t("lwsE"),f=t.n(y),g=t("W8MJ"),E=t.n(g),b=t("a1gu"),w=t.n(b),v=t("Nsbk"),L=t.n(v),N=t("7W2i"),D=t.n(N),R=(t("y8nQ"),t("Vl3Y")),B=t("q1tI"),F=t.n(B),S=t("MuoO"),k=t("mf+E"),x=t("CkN6"),C=(t("riYV"),t("9zHi")),I=t.n(C),A=t("ns75"),V=t.n(A),M=t("k5DC"),z=t("+n12"),T=["/comquery/filepige"],G=R.a.Item,Q=Object(S.connect)(function(e){var a=e.DynamicLaw,t=e.loading,n=e.system,r=e.user;return{File:e.File,system:n,currentUser:r.currentUser,DynamicLaw:a,loading:t.models.DynamicLaw}})(n=R.a.create()(n=function(e){function a(){var e,t;f()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=w()(this,(e=L()(a)).call.apply(e,[this].concat(r)))).state={modalVisible:!1,formValues:[],detailID:0,importLoading:!1,previewCode:"",pageBean:{page:1,pageSize:10,showTotal:!0},baseQuery:{property:"isArchive",value:2,group:"main",operation:"EQUAL",relation:"AND"}},t.columns=[{title:"案卷号",dataIndex:"caseNo"},{title:"当事人",dataIndex:"partyName"},{title:"车牌号",dataIndex:"caseReason",render:function(e){return e?e.split(",")[0]:""}},{title:"总重(t)",dataIndex:"weight",render:function(e){return(e/1e3).toFixed(2)}},{title:"超重(t)",dataIndex:"limited",render:function(e){return e>0?F.a.createElement(h.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"处罚金额",dataIndex:"punishMoney"},{title:"结案日期",dataIndex:"closeTime"},{title:"承办人",dataIndex:"undertaker"},{title:"状态",dataIndex:"isArchive",render:function(){return"已归档"}},{title:"操作",width:100,render:function(e,a){return F.a.createElement(B.Fragment,null,F.a.createElement(p.a,{placement:"left",title:"查看详情"},F.a.createElement(u.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),F.a.createElement(m.a,{type:"vertical"}),F.a.createElement(p.a,{placement:"left",title:"下载"},F.a.createElement(u.a,{onClick:function(){return t.downLoadFile(a)},type:"primary",shape:"circle",icon:"download",size:"small"})))}}],t.showDetailModal=function(e){t.setState({detailID:e.id,previewCode:e.previewCode}),t.handleModalVisible(!0)},t.downLoadFile=function(e){var a=d.a.loading("正在下载文件······",0),n=t.props.dispatch,r=e.caseReason?"".concat(e.caseReason.split(",")[0]," 案卷"):"案卷";n({type:"File/downLoad",payload:{id:e.fileId,fileName:r,extensionName:"doc"},callback:function(e){404===e&&d.a.error("模板异常，下载失败"),setTimeout(a,2e3)}})},t.getList=function(e){(0,t.props.dispatch)({type:"DynamicLaw/getBusDynamicLawCase",payload:e})},t.handleStandardTableChange=function(e){var a=t.state,n=a.formValues,r=a.baseQuery,i={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:[r].concat(n)};t.getList(i)},t.handleFormReset=function(){var e=t.props.form,a=t.state,n=a.pageBean,r=a.baseQuery;e.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:n,querys:[r]})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.state,r=n.pageBean,i=n.baseQuery,o=a.overLoadRateStart,l=a.overLoadRateEnd,s=a.totalLoadStart,c=a.totalLoadEnd;if(!o&&!l||Object(z.F)(o)&&Object(z.F)(l))if(!s&&!c||Object(z.F)(s)&&Object(z.F)(c)){var m=[{property:"caseNo",value:a.caseNo?a.caseNo:"",group:"main",operation:"LIKE",relation:"AND"},{property:"limited",value:o&&l?[o,l]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"axisNum",value:"other"===a.axisNum?6:a.axisNum||"",group:"main",operation:"other"===a.axisNum?"GREAT":"EQUAL",relation:"AND"},{property:"weight",value:s&&c?[1e3*s,1e3*c]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"caseReason",value:a.caseReason||"",group:"main",operation:"LIKE",relation:"AND"}].filter(function(e){return e.value});t.setState({formValues:m}),t.getList({pageBean:r,querys:[i].concat(m)})}else d.a.error("总重请输入数字");else d.a.error("超限幅度请输入数字")}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.importClick=function(){t.setState({importLoading:!0});var e=t.props.dispatch,a=t.state,n=a.pageBean,r=a.baseQuery,i=a.formValues;e({type:"DynamicLaw/exportBusDynamicLawCase",payload:{pageBean:n,querys:[r].concat(i)},callback:function(e){404===e&&d.a.error("暂无数据"),t.setState({importLoading:!1})}})},t}return D()(a,e),E()(a,[{key:"componentDidMount",value:function(){if(Object(z.c)(T[0])){var e=this.state,a=e.pageBean,t=e.baseQuery;this.getList({pageBean:a,querys:[t]})}}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,a=this.state.importLoading;return F.a.createElement(R.a,{onSubmit:this.handleSearch,layout:"inline"},F.a.createElement(l.a,{gutter:16},F.a.createElement(s.a,{md:4,sm:24},F.a.createElement(G,null,e("caseNo")(F.a.createElement(c.a,{addonBefore:"案卷号"})))),F.a.createElement(s.a,{md:4,sm:24},F.a.createElement(G,null,e("caseReason")(F.a.createElement(c.a,{addonBefore:"车牌号",placeholder:"请输入"})))),F.a.createElement(s.a,{md:5,sm:24},F.a.createElement(c.a.Group,{compact:!0},F.a.createElement(G,{style:{display:"inline-block",width:"50%"}},e("overLoadRateStart")(F.a.createElement(c.a,{className:"".concat(V.a.inputGroupRightRadius," ").concat(V.a.inputGroupRightborder),addonBefore:"超限幅度",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),F.a.createElement(G,{style:{display:"inline-block",width:"50%"}},e("overLoadRateEnd")(F.a.createElement(c.a,{className:V.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),F.a.createElement(s.a,{md:5,sm:24},F.a.createElement(c.a.Group,{compact:!0},F.a.createElement(G,{style:{display:"inline-block",width:"50%"}},e("totalLoadStart")(F.a.createElement(c.a,{className:V.a.inputGroupRightRadius+" "+V.a.inputGroupRightborder,addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),F.a.createElement(G,{style:{display:"inline-block",width:"50%"}},e("totalLoadEnd")(F.a.createElement(c.a,{className:V.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),F.a.createElement(s.a,{md:6,sm:24},F.a.createElement("div",{style:{overflow:"hidden"}},F.a.createElement("div",{style:{float:"right",marginBottom:24}},F.a.createElement(u.a,{type:"primary",htmlType:"submit"},"查询"),F.a.createElement(u.a,{className:V.a.import,icon:"import",onClick:this.importClick,loading:a,disabled:a,style:{marginLeft:8}},"导出"),F.a.createElement(u.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.DynamicLaw.data,t=e.loading,n=this.state,r=n.modalVisible,l=n.detailID,s=n.previewCode,c={handleModalVisible:this.handleModalVisible,detailID:l,previewCode:s};return F.a.createElement(B.Fragment,null,Object(z.c)(T[0])?null:F.a.createElement(k.a,{to:"/exception/403"}),F.a.createElement(o.a,{bordered:!1},F.a.createElement("div",{className:I.a.tableList},F.a.createElement("div",{className:I.a.tableListForm},this.renderSimpleForm()),F.a.createElement(x.a,{tableAlert:!1,size:"middle",selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange}))),r&&l?F.a.createElement(M.a,i()({},c,{modalVisible:r})):null)}}]),a}(B.PureComponent))||n)||n;a.default=Q}}]);