(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{IzSM:function(e,a,t){"use strict";t.r(a);var n,r=t("pVnL"),i=t.n(r),o=(t("IzEo"),t("bx4M")),l=(t("14J3"),t("BMrR")),d=(t("jCWc"),t("kPKH")),s=(t("5NDa"),t("5rEg")),c=(t("miYZ"),t("tsqr")),m=(t("/zsF"),t("PArb")),p=(t("5Dmo"),t("3S7+")),u=(t("+L6B"),t("2/Rp")),h=(t("+BJd"),t("mr32")),y=t("lwsE"),E=t.n(y),g=t("W8MJ"),f=t.n(g),w=t("a1gu"),b=t.n(w),v=t("Nsbk"),L=t.n(v),N=t("7W2i"),D=t.n(N),R=(t("y8nQ"),t("Vl3Y")),S=t("q1tI"),B=t.n(S),k=t("MuoO"),x=t("mf+E"),C=t("CkN6"),I=(t("riYV"),t("9zHi")),F=t.n(I),V=t("ns75"),A=t.n(V),M=t("k5DC"),z=t("+n12"),G=["/comquery/filepige"],Q=R.a.Item,T=Object(k.connect)(function(e){var a=e.DynamicLaw,t=e.loading,n=e.system,r=e.user;return{File:e.File,system:n,currentUser:r.currentUser,DynamicLaw:a,loading:t.models.DynamicLaw}})(n=R.a.create()(n=function(e){function a(){var e,t;E()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=b()(this,(e=L()(a)).call.apply(e,[this].concat(r)))).state={modalVisible:!1,formValues:[],detailID:0,importLoading:!1,previewCode:"",pageBean:{page:1,pageSize:10,showTotal:!0},baseQuery:{property:"isArchive",value:2,group:"main",operation:"EQUAL",relation:"AND"}},t.columns=[{title:"案卷号",dataIndex:"caseNo"},{title:"当事人",dataIndex:"partyName"},{title:"车牌号",dataIndex:"caseReason",render:function(e){return e?e.split(",")[0]:""}},{title:"总重(t)",dataIndex:"weight",render:function(e){return(e/1e3).toFixed(2)}},{title:"超重(t)",dataIndex:"limited",render:function(e){return e>0?B.a.createElement(h.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"处罚金额",dataIndex:"punishMoney"},{title:"结案日期",dataIndex:"closeTime"},{title:"承办人",dataIndex:"undertaker"},{title:"状态",dataIndex:"isArchive",render:function(){return"已归档"}},{title:"操作",width:100,render:function(e,a){return B.a.createElement(S.Fragment,null,B.a.createElement(p.a,{placement:"left",title:"查看详情"},B.a.createElement(u.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),B.a.createElement(m.a,{type:"vertical"}),B.a.createElement(p.a,{placement:"left",title:"下载"},B.a.createElement(u.a,{onClick:function(){return t.downLoadFile(a)},type:"primary",shape:"circle",icon:"download",size:"small"})))}}],t.showDetailModal=function(e){t.setState({detailID:e.id,previewCode:e.previewCode}),t.handleModalVisible(!0)},t.downLoadFile=function(e){(0,t.props.dispatch)({type:"File/downLoad",payload:{id:e.fileId,fileName:"案卷",extensionName:"doc"},callback:function(e){404===e&&c.a.error("模板异常，下载失败")}})},t.getList=function(e){(0,t.props.dispatch)({type:"DynamicLaw/getBusDynamicLawCase",payload:e})},t.handleStandardTableChange=function(e){var a=t.state,n=a.formValues,r=a.baseQuery,i={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:[r].concat(n)};t.getList(i)},t.handleFormReset=function(){var e=t.props.form,a=t.state,n=a.pageBean,r=a.baseQuery;e.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:n,querys:[r]})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.state,r=n.pageBean,i=n.baseQuery,o=[{property:"caseNo",value:a.caseNo?a.caseNo:"",group:"main",operation:"LIKE",relation:"AND"},{property:"limited",value:a.overLoadRateStart&&a.overLoadRateEnd?[a.overLoadRateStart,a.overLoadRateEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"axisNum",value:"other"===a.axisNum?6:a.axisNum||"",group:"main",operation:"other"===a.axisNum?"GREAT":"EQUAL",relation:"AND"},{property:"weight",value:a.totalLoadStart&&a.totalLoadEnd?[1e3*a.totalLoadStart,1e3*a.totalLoadEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"caseReason",value:a.caseReason||"",group:"main",operation:"LIKE",relation:"AND"}].filter(function(e){return e.value});t.setState({formValues:o}),t.getList({pageBean:r,querys:[i].concat(o)})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.importClick=function(){t.setState({importLoading:!0});var e=t.props.dispatch,a=t.state,n=a.pageBean,r=a.baseQuery,i=a.formValues;e({type:"DynamicLaw/exportBusDynamicLawCase",payload:{pageBean:n,querys:[r].concat(i)},callback:function(e){404===e&&c.a.error("暂无数据"),t.setState({importLoading:!1})}})},t}return D()(a,e),f()(a,[{key:"componentDidMount",value:function(){if(Object(z.b)(G[0])){var e=this.state,a=e.pageBean,t=e.baseQuery;this.getList({pageBean:a,querys:[t]})}}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,a=this.state.importLoading;return B.a.createElement(R.a,{onSubmit:this.handleSearch,layout:"inline"},B.a.createElement(l.a,{gutter:16},B.a.createElement(d.a,{md:4,sm:24},B.a.createElement(Q,null,e("caseNo")(B.a.createElement(s.a,{addonBefore:"案卷号"})))),B.a.createElement(d.a,{md:4,sm:24},B.a.createElement(Q,null,e("caseReason")(B.a.createElement(s.a,{addonBefore:"车牌号",placeholder:"请输入"})))),B.a.createElement(d.a,{md:5,sm:24},B.a.createElement(s.a.Group,{compact:!0},B.a.createElement(Q,{style:{display:"inline-block",width:"50%"}},e("overLoadRateStart")(B.a.createElement(s.a,{className:"".concat(A.a.inputGroupRightRadius," ").concat(A.a.inputGroupRightborder),addonBefore:"超限幅度",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),B.a.createElement(Q,{style:{display:"inline-block",width:"50%"}},e("overLoadRateEnd")(B.a.createElement(s.a,{className:A.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),B.a.createElement(d.a,{md:5,sm:24},B.a.createElement(s.a.Group,{compact:!0},B.a.createElement(Q,{style:{display:"inline-block",width:"50%"}},e("totalLoadStart")(B.a.createElement(s.a,{className:A.a.inputGroupRightRadius+" "+A.a.inputGroupRightborder,addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),B.a.createElement(Q,{style:{display:"inline-block",width:"50%"}},e("totalLoadEnd")(B.a.createElement(s.a,{className:A.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),B.a.createElement(d.a,{md:6,sm:24},B.a.createElement("div",{style:{overflow:"hidden"}},B.a.createElement("div",{style:{float:"right",marginBottom:24}},B.a.createElement(u.a,{type:"primary",htmlType:"submit"},"查询"),B.a.createElement(u.a,{className:A.a.import,icon:"import",onClick:this.importClick,loading:a,disabled:a,style:{marginLeft:8}},"导出"),B.a.createElement(u.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.DynamicLaw.data,t=e.loading,n=this.state,r=n.modalVisible,l=n.detailID,d=n.previewCode,s={handleModalVisible:this.handleModalVisible,detailID:l,previewCode:d};return B.a.createElement(S.Fragment,null,Object(z.b)(G[0])?null:B.a.createElement(x.a,{to:"/exception/403"}),B.a.createElement(o.a,{bordered:!1},B.a.createElement("div",{className:F.a.tableList},B.a.createElement("div",{className:F.a.tableListForm},this.renderSimpleForm()),B.a.createElement(C.a,{size:"middle",selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange}))),r&&l?B.a.createElement(M.a,i()({},s,{modalVisible:r})):null)}}]),a}(S.PureComponent))||n)||n;a.default=T}}]);