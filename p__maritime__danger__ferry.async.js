(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{tgkp:function(e,t,a){"use strict";a.r(t);var l=a("pVnL"),n=a.n(l),r=(a("IzEo"),a("bx4M")),i=(a("14J3"),a("BMrR")),c=(a("jCWc"),a("kPKH")),o=(a("5NDa"),a("5rEg")),m=a("MVZn"),s=a.n(m),d=(a("miYZ"),a("tsqr")),u=(a("2qtc"),a("kLXV")),p=(a("P2fV"),a("NJEC")),E=(a("/zsF"),a("PArb")),h=(a("5Dmo"),a("3S7+")),f=(a("+L6B"),a("2/Rp")),b=a("lwsE"),g=a.n(b),y=a("W8MJ"),v=a.n(y),w=a("a1gu"),S=a.n(w),I=a("Nsbk"),M=a.n(I),k=a("7W2i"),V=a.n(k),D=(a("OaEy"),a("2fM7")),F=(a("y8nQ"),a("Vl3Y")),B=a("q1tI"),R=a.n(B),z=a("MuoO"),C=(a("wd/R"),a("CkN6")),L=(a("bP8k"),a("gFTJ")),N=a("Py4S"),P=a.n(N),T=a("+n12"),x=a("ZP6J"),O=a.n(x),J=function(e){function t(){var e,a;g()(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=S()(this,(e=M()(t)).call.apply(e,[this].concat(n)))).renderImg=function(e){return R.a.createElement(P.a,{backdrop:"rgba(255,255,255,.3)",src:"".concat(T.B).concat(e),alt:"图片",style:{width:"200px",height:"200px"}})},a}return V()(t,e),v()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.handleModalVisible,l=e.detail,n={marginTop:5};return R.a.createElement(u.a,{destroyOnClose:!0,title:"详情",className:O.a.formModal,visible:t,onCancel:function(){return a()},footer:null,width:1e3},R.a.createElement(r.a,{bordered:!1},R.a.createElement(L.a,{column:4,size:"small",layout:"vertical",bordered:!0},R.a.createElement(L.a.Item,{label:"渡口名称"},l.ferryName),R.a.createElement(L.a.Item,{label:"批准单位"},l.authority),R.a.createElement(L.a.Item,{label:"所属水系"},l.waterSystem),R.a.createElement(L.a.Item,{label:"所属乡镇"},l.township),R.a.createElement(L.a.Item,{label:"经营人"},l.operator),R.a.createElement(L.a.Item,{label:"联系方式"},l.phone),R.a.createElement(L.a.Item,{label:"安全管理员"},l.securityAdmin),R.a.createElement(L.a.Item,{label:"安全管理员联系方式"},l.adminPhone))),R.a.createElement(r.a,{bordered:!1,style:n},R.a.createElement(L.a,{title:R.a.createElement("div",null,"渡口环境    ","on"===l.ferryEnvironment?"符合规范":R.a.createElement("span",{style:{color:"red"}},"不符合规范")),column:1,size:"small",layout:"vertical",bordered:!0},R.a.createElement(L.a.Item,{label:"渡口环境规范"},R.a.createElement("p",null,"1、“两线一牌”（警戒水位线、停航封渡线、渡口公示牌）设置醒目，内容齐全"),R.a.createElement("p",null,"2、渡口设置符合相关要求：远离大坝、水流平缓、无滑坡等地质灾害及水毁现象等"),R.a.createElement("p",null,"3、栈道有扶手，便于上下"),R.a.createElement("p",null,"4、300人次以上的渡口安装了摄像头并不被遮挡"),R.a.createElement("p",null,"5、300人次以上的渡口安装了摄像头并不被遮挡"),R.a.createElement("p",null,"6、渡船按固定航线行驶"),R.a.createElement("p",null,"7、有举报和报警电话")))),R.a.createElement(r.a,{bordered:!1,style:n},R.a.createElement(L.a,{title:R.a.createElement("div",null,"执行不发航情况    ","on"===l.sailingSituation?"符合规范":R.a.createElement("span",{style:{color:"red"}},"不符合规范")),column:1,size:"small",layout:"vertical",bordered:!0},R.a.createElement(L.a.Item,{label:"执行不发航规范"},R.a.createElement("p",null,"1、第一次洪峰超过警戒水位线停航执行情况"),R.a.createElement("p",null,"2、大风、大雨、大雾、漂浮物过多、能见度不良等情况停航"),R.a.createElement("p",null,"3、自然河段超封渡水位线、库区流量超停航封渡流量停航"),R.a.createElement("p",null,"4、超警戒水位（警戒流量）减载30%"),R.a.createElement("p",null,"5、船舶不适航、船员不适任、超载停航")))),R.a.createElement(r.a,{bordered:!1,style:n},R.a.createElement(L.a,{title:R.a.createElement("div",null,"签单情况    ","on"===l.signingStatus?"符合规范":R.a.createElement("span",{style:{color:"red"}},"不符合规范")),column:1,size:"small",layout:"vertical",bordered:!0},R.a.createElement(L.a.Item,{label:"签单规范"},R.a.createElement("p",null,"1、“两线一牌”（警戒水位线、停航封渡线、渡口公示牌）设置醒目，内容齐全"),R.a.createElement("p",null,"2、有固定的签场所、落实了签人员"),R.a.createElement("p",null,"3、落实了签单人员，重点渡口按航次签单、非重点渡口逢场节假日专人签单"),R.a.createElement("p",null,"4、签单记录（含人、车）与实载相符、签单员、驾驶员开航前实际核对后签字，无提前签单或假签单情况"),R.a.createElement("p",null,"5、有固定签单记录严禁随船携带")))),R.a.createElement(r.a,{bordered:!1,style:n},R.a.createElement(L.a,{column:2,size:"small",layout:"vertical",bordered:!0},R.a.createElement(L.a.Item,{label:"检查人员签字"},this.renderImg(l.inspectors)),R.a.createElement(L.a.Item,{label:"被检查人员签字"},this.renderImg(l.inspectedPerson)))))}}]),t}(B.PureComponent);J.defaultProps={detail:{},modalVisible:!1,handleModalVisible:function(){}};var A,j=a("9zHi"),q=a.n(j),U=F.a.Item,W=(D.a.Option,Object(z.connect)(function(e){return{MaritimeDangerFerry:e.MaritimeDangerFerry,loading:e.loading.models.MaritimeDangerFerry}})(A=F.a.create()(A=function(e){function t(){var e,a;g()(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=S()(this,(e=M()(t)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},a.columns=[{title:"渡口名称",dataIndex:"ferryName"},{title:"批准单位",dataIndex:"authority"},{title:"所属乡镇",dataIndex:"township"},{title:"创建时间",dataIndex:"createTime"},{title:"操作",width:90,render:function(e,t){return R.a.createElement(B.Fragment,null,R.a.createElement(h.a,{placement:"left",title:"详情"},R.a.createElement(f.a,{onClick:function(){return a.showDetailModal(t)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),R.a.createElement(E.a,{type:"vertical"}),R.a.createElement(p.a,{title:"是否删除数据?",onConfirm:function(){return a.dataDel(t.id)},okText:"确定",cancelText:"取消"},R.a.createElement(h.a,{placement:"left",title:"删除"},R.a.createElement(f.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],a.getList=function(e){(0,a.props.dispatch)({type:"MaritimeDangerFerry/fetch",payload:e})},a.showDetailModal=function(e){a.setState({detail:e},function(){return a.handleModalVisible(!0)})},a.dataDel=function(e){a.delUtil(e)},a.batchDel=function(){var e=a.state.selectedRows;e.length&&u.a.confirm({title:"提示",content:"是否删除数据？",onOk:function(){var t=e.map(function(e){return e.id});a.delUtil(t.join(),function(){a.setState({selectedRows:[]})})}})},a.delUtil=function(e,t){(0,a.props.dispatch)({type:"MaritimeDangerFerry/remove",payload:{ids:e},callback:function(){d.a.success("删除成功");var e=a.state.pageBean;a.getList({pageBean:e}),t&&t()}})},a.handleStandardTableChange=function(e){var t=a.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:t};a.getList(l)},a.handleFormReset=function(){var e=a.props.form,t=a.state.pageBean;e.resetFields(),a.setState({formValues:[],selectedRows:[]}),a.getList({pageBean:t})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var l=a.state.pageBean,n=s()({},t),r=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});a.setState({formValues:r}),a.getList({pageBean:l,querys:r})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e}),e||a.setState({detail:{}})},a}return V()(t,e),v()(t,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return R.a.createElement(F.a,{onSubmit:this.handleSearch,layout:"inline"},R.a.createElement(i.a,{gutter:16},R.a.createElement(c.a,{md:6,sm:24},R.a.createElement(U,null,e("ferryName")(R.a.createElement(o.a,{addonBefore:"渡口名称",placeholder:"请输入"})))),R.a.createElement(c.a,{md:6,sm:24},R.a.createElement(U,null,e("authority")(R.a.createElement(o.a,{addonBefore:"批准单位",placeholder:"请输入"})))),R.a.createElement(c.a,{md:6,sm:24},R.a.createElement(U,null,e("township")(R.a.createElement(o.a,{addonBefore:"所属乡镇",placeholder:"请输入"})))),R.a.createElement(c.a,{md:6,sm:24},R.a.createElement("span",{className:q.a.submitButtons},R.a.createElement(f.a,{type:"primary",htmlType:"submit"},"查询"),R.a.createElement(f.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,t=e.MaritimeDangerFerry.data,a=e.loading,l=this.state,i=l.selectedRows,c=l.modalVisible,o=l.detail,m={detail:o,handleModalVisible:this.handleModalVisible};return R.a.createElement(B.Fragment,null,R.a.createElement(r.a,{bordered:!1},R.a.createElement("div",{className:q.a.tableList},R.a.createElement("div",{className:q.a.tableListForm},this.renderSimpleForm()),R.a.createElement("div",{className:q.a.tableListOperator},i.length>0&&R.a.createElement(f.a,{type:"danger",onClick:this.batchDel},"批量删除")),R.a.createElement(C.a,{size:"middle",tableAlert:!1,selectedRows:i,loading:a,data:t,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),c&&Object.keys(o).length?R.a.createElement(J,n()({},m,{modalVisible:c})):null)}}]),t}(B.PureComponent))||A)||A);t.default=W}}]);