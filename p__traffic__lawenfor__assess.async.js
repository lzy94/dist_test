(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{"89FR":function(e,t,a){"use strict";a.r(t);a("T2oS");var n,r=a("W9HT"),i=(a("IzEo"),a("bx4M")),o=(a("14J3"),a("BMrR")),l=(a("+L6B"),a("2/Rp")),s=(a("jCWc"),a("kPKH")),c=(a("R9oj"),a("ECub")),m=a("MVZn"),p=a.n(m),u=a("lwsE"),d=a.n(u),h=a("W8MJ"),f=a.n(h),g=a("a1gu"),E=a.n(g),y=a("Nsbk"),v=a.n(y),x=a("7W2i"),C=a.n(x),b=(a("iQDF"),a("+eQT")),D=(a("OaEy"),a("2fM7")),S=(a("y8nQ"),a("Vl3Y")),T=a("q1tI"),Y=a.n(T),M=a("cVA7"),w=a.n(M),N=a("MuoO"),L=a("wd/R"),A=a.n(L),F=a("mf+E"),O=a("ns75"),R=a.n(O),I=a("9zHi"),H=a.n(I),V=a("+n12"),P=S.a.Item,W=D.a.Option,k=b.a.MonthPicker,G=["#1890ff","#2fc25b","#13c2c2","#facc14","#edafda","#93b7e3","#a5e7f0","#cbb0e3"],z=["/lawenfor/assess"],B=Object(N.connect)(function(e){return{system:e.system,ChartStatistics:e.ChartStatistics,loading:e.loading.models.ChartStatistics}})(n=S.a.create()(n=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=E()(this,(e=v()(t)).call.apply(e,[this].concat(r)))).state={userSite:[],dateType:1,formValues:{siteCode:"",dateType:1,dateOfCount:A()(new Date).format("YYYY-MM-DD")}},a.getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.props.dispatch)({type:"ChartStatistics/lawCount",payload:e})},a.resetData=function(){(0,a.props.dispatch)({type:"ChartStatistics/resetAssess"})},a.getUserSite=function(e){(0,a.props.dispatch)({type:"system/userSite",payload:{siteType:e},callback:function(e){var t=e.map(function(e,t){var a=Object.keys(e);return{index:t+1,code:a[0],name:e[a[0]],direction:[e[a[1]],e[a[2]]]}});a.setState({userSite:t})}})},a.handleSearch=function(e){e.preventDefault();var t=a.props.form;a.resetData(),t.validateFields(function(e,t){if(!e){var n=p()({},t),r=A()(n.dateOfCount).format("YYYY-MM-DD");2===n.dateType?r=A()(n.dateOfCount).format("YYYY-MM"):3===n.dateType&&(r=A()(n.dateOfCount).format("YYYY")),n.dateOfCount=r,a.setState({formValues:n}),a.getList(n)}})},a.getDataX=function(e){var t=a.state.formValues,n="HOUR",r="时";2===t.dateType?(n="DAY",r="日"):3===t.dateType&&(n="MONTH",r="月");for(var i=[],o=0;o<e.length;o++)i.push(e[o][n]+r);return i},a.getCount=function(e,t){for(var a=0,n=0;n<t.length;n++)a+=t[n][e];return a},a.setOption=function(e,t,a,n){return{color:G,title:{text:e,textStyle:{fontSize:15,fontWeight:500}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{itemHeight:14,itemWidth:14,data:t},dataZoom:[{show:!0,realtime:!0,start:0,end:50},{type:"inside",realtime:!0,start:0,end:50}],grid:{left:"3%",right:"4%",bottom:40,containLabel:!0},xAxis:{type:"category",axisTick:{alignWithLabel:!0},data:a},yAxis:{type:"value"},series:n}},a.countChart=function(){var e=a.props.ChartStatistics.lawCountList.pendingVerify,t=a.state.formValues,n="日";2===t.dateType?n="月":3===t.dateType&&(n="年");var r=a.getCount("TOTAL",e),i=[{value:a.getCount("PENDINGVERIFY",e),name:"初审"},{value:a.getCount("VERIFYPASS",e),name:"复审"},{value:a.getCount("INCALIDDATE",e),name:"无效数据"},{value:a.getCount("PENALTYDATE",e),name:"签批"},{value:a.getCount("ARCHIVEDATE",e),name:"结案"}],o={color:G,title:{text:"执法统计(".concat(n,")各项占比"),textStyle:{fontSize:15,fontWeight:500}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",itemHeight:14,itemWidth:14,right:0,formatter:function(e){for(var t=0,a=0;a<i.length;a++)if(e===i[a].name){t=i[a].value;break}return["{a|".concat(e,"}{b|").concat(r?(t/r*100).toFixed(2):0,"%}")]},textStyle:{color:"#666",lineHeight:20,rich:{a:{fontSize:12,width:80},b:{fontSize:12}}}},series:[{name:"执法统计",type:"pie",radius:["55%","70%"],center:["50%","60%"],avoidLabelOverlap:!1,label:{normal:{show:!0,position:"center",fontSize:"18",color:"green",formatter:"总检测数\n\n".concat(r)}},labelLine:{normal:{show:!1}},data:i}]};return e.length?Y.a.createElement(w.a,{style:{height:"calc(100vh - 315px)"},option:o}):Y.a.createElement(c.a,{style:{height:"calc(100vh - 380px)",lineHeight:"calc(100vh - 380px)"},image:c.a.PRESENTED_IMAGE_SIMPLE})},a.getFormData=function(e,t){return t.map(function(t){return t[e]})},a.lineChart=function(){var e=a.props.ChartStatistics.lawCountList.pendingVerify,t=a.getDataX(e),n=[{name:"初审",type:"bar",smooth:!0,barMaxWidth:20,data:a.getFormData("PENDINGVERIFY",e)},{name:"复审",type:"bar",smooth:!0,barMaxWidth:20,data:a.getFormData("VERIFYPASS",e)},{name:"无效数据",type:"bar",smooth:!0,barMaxWidth:20,data:a.getFormData("INCALIDDATE",e)},{name:"签批",type:"bar",smooth:!0,barMaxWidth:20,data:a.getFormData("PENALTYDATE",e)},{name:"结案",type:"bar",smooth:!0,barMaxWidth:20,data:a.getFormData("ARCHIVEDATE",e)},{name:"总数",type:"line",smooth:!0,data:a.getFormData("TOTAL",e)}],r=a.setOption("执法统计",["初审","复审","无效数据","签批","结案","总数"],t,n);return e.length?Y.a.createElement(w.a,{option:r,style:{height:"calc(100vh - 315px)"}}):Y.a.createElement(c.a,{style:{height:"calc(100vh - 380px)",lineHeight:"calc(100vh - 380px)"},image:c.a.PRESENTED_IMAGE_SIMPLE})},a.dateTypeChange=function(e){a.setState({dateType:e})},a.renderForm=function(){var e=a.props.form.getFieldDecorator,t=a.state,n=t.userSite,r=t.dateType;return Y.a.createElement(S.a,{onSubmit:a.handleSearch,layout:"inline"},Y.a.createElement(o.a,{gutter:{md:8,lg:16,xl:32}},Y.a.createElement(s.a,{md:5,sm:24},Y.a.createElement("div",{className:R.a.inputMain},Y.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"站点"),Y.a.createElement(P,{style:{flex:1,marginBottom:0}},e("siteCode")(Y.a.createElement(D.a,{className:R.a.inputGroupLeftRadius,placeholder:"请选择"},n.map(function(e,t){return Y.a.createElement(W,{key:t,value:e.code},e.name)})))))),Y.a.createElement(s.a,{md:5,sm:24},Y.a.createElement("div",{className:R.a.inputMain},Y.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"时间类型"),Y.a.createElement(P,{style:{flex:1,marginBottom:0}},e("dateType")(Y.a.createElement(D.a,{className:R.a.inputGroupLeftRadius,placeholder:"请选择",onChange:a.dateTypeChange},Y.a.createElement(W,{value:1},"天"),Y.a.createElement(W,{value:2},"月"),Y.a.createElement(W,{value:3},"年")))))),Y.a.createElement(s.a,{md:5,sm:24},1===r?Y.a.createElement("div",{className:R.a.inputMain},Y.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"日期选择"),Y.a.createElement(P,{style:{flex:1,marginBottom:0}},e("dateOfCount")(Y.a.createElement(b.a,{className:R.a.inputGroupLeftRadius,style:{width:"100%"}})))):null,2===r?Y.a.createElement("div",{className:R.a.inputMain},Y.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"月份选择"),Y.a.createElement(P,{style:{flex:1,marginBottom:0}},e("dateOfCount")(Y.a.createElement(k,{format:"YYYY-MM",className:R.a.inputGroupLeftRadius,style:{width:"100%"}})))):null,3===r?Y.a.createElement("div",{className:R.a.inputMain},Y.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"年份选择"),Y.a.createElement(P,{style:{flex:1,marginBottom:0}},e("dateOfCount")(Y.a.createElement(k,{format:"YYYY",className:R.a.inputGroupLeftRadius,style:{width:"100%"}})))):null),Y.a.createElement(s.a,{md:4,sm:24},Y.a.createElement("div",null,Y.a.createElement(l.a,{type:"primary",htmlType:"submit"},"查询"),Y.a.createElement(l.a,{style:{marginLeft:8},onClick:a.handleFormReset},"重置")))))},a.handleFormReset=function(){a.props.form.resetFields();var e={siteCode:"",dateType:1,dateOfCount:A()(new Date).format("YYYY-MM-DD")};a.setState({formValues:e}),a.resetData(),a.getList(e)},a}return C()(t,e),f()(t,[{key:"componentDidMount",value:function(){if(Object(V.b)(z[0])){var e=this.state.formValues;this.getList(e),this.getUserSite(1)}}},{key:"render",value:function(){var e=this.props.loading;return Y.a.createElement(T.Fragment,null,Object(V.b)(z[0])?null:Y.a.createElement(F.a,{to:"/exception/403"}),Y.a.createElement("div",null,Y.a.createElement(i.a,{bordered:!1},Y.a.createElement("div",{className:H.a.tableListForm},this.renderForm())),Y.a.createElement(i.a,{bordered:!1,style:{marginTop:8}},Y.a.createElement(i.a.Grid,{style:{width:"70%"}},Y.a.createElement(r.a,{spinning:e},this.lineChart())),Y.a.createElement(i.a.Grid,{style:{width:"30%"}},Y.a.createElement(r.a,{spinning:e},this.countChart())))))}}]),t}(T.PureComponent))||n)||n;t.default=B}}]);