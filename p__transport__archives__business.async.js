(window.webpackJsonp=window.webpackJsonp||[]).push([[193],{"5hIu":function(e,a,t){"use strict";t.r(a);var l,n,i,r,s,o,c,d=t("pVnL"),m=t.n(d),u=(t("IzEo"),t("bx4M")),p=(t("14J3"),t("BMrR")),h=(t("jCWc"),t("kPKH")),f=(t("5NDa"),t("5rEg")),g=(t("miYZ"),t("tsqr")),b=(t("P2fV"),t("NJEC")),E=(t("/zsF"),t("PArb")),y=(t("+L6B"),t("2/Rp")),v=(t("5Dmo"),t("3S7+")),V=t("lwsE"),k=t.n(V),M=t("W8MJ"),C=t.n(M),D=t("a1gu"),F=t.n(D),L=t("Nsbk"),S=t.n(L),A=t("7W2i"),w=t.n(A),B=(t("OaEy"),t("2fM7")),T=(t("y8nQ"),t("Vl3Y")),N=t("q1tI"),Y=t.n(N),x=t("MuoO"),q=t("CkN6"),I=t("+n12"),R=(t("2qtc"),t("kLXV")),j=(t("giR+"),t("fyUT")),O=(t("DZo9"),t("8z0m")),z=(t("Pwec"),t("CtXQ")),P=t("MVZn"),U=t.n(P),J=(t("iQDF"),t("+eQT")),H=t("wd/R"),Q=t.n(H),K=t("y01j"),X=t("ZP6J"),Z=t.n(X),W=T.a.Item,_=J.a.RangePicker,G=Object(x.connect)(function(e){return{TransportArchivesBusiness:e.TransportArchivesBusiness,loading:e.loading.models.TransportArchivesBusiness}})(l=T.a.create()((i=n=function(e){function a(){var e,t;k()(this,a);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return(t=F()(this,(e=S()(a)).call.apply(e,[this].concat(n)))).state={modalFirmVisible:!1,fileList:[],companyAccount:""},t.handleFirmModalVisible=function(e){t.setState({modalFirmVisible:!!e})},t.setSelectData=function(e){var a=t.props.form;t.setState({companyAccount:e.account}),a.setFieldsValue({companyName:e.companyName,companyAddr:e.addr})},t.uploadConfig=function(){return{name:"files",action:"/result/api/file/v1/fileUpload",listType:"picture",accept:".jpg,.jpeg,.png",className:"upload-list-inline",data:{type:9},headers:{Authorization:"Bearer ".concat(Object(I.z)("token")[0]),"x-requested-with":"XMLHttpRequest"},beforeUpload:I.D,onChange:t.uploadChange}},t.uploadChange=function(e){"done"===e.file.status?200===e.file.response.code?(g.a.success("上传成功"),t.setState({fileList:e.fileList})):g.a.error(e.file.response.code.msg):"error"===e.file.status?g.a.error("上传失败"):"removed"===e.file.status&&t.setState({fileList:e.fileList})},t.save=function(){var e=t.props,a=e.dispatch,l=e.form,n=e.modalCallback,i=e.handleModalVisible,r=t.state,s=r.fileList,o=r.companyAccount;l.validateFields(function(e,t){if(!e){if(!s.length)return g.a.error("请选择图片");var l=U()({},t,{companyAccount:o,businessLicenseImg:s.length?s[0].response.filePath:"",status:2,businessTerm:"".concat(Q()(t.time[0]).format("YYYY-MM-DD")," 至 ").concat(Q()(t.time[1]).format("YYYY-MM-DD"))});delete l.img,delete l.time,a({type:"TransportArchivesBusiness/add",payload:l,callback:function(){g.a.success("添加成功"),i(),setTimeout(function(){return n()},300)}})}})},t.cancelClick=function(){var e=t.props.handleModalVisible;t.setState({fileList:[]}),e()},t}return w()(a,e),C()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.form,l=a.modalVisible,n=a.loading,i=this.state,r=i.modalFirmVisible,s=i.fileList;return Y.a.createElement(N.Fragment,null,Y.a.createElement(R.a,{destroyOnClose:!0,title:"添加",className:Z.a.formModal,visible:l,width:800,onCancel:this.cancelClick,footer:[Y.a.createElement(y.a,{key:"back",onClick:this.cancelClick},"取消"),Y.a.createElement(y.a,{key:"submit",type:"primary",loading:n,onClick:this.save},"确定")]},Y.a.createElement("div",{className:Z.a.formModalBody},Y.a.createElement(p.a,{gutter:40},Y.a.createElement(h.a,{md:12,sm:24},Y.a.createElement(W,{label:"公司名称"},t.getFieldDecorator("companyName",{rules:[{required:!0,message:"请输入公司名称！"}]})(Y.a.createElement(f.a,{readOnly:!0,placeholder:"请输入",onClick:function(){return e.handleFirmModalVisible(!0)}}))),Y.a.createElement(W,{label:"详细地址"},t.getFieldDecorator("companyAddr",{rules:[{required:!0,message:"请输入详细地址！"}]})(Y.a.createElement(f.a,{placeholder:"请输入"}))),Y.a.createElement(W,{label:"法人代表"},t.getFieldDecorator("legalRepresentative",{rules:[{required:!0,message:"请输入法人代表！"}]})(Y.a.createElement(f.a,{placeholder:"请输入"}))),Y.a.createElement(W,{label:"营业执照号"},t.getFieldDecorator("businessLicense",{rules:[{required:!0,message:"请输入营业执照号！"}]})(Y.a.createElement(f.a,{placeholder:"请输入"}))),Y.a.createElement(W,{label:"营业执照"},t.getFieldDecorator("img",{rules:[{required:!0,message:"请上传营业执照"}]})(Y.a.createElement(O.a,m()({},this.uploadConfig(),{defaultFileList:s}),!s.length&&Y.a.createElement(y.a,null,Y.a.createElement(z.a,{type:"upload"})," 请上传营业执照（jpg,jpeg,png）"))))),Y.a.createElement(h.a,{md:12,sm:24},Y.a.createElement(W,{label:"注册资本(万元)"},t.getFieldDecorator("registeredCapital",{rules:[{required:!0,message:"请输入注册资本！"}]})(Y.a.createElement(j.a,{style:{width:"100%"},placeholder:"请输入"}))),Y.a.createElement(W,{label:"上年营收(万元)"},t.getFieldDecorator("lastYearRevenue",{rules:[{required:!0,message:"请输入上年营收！"}]})(Y.a.createElement(j.a,{style:{width:"100%"},placeholder:"请输入"}))),Y.a.createElement(W,{label:"营业期限"},t.getFieldDecorator("time",{rules:[{required:!0,message:"请输入营业期限！"}]})(Y.a.createElement(_,null))),Y.a.createElement(W,{label:"经营范围"},t.getFieldDecorator("businessScope",{rules:[{required:!0,message:"请输入经营范围！"}]})(Y.a.createElement(f.a.TextArea,{autosize:!0,placeholder:"请输入"}))))))),r?Y.a.createElement(K.a,{modalVisible:r,setSelectData:this.setSelectData,handleModalVisible:this.handleFirmModalVisible}):null)}}]),a}(N.PureComponent),n.defaultProps={modalVisible:!1,handleModalVisible:function(){}},l=i))||l)||l,$=(t("7Kak"),t("9yH6")),ee=T.a.Item,ae=J.a.RangePicker,te=["审核中","已审核","驳回"],le=Object(x.connect)(function(e){return{TransportArchivesBusiness:e.TransportArchivesBusiness,loading:e.loading.models.TransportArchivesBusiness}})(r=T.a.create()((o=s=function(e){function a(){var e,t;k()(this,a);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return(t=F()(this,(e=S()(a)).call.apply(e,[this].concat(n)))).state={modalFirmVisible:!1,fileList:[],companyAccount:"",detail:{},isSet:!1},t.handleFirmModalVisible=function(e){t.setState({modalFirmVisible:!!e})},t.setSelectData=function(e){var a=t.props.form;t.setState({companyAccount:e.account}),a.setFieldsValue({companyName:e.companyName,companyAddr:e.addr})},t.uploadConfig=function(){return{name:"files",action:"/result/api/file/v1/fileUpload",listType:"picture",accept:".jpg,.jpeg,.png",className:"upload-list-inline",data:{type:9},headers:{Authorization:"Bearer ".concat(Object(I.z)("token")[0]),"x-requested-with":"XMLHttpRequest"},beforeUpload:I.D,onChange:t.uploadChange}},t.uploadChange=function(e){"done"===e.file.status?200===e.file.response.code?(g.a.success("上传成功"),t.setState({fileList:e.fileList})):g.a.error(e.file.response.code.msg):"error"===e.file.status?g.a.error("上传失败"):"removed"===e.file.status&&t.setState({fileList:e.fileList})},t.save=function(){var e=t.props,a=e.dispatch,l=e.form,n=e.modalCallback,i=e.handleModalVisible,r=t.state,s=r.companyAccount,o=r.detail,c=r.fileList;l.validateFields(function(e,t){if(!e)if(c.length){var l=U()({},t,{companyAccount:s,businessLicenseImg:t.img,businessTerm:"".concat(Q()(t.time[0]).format("YYYY-MM-DD")," 至 ").concat(Q()(t.time[1]).format("YYYY-MM-DD"))});if(delete l.img,delete l.time,"object"==typeof l.businessLicenseImg){var r=l.businessLicenseImg.file.response;l.businessLicenseImg=r?r.filePath:""}for(var d=JSON.parse(JSON.stringify(o)),m=Object.keys(l),u=0;u<m.length;u+=1)d[m[u]]=l[m[u]];a({type:"TransportArchivesBusiness/update",payload:d,callback:function(){g.a.success("编辑成功"),i(),setTimeout(function(){return n()},300)}})}else g.a.error("请选择图片")})},t.cancelClick=function(){var e=t.props.handleModalVisible;t.setState({fileList:[]}),e()},t}return w()(a,e),C()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.form,l=a.modalVisible,n=(a.handleModalVisible,a.loading),i=this.state,r=i.modalFirmVisible,s=i.fileList,o=i.detail,c=[];c=/至/.test(o.businessTerm)?o.businessTerm.split(" 至 "):o.businessTerm.split("-");var d=[Q()(new Date(c[0]),"YYYY-MM-DD"),Q()(new Date(c[1]),"YYYY-MM-DD")];return Y.a.createElement(N.Fragment,null,Y.a.createElement(R.a,{destroyOnClose:!0,title:"添加",className:Z.a.formModal,visible:l,width:800,onCancel:this.cancelClick,footer:[Y.a.createElement(y.a,{key:"back",onClick:this.cancelClick},"取消"),Y.a.createElement(y.a,{key:"submit",type:"primary",loading:n,onClick:this.save},"确定")]},Y.a.createElement("div",{className:Z.a.formModalBody},Y.a.createElement(p.a,{gutter:40},Y.a.createElement(h.a,{md:12,sm:24},Y.a.createElement(ee,{label:"公司名称"},t.getFieldDecorator("companyName",{initialValue:o.companyName,rules:[{required:!0,message:"请输入公司名称！"}]})(Y.a.createElement(f.a,{readOnly:!0,placeholder:"请输入",onClick:function(){return e.handleFirmModalVisible(!0)}}))),Y.a.createElement(ee,{label:"详细地址"},t.getFieldDecorator("companyAddr",{initialValue:o.companyAddr,rules:[{required:!0,message:"请输入详细地址！"}]})(Y.a.createElement(f.a,{placeholder:"请输入"}))),Y.a.createElement(ee,{label:"法人代表"},t.getFieldDecorator("legalRepresentative",{initialValue:o.legalRepresentative,rules:[{required:!0,message:"请输入法人代表！"}]})(Y.a.createElement(f.a,{placeholder:"请输入"}))),Y.a.createElement(ee,{label:"营业执照号"},t.getFieldDecorator("businessLicense",{initialValue:o.businessLicense,rules:[{required:!0,message:"请输入营业执照号！"}]})(Y.a.createElement(f.a,{placeholder:"请输入"}))),Y.a.createElement(ee,{label:"营业执照"},t.getFieldDecorator("img",{initialValue:o.businessLicenseImg,rules:[{required:!0,message:"请上传营业执照！"}]})(Y.a.createElement(O.a,m()({},this.uploadConfig(),{defaultFileList:s}),!s.length&&Y.a.createElement(y.a,null,Y.a.createElement(z.a,{type:"upload"})," 请上传营业执照（.jpg,.jpeg,.png）"))))),Y.a.createElement(h.a,{md:12,sm:24},Y.a.createElement(ee,{label:"注册资本(万元)"},t.getFieldDecorator("registeredCapital",{initialValue:o.registeredCapital,rules:[{required:!0,message:"请输入注册资本！"}]})(Y.a.createElement(j.a,{style:{width:"100%"},placeholder:"请输入"}))),Y.a.createElement(ee,{label:"上年营收(万元)"},t.getFieldDecorator("lastYearRevenue",{initialValue:o.lastYearRevenue,rules:[{required:!0,message:"请输入上年营收！"}]})(Y.a.createElement(j.a,{style:{width:"100%"},placeholder:"请输入"}))),Y.a.createElement(ee,{label:"营业期限"},t.getFieldDecorator("time",{initialValue:d,rules:[{required:!0,message:"请输入营业期限！"}]})(Y.a.createElement(ae,null))),Y.a.createElement(ee,{label:"经营范围"},t.getFieldDecorator("businessScope",{initialValue:o.businessScope,rules:[{required:!0,message:"请输入经营范围！"}]})(Y.a.createElement(f.a.TextArea,{autosize:!0,placeholder:"请输入"}))),Y.a.createElement(ee,{label:"状态"},t.getFieldDecorator("status",{initialValue:o.status,rules:[{required:!0,message:"请选择状态！"}]})(Y.a.createElement($.a.Group,null,te.map(function(e,a){return Y.a.createElement($.a,{value:a+1,key:a},e)})))))))),r?Y.a.createElement(K.a,{modalVisible:r,setSelectData:this.setSelectData,handleModalVisible:this.handleFirmModalVisible}):null)}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t=e.detail,l=a.isSet;if(!l){var n=t.companyAccount,i=t.businessLicenseImg;return{isSet:!l,detail:t,companyAccount:n,fileList:i?[{uid:"-1",name:"当前图片",status:"done",url:/http/.test(i)?i:I.E+i}]:[]}}return null}}]),a}(N.PureComponent),s.defaultProps={detail:{},modalVisible:!1,handleModalVisible:function(){}},r=o))||r)||r,ne=t("ytuB"),ie=t("ns75"),re=t.n(ie),se=t("9zHi"),oe=t.n(se),ce=t("15hv"),de=t.n(ce),me=T.a.Item,ue=B.a.Option,pe=["审核中","已审核","驳回"],he=Object(x.connect)(function(e){return{TransportArchivesBusiness:e.TransportArchivesBusiness,loading:e.loading.models.TransportArchivesBusiness}})(c=T.a.create()(c=function(e){function a(){var e,t;k()(this,a);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return(t=F()(this,(e=S()(a)).call.apply(e,[this].concat(n)))).state={exportVisible:!1,modalVisible:!1,updateModalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"公司名称",dataIndex:"companyName"},{title:"公司地址",dataIndex:"companyAddr"},{title:"法定代表",dataIndex:"legalRepresentative"},{title:"注册资本(万元)",dataIndex:"registeredCapital",width:140},{title:"营业执照号",dataIndex:"businessLicense"},{title:"上年营收(万元)",dataIndex:"lastYearRevenue"},{title:"营业执照",dataIndex:"businessLicenseImg",width:110,render:function(e){var a=/http/.test(e)?e:I.E+e;return Y.a.createElement("img",{style:{width:90},src:a,alt:"营业执照",onError:function(e){e.target.onerror=null,e.target.src=de.a}})}},{title:"经营范围",dataIndex:"businessScope",render:function(e){return e&&e.length>10?Y.a.createElement(v.a,{title:e},e.substring(0,10),"..."):e}},{title:"营业期限",dataIndex:"businessTerm"},{title:"状态",width:90,dataIndex:"status",render:function(e){return pe[e-1]}},{title:"操作",width:100,render:function(e,a){return Y.a.createElement(N.Fragment,null,Y.a.createElement(v.a,{placement:"left",title:"编辑"},Y.a.createElement(y.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"edit",size:"small"})),Y.a.createElement(E.a,{type:"vertical"}),Y.a.createElement(b.a,{title:"是否删除数据?",onConfirm:function(){return t.dataDel(a.id_)},okText:"确定",cancelText:"取消"},Y.a.createElement(v.a,{placement:"left",title:"删除"},Y.a.createElement(y.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.getList=function(e){(0,t.props.dispatch)({type:"TransportArchivesBusiness/fetch",payload:e})},t.showDetailModal=function(e){return t.setState({detail:e},function(){return t.handleUpdateModalVisible(!0)})},t.dataDel=function(e){(0,t.props.dispatch)({type:"TransportArchivesBusiness/remove",payload:e,callback:function(){var e=t.state.pageBean;g.a.success("删除成功"),t.getList({pageBean:e})}})},t.handleStandardTableChange=function(e){var a=t.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(l)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[],selectedRows:[]}),t.getList({pageBean:a})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props.form,l=t.state.pageBean;a.validateFields(function(e,a){if(!e){var n={companyName:a.comName,legalRepresentative:a.legalName,status:a.state},i=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"status"===e?"EQUAL":"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:i}),t.getList({pageBean:l,querys:i})}})},t.handleExportVisible=function(e){t.setState({exportVisible:!!e})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e}),e||t.setState({detail:{}})},t.modalCallback=function(){var e=t.state.pageBean;t.getList({pageBean:e})},t}return w()(a,e),C()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return Y.a.createElement(T.a,{onSubmit:this.handleSearch,layout:"inline"},Y.a.createElement(p.a,{gutter:16},Y.a.createElement(h.a,{md:6,sm:24},Y.a.createElement(me,null,e("comName")(Y.a.createElement(f.a,{addonBefore:"公司名称",placeholder:"请输入"})))),Y.a.createElement(h.a,{md:6,sm:24},Y.a.createElement(me,null,e("legalName")(Y.a.createElement(f.a,{addonBefore:"法人",placeholder:"请输入"})))),Y.a.createElement(h.a,{md:5,sm:24},Y.a.createElement("div",{className:re.a.inputMain},Y.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"状态"),Y.a.createElement(me,{style:{flex:1,flexShrink:0}},e("state")(Y.a.createElement(B.a,{placeholder:"请选择",style:{width:"100%"}},pe.map(function(e,a){return Y.a.createElement(ue,{value:a+1,key:a},e)})))))),Y.a.createElement(h.a,{md:6,sm:24},Y.a.createElement("span",{className:oe.a.submitButtons},Y.a.createElement(y.a,{type:"primary",htmlType:"submit"},"查询"),Y.a.createElement(y.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.TransportArchivesBusiness.data,l=a.loading,n=this.state,i=(n.selectedRows,n.modalVisible),r=n.exportVisible,s=n.updateModalVisible,o=n.detail,c={modalCallback:this.modalCallback,handleModalVisible:this.handleModalVisible},d={detail:o,modalCallback:this.modalCallback,handleModalVisible:this.handleUpdateModalVisible};return Y.a.createElement(N.Fragment,null,Y.a.createElement(u.a,{bordered:!1},Y.a.createElement("div",{className:oe.a.tableList},Y.a.createElement("div",{className:oe.a.tableListForm},this.renderSimpleForm()),Y.a.createElement("div",{className:oe.a.tableListOperator},Y.a.createElement(y.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"),Y.a.createElement(y.a,{className:re.a.import,icon:"export",onClick:function(){return e.handleExportVisible(!0)}},"导入")),Y.a.createElement(q.a,{rowKey:"id_",size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:l,data:t,columns:this.columns,onChange:this.handleStandardTableChange}))),Y.a.createElement(G,m()({},c,{modalVisible:i})),s&&Object.keys(o).length?Y.a.createElement(le,m()({},d,{modalVisible:s})):null,r&&Y.a.createElement(ne.a,{modalVisible:r,path:"/transport/api/tsAdmin/businessInfo/importBusinesInfo",modalCallback:this.modalCallback,handleModalVisible:this.handleExportVisible}))}}]),a}(N.PureComponent))||c)||c;a.default=he}}]);