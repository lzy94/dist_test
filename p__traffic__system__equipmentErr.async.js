(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{H7eC:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r=a("bx4M"),i=(a("14J3"),a("BMrR")),l=(a("+L6B"),a("2/Rp")),s=(a("jCWc"),a("kPKH")),o=(a("5Dmo"),a("3S7+")),m=a("lwsE"),c=a.n(m),u=a("W8MJ"),p=a.n(u),d=a("a1gu"),h=a.n(d),g=a("Nsbk"),f=a.n(g),E=a("7W2i"),y=a.n(E),v=(a("OaEy"),a("2fM7")),S=(a("y8nQ"),a("Vl3Y")),b=a("q1tI"),w=a.n(b),x=a("MuoO"),N=a("wd/R"),k=a.n(N),B=a("mf+E"),C=a("CkN6"),L=a("+n12"),I=a("9zHi"),M=a.n(I),q=a("ns75"),D=a.n(q),F=S.a.Item,H=v.a.Option,R=["/system/equipmentErr"],T=["仪表","相机","传感器及线圈","其它"],z=Object(x.connect)(function(e){var t=e.system;return{EquipmentErr:e.EquipmentErr,system:t,loading:e.loading.models.EquipmentErr}})(n=S.a.create()(n=function(e){function t(){var e,a;c()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=h()(this,(e=f()(t)).call.apply(e,[this].concat(r)))).state={userSite:[],formValues:[],pageBean:{page:1,pageSize:10,showTotal:!0}},a.columns=[{title:"站点名称",dataIndex:"siteName"},{title:"设备名称",dataIndex:"equimentName"},{title:"类型",dataIndex:"type",render:function(e){return T[e-1]}},{title:"异常码",dataIndex:"errCode"},{title:"异常值",dataIndex:"errValue",render:function(e){return e.length>30?w.a.createElement(o.a,{title:e},e.substring(0,30),"..."):e}},{title:"异常描述",dataIndex:"errDesc",render:function(e){return e.length>20?w.a.createElement(o.a,{title:e},e.substring(0,20),"..."):e}},{title:"创建时间",dataIndex:"createTime",width:170,render:function(e){return k()(e).format("YYYY-MM-DD HH:mm:ss")}}],a.getList=function(e){(0,a.props.dispatch)({type:"EquipmentErr/fetch",payload:e})},a.getUserSite=function(e,t){(0,a.props.dispatch)({type:"system/userSite",payload:{siteType:e},callback:function(e){var a=e.map(function(e,t){var a=Object.keys(e);return{index:t+1,code:a[0],name:e[a[0]],direction:[e[a[1]],e[a[2]]]}});t(a)}})},a.handleStandardTableChange=function(e){var t=a.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},type:t};a.getList(n)},a.handleFormReset=function(){var e=a.props.form,t=a.state.pageBean;e.resetFields(),a.setState({formValues:[]}),a.getList({pageBean:t})},a.handleSearch=function(e){e.preventDefault();var t=a.props.form,n=a.state.pageBean;t.validateFields(function(e,t){if(!e){var r=[{property:"type",value:t.type,group:"main",operation:"EQUAL",relation:"AND"},{property:"siteCode",value:t.siteCode,group:"main",operation:"EQUAL",relation:"AND"}].filter(function(e){return e.value});a.getList({pageBean:n,querys:r})}})},a}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.pageBean,n=t.formValues;this.getList({pageBean:a,type:n}),this.getUserSite(1,function(t){e.setState({userSite:t})})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.userSite;return w.a.createElement(S.a,{onSubmit:this.handleSearch,layout:"inline"},w.a.createElement(i.a,{gutter:{md:8}},w.a.createElement(s.a,{md:5,sm:24},w.a.createElement("div",{className:D.a.inputMain},w.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"站点"),w.a.createElement(F,{style:{flex:1,marginBottom:0}},e("siteCode")(w.a.createElement(v.a,{style:{width:"100%"},className:D.a.inputGroupLeftRadius,placeholder:"请选择"},t.map(function(e){return w.a.createElement(H,{key:e.code,value:e.code},e.name)})))))),w.a.createElement(s.a,{md:5,sm:24},w.a.createElement("div",{className:D.a.inputMain},w.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"类型"),w.a.createElement(F,{style:{flex:1}},e("type",{})(w.a.createElement(v.a,{style:{width:"100%"},placeholder:"请选择"},T.map(function(e,t){return w.a.createElement(H,{value:t+1,key:t},e)})))))),w.a.createElement(s.a,{md:5,sm:24},w.a.createElement("span",{className:M.a.submitButtons},w.a.createElement(l.a,{type:"primary",htmlType:"submit"},"查询"),w.a.createElement(l.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,t=e.EquipmentErr.data,a=e.loading;return w.a.createElement(b.Fragment,null,Object(L.c)(R[0])?null:w.a.createElement(B.a,{to:"/exception/403"}),w.a.createElement(r.a,{bordered:!1},w.a.createElement("div",{className:M.a.tableList},w.a.createElement("div",{className:M.a.tableListForm},this.renderSimpleForm()),w.a.createElement(C.a,{tableAlert:!1,selectedRows:0,rowSelection:null,loading:a,data:t,size:"middle",columns:this.columns,onChange:this.handleStandardTableChange}))))}}]),t}(b.PureComponent))||n)||n;t.default=z}}]);