(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{Xvi7:function(e,a,t){"use strict";t.r(a);t("IzEo");var n,l=t("bx4M"),r=t("pVnL"),i=t.n(r),c=(t("14J3"),t("BMrR")),o=(t("jCWc"),t("kPKH")),s=(t("5NDa"),t("5rEg")),m=t("MVZn"),d=t.n(m),u=(t("miYZ"),t("tsqr")),p=(t("/zsF"),t("PArb")),f=(t("+L6B"),t("2/Rp")),h=(t("5Dmo"),t("3S7+")),E=t("lwsE"),b=t.n(E),g=t("W8MJ"),y=t.n(g),v=t("a1gu"),w=t.n(v),k=t("Nsbk"),S=t.n(k),N=t("PJYZ"),F=t.n(N),I=t("7W2i"),V=t.n(I),B=(t("2qtc"),t("kLXV")),L=(t("+BJd"),t("mr32")),M=(t("bP8k"),t("gFTJ")),x=(t("OaEy"),t("2fM7")),R=(t("y8nQ"),t("Vl3Y")),T=t("q1tI"),C=t.n(T),O=t("MuoO"),z=t("mf+E"),j=t("CkN6"),J=t("+n12"),D=t("9zHi"),P=t.n(D),A=t("ns75"),q=t.n(A),Z=t("ZP6J"),H=t.n(Z),W=R.a.Item,Y=x.a.Option,K=["/system/file","/system/file/delete","/system/file/download"],Q=R.a.create()(function(e){var a=e.modalVisible,t=e.handleModalVisible,n=e.detail;return C.a.createElement(B.a,{destroyOnClose:!0,title:"详情",className:"".concat(H.a.myModal," ").concat(H.a.modalbody),visible:a,onCancel:function(){return t()},footer:null},C.a.createElement("div",{className:H.a.detailMsg},C.a.createElement("div",{style:{padding:20}},C.a.createElement(M.a,{bordered:!0,size:"small",column:1},C.a.createElement(M.a.Item,{label:"上传者"},n.creatorName),C.a.createElement(M.a.Item,{label:"文件名"},n.fileName),C.a.createElement(M.a.Item,{label:"扩展名"},n.extensionName),C.a.createElement(M.a.Item,{label:"文件大小"},C.a.createElement(L.a,{color:"#f50"},n.note)),C.a.createElement(M.a.Item,{label:"文件路径"},n.filePath),C.a.createElement(M.a.Item,{label:"文件类型"},function(e){var a="";switch(e){case"1":a="用户类";break;case"2":a="站点信息类";break;case"3":a="模版类";break;case"4":a="法律法规类";break;case"5":a="案卷信息类";break;case"6":a="卷宗信息类";break;case"7":a="流动执法类";break;case"8":a="培训资料类";break;default:a="其他"}return a}(n.fileType)),C.a.createElement(M.a.Item,{label:"存储类型"},n.storeType),C.a.createElement(M.a.Item,{label:"上传时间"},n.createTime)))))}),X=Object(O.connect)(function(e){return{File:e.File,loading:e.loading.models.File}})(n=R.a.create()(n=function(e){function a(){var e,t;b()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=w()(this,(e=S()(a)).call.apply(e,[this].concat(l)))).state={modalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"上传者",dataIndex:"creatorName"},{title:"文件名",dataIndex:"fileName",width:200,render:function(e){return e.length>15?C.a.createElement(h.a,{title:e},C.a.createElement("span",{style:{cursor:"pointer"}},e.substr(0,15)+"......")):e}},{title:"扩展名",dataIndex:"extensionName",render:function(e){return C.a.createElement(L.a,{color:"#87d068"},e)}},{title:"文件大小",dataIndex:"note",render:function(e){return C.a.createElement(L.a,{color:"#f50"},e)}},{title:"文件路径",dataIndex:"filePath"},{title:"上传时间",dataIndex:"createTime",width:170},{title:"操作",width:Object(J.c)(K[2])?100:70,render:function(e,a){return C.a.createElement(T.Fragment,null,C.a.createElement(h.a,{placement:"left",title:"详情"},C.a.createElement(f.a,{onClick:function(){return t.showModal(a)},type:"primary",shape:"circle",icon:"eye",size:"small"})),Object(J.c)(K[2])?C.a.createElement(T.Fragment,null,C.a.createElement(p.a,{type:"vertical"}),C.a.createElement(h.a,{placement:"left",title:"文件下载"},C.a.createElement(f.a,{onClick:function(){return t.fileDown(a)},shape:"circle",icon:"download",size:"small",style:{background:"#2db7f5",color:"#fff",borderColor:"#2db7f5"}}))):null)}}],t.showModal=function(e){t.setState({detail:e}),t.handleModalVisible(!0)},t.fileDown=function(e){(0,t.props.dispatch)({type:"File/downLoad",payload:e})},t.getList=function(e){(0,t.props.dispatch)({type:"File/fetch",payload:e})},t.delBatch=function(){var e=t.state,a=e.selectedRows,n=e.pageBean;if(a){var l=t.props.dispatch,r=F()(t);B.a.confirm({title:"批量删除",content:"您确定要批量删除吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){l({type:"File/remove",payload:a.map(function(e){return e.id}).join(),callback:function(){u.a.success("删除成功"),r.getList({pageBean:n}),r.setState({selectedRows:[]})}})},onCancel:function(){}})}},t.handleStandardTableChange=function(e){var a=t.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(n)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:a})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props.form,n=t.state.pageBean;a.validateFields(function(e,a){if(!e){var l=d()({},a),r=Object.keys(l).map(function(e){return l[e]?{property:e,value:l[e],group:"main",operation:"fileType"===e?"EQUAL":"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:r}),t.getList({pageBean:n,querys:r})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t}return V()(a,e),y()(a,[{key:"componentDidMount",value:function(){if(Object(J.c)(K[0])){var e=this.state.pageBean;this.getList({pageBean:e})}}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return C.a.createElement(R.a,{onSubmit:this.handleSearch,layout:"inline"},C.a.createElement(c.a,{gutter:{md:8,lg:16,xl:32}},C.a.createElement(o.a,{md:5,sm:24},C.a.createElement(W,null,e("creatorName")(C.a.createElement(s.a,{addonBefore:"上传者",placeholder:"请输入"})))),C.a.createElement(o.a,{md:5,sm:24},C.a.createElement("div",{className:q.a.inputMain},C.a.createElement("span",{style:{width:"20%",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"类型"),C.a.createElement(W,{style:{flex:1}},e("fileType")(C.a.createElement(x.a,{className:q.a.inputGroupLeftRadius,placeholder:"请选择"},C.a.createElement(Y,{value:"1"},"用户类"),C.a.createElement(Y,{value:"2"},"站点信息类"),C.a.createElement(Y,{value:"3"},"模版类"),C.a.createElement(Y,{value:"4"},"法律法规类"),C.a.createElement(Y,{value:"5"},"案卷信息类"),C.a.createElement(Y,{value:"6"},"卷宗信息类"),C.a.createElement(Y,{value:"7"},"流动执法类"),C.a.createElement(Y,{value:"8"},"培训资料类")))))),C.a.createElement(o.a,{md:8,sm:24},C.a.createElement("span",{className:P.a.submitButtons},C.a.createElement(f.a,{type:"primary",htmlType:"submit"},"查询"),C.a.createElement(f.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.File.data,n=a.loading,r=this.state,c=r.selectedRows,o=r.modalVisible,s=r.detail,m={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,detail:s},d={loading:n,data:t,size:"middle",columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange};return C.a.createElement(T.Fragment,null,Object(J.c)(K[0])?null:C.a.createElement(z.a,{to:"/exception/403"}),C.a.createElement(l.a,{bordered:!1},C.a.createElement("div",{className:P.a.tableList},C.a.createElement("div",{className:P.a.tableListForm},this.renderSimpleForm()),C.a.createElement("div",{className:P.a.tableListOperator},c.length>0&&C.a.createElement(f.a,{type:"danger",onClick:function(){return e.delBatch()}},"批量删除")),Object(J.c)(K[1])?C.a.createElement(j.a,i()({tableAlert:!0,selectedRows:c},d)):C.a.createElement(j.a,i()({selectedRows:0,rowSelection:null},d)))),o&&"{}"!==JSON.stringify(s)?C.a.createElement(Q,i()({},m,{modalVisible:o})):null)}}]),a}(T.PureComponent))||n)||n;a.default=X}}]);