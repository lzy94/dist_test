(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{Tvjw:function(e,a,t){"use strict";t.r(a);t("IzEo");var l,n=t("bx4M"),i=(t("miYZ"),t("tsqr")),r=(t("Awhp"),t("KrTs")),o=(t("+BJd"),t("mr32")),s=t("lwsE"),d=t.n(s),c=t("W8MJ"),m=t.n(c),p=t("a1gu"),u=t.n(p),g=t("Nsbk"),h=t.n(g),b=t("PJYZ"),E=t.n(b),f=t("7W2i"),y=t.n(f),v=(t("P2fV"),t("NJEC")),k=(t("/zsF"),t("PArb")),L=(t("5Dmo"),t("3S7+")),w=t("pVnL"),C=t.n(w),V=t("MVZn"),D=t.n(V),M=(t("2qtc"),t("kLXV")),F=(t("14J3"),t("BMrR")),S=(t("7Kak"),t("9yH6")),T=(t("iQDF"),t("+eQT")),q=(t("giR+"),t("fyUT")),B=(t("jCWc"),t("kPKH")),N=(t("5NDa"),t("5rEg")),R=(t("+L6B"),t("2/Rp")),U=(t("OaEy"),t("2fM7")),x=(t("y8nQ"),t("Vl3Y")),A=t("q1tI"),O=t.n(A),I=t("MuoO"),j=t("wd/R"),z=t.n(j),Y=t("mf+E"),P=t("CkN6"),Q=t("9zHi"),H=t.n(Q),J=t("ns75"),K=t.n(J),Z=t("+n12"),G=t("ZP6J"),W=t.n(G),X=["warning","success","processing"],$=["禁用","正常","维修中"],_=["/system/device","/system/device/add","/system/device/update","/system/device/delete","/system/device/equipmentLog"],ee=x.a.Item,ae=x.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleAdd,n=e.handleModalVisible,i=e.siteList,r=e.loading,o=i.map(function(e,a){return O.a.createElement(U.a.Option,{key:a,value:e.code},e.name)});return O.a.createElement(M.a,{destroyOnClose:!0,title:"添加设备",visible:a,className:W.a.formModal,onCancel:function(){return n()},width:800,footer:[O.a.createElement(R.a,{key:"back",onClick:function(){return n()}},"取消"),O.a.createElement(R.a,{key:"submit",type:"primary",loading:r,onClick:function(){t.validateFields(function(e,a){e||(t.resetFields(),l(a))})}},"确定")]},O.a.createElement("div",{className:W.a.formModalBody},O.a.createElement(F.a,{gutter:40},O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{hasFeedback:!0,label:"设备名称"},t.getFieldDecorator("equipName",{rules:[{required:!0,message:"请输入设备名称！"}]})(O.a.createElement(N.a,{placeholder:"请输入"})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{hasFeedback:!0,label:"设备编码"},t.getFieldDecorator("equipCode",{rules:[{required:!0,message:"请输入设备编码"}]})(O.a.createElement(N.a,{placeholder:"请输入"})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{hasFeedback:!0,label:"站点"},t.getFieldDecorator("siteCode",{rules:[{required:!0,message:"请选择站点！"}]})(O.a.createElement(U.a,{placeholder:"请选择",style:{width:"100%"}},o)))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{hasFeedback:!0,label:"设备责任人"},t.getFieldDecorator("reponsiblePerson",{rules:[{required:!0,message:"请输入设备责任人！"}]})(O.a.createElement(N.a,{placeholder:"请输入"})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{label:"维修次数"},t.getFieldDecorator("repairNum",{})(O.a.createElement(q.a,{placeholder:"请输入",min:0,style:{width:"100%"}})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{label:"生产厂家"},t.getFieldDecorator("manuFactor",{rules:[{required:!0,message:"请输入生产厂家！"}]})(O.a.createElement(N.a,{placeholder:"请输入"})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{label:"厂家联系方式"},t.getFieldDecorator("manufactorTel",{rules:[{message:"请输入厂家联系方式！"}]})(O.a.createElement(N.a,{placeholder:"请输入"})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{label:"检定时间"},t.getFieldDecorator("checkTime",{})(O.a.createElement(T.a,{style:{width:"100%"},showTime:!0})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{hasFeedback:!0,label:"状态"},t.getFieldDecorator("status",{rules:[{required:!0,message:"请选择状态！"}]})(O.a.createElement(S.a.Group,{style:{width:"100%"}},O.a.createElement(S.a,{value:"0"},"禁用"),O.a.createElement(S.a,{value:"1"},"正常"),O.a.createElement(S.a,{value:"2"},"维修中"))))))))}),te=x.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleUpdate,n=e.handleModalVisible,i=e.siteList,r=e.detail,o=e.loading,s=i.map(function(e){return O.a.createElement(U.a.Option,{key:e.code,value:e.code},e.name)}),d=Object(Z.c)(_[2]),c=d?{footer:[O.a.createElement(R.a,{key:"back",onClick:function(){return n()}},"取消"),O.a.createElement(R.a,{key:"submit",type:"primary",loading:o,onClick:function(){t.validateFields(function(e,a){e||(t.resetFields(),l(a))})}},"确定")]}:{footer:null},m=d?{}:{color:"rgba(0,0,0,.7)",border:0};return O.a.createElement(M.a,C()({destroyOnClose:!0,title:d?"编辑设备":"设备详情",className:W.a.formModal,visible:a,onCancel:function(){return n()},width:800},c),O.a.createElement("div",{className:W.a.formModalBody},O.a.createElement(F.a,{gutter:40},O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{hasFeedback:d,label:"设备名称"},t.getFieldDecorator("equipName",{initialValue:r.equipName,rules:[{required:!0,message:"请输入设备名称！"}]})(O.a.createElement(N.a,{disabled:!d,style:m,placeholder:"请输入"})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{hasFeedback:d,label:"设备编码"},t.getFieldDecorator("equipCode",{initialValue:r.equipCode,rules:[{required:!0,message:"请输入设备编码"}]})(O.a.createElement(N.a,{disabled:!0,style:m,placeholder:"请输入"})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{hasFeedback:d,label:"站点"},t.getFieldDecorator("siteCode",{initialValue:r.siteCode,rules:[{required:!0,message:"请选择站点！"}]})(O.a.createElement(U.a,{disabled:!d,placeholder:"请选择",style:D()({width:"100%"},m)},s)))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{hasFeedback:d,label:"设备责任人"},t.getFieldDecorator("reponsiblePerson",{initialValue:r.reponsiblePerson,rules:[{required:!0,message:"请输入设备责任人！"}]})(O.a.createElement(N.a,{disabled:!d,style:m,placeholder:"请输入"})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{label:"维修次数"},t.getFieldDecorator("repairNum",{initialValue:r.repairNum})(O.a.createElement(q.a,{min:0,disabled:!d,placeholder:"请输入",style:D()({width:"100%"},m)})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{hasFeedback:d,label:"生产厂家"},t.getFieldDecorator("manuFactor",{initialValue:r.manuFactor,rules:[{required:!0,message:"请输入生产厂家！"}]})(O.a.createElement(N.a,{disabled:!d,style:m,placeholder:"请输入"})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{label:"厂家联系方式"},t.getFieldDecorator("manufactorTel",{initialValue:r.manufactorTel,rules:[{message:"请输入厂家联系方式！"}]})(O.a.createElement(N.a,{disabled:!d,style:m,placeholder:"请输入"})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{label:"检定时间"},t.getFieldDecorator("checkTime",{initialValue:z()(new Date(r.checkTime||null),"YYYY-MM-DD HH:mm:ss")})(O.a.createElement(T.a,{disabled:!d,style:D()({width:"100%"},m),showTime:!0})))),O.a.createElement(B.a,{md:12,sm:24},O.a.createElement(ee,{hasFeedback:d,label:"状态"},t.getFieldDecorator("status",{initialValue:r.status,rules:[{required:!0,message:"请选择状态！"}]})(O.a.createElement(S.a.Group,{disabled:!d,style:D()({width:"100%"},m)},O.a.createElement(S.a,{value:"0"},"禁用"),O.a.createElement(S.a,{value:"1"},"正常"),O.a.createElement(S.a,{value:"2"},"维修中"))))))))}),le=x.a.create()(function(e){var a=e.modalVisible,t=(e.form,e.handleModalVisible),l=e.data,n=e.loading,i=e.handleLogAddModalVisible,r=e.handleStandardTableChange,o=e.showLogUpdateModal,s=e.dataLogDel,d=e.selectedRows,c=e.handleSelectRows,m=e.delLogBatch,p=[{title:"维修原因",dataIndex:"repairReson"},{title:"维修人",dataIndex:"repairPerson"},{title:"维修人联系方式",dataIndex:"repairTel"},{title:"维修时间(h)",dataIndex:"repairDate"},{title:"维修内容",dataIndex:"repairContent",width:300,render:function(e){return e?e.length>15?O.a.createElement(L.a,{title:e},O.a.createElement("a",null,"".concat(e.substr(0,15),"......."))):e:""}},{title:"操作",width:"90px",render:function(e,a){return O.a.createElement(A.Fragment,null,O.a.createElement(L.a,{placement:"left",title:"编辑"},O.a.createElement(R.a,{onClick:function(){return o(a)},type:"primary",shape:"circle",icon:"edit",size:"small"})),O.a.createElement(k.a,{type:"vertical"}),O.a.createElement(v.a,{title:"是否删除数据?",onConfirm:function(){return s(a.id)},okText:"确定",cancelText:"取消"},O.a.createElement(L.a,{placement:"left",title:"删除"},O.a.createElement(R.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}];return O.a.createElement(M.a,{destroyOnClose:!0,title:"维修记录",visible:a,className:W.a.myModal,onCancel:function(){return t()},footer:null,width:"1000px"},O.a.createElement("div",{className:H.a.tableList},O.a.createElement("div",{className:H.a.tableListOperator},O.a.createElement(R.a,{onClick:function(){return i(!0)},icon:"plus",type:"primary"},"新增记录"),d.length>0&&O.a.createElement(R.a,{type:"danger",onClick:function(){return m()}},"批量删除")),O.a.createElement(P.a,{tableAlert:!0,selectedRows:d,loading:n,data:l,size:"middle",columns:p,onSelectRow:c,onChange:r})))}),ne=x.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleModalVisible,n=e.handleLogAdd,i=e.loading,r=function(){t.validateFields(function(e,a){e||(t.resetFields(),n(a))})};return O.a.createElement(M.a,{destroyOnClose:!0,title:"添加维修记录",onOk:r,className:W.a.formModal,visible:a,onCancel:function(){return l()},footer:[O.a.createElement(R.a,{key:"back",onClick:function(){return l()}},"取消"),O.a.createElement(R.a,{key:"submit",type:"primary",loading:i,onClick:r},"确定")]},O.a.createElement("div",{className:W.a.formModalBody},O.a.createElement(ee,{labelCol:{span:6},hasFeedback:!0,wrapperCol:{span:15},label:"维修所需时间/h"},t.getFieldDecorator("repairDate",{rules:[{required:!0,message:"请输入维修所需时间！"}]})(O.a.createElement(q.a,{style:{width:"100%"},min:0,placeholder:"请输入"}))),O.a.createElement(ee,{labelCol:{span:6},hasFeedback:!0,wrapperCol:{span:15},label:"维修人"},t.getFieldDecorator("repairPerson",{rules:[{required:!0,message:"请输入维修人！"}]})(O.a.createElement(N.a,{placeholder:"请输入"}))),O.a.createElement(ee,{labelCol:{span:6},hasFeedback:!0,wrapperCol:{span:15},label:"维修人联系方式"},t.getFieldDecorator("repairTel",{rules:[{validator:Z.j}]})(O.a.createElement(N.a,{placeholder:"请输入"}))),O.a.createElement(ee,{labelCol:{span:6},hasFeedback:!0,wrapperCol:{span:15},label:"维修原因"},t.getFieldDecorator("repairReson",{rules:[{required:!0,message:"请输入维修原因！"}]})(O.a.createElement(N.a.TextArea,{placeholder:"请输入"}))),O.a.createElement(ee,{labelCol:{span:6},wrapperCol:{span:15},label:"维修内容"},t.getFieldDecorator("repairContent",{rules:[{message:"请输入维修内容！"}]})(O.a.createElement(N.a.TextArea,{placeholder:"请输入"})))))}),ie=x.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleModalVisible,n=e.handleLogUpdate,i=e.detail,r=e.loading;return O.a.createElement(M.a,{destroyOnClose:!0,title:"编辑维修记录",className:W.a.formModal,visible:a,onCancel:function(){return l()},footer:[O.a.createElement(R.a,{key:"back",onClick:function(){return l()}},"取消"),O.a.createElement(R.a,{key:"submit",type:"primary",loading:r,onClick:function(){t.validateFields(function(e,a){e||(t.resetFields(),n(a))})}},"确定")]},O.a.createElement("div",{className:W.a.formModalBody},O.a.createElement(ee,{labelCol:{span:6},hasFeedback:!0,wrapperCol:{span:15},label:"维修所需时间/h"},t.getFieldDecorator("repairDate",{initialValue:i.repairDate,rules:[{required:!0,message:"请输入维修所需时间！"}]})(O.a.createElement(q.a,{min:0,style:{width:"100%"},placeholder:"请输入"}))),O.a.createElement(ee,{labelCol:{span:6},hasFeedback:!0,wrapperCol:{span:15},label:"维修人"},t.getFieldDecorator("repairPerson",{initialValue:i.repairPerson,rules:[{required:!0,message:"请输入维修人！"}]})(O.a.createElement(N.a,{placeholder:"请输入"}))),O.a.createElement(ee,{labelCol:{span:6},hasFeedback:!0,wrapperCol:{span:15},label:"维修人联系方式"},t.getFieldDecorator("repairTel",{initialValue:i.repairTel,rules:[{validator:Z.j}]})(O.a.createElement(N.a,{placeholder:"请输入"}))),O.a.createElement(ee,{labelCol:{span:6},hasFeedback:!0,wrapperCol:{span:15},label:"维修原因"},t.getFieldDecorator("repairReson",{initialValue:i.repairReson,rules:[{required:!0,message:"请输入维修原因！"}]})(O.a.createElement(N.a.TextArea,{placeholder:"请输入"}))),O.a.createElement(ee,{labelCol:{span:6},wrapperCol:{span:15},label:"维修内容"},t.getFieldDecorator("repairContent",{initialValue:i.repairContent,rules:[{message:"请输入维修内容！"}]})(O.a.createElement(N.a.TextArea,{placeholder:"请输入"})))))}),re=Object(I.connect)(function(e){return{system:e.system,Device:e.Device,loading:e.loading.models.Device}})(l=x.a.create()(l=function(e){function a(){var e,t;d()(this,a);for(var l=arguments.length,n=new Array(l),s=0;s<l;s++)n[s]=arguments[s];return(t=u()(this,(e=h()(a)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,updateModalVisible:!1,logListModalVisible:!1,logAddModalVisible:!1,logUpdateModalVisible:!1,selectedRows:[],logSelectedRows:[],formValues:[],siteList:[],detail:{},logDetail:{},logQuery:{},equipmentId:"",pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"设备编码",dataIndex:"equipCode"},{title:"设备名称",dataIndex:"equipName"},{title:"设备责任人",dataIndex:"reponsiblePerson"},{title:"站点",dataIndex:"siteName"},{title:"检定时间",width:170,dataIndex:"checkTime",render:function(e){return new Date>new Date(e)?O.a.createElement(o.a,{color:"#f50"},e):e}},{title:"维修次数",dataIndex:"repairNum"},{title:"状态",dataIndex:"status",render:function(e){return O.a.createElement(r.a,{status:X[e],text:$[e]})}},{title:"操作",width:130,render:function(e,a){return O.a.createElement(A.Fragment,null,Object(Z.c)(_[4])?O.a.createElement(A.Fragment,null,O.a.createElement(L.a,{placement:"left",title:"维修记录"},O.a.createElement(R.a,{onClick:function(){return t.showLogModal(a.equipCode)},type:"primary",shape:"circle",icon:"table",size:"small"})),O.a.createElement(k.a,{type:"vertical"})):null,Object(Z.c)(_[2])?O.a.createElement(L.a,{placement:"left",title:"编辑"},O.a.createElement(R.a,{onClick:function(){return t.showUpdateModal(a.id)},type:"primary",shape:"circle",icon:"edit",size:"small"})):O.a.createElement(L.a,{placement:"left",title:"详情"},O.a.createElement(R.a,{onClick:function(){return t.showUpdateModal(a.id)},type:"primary",shape:"circle",icon:"eye",size:"small"})),Object(Z.c)(_[3])?O.a.createElement(A.Fragment,null,O.a.createElement(k.a,{type:"vertical"}),O.a.createElement(v.a,{title:"是否删除数据?",onConfirm:function(){return t.dataDel(a.id)},okText:"确定",cancelText:"取消"},O.a.createElement(L.a,{placement:"left",title:"删除"},O.a.createElement(R.a,{type:"danger",shape:"circle",icon:"delete",size:"small"})))):null)}}],t.getList=function(e){(0,t.props.dispatch)({type:"Device/fetch",payload:e})},t.getLogList=function(e,a){(0,t.props.dispatch)({type:"Device/fetchLog",payload:e,callback:function(){a&&a()}})},t.showLogModal=function(e){var a=t.state.pageBean,l={property:"equipmentId",value:e,group:"main",operation:"EQUAL",relation:"AND"};t.setState({logQuery:l}),t.getLogList({pageBean:a,querys:[l]},function(){t.setState({equipmentId:e}),t.handleLogModalVisible(!0)})},t.showUpdateModal=function(e){(0,t.props.dispatch)({type:"Device/detail",payload:{id:e},callback:function(e){t.setState({detail:e}),t.handleUpdateModalVisible(!0)}})},t.delBatch=function(){var e=t.state.selectedRows;if(e){var a=E()(t);M.a.confirm({title:"批量删除",content:"您确定要批量删除吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a.delUtil(e.map(function(e){return e.id}).join())},onCancel:function(){}})}},t.dataDel=function(e){t.delUtil(e)},t.delUtil=function(e){var a=t.state.pageBean;(0,t.props.dispatch)({type:"Device/remove",payload:{ids:e},callback:function(){i.a.success("删除成功"),setTimeout(function(){return t.getList({pageBean:a})},100),t.setState({selectedRows:[]})}})},t.handleStandardTableChange=function(e,a,l){var n=t.props.dispatch,i=t.state.formValues;n({type:"Device/fetch",payload:{pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:i}})},t.handleLogTableChange=function(e,a,l){var n=t.props.dispatch,i=t.state.logQuery;n({type:"Device/fetchLog",payload:{pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:[i]}})},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:a})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props.form,l=t.state.pageBean;a.validateFields(function(e,a){if(!e){var n=D()({},a),i=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"organCode"===e?"EQUAL":"LIKE",relation:"OR"}:""}).filter(function(e){return e});t.setState({formValues:i}),t.getList({pageBean:l,querys:i})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e})},t.handleLogModalVisible=function(e){t.setState({logListModalVisible:!!e})},t.handleLogAddModalVisible=function(e){t.setState({logAddModalVisible:!!e})},t.handleLogUpdateModalVisible=function(e){t.setState({logUpdateModalVisible:!!e})},t.handleAdd=function(e){for(var a=t.props.dispatch,l=t.state,n=l.pageBean,r=l.siteList,o=0;o<r.length;o++)if(r[o].code===e.siteCode){e.siteName=r[o].name;break}e.checkTime=z()(e.checkTime).format("YYYY-MM-DD HH:mm:ss"),a({type:"Device/add",payload:e,callback:function(){t.getList({pageBean:n}),i.a.success("添加成功"),t.handleModalVisible()}})},t.handleUpdate=function(e){for(var a=t.props.dispatch,l=t.state,n=l.pageBean,r=l.siteList,o=l.detail,s=0;s<r.length;s++)if(r[s].code===e.siteCode){e.siteName=r[s].name;break}e.id=o.id,e.checkTime=z()(e.checkTime).format("YYYY-MM-DD HH:mm:ss"),t.setState({detail:e}),a({type:"Device/update",payload:e,callback:function(){i.a.success("编辑成功"),t.handleUpdateModalVisible(),setTimeout(function(){return t.getList({pageBean:n})},100),t.setState({detail:{}})}})},t.handleLogAdd=function(e){var a=t.props.dispatch,l=t.state,n=l.pageBean,i=l.equipmentId,r=l.logQuery;e.equipmentId=i,a({type:"Device/addLog",payload:e,callback:function(){t.getLogList({pageBean:n,querys:[r]}),t.handleLogAddModalVisible()}})},t.handleLogUpdate=function(e){var a=t.props.dispatch,l=t.state,n=l.pageBean,i=l.logQuery,r=l.logDetail;e.id=r.id,e.equipmentId=r.equipmentId,a({type:"Device/updateLog",payload:e,callback:function(){t.getLogList({pageBean:n,querys:[i]}),t.handleLogUpdateModalVisible(!1),setTimeout(function(){t.setState({logDetail:{}})},50)}})},t.handleLogSelectRows=function(e){t.setState({logSelectedRows:e})},t.showLogUpdateModal=function(e){t.handleLogUpdateModalVisible(!0),t.setState({logDetail:e})},t.dataLogDel=function(e){t.logDelUtil(e)},t.delLogBatch=function(){var e=t.state.logSelectedRows;if(e){var a=E()(t);M.a.confirm({title:"批量删除",content:"您确定要批量删除吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a.logDelUtil(e.map(function(e){return e.id}).join())},onCancel:function(){}})}},t.logDelUtil=function(e){var a=t.props.dispatch,l=t.state,n=l.pageBean,i=l.logQuery;a({type:"Device/removeLog",payload:{ids:e},callback:function(){t.getLogList({pageBean:n,querys:[i]}),t.setState({logSelectedRows:[]})}})},t}return y()(a,e),m()(a,[{key:"componentDidMount",value:function(){var e=this;if(Object(Z.c)(_[0])){var a=this.state.pageBean,t=this.props.dispatch;this.getList({pageBean:a}),t({type:"system/userSite",payload:{siteType:1},callback:function(a){var t=a.map(function(e,a){var t=Object.keys(e);return{index:a+1,code:t[0],name:e[t[0]],direction:[e[t[1]],e[t[2]]]}});e.setState({siteList:t})}})}}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,a=this.state.siteList;return O.a.createElement(x.a,{onSubmit:this.handleSearch,layout:"inline"},O.a.createElement(F.a,{gutter:{md:8,lg:16,xl:16}},O.a.createElement(B.a,{md:6,sm:24},O.a.createElement(ee,null,e("equipName")(O.a.createElement(N.a,{addonBefore:"设备名称",placeholder:"请输入"})))),O.a.createElement(B.a,{md:6,sm:24},O.a.createElement("div",{className:K.a.inputMain},O.a.createElement("span",{style:{width:"20%",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"站点"),O.a.createElement(ee,{style:{flex:1}},e("siteCode")(O.a.createElement(U.a,{className:K.a.inputGroupLeftRadius,placeholder:"请选择"},a.map(function(e,a){return O.a.createElement(U.a.Option,{value:e.code,key:a},e.name)})))))),O.a.createElement(B.a,{md:6,sm:24},O.a.createElement("span",{className:H.a.submitButtons},O.a.createElement(R.a,{type:"primary",htmlType:"submit"},"查询"),O.a.createElement(R.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.Device,l=t.data,i=t.logData,r=a.loading,o=this.state,s=o.selectedRows,d=o.modalVisible,c=o.siteList,m=o.updateModalVisible,p=o.detail,u=o.logDetail,g=o.logListModalVisible,h=o.logAddModalVisible,b=o.logSelectedRows,E=o.logUpdateModalVisible,f={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,siteList:c,loading:r},y={loading:r,handleUpdate:this.handleUpdate,handleModalVisible:this.handleUpdateModalVisible,siteList:c,detail:p},v={data:i,loading:r,handleLogAddModalVisible:this.handleLogAddModalVisible,handleModalVisible:this.handleLogModalVisible,handleStandardTableChange:this.handleLogTableChange,dataLogDel:this.dataLogDel,handleSelectRows:this.handleLogSelectRows,selectedRows:b,delLogBatch:this.delLogBatch,showLogUpdateModal:this.showLogUpdateModal},k={handleModalVisible:this.handleLogAddModalVisible,handleLogAdd:this.handleLogAdd,loading:r},L={handleModalVisible:this.handleLogUpdateModalVisible,detail:u,loading:r,handleLogUpdate:this.handleLogUpdate},w={loading:r,data:l,size:"middle",columns:this.columns,onChange:this.handleStandardTableChange};return O.a.createElement(A.Fragment,null,Object(Z.c)(_[0])?"":O.a.createElement(Y.a,{to:"/exception/403"}),O.a.createElement(n.a,{bordered:!1},O.a.createElement("div",{className:H.a.tableList},O.a.createElement("div",{className:H.a.tableListForm},this.renderSimpleForm()),O.a.createElement("div",{className:H.a.tableListOperator},Object(Z.c)(_[1])?O.a.createElement(R.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"):null,s.length>0&&O.a.createElement("span",null,O.a.createElement(R.a,{type:"danger",onClick:function(){return e.delBatch()}},"批量删除"))),Object(Z.c)(_[3])?O.a.createElement(P.a,C()({tableAlert:!0,selectedRows:s,onSelectRow:this.handleSelectRows},w)):O.a.createElement(P.a,C()({selectedRows:0,rowSelection:null},w)))),O.a.createElement(ae,C()({},f,{modalVisible:d})),m&&"{}"!==JSON.stringify(p)?O.a.createElement(te,C()({},y,{modalVisible:m})):null,g?O.a.createElement(le,C()({},v,{modalVisible:g})):null,g?O.a.createElement(ne,C()({},k,{modalVisible:h})):null,g&&"{}"!==JSON.stringify(u)?O.a.createElement(ie,C()({},L,{modalVisible:E})):null)}}]),a}(A.PureComponent))||l)||l;a.default=re}}]);