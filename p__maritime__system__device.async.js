(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{eCBI:function(e,a,t){"use strict";t.r(a);var n,l,r=t("pVnL"),i=t.n(r),o=(t("IzEo"),t("bx4M")),s=(t("14J3"),t("BMrR")),c=(t("jCWc"),t("kPKH")),d=(t("miYZ"),t("tsqr")),m=(t("P2fV"),t("NJEC")),p=(t("/zsF"),t("PArb")),u=(t("5Dmo"),t("3S7+")),h=t("lwsE"),g=t.n(h),f=t("W8MJ"),y=t.n(f),E=t("a1gu"),b=t.n(E),M=t("Nsbk"),v=t.n(M),N=t("7W2i"),V=t.n(N),D=(t("2qtc"),t("kLXV")),k=(t("5NDa"),t("5rEg")),C=(t("+L6B"),t("2/Rp")),S=(t("OaEy"),t("2fM7")),B=(t("y8nQ"),t("Vl3Y")),w=t("q1tI"),F=t.n(w),L=t("MuoO"),I=t("wd/R"),x=t.n(I),P=t("CkN6"),z=t("9zHi"),O=t.n(z),U=t("ZP6J"),q=t.n(U),A=t("ns75"),T=t.n(A),R=B.a.Item,J=S.a.Option,j=Object(L.connect)(function(e){return{MaritimePort:e.MaritimePort,loading:e.loading.models.MaritimePort}})(n=B.a.create()(n=function(e){function a(){var e,t;g()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=b()(this,(e=v()(a)).call.apply(e,[this].concat(l)))).state={formValues:[],departmentUserList:[],pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"港口名称",dataIndex:"portName"},{title:"负责人",dataIndex:"changer"},{title:"注册时间",dataIndex:"registTime",width:120,render:function(e){return x()(e).format("YYYY-MM-DD")}},{title:"地址",dataIndex:"portAddr"},{title:"状态",dataIndex:"state",width:80,render:function(e){return 1===e?"营运中":"停业中"}},{title:"操作",width:100,render:function(e,a){return F.a.createElement(w.Fragment,null,F.a.createElement(u.a,{placement:"left",title:"选择"},F.a.createElement(C.a,{type:"primary",shape:"circle",icon:"check",size:"small",onClick:function(){return t.selectData(a)}})))}}],t.selectData=function(e){var a=t.props,n=a.selectData,l=a.handleModalVisible;n(e),l()},t.getList=function(e){(0,t.props.dispatch)({type:"MaritimePort/fetch",payload:e})},t.getDepartmentUser=function(){(0,t.props.dispatch)({type:"system/departmentUser",payload:{menuType:-3},callback:function(e){t.setState({departmentUserList:e})}})},t.handleStandardTableChange=function(e){var a=t.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(n)},t.handleFormReset=function(){t.props.form.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:t.state.pageBean})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.state.pageBean,l={portName:a.name,state:a.zt,changerId:a.fzr},r=Object.keys(l).map(function(e){return l[e]?{property:e,value:l[e],group:"main",operation:"portName"===e?"LIKE":"EQUAL",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:r}),t.getList({pageBean:n,querys:r})}})},t}return V()(a,e),y()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e}),this.getDepartmentUser()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,a=this.state.departmentUserList;return F.a.createElement(B.a,{onSubmit:this.handleSearch,layout:"inline"},F.a.createElement(s.a,{gutter:{md:8,lg:16,xl:16}},F.a.createElement(c.a,{md:6,sm:24},F.a.createElement(R,null,e("name")(F.a.createElement(k.a,{addonBefore:"港口名称",placeholder:"请输入"})))),F.a.createElement(c.a,{md:6,sm:24},F.a.createElement("div",{className:T.a.inputMain},F.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"负责人"),F.a.createElement(R,{style:{flex:1}},e("fzr")(F.a.createElement(S.a,{placeholder:"请选择",style:{width:"100%"}},a.map(function(e,a){return F.a.createElement(J,{key:a,value:e.id},e.fullname)})))))),F.a.createElement(c.a,{md:6,sm:24},F.a.createElement("div",{className:T.a.inputMain},F.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"状态"),F.a.createElement(R,{style:{flex:1}},e("zt")(F.a.createElement(S.a,{placeholder:"请选择",style:{width:"100%"}},F.a.createElement(J,{value:1},"营运中"),F.a.createElement(J,{value:2},"停业中")))))),F.a.createElement(c.a,{md:6,sm:24},F.a.createElement("span",{className:O.a.submitButtons},F.a.createElement(C.a,{type:"primary",htmlType:"submit"},"查询"),F.a.createElement(C.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,a=e.MaritimePort.data,t=e.loading,n=e.handleModalVisible,l=e.modalVisible;return F.a.createElement(D.a,{destroyOnClose:!0,title:"选择港口",className:q.a.formModal,visible:l,width:1e3,footer:null,onCancel:function(){return n()}},F.a.createElement(o.a,{bordered:!1},F.a.createElement("div",{className:O.a.tableList},F.a.createElement("div",{className:O.a.tableListForm},this.renderSimpleForm()),F.a.createElement(P.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange}))))}}]),a}(w.PureComponent))||n)||n,Y=B.a.Item,H=S.a.Option,_=B.a.create()(function(e){var a=e.modalVisible,t=e.form,n=e.handleAdd,l=e.handleModalVisible,r=e.loading,i=e.cateData,o=e.handlePortModalVisible,s=e.portMsg,c=e.cateChange;return F.a.createElement(D.a,{destroyOnClose:!0,title:"添加港口",className:q.a.formModal,visible:a,onCancel:function(){return l()},footer:[F.a.createElement(C.a,{key:"back",onClick:function(){return l()}},"取消"),F.a.createElement(C.a,{key:"submit",type:"primary",loading:r,onClick:function(){t.validateFields(function(e,a){e||n(a,function(){return t.resetFields()})})}},"确定")]},F.a.createElement("div",{className:q.a.formModalBody},F.a.createElement(Y,{label:"设备名称"},t.getFieldDecorator("name",{rules:[{required:!0,message:"请输入设备名称"}]})(F.a.createElement(k.a,{placeholder:"请输入"}))),F.a.createElement(Y,{label:"设备编号"},t.getFieldDecorator("code",{rules:[{required:!0,message:"请输入设备编号"}]})(F.a.createElement(k.a,{placeholder:"请输入"}))),F.a.createElement(Y,{label:"设备类型"},t.getFieldDecorator("categoryId",{rules:[{required:!0,message:"请选择设备类型"}]})(F.a.createElement(S.a,{style:{width:"100%"},placeholder:"请选择",onChange:c},i.list.map(function(e,a){return F.a.createElement(H,{value:e.id_,key:a},e.categoryName)})))),F.a.createElement(Y,{label:"所属港口"},t.getFieldDecorator("portName",{initialValue:s.portName,rules:[{required:!0,message:"请选择所属港口"}]})(F.a.createElement(k.a,{readOnly:!0,placeholder:"请选择",onClick:function(){return o(!0)}})))))}),K=B.a.create()(function(e){var a=e.modalVisible,t=e.form,n=e.handleUpdate,l=e.handleModalVisible,r=e.loading,i=e.detail,o=e.cateData,s=e.portMsg,c=e.handlePortModalVisible,d=e.cateChange;return F.a.createElement(D.a,{destroyOnClose:!0,title:"编辑港口",className:q.a.formModal,visible:a,onCancel:function(){return l()},footer:[F.a.createElement(C.a,{key:"back",onClick:function(){return l()}},"取消"),F.a.createElement(C.a,{key:"submit",type:"primary",loading:r,onClick:function(){t.validateFields(function(e,a){e||n(a,function(){return t.resetFields()})})}},"确定")]},F.a.createElement("div",{className:q.a.formModalBody},F.a.createElement(Y,{label:"设备名称"},t.getFieldDecorator("name",{initialValue:i.name,rules:[{required:!0,message:"请输入设备名称"}]})(F.a.createElement(k.a,{placeholder:"请输入"}))),F.a.createElement(Y,{label:"设备编号"},t.getFieldDecorator("code",{initialValue:i.code,rules:[{required:!0,message:"请输入设备编号"}]})(F.a.createElement(k.a,{placeholder:"请输入"}))),F.a.createElement(Y,{label:"设备类型"},t.getFieldDecorator("categoryId",{initialValue:i.categoryId,rules:[{required:!0,message:"请选择设备类型"}]})(F.a.createElement(S.a,{style:{width:"100%"},placeholder:"请选择",onChange:d},o.list.map(function(e,a){return F.a.createElement(H,{value:e.id_,key:a},e.categoryName)})))),F.a.createElement(Y,{label:"所属港口"},t.getFieldDecorator("portName",{initialValue:s.portName,rules:[{required:!0,message:"请选择所属港口"}]})(F.a.createElement(k.a,{readOnly:!0,placeholder:"请选择",onClick:function(){return c(!0)}})))))}),Q=Object(L.connect)(function(e){return{MaritimeDevice:e.MaritimeDevice,loading:e.loading.models.MaritimeDevice}})(l=B.a.create()(l=function(e){function a(){var e,t;g()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=b()(this,(e=v()(a)).call.apply(e,[this].concat(l)))).state={modalVisible:!1,updateModalVisible:!1,formValues:[],detail:{},portMsg:{},categoryName:"",portVisible:!1,pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"设备名称",dataIndex:"name"},{title:"设备编号",dataIndex:"code"},{title:"设备类型",dataIndex:"categoryName"},{title:"所属港口",dataIndex:"portName"},{title:"操作",width:100,render:function(e,a){return F.a.createElement(w.Fragment,null,F.a.createElement(u.a,{placement:"left",title:"编辑"},F.a.createElement(C.a,{onClick:function(){return t.editData(a)},type:"primary",shape:"circle",icon:"edit",size:"small"})),F.a.createElement(p.a,{type:"vertical"}),F.a.createElement(m.a,{title:"是否删除数据?",onConfirm:function(){return t.dataDel(a.id_)},okText:"确定",cancelText:"取消"},F.a.createElement(u.a,{placement:"left",title:"删除"},F.a.createElement(C.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.getList=function(e){(0,t.props.dispatch)({type:"MaritimeDevice/fetch",payload:e})},t.getCateList=function(){(0,t.props.dispatch)({type:"MaritimeDevice/fetchCate"})},t.dataDel=function(e){(0,t.props.dispatch)({type:"MaritimeDevice/remove",payload:{id:e},callback:function(){d.a.success("删除成功"),t.getList({pageBean:t.state.pageBean})}})},t.editData=function(e){t.setState({detail:e,categoryName:e.categoryName,portMsg:{portId:e.portId,portName:e.portName}},function(){return t.handleUpdateModalVisible(!0)})},t.handleStandardTableChange=function(e){var a=t.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(n)},t.handleFormReset=function(){t.props.form.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:t.state.pageBean})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.state.pageBean,l={name:a.sbmc,code:a.sbbm,categoryId:a.sblx,portName:a.portName},r=Object.keys(l).map(function(e){return l[e]?{property:e,value:l[e],group:"main",operation:"categoryId"===e?"EQUAL":"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:r}),t.getList({pageBean:n,querys:r})}})},t.selectData=function(e){t.setState({portMsg:{portId:e.id,portName:e.portName}})},t.handlePortModalVisible=function(e){t.setState({portVisible:!!e})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e}),e||t.setState({portMsg:{},categoryName:""})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e}),e||t.setState({detail:{},portMsg:{},categoryName:""})},t.cateChange=function(e,a){t.setState({categoryName:a.props.children})},t.handleAdd=function(e,a){var n=t.props.dispatch,l=t.state,r=l.pageBean,i=l.categoryName,o=l.portMsg;e.categoryName=i,e.portName=o.portName,e.portId=o.portId,n({type:"MaritimeDevice/add",payload:e,callback:function(){d.a.success("添加成功"),t.getList({pageBean:r}),t.handleModalVisible(),a()}})},t.handleUpdate=function(e,a){var n=t.props.dispatch,l=t.state,r=l.detail,i=l.pageBean,o=l.categoryName,s=l.portMsg,c=JSON.parse(JSON.stringify(r));for(var m in e.categoryName=o,e.portName=s.portName,e.portId=s.portId,e)c[m]=e[m];t.setState({detail:c}),n({type:"MaritimeDevice/update",payload:c,callback:function(){d.a.success("编辑成功"),t.handleUpdateModalVisible(),t.getList({pageBean:i}),a()}})},t}return V()(a,e),y()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getCateList(),this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props,a=e.MaritimeDevice.cateData,t=e.form.getFieldDecorator;return F.a.createElement(B.a,{onSubmit:this.handleSearch,layout:"inline"},F.a.createElement(s.a,{gutter:{md:8,lg:16,xl:32}},F.a.createElement(c.a,{md:5,sm:24},F.a.createElement(Y,null,t("sbmc")(F.a.createElement(k.a,{addonBefore:"设备名称",placeholder:"请输入"})))),F.a.createElement(c.a,{md:5,sm:24},F.a.createElement(Y,null,t("sbbm")(F.a.createElement(k.a,{addonBefore:"设备编码",placeholder:"请输入"})))),F.a.createElement(c.a,{md:5,sm:24},F.a.createElement("div",{className:T.a.inputMain},F.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"设备类型"),F.a.createElement(Y,{style:{flex:1}},t("sblx")(F.a.createElement(S.a,{placeholder:"请选择",style:{width:"100%"}},a.list.map(function(e,a){return F.a.createElement(H,{value:e.id_,key:a},e.categoryName)})))))),F.a.createElement(c.a,{md:5,sm:24},F.a.createElement(Y,null,t("sugk")(F.a.createElement(k.a,{addonBefore:"所属港口",placeholder:"请输入"})))),F.a.createElement(c.a,{md:4,sm:24},F.a.createElement("span",{className:O.a.submitButtons},F.a.createElement(C.a,{type:"primary",htmlType:"submit"},"查询"),F.a.createElement(C.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.MaritimeDevice,n=t.data,l=t.cateData,r=a.loading,s=this.state,c=s.modalVisible,d=s.updateModalVisible,m=s.detail,p=s.portVisible,u=s.portMsg,h={loading:r,cateData:l,portMsg:u,cateChange:this.cateChange,handlePortModalVisible:this.handlePortModalVisible,handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},g={loading:r,detail:m,cateData:l,portMsg:u,cateChange:this.cateChange,handlePortModalVisible:this.handlePortModalVisible,handleModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate};return F.a.createElement(w.Fragment,null,F.a.createElement(o.a,{bordered:!1},F.a.createElement("div",{className:O.a.tableList},F.a.createElement("div",{className:O.a.tableListForm},this.renderSimpleForm()),F.a.createElement("div",{className:O.a.tableListOperator},F.a.createElement(C.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建")),F.a.createElement(P.a,{rowKey:"id_",size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:r,data:n,columns:this.columns,onChange:this.handleStandardTableChange}))),c?F.a.createElement(_,i()({},h,{modalVisible:c})):null,d&&Object.keys(m).length?F.a.createElement(K,i()({},g,{modalVisible:d})):null,p?F.a.createElement(j,{selectData:this.selectData,handleModalVisible:this.handlePortModalVisible,modalVisible:p}):null)}}]),a}(w.PureComponent))||l)||l;a.default=Q}}]);