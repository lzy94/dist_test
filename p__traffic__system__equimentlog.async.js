(window.webpackJsonp=window.webpackJsonp||[]).push([[169],{OTYs:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r=a("bx4M"),i=a("pVnL"),l=a.n(i),c=(a("14J3"),a("BMrR")),d=(a("+L6B"),a("2/Rp")),o=(a("jCWc"),a("kPKH")),s=a("RIqP"),m=a.n(s),u=a("lwsE"),p=a.n(u),h=a("W8MJ"),g=a.n(h),f=a("a1gu"),x=a.n(f),I=a("Nsbk"),y=a.n(I),w=a("7W2i"),E=a.n(w),v=(a("OaEy"),a("2fM7")),_=(a("y8nQ"),a("Vl3Y")),S=(a("iQDF"),a("+eQT")),k=a("q1tI"),R=a.n(k),b=a("MuoO"),C=a("wd/R"),B=a.n(C),L=a("CkN6"),F=a("9zHi"),N=a.n(F),M=a("ns75"),T=a.n(M),V=a("+n12"),q=a("15hv"),z=a.n(q),D=(S.a.RangePicker,_.a.Item),Y=v.a.Option,H=["相机日志","传感器","仪表","抓拍软件","称重匹配日志"],O=["camerastatetime","sensortime","instrument_state_time","softwarestatetime","matchdatatime"],A=["无相机","正常","异常"],J=Object(b.connect)(function(e){return{Equimentlog:e.Equimentlog,loading:e.loading.models.Equimentlog}})(n=_.a.create()(n=function(e){function t(){var e,a;p()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=x()(this,(e=y()(t)).call.apply(e,[this].concat(r)))).state={selectedRows:[],formValues:1,type:1,pageBean:{page:1,pageSize:10,showTotal:!0}},a.getList=function(e){(0,a.props.dispatch)({type:"Equimentlog/fetch",payload:e})},a.handleStandardTableChange=function(e){var t=a.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},type:t};a.getList(n)},a.handleFormReset=function(){var e=a.props.form,t=a.state,n=t.pageBean;t.formValues;e.resetFields(),a.setState({formValues:1}),a.getList({pageBean:n,type:1})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props.form,n=a.state.pageBean;t.validateFields(function(e,t){e||(a.setState({formValues:t.type||1}),a.getList({pageBean:n,querys:[{property:O[(t.type||1)-1],value:t.time?B()(t.time).format("YYYY-MM-DD"):"",group:"main",operation:"RIGHT_LIKE",relation:"AND"}].filter(function(e){return e.value}),type:t.type||1}))})},a.changeType=function(e){a.setState({type:e})},a.renderImg=function(e){return R.a.createElement("img",{height:60,src:V.B+e,alt:"",onError:function(e){e.target.onerror=null,e.target.src=z.a}})},a.renderColumns=function(){var e=[],t={};switch(a.state.formValues){case 1:for(var n=function(t){e=[].concat(m()(e),[{title:"相机".concat(t),dataIndex:"camerastate_".concat(t),render:function(e,a){return t>a.cameranum?A[0]:e>1?A[2]:A[e]}}])},r=1;r<=20;r++)n(r);e=[{title:"站点号",dataIndex:"siteCode"},{title:"相机数",dataIndex:"cameranum"},{title:"时间",width:170,dataIndex:"camerastatetime"}].concat(m()(e)),t={scroll:{x:"150%"}};break;case 2:e=[{title:"站点号",dataIndex:"siteCode"},{title:"检测时间",width:170,dataIndex:"sensortime"},{title:"传感器零点",children:[]},{title:"传感器状态",children:[]},{title:"线圈状态",children:[]}];for(r=1;r<=32;r++)e[2].children=[].concat(m()(e[2].children),[{title:"传感器".concat(r),dataIndex:"sensorzero_".concat(r),key:"sensorzero_".concat(r)}]);for(var i=1;i<=32;i++)e[3].children=[].concat(m()(e[3].children),[{title:"传感器".concat(i),dataIndex:"sensorstate_".concat(i),key:"sensorstate_".concat(i),render:function(e){return e?"使用":"屏蔽"}}]);for(var l=1;l<=16;l++)e[4].children=[].concat(m()(e[4].children),[{title:"线圈".concat(l),dataIndex:"coilstate_".concat(l),key:"coilstate_".concat(l),render:function(e){return e?"使用":"屏蔽"}}]);t={scroll:{x:"500%"}};break;case 3:e=[{title:"站点号",dataIndex:"siteCode"},{title:"获取时间",dataIndex:"instrument_state_time"},{title:"电压",dataIndex:"m_voltage"},{title:"温度",dataIndex:"m_temperature"},{title:"风扇转速",dataIndex:"m_FanSpeed"}];break;case 4:e=[{title:"站点号",dataIndex:"siteCode"},{title:"时间",width:170,dataIndex:"softwarestatetime"},{title:"抓拍软件运行状态",dataIndex:"cameraRunState",render:function(e){return 11===e?"正常":"已停止运行并重启过"}},{title:"称重软件运行状态",dataIndex:"weightRunState",render:function(e){return 11===e?"正常":"已停止运行并重启过"}},{title:"轮轴软件运行状态",dataIndex:"axlRunState",render:function(e){return 11===e?"正常":"已停止运行并重启过"}}];break;case 5:e=[{title:"站点号",dataIndex:"siteCode"},{title:"车牌号",dataIndex:"carnum"},{title:"车牌颜色",dataIndex:"carcolor"},{title:"轴数",dataIndex:"axlnum"},{title:"总重",dataIndex:"totalweight"},{title:"车速",dataIndex:"spend"},{title:"车道号",dataIndex:"lane_num"},{title:"数据接收时间",width:170,dataIndex:"matchdatatime"},{title:"车辆长宽高",dataIndex:"ckg",render:function(e,t){return t.carlength+"-"+t.carwidth+"-"+t.carheight}}];for(var c=1;c<=6;c++)e=[].concat(m()(e),[{title:"轴".concat(c,"重量"),dataIndex:"axlweight".concat(c)}]);for(var d=1;d<=7;d++)e=[].concat(m()(e),[{title:"轴".concat(d,"单双胎信息"),dataIndex:"Axl_".concat(d)}]);e=[].concat(m()(e),[{title:"车头图片1",dataIndex:"headpicture_name_1",render:function(e){return a.renderImg(e)}},{title:"车头图片2",dataIndex:"headpicture_name_2",render:function(e){return a.renderImg(e)}},{title:"侧面图片",dataIndex:"sidepicture_name",render:function(e){return a.renderImg(e)}},{title:"车尾图片",dataIndex:"tailpicture_name",render:function(e){return a.renderImg(e)}},{title:"全景图片",dataIndex:"panoramapicture_name",render:function(e){return a.renderImg(e)}},{title:"车牌图片",dataIndex:"caridpicture_name",render:function(e){return a.renderImg(e)}},{title:"45°图片",dataIndex:"leftpicture_name",render:function(e){return a.renderImg(e)}}]),t={scroll:{x:"250%"}}}return[e,t]},a}return E()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.pageBean,a=e.formValues;this.getList({pageBean:t,type:a})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;this.state.type;return R.a.createElement(_.a,{onSubmit:this.handleSearch,layout:"inline"},R.a.createElement(c.a,{gutter:{md:8,lg:16,xl:32}},R.a.createElement(o.a,{md:5,sm:24},R.a.createElement("div",{className:T.a.inputMain},R.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"日志类型"),R.a.createElement(D,{style:{flex:1}},e("type")(R.a.createElement(v.a,{placeholder:"请选择",style:{width:"100%"},onChange:this.changeType},H.map(function(e,t){return R.a.createElement(Y,{value:t+1,key:t},e)})))))),R.a.createElement(o.a,{md:5,sm:24},R.a.createElement("div",{className:T.a.inputMain},R.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"时间"),R.a.createElement(D,{style:{flex:1}},e("time")(R.a.createElement(S.a,{className:T.a.inputGroupLeftRadius,style:{width:"100%"}}))))),R.a.createElement(o.a,{md:5,sm:24},R.a.createElement("span",{className:N.a.submitButtons},R.a.createElement(d.a,{type:"primary",htmlType:"submit"},"查询"),R.a.createElement(d.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,t=e.Equimentlog.data,a=e.loading,n=this.state.selectedRows,i=this.renderColumns();return R.a.createElement(k.Fragment,null,R.a.createElement(r.a,{bordered:!1},R.a.createElement("div",{className:N.a.tableList},R.a.createElement("div",{className:N.a.tableListForm},this.renderSimpleForm()),R.a.createElement(L.a,l()({tableAlert:!1,selectedRows:n,rowSelection:null,loading:a,data:t,size:"middle"},i[1],{columns:i[0],onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})))))}}]),t}(k.PureComponent))||n)||n;t.default=J}}]);