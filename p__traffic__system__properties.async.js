(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{rOjB:function(e,a,t){"use strict";t.r(a);t("IzEo");var l,r=t("bx4M"),n=(t("14J3"),t("BMrR")),i=(t("jCWc"),t("kPKH")),s=(t("miYZ"),t("tsqr")),c=(t("+L6B"),t("2/Rp")),o=(t("5Dmo"),t("3S7+")),d=(t("+BJd"),t("mr32")),u=t("lwsE"),m=t.n(u),p=t("W8MJ"),E=t.n(p),b=t("a1gu"),f=t.n(b),g=t("Nsbk"),h=t.n(g),y=t("7W2i"),v=t.n(y),V=(t("2qtc"),t("kLXV")),F=t("pVnL"),k=t.n(F),S=(t("7Kak"),t("9yH6")),w=(t("5NDa"),t("5rEg")),M=(t("y8nQ"),t("Vl3Y")),B=t("q1tI"),D=t.n(B),O=t("MuoO"),q=t("mf+E"),C=t("CkN6"),N=t("9zHi"),x=t.n(N),z=t("+n12"),L=t("ZP6J"),P=t.n(L),T=M.a.Item,I=["/system/properties","/system/properties/update"],J=M.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleUpdate,r=e.handleModalVisible,n=e.detail,i={border:0,color:"rgba(0,0,0,.7)"},s=Object(z.c)(I[1]),c=s?{}:{footer:null};return D.a.createElement(V.a,k()({destroyOnClose:!0,title:s?"编辑":"详情",className:P.a.formModal,visible:a,onOk:function(){t.validateFields(function(e,a){e||(t.resetFields(),l(a))})},onCancel:function(){return r()}},c),D.a.createElement("div",{className:P.a.formModalBody},D.a.createElement(T,{label:"参数名"},t.getFieldDecorator("name",{initialValue:n.name,rules:[{required:!0,message:"请输入参数名！"}]})(D.a.createElement(w.a,{style:i,disabled:!0,placeholder:"请输入"}))),D.a.createElement(T,{label:"别名"},t.getFieldDecorator("alias",{initialValue:n.alias,rules:[{required:!0,message:"请输入别名！"}]})(D.a.createElement(w.a,{style:i,disabled:!0,placeholder:"请输入"}))),s?"file.saveType"===n.alias?n.encrypt?D.a.createElement(T,{label:"参数值"},t.getFieldDecorator("value",{initialValue:"0xO+nczb1XruGQNH6YQHgQ=="===n.value?"ftp":"TidsGvPIATm5bfBg+SF7TQ=="===n.value?"folder":"database",rules:[{required:!0,message:"请选择！"}]})(D.a.createElement(S.a.Group,null,D.a.createElement(S.a,{value:"database"},"database"),D.a.createElement(S.a,{value:"folder"},"folder"),D.a.createElement(S.a,{value:"ftp"},"ftp")))):D.a.createElement(T,{label:"参数值"},t.getFieldDecorator("value",{initialValue:n.value,rules:[{required:!0,message:"请选择！"}]})(D.a.createElement(S.a.Group,null,D.a.createElement(S.a,{value:"database"},"database"),D.a.createElement(S.a,{value:"folder"},"folder"),D.a.createElement(S.a,{value:"ftp"},"ftp")))):D.a.createElement(T,{hasFeedback:s,label:"参数值"},t.getFieldDecorator("value",{initialValue:n.value})(D.a.createElement(w.a,{placeholder:"请输入"}))):D.a.createElement(T,{hasFeedback:s,label:"参数值"},t.getFieldDecorator("value",{initialValue:n.value})(D.a.createElement(w.a,{disabled:!0,style:i,placeholder:"请输入"}))),s?D.a.createElement(T,{label:"是否加密"},t.getFieldDecorator("encrypt",{initialValue:n.encrypt,rules:[{required:!0,message:"请选择！"}]})(D.a.createElement(S.a.Group,null,D.a.createElement(S.a,{value:0},"否"),D.a.createElement(S.a,{value:1},"是")))):D.a.createElement(T,{label:"是否加密"},t.getFieldDecorator("encrypt",{initialValue:n.encrypt?"是":"否",rules:[{required:!0,message:"请选择！"}]})(D.a.createElement(w.a,{style:i,disabled:!0}))),D.a.createElement(T,{label:"描述"},t.getFieldDecorator("description",{initialValue:n.description,rules:[{required:!0,message:"请输入描述！"}]})(D.a.createElement(w.a.TextArea,{disabled:!0,autosize:!0,style:i,placeholder:"请输入"})))))}),j=Object(O.connect)(function(e){return{Properties:e.Properties,loading:e.loading.models.Properties}})(l=M.a.create()(l=function(e){function a(){var e,t;m()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=f()(this,(e=h()(a)).call.apply(e,[this].concat(r)))).state={modalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"参数名",dataIndex:"name"},{title:"别名",dataIndex:"alias"},{title:"参数值",dataIndex:"value",render:function(e,a){return a.encrypt?D.a.createElement(d.a,{color:"#52c41a"},"加密"):e.length>15?D.a.createElement(o.a,{title:e},D.a.createElement(d.a,{color:"#faad14"},e.substring(0,15)+"...")):D.a.createElement(d.a,{color:"#faad14"},e)}},{title:"是否加密存储",dataIndex:"encrypt",render:function(e){return e?D.a.createElement(d.a,{color:"#52c41a"},"加密"):D.a.createElement(d.a,{color:"#faad14"},"明文")}},{title:"描述",dataIndex:"description"},{title:"操作",render:function(e,a){return D.a.createElement(B.Fragment,null,Object(z.c)(I[1])?D.a.createElement(o.a,{placement:"left",title:"编辑"},D.a.createElement(c.a,{onClick:function(){return t.showModal(a)},type:"primary",shape:"circle",icon:"edit",size:"small"})):D.a.createElement(o.a,{placement:"left",title:"详情"},D.a.createElement(c.a,{onClick:function(){return t.showModal(a)},type:"primary",shape:"circle",icon:"eye",size:"small"})))}}],t.showModal=function(e){t.setState({detail:e},function(){t.handleModalVisible(!0)})},t.getList=function(e){(0,t.props.dispatch)({type:"Properties/fetch",payload:e})},t.handleStandardTableChange=function(e,a,l){var r=t.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:r};t.getList(n)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:a})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdate=function(e){var a=t.props.dispatch,l=t.state,r=l.pageBean,n=l.detail,i=(Object.keys(e),JSON.parse(JSON.stringify(n)));i.value=e.value,i.encrypt=e.encrypt,t.setState({detail:i}),a({type:"Properties/update",payload:i,callback:function(){s.a.success("编辑成功"),t.handleModalVisible(),t.getList({pageBean:r})}})},t}return v()(a,e),E()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return D.a.createElement(M.a,{onSubmit:this.handleSearch,layout:"inline"},D.a.createElement(n.a,{gutter:{md:8,lg:24,xl:48}},D.a.createElement(i.a,{md:8,sm:24},D.a.createElement(T,{label:"规则名称"},e("name")(D.a.createElement(w.a,{placeholder:"请输入"})))),D.a.createElement(i.a,{md:8,sm:24},D.a.createElement("span",{className:x.a.submitButtons},D.a.createElement(c.a,{type:"primary",htmlType:"submit"},"查询"),D.a.createElement(c.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,a=e.Properties.data,t=e.loading,l=this.state,n=(l.selectedRows,l.modalVisible),i=l.detail,s={detail:i,handleUpdate:this.handleUpdate,handleModalVisible:this.handleModalVisible};return D.a.createElement(B.Fragment,null,Object(z.c)(I[0])?null:D.a.createElement(q.a,{to:"/exception/403"}),D.a.createElement(r.a,{bordered:!1},D.a.createElement("div",{className:x.a.tableList},D.a.createElement(C.a,{size:"middle",selectedRows:0,rowSelection:null,loading:t,data:a,tableAlert:!1,columns:this.columns,onChange:this.handleStandardTableChange}))),n&&"{}"!==JSON.stringify(i)?D.a.createElement(J,k()({},s,{modalVisible:n})):null)}}]),a}(B.PureComponent))||l)||l;a.default=j}}]);