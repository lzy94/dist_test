(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"JFZ/":function(e,a,t){"use strict";t.r(a);var l=t("pVnL"),r=t.n(l),n=(t("IzEo"),t("bx4M")),c=(t("14J3"),t("BMrR")),o=(t("jCWc"),t("kPKH")),i=(t("5NDa"),t("5rEg")),d=(t("miYZ"),t("tsqr")),s=(t("2qtc"),t("kLXV")),m=(t("P2fV"),t("NJEC")),u=(t("/zsF"),t("PArb")),p=(t("5Dmo"),t("3S7+")),E=(t("+L6B"),t("2/Rp")),g=t("lwsE"),h=t.n(g),S=t("W8MJ"),f=t.n(S),y=t("a1gu"),b=t.n(y),k=t("Nsbk"),F=t.n(k),v=t("7W2i"),D=t.n(v),w=(t("y8nQ"),t("Vl3Y")),C=t("q1tI"),R=t.n(C),N=(t("wd/R"),t("MuoO")),q=t("CkN6"),L=t("NWc4"),V=t.n(L),B=w.a.Item;var M=w.a.create({mapPropsToFields:function(e){return function(e){for(var a=Object.keys(e),t={},l=0;l<a.length;l+=1)t[a[l]]=w.a.createFormField({value:e[a[l]]});return t}(e.field)}})(function(e){var a=e.form;return R.a.createElement("table",{className:V.a.table},R.a.createElement("tbody",null,R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2,className:V.a.title},"工程项目名称"),R.a.createElement("td",{colSpan:10},R.a.createElement(B,null,a.getFieldDecorator("projectName",{rules:[{required:!0,message:"请输入工程项目名称！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:6,className:V.a.title},"从业单位质量责任人"),R.a.createElement("td",{colSpan:6,className:V.a.title},"质量责任")),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2,rowSpan:3,className:V.a.title},"项目法人"),R.a.createElement("td",null,"名称"),R.a.createElement("td",{colSpan:3},R.a.createElement(B,null,a.getFieldDecorator("prolegalName",{rules:[{required:!0,message:"请输入名称！"}]})(R.a.createElement(i.a,{placeholder:"请输入"})))),R.a.createElement("td",{colSpan:6,rowSpan:3},R.a.createElement(B,{style:{height:"100%"}},a.getFieldDecorator("prolegalQualityDuty",{rules:[{required:!0,message:"请输入质量责任！"}]})(R.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"法定代表人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("prolegalLegalRepresent",{rules:[{required:!0,message:"请输入法定代表人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"项目负责人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("prolegalProjectLeader",{rules:[{required:!0,message:"请输入项目负责人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2,rowSpan:3,className:V.a.title},"代理建设管理单位（如果有）"),R.a.createElement("td",null,"名称"),R.a.createElement("td",{colSpan:3},R.a.createElement(B,null,a.getFieldDecorator("buildName",{rules:[{message:"请输入建设管理名称！"}]})(R.a.createElement(i.a,{placeholder:"请输入"})))),R.a.createElement("td",{colSpan:6,rowSpan:3},R.a.createElement(B,{style:{height:"100%"}},a.getFieldDecorator("buildQualityDuty",{rules:[{message:"请输入质量责任！"}]})(R.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"法定代表人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("buildLegalRepresent",{rules:[{message:"请输入法定代表人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"项目负责人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("buildProjectLeader",{rules:[{message:"请输入项目负责人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2,rowSpan:4,className:V.a.title},"勘察单位"),R.a.createElement("td",null,"名称"),R.a.createElement("td",{colSpan:3},R.a.createElement(B,null,a.getFieldDecorator("prospectName",{rules:[{required:!0,message:"请输入勘察单位名称！"}]})(R.a.createElement(i.a,{placeholder:"请输入"})))),R.a.createElement("td",{colSpan:6,rowSpan:4},R.a.createElement(B,{style:{height:"100%"}},a.getFieldDecorator("prospectQualityDuty",{rules:[{required:!0,message:"请输入质量责任！"}]})(R.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"合同段号"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("prospectContractNo",{rules:[{required:!0,message:"请输入合同段号！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"法定代表人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("prospectLegalRepresent",{rules:[{required:!0,message:"请输入法定代表人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"项目负责人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("prospectProjectLeader",{rules:[{required:!0,message:"请输入项目负责人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2,rowSpan:4,className:V.a.title},"设计单位"),R.a.createElement("td",null,"名称"),R.a.createElement("td",{colSpan:3},R.a.createElement(B,null,a.getFieldDecorator("designName",{rules:[{required:!0,message:"请输入设计单位名称！"}]})(R.a.createElement(i.a,{placeholder:"请输入"})))),R.a.createElement("td",{colSpan:6,rowSpan:4},R.a.createElement(B,{style:{height:"100%"}},a.getFieldDecorator("designQualityDuty",{rules:[{required:!0,message:"请输入质量责任！"}]})(R.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"合同段号"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("designContractNo",{rules:[{required:!0,message:"请输入合同段号！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"法定代表人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("designLegalRepresent",{rules:[{required:!0,message:"请输入法定代表人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"项目负责人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("designProjectLeader",{rules:[{required:!0,message:"请输入项目负责人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2,rowSpan:4,className:V.a.title},"施工单位"),R.a.createElement("td",null,"名称"),R.a.createElement("td",{colSpan:3},R.a.createElement(B,null,a.getFieldDecorator("workName",{rules:[{required:!0,message:"请输入施工单位名称！"}]})(R.a.createElement(i.a,{placeholder:"请输入"})))),R.a.createElement("td",{colSpan:6,rowSpan:4},R.a.createElement(B,{style:{height:"100%"}},a.getFieldDecorator("workQualityDuty",{rules:[{required:!0,message:"请输入质量责任！"}]})(R.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"合同段号"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("workContractNo",{rules:[{required:!0,message:"请输入合同段号！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"法定代表人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("workLegalRepresent",{rules:[{required:!0,message:"请输入法定代表人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"项目负责人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("workProjectLeader",{rules:[{required:!0,message:"请输入项目负责人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2,rowSpan:4,className:V.a.title},"监理单位"),R.a.createElement("td",null,"名称"),R.a.createElement("td",{colSpan:3},R.a.createElement(B,null,a.getFieldDecorator("superviseName",{rules:[{required:!0,message:"请输入监理单位名称！"}]})(R.a.createElement(i.a,{placeholder:"请输入"})))),R.a.createElement("td",{colSpan:6,rowSpan:4},R.a.createElement(B,{style:{height:"100%"}},a.getFieldDecorator("superviseQualityDuty",{rules:[{required:!0,message:"请输入质量责任！"}]})(R.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"合同段号"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("superviseContractNo",{rules:[{required:!0,message:"请输入合同段号！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"法定代表人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("superviseLegalRepresent",{rules:[{required:!0,message:"请输入法定代表人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"项目负责人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("superviseProjectLeader",{rules:[{required:!0,message:"请输入项目负责人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2,rowSpan:3,className:V.a.title},"试验检测单位"),R.a.createElement("td",null,"名称"),R.a.createElement("td",{colSpan:3},R.a.createElement(B,null,a.getFieldDecorator("testingName",{rules:[{required:!0,message:"请输入试验检测单位名称！"}]})(R.a.createElement(i.a,{placeholder:"请输入"})))),R.a.createElement("td",{colSpan:6,rowSpan:3},R.a.createElement(B,{style:{height:"100%"}},a.getFieldDecorator("testingQualityDuty",{rules:[{required:!0,message:"请输入质量责任！"}]})(R.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"法定代表人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("testingLegalRepresent",{rules:[{required:!0,message:"请输入法定代表人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"}))))),R.a.createElement("tr",null,R.a.createElement("td",{colSpan:2},"项目负责人"),R.a.createElement("td",{colSpan:2},R.a.createElement(B,null,a.getFieldDecorator("testingProjectLeader",{rules:[{required:!0,message:"请输入项目负责人！"}]})(R.a.createElement(i.a,{placeholder:"请输入"})))))))});M.defaultProps={field:{},onChange:function(){}};var j,P,x,T,I,O,A,z=M,Q=t("ZP6J"),J=t.n(Q),U=Object(N.connect)(function(e){return{BuildSafetyRegistra:e.BuildSafetyRegistra,loading:e.loading.models.BuildSafetyRegistra}})((x=P=function(e){function a(e){var t;return h()(this,a),(t=b()(this,F()(a).call(this,e))).state={},t.save=function(){t.MyForm.current.validateFields(function(e,a){if(!e){var l=t.props,r=l.dispatch,n=l.modalCallback;r({type:"BuildSafetyRegistra/add",payload:a,callback:function(){d.a.success("添加成功"),n(),t.cancelClick()}})}})},t.cancelClick=function(){(0,t.props.handleModalVisible)()},t.MyForm=R.a.createRef(),t}return D()(a,e),f()(a,[{key:"render",value:function(){var e=this.props,a=e.loading,t=e.modalVisible;return R.a.createElement(s.a,{destroyOnClose:!0,title:"新建从业质量责任人",className:J.a.formModal,visible:t,onCancel:this.cancelClick,width:1e3,footer:[R.a.createElement(E.a,{key:"back",onClick:this.cancelClick},"取消"),R.a.createElement(E.a,{key:"submit",type:"primary",loading:a,onClick:this.save},"确定")]},R.a.createElement(n.a,{bordered:!1},R.a.createElement(z,{ref:this.MyForm})))}}]),a}(C.PureComponent),P.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},j=x))||j,W=t("MVZn"),Z=t.n(W),H=Object(N.connect)(function(e){return{BuildSafetyRegistra:e.BuildSafetyRegistra,loading:e.loading.models.BuildSafetyRegistra}})((O=I=function(e){function a(e){var t;return h()(this,a),(t=b()(this,F()(a).call(this,e))).state={detail:{},isSet:!1},t.save=function(){t.MyForm.current.validateFields(function(e,a){if(!e){for(var l=t.props,r=l.dispatch,n=l.modalCallback,c=t.state.detail,o=Z()({},c),i=Object.keys(a),s=0;s<i.length;s+=1)o[i[s]]=a[i[s]];t.setState({detail:o}),r({type:"BuildSafetyRegistra/add",payload:o,callback:function(){d.a.success("编辑成功"),n(),t.cancelClick()}})}})},t.cancelClick=function(){(0,t.props.handleModalVisible)()},t.MyForm=R.a.createRef(),t}return D()(a,e),f()(a,[{key:"render",value:function(){var e=this.props,a=e.loading,t=e.modalVisible,l=this.state.detail;return R.a.createElement(s.a,{destroyOnClose:!0,title:"编辑从业质量责任人",className:J.a.formModal,visible:t,onCancel:this.cancelClick,width:1e3,footer:[R.a.createElement(E.a,{key:"back",onClick:this.cancelClick},"取消"),R.a.createElement(E.a,{key:"submit",type:"primary",loading:a,onClick:this.save},"确定")]},R.a.createElement(n.a,{bordered:!1},R.a.createElement(z,{field:l,ref:this.MyForm})))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t=e.detail,l=a.isSet;return l?null:{isSet:!l,detail:t}}}]),a}(C.PureComponent),I.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},T=O))||T,K=t("9zHi"),Y=t.n(K),X=w.a.Item,G=Object(N.connect)(function(e){return{BuildSafetyRegistra:e.BuildSafetyRegistra,loading:e.loading.models.BuildSafetyRegistra}})(A=w.a.create()(A=function(e){function a(){var e,t;h()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=b()(this,(e=F()(a)).call.apply(e,[this].concat(r)))).state={modalVisible:!1,updateModalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"项目名称",dataIndex:"projectName",width:170},{title:"法定代表人",dataIndex:"prolegalLegalRepresent"},{title:"项目负责人",dataIndex:"prolegalProjectLeader"},{title:"代理建设管理单位名称",dataIndex:"buildName"},{title:"法定代表人",dataIndex:"buildLegalRepresent"},{title:"项目负责人",dataIndex:"buildProjectLeader"},{title:"勘察单位",dataIndex:"prospectName"},{title:"法定代表人",dataIndex:"prospectLegalRepresent"},{title:"项目负责人",dataIndex:"prospectProjectLeader"},{title:"操作",width:100,render:function(e,a){return R.a.createElement(C.Fragment,null,R.a.createElement(p.a,{placement:"left",title:"编辑"},R.a.createElement(E.a,{onClick:function(){return t.showDetailModal(a.id)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),R.a.createElement(u.a,{type:"vertical"}),R.a.createElement(m.a,{title:"是否删除数据?",onConfirm:function(){return t.delUtil(a.id)},okText:"确定",cancelText:"取消"},R.a.createElement(p.a,{placement:"left",title:"删除"},R.a.createElement(E.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.batchDel=function(){s.a.confirm({title:"提示",content:"确定要删除数据吗？",okType:"danger",onOk:function(){var e=t.state.selectedRows;t.delUtil(e.map(function(e){return e.id}).join())}})},t.delUtil=function(e){(0,t.props.dispatch)({type:"BuildSafetyRegistra/remove",payload:{ids:e},callback:function(){d.a.success("删除成功");var e=t.state.pageBean;t.getList({pageBean:e}),t.setState({selectedRows:[]})}})},t.getList=function(e){(0,t.props.dispatch)({type:"BuildSafetyRegistra/fetch",payload:e})},t.showDetailModal=function(e){(0,t.props.dispatch)({type:"BuildSafetyRegistra/detail",payload:e,callback:function(e){t.setState({detail:e},function(){return t.handleUpdateModalVisible(!0)})}})},t.handleStandardTableChange=function(e){var a=t.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(l)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[],selectedRows:[]}),t.getList({pageBean:a})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props.form,l=t.state.pageBean;a.validateFields(function(e,a){if(!e){var r={projectName:a.name,projectType:a.type},n=Object.keys(r).map(function(e){return r[e]?{property:e,value:r[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:n}),t.getList({pageBean:l,querys:n})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e}),e||t.setState({detail:{}})},t.modalCallback=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",a=t.state,l=a.pageBean,r=a.formValues;return"add"===e?t.getList({pageBean:l}):t.getList({pageBean:l,querys:r})},t}return D()(a,e),f()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return R.a.createElement(w.a,{onSubmit:this.handleSearch,layout:"inline"},R.a.createElement(c.a,{gutter:16},R.a.createElement(o.a,{md:6,sm:24},R.a.createElement(X,null,e("name")(R.a.createElement(i.a,{addonBefore:"项目名称",placeholder:"请输入"})))),R.a.createElement(o.a,{md:6,sm:24},R.a.createElement(X,null,e("type")(R.a.createElement(i.a,{addonBefore:"项目类型",placeholder:"请输入"})))),R.a.createElement(o.a,{md:6,sm:24},R.a.createElement("span",{className:Y.a.submitButtons},R.a.createElement(E.a,{type:"primary",htmlType:"submit"},"查询"),R.a.createElement(E.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.BuildSafetyRegistra.data,l=a.loading,c=this.state,o=c.selectedRows,i=c.modalVisible,d=c.updateModalVisible,s=c.detail,m={modalCallback:this.modalCallback},u={handleModalVisible:this.handleModalVisible},p={detail:s,handleModalVisible:this.handleUpdateModalVisible};return R.a.createElement(C.Fragment,null,R.a.createElement(n.a,{bordered:!1},R.a.createElement("div",{className:Y.a.tableList},R.a.createElement("div",{className:Y.a.tableListOperator},R.a.createElement(E.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"),o.length>0&&R.a.createElement(E.a,{type:"danger",onClick:this.batchDel},"批量删除")),R.a.createElement(q.a,{tableAlert:!0,selectedRows:o,loading:l,data:t,size:"middle",columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),i&&R.a.createElement(U,r()({},m,u,{modalVisible:i})),d&&Object.keys(s).length&&R.a.createElement(H,r()({},m,p,{modalVisible:d})))}}]),a}(C.PureComponent))||A)||A;a.default=G}}]);