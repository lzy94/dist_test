(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{PYOG:function(e,a,t){"use strict";t.r(a);var l=t("pVnL"),n=t.n(l),r=(t("IzEo"),t("bx4M")),i=(t("14J3"),t("BMrR")),s=(t("jCWc"),t("kPKH")),c=(t("5NDa"),t("5rEg")),m=t("MVZn"),o=t.n(m),d=(t("miYZ"),t("tsqr")),u=(t("2qtc"),t("kLXV")),p=(t("P2fV"),t("NJEC")),h=(t("/zsF"),t("PArb")),E=(t("5Dmo"),t("3S7+")),f=(t("+L6B"),t("2/Rp")),g=t("lwsE"),b=t.n(g),y=t("W8MJ"),N=t.n(y),v=t("a1gu"),S=t.n(v),w=t("Nsbk"),R=t.n(w),M=t("7W2i"),k=t.n(M),D=(t("y8nQ"),t("Vl3Y")),V=t("q1tI"),F=t.n(V),C=t("MuoO"),I=t("wd/R"),B=t.n(I),L=t("CkN6"),z=(t("bP8k"),t("gFTJ")),O=t("Py4S"),P=t.n(O),T=t("+n12"),x=t("lTPH"),q=t("ZP6J"),J=t.n(q),Y=t("U1Es"),j=t.n(Y),A=function(e){function a(){var e,t;b()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=S()(this,(e=R()(a)).call.apply(e,[this].concat(n)))).renderImg=function(e){return F.a.createElement(P.a,{backdrop:"rgba(255,255,255,.3)",src:"".concat(T.E).concat(e),alt:"图片",style:{width:"200px",height:"200px"}})},t.renderShipRules=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(x.m)(e,a).map(function(e,a){return F.a.createElement("li",{key:a,className:e.isError?j.a.error:null},e.name)})},t}return k()(a,e),N()(a,[{key:"render",value:function(){var e=this.props,a=e.modalVisible,t=e.handleModalVisible,l=e.detail,n={marginTop:5};return F.a.createElement(u.a,{destroyOnClose:!0,title:"详情",className:J.a.formModal,visible:a,onCancel:function(){return t()},footer:null,width:1e3},F.a.createElement(r.a,{bordered:!1},F.a.createElement(z.a,{title:"基本信息",size:"small",layout:"vertical",bordered:!0},F.a.createElement(z.a.Item,{label:"船舶名称"},l.shipName),F.a.createElement(z.a.Item,{label:"船舶所有人"},l.shipOwner),F.a.createElement(z.a.Item,{label:"电话"},l.phone))),F.a.createElement(r.a,{bordered:!1,style:n},F.a.createElement("h3",{className:j.a.title},"船舶证书"),F.a.createElement("p",{className:j.a.des},"船员服务薄持有情况："),F.a.createElement("ul",{className:j.a.list},this.renderShipRules(l.shipCertificate,x.z))),F.a.createElement(r.a,{bordered:!1,style:n},F.a.createElement("h3",{className:j.a.title},"船员证书"),F.a.createElement("ul",{className:j.a.list},this.renderShipRules(l.crewCertificate,x.h))),F.a.createElement(r.a,{bordered:!1,style:n},F.a.createElement("h3",{className:j.a.title},"救生设备"),F.a.createElement("ul",{className:j.a.list},this.renderShipRules(l.lifeasvingEquipment,x.p))),F.a.createElement(r.a,{bordered:!1,style:n},F.a.createElement("h3",{className:j.a.title},"消防设备"),F.a.createElement("p",{className:j.a.des},"灭火器的有效期：",l.expirationDate),F.a.createElement("ul",{className:j.a.list},this.renderShipRules(l.fireEquipment,x.k))),F.a.createElement(r.a,{bordered:!1,style:n},F.a.createElement("h3",{className:j.a.title},"信号设备"),F.a.createElement("p",{className:j.a.des},"信号灯的配备数量：",l.semaphoreNumber),F.a.createElement("ul",{className:j.a.list},this.renderShipRules(l.signalingEquipment,x.D))),F.a.createElement(r.a,{bordered:!1,style:n},F.a.createElement("h3",{className:j.a.title},"舵系统"),F.a.createElement("ul",{className:j.a.list},this.renderShipRules(l.rudderSystem,x.x))),F.a.createElement(r.a,{bordered:!1,style:n},F.a.createElement("h3",{className:j.a.title},"锚设备"),F.a.createElement("ul",{className:j.a.list},this.renderShipRules(l.anchorEquipment,x.a))),F.a.createElement(r.a,{bordered:!1,style:n},F.a.createElement("h3",{className:j.a.title},"系泊"),F.a.createElement("ul",{className:j.a.list},this.renderShipRules(l.mooring,x.q))),F.a.createElement(r.a,{bordered:!1,style:n},F.a.createElement("h3",{className:j.a.title},"机舱"),F.a.createElement("ul",{className:j.a.list},this.renderShipRules(l.cabin,x.c))),F.a.createElement(r.a,{bordered:!1,style:n},F.a.createElement(z.a,{column:2,size:"small",layout:"vertical",bordered:!0},F.a.createElement(z.a.Item,{label:"检查人员签字"},this.renderImg(l.inspectors)),F.a.createElement(z.a.Item,{label:"被检查人员签字"},this.renderImg(l.inspectedPerson)))))}}]),a}(V.PureComponent);A.defaultProps={detail:{},modalVisible:!1,handleModalVisible:function(){}};t("ns75");var U,H=t("9zHi"),W=t.n(H),Z=D.a.Item,K=Object(C.connect)(function(e){return{MaritimeDangerFlag:e.MaritimeDangerFlag,loading:e.loading.models.MaritimeDangerFlag}})(U=D.a.create()(U=function(e){function a(){var e,t;b()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=S()(this,(e=R()(a)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"船舶名称",dataIndex:"shipName"},{title:"船舶所有人",dataIndex:"shipOwner"},{title:"联系电话",dataIndex:"phone"},{title:"创建时间",dataIndex:"createTime"},{title:"操作",width:90,render:function(e,a){return F.a.createElement(V.Fragment,null,F.a.createElement(E.a,{placement:"left",title:"详情"},F.a.createElement(f.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),F.a.createElement(h.a,{type:"vertical"}),F.a.createElement(p.a,{title:"是否删除数据?",onConfirm:function(){return t.dataDel(a.id)},okText:"确定",cancelText:"取消"},F.a.createElement(E.a,{placement:"left",title:"删除"},F.a.createElement(f.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.getList=function(e){(0,t.props.dispatch)({type:"MaritimeDangerFlag/fetch",payload:e})},t.showDetailModal=function(e){t.setState({detail:e},function(){return t.handleModalVisible(!0)})},t.dataDel=function(e){t.delUtil(e)},t.batchDel=function(){var e=t.state.selectedRows;e.length&&u.a.confirm({title:"提示",content:"是否删除数据？",onOk:function(){var a=e.map(function(e){return e.id});t.delUtil(a.join(),function(){t.setState({selectedRows:[]})})}})},t.delUtil=function(e,a){(0,t.props.dispatch)({type:"MaritimeDangerFlag/remove",payload:{ids:e},callback:function(){d.a.success("删除成功");var e=t.state.pageBean;t.getList({pageBean:e}),a&&a()}})},t.handleStandardTableChange=function(e){var a=t.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(l)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[],selectedRows:[]}),t.getList({pageBean:a})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l=t.state.pageBean,n=o()({},a,{createTime:a.time&&B()(a.time).format("YYYY-MM-DD")});delete n.time;var r=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:r}),t.getList({pageBean:l,querys:r})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e}),e||t.setState({detail:{}})},t}return k()(a,e),N()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return F.a.createElement(D.a,{onSubmit:this.handleSearch,layout:"inline"},F.a.createElement(i.a,{gutter:16},F.a.createElement(s.a,{md:6,sm:24},F.a.createElement(Z,null,e("shipName")(F.a.createElement(c.a,{addonBefore:"船舶名称",placeholder:"请输入"})))),F.a.createElement(s.a,{md:6,sm:24},F.a.createElement(Z,null,e("shipOwner")(F.a.createElement(c.a,{addonBefore:"船舶所有人",placeholder:"请输入"})))),F.a.createElement(s.a,{md:6,sm:24},F.a.createElement("span",{className:W.a.submitButtons},F.a.createElement(f.a,{type:"primary",htmlType:"submit"},"查询"),F.a.createElement(f.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,a=e.MaritimeDangerFlag.data,t=e.loading,l=this.state,i=l.selectedRows,s=l.modalVisible,c=l.detail,m={detail:c,handleModalVisible:this.handleModalVisible};return F.a.createElement(V.Fragment,null,F.a.createElement(r.a,{bordered:!1},F.a.createElement("div",{className:W.a.tableList},F.a.createElement("div",{className:W.a.tableListForm},this.renderSimpleForm()),F.a.createElement("div",{className:W.a.tableListOperator},i.length>0&&F.a.createElement(f.a,{type:"danger",onClick:this.batchDel},"批量删除")),F.a.createElement(L.a,{size:"middle",tableAlert:!1,selectedRows:i,loading:t,data:a,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),s&&Object.keys(c).length?F.a.createElement(A,n()({},m,{modalVisible:s})):null)}}]),a}(V.PureComponent))||U)||U;a.default=K}}]);