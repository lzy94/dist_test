(window.webpackJsonp=window.webpackJsonp||[]).push([[210],{n9tr:function(e,a,t){"use strict";t.r(a);var n,l=t("pVnL"),r=t.n(l),i=(t("IzEo"),t("bx4M")),o=(t("14J3"),t("BMrR")),s=(t("jCWc"),t("kPKH")),d=(t("miYZ"),t("tsqr")),c=(t("P2fV"),t("NJEC")),m=(t("/zsF"),t("PArb")),p=(t("5Dmo"),t("3S7+")),u=t("lwsE"),h=t.n(u),f=t("W8MJ"),g=t.n(f),b=t("a1gu"),y=t.n(b),E=t("Nsbk"),v=t.n(E),S=t("7W2i"),V=t.n(S),k=(t("2qtc"),t("kLXV")),M=(t("5NDa"),t("5rEg")),w=(t("+L6B"),t("2/Rp")),D=(t("y8nQ"),t("Vl3Y")),N=t("q1tI"),B=t.n(N),C=t("MuoO"),F=t("CkN6"),L=t("ZP6J"),T=t.n(L),R=t("9zHi"),U=t.n(R),O=D.a.Item,q=D.a.create()(function(e){var a=e.modalVisible,t=e.form,n=e.handleAdd,l=e.handleModalVisible,r=e.loading;return B.a.createElement(k.a,{destroyOnClose:!0,title:"添加部门",onCancel:function(){return l()},visible:a,className:T.a.formModal,footer:[B.a.createElement(w.a,{key:"back",onClick:function(){return l()}},"取消"),B.a.createElement(w.a,{key:"submit",type:"primary",loading:r,onClick:function(){t.validateFields(function(e,a){e||n(a,function(){return t.resetFields()})})}},"确定")]},B.a.createElement("div",{className:T.a.formModalBody},B.a.createElement(O,{label:"部门编号"},t.getFieldDecorator("departNo",{rules:[{required:!0,message:"请输入部门编号！"}]})(B.a.createElement(M.a,{placeholder:"请输入"}))),B.a.createElement(O,{label:"名称"},t.getFieldDecorator("departName",{rules:[{required:!0,message:"请输入名称！"}]})(B.a.createElement(M.a,{placeholder:"请输入"})))))}),z=D.a.create()(function(e){var a=e.modalVisible,t=e.form,n=e.handleUpdate,l=e.handleModalVisible,r=e.loading,i=e.detail;return B.a.createElement(k.a,{destroyOnClose:!0,title:"修改部门",visible:a,onCancel:function(){return l()},className:T.a.formModal,footer:[B.a.createElement(w.a,{key:"back",onClick:function(){return l()}},"取消"),B.a.createElement(w.a,{key:"submit",type:"primary",loading:r,onClick:function(){t.validateFields(function(e,a){e||n(a,function(){return t.resetFields()})})}},"确定")]},B.a.createElement("div",{className:T.a.formModalBody},B.a.createElement(O,{label:"部门编号"},t.getFieldDecorator("departNo",{initialValue:i.departNo,rules:[{required:!0,message:"请输入部门编号！"}]})(B.a.createElement(M.a,{placeholder:"请输入"}))),B.a.createElement(O,{label:"名称"},t.getFieldDecorator("departName",{initialValue:i.departName,rules:[{required:!0,message:"请输入名称！"}]})(B.a.createElement(M.a,{placeholder:"请输入"})))))}),A=Object(C.connect)(function(e){return{TransportSystemDepart:e.TransportSystemDepart,loading:e.loading.models.TransportSystemDepart}})(n=D.a.create()(n=function(e){function a(){var e,t;h()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=y()(this,(e=v()(a)).call.apply(e,[this].concat(l)))).state={modalVisible:!1,updateModalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"部门编号",dataIndex:"departNo"},{title:"部门名称",dataIndex:"departName"},{title:"操作",width:90,render:function(e,a){return B.a.createElement(N.Fragment,null,B.a.createElement(p.a,{placement:"left",title:"编辑"},B.a.createElement(w.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),B.a.createElement(m.a,{type:"vertical"}),B.a.createElement(c.a,{title:"是否删除数据?",onConfirm:function(){return t.dataDel(a.id_)},okText:"确定",cancelText:"取消"},B.a.createElement(p.a,{placement:"left",title:"删除"},B.a.createElement(w.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.getList=function(e){(0,t.props.dispatch)({type:"TransportSystemDepart/fetch",payload:e})},t.showDetailModal=function(e){t.setState({detail:e},function(){return t.handleUpdateModalVisible(!0)})},t.dataDel=function(e){t.delUtil(e)},t.batchDel=function(){var e=t.state.selectedRows;e.length&&k.a.confirm({title:"提示",content:"是否删除数据？",onOk:function(){var a=e.map(function(e){return e.id_});t.delUtil(a.join(),function(){t.setState({selectedRows:[]})})}})},t.delUtil=function(e,a){(0,t.props.dispatch)({type:"TransportSystemDepart/remove",payload:{ids:e},callback:function(){d.a.success("删除成功");var e=t.state.pageBean;t.getList({pageBean:e}),a&&a()}})},t.handleStandardTableChange=function(e){var a=t.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(n)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[],selectedRows:[]}),t.getList({pageBean:a})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props.form,n=t.state.pageBean;a.validateFields(function(e,a){if(!e){var l=[{property:"departName",value:a.name,group:"main",operation:"LIKE",relation:"AND"}];t.setState({formValues:l}),t.getList({pageBean:n,querys:l})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e}),e||t.setState({detail:{}})},t.handleAdd=function(e,a){(0,t.props.dispatch)({type:"TransportSystemDepart/add",payload:e,callback:function(){d.a.success("添加成功"),t.handleModalVisible();var e=t.state.pageBean;t.getList({pageBean:e}),a&&a()}})},t.handleUpdate=function(e,a){for(var n=t.props.dispatch,l=t.state.detail,r=JSON.parse(JSON.stringify(l)),i=Object.keys(e),o=0;o<i.length;o+=1)r[i[o]]=e[i[o]];n({type:"TransportSystemDepart/update",payload:r,callback:function(){d.a.success("修改成功"),t.handleUpdateModalVisible();var e=t.state.pageBean;t.getList({pageBean:e}),a&&a()}})},t}return V()(a,e),g()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return B.a.createElement(D.a,{onSubmit:this.handleSearch,layout:"inline"},B.a.createElement(o.a,{gutter:{md:8,lg:24,xl:48}},B.a.createElement(s.a,{md:6,sm:24},B.a.createElement(O,null,e("name")(B.a.createElement(M.a,{addonBefore:"名称",placeholder:"请输入"})))),B.a.createElement(s.a,{md:6,sm:24},B.a.createElement("span",{className:U.a.submitButtons},B.a.createElement(w.a,{type:"primary",htmlType:"submit"},"查询"),B.a.createElement(w.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.TransportSystemDepart.data,n=a.loading,l=this.state,o=l.selectedRows,s=l.modalVisible,d=l.updateModalVisible,c=l.detail,m={loading:n,handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},p={detail:c,loading:n,handleModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate};return B.a.createElement(N.Fragment,null,B.a.createElement(i.a,{bordered:!1},B.a.createElement("div",{className:U.a.tableList},B.a.createElement("div",{className:U.a.tableListForm},this.renderSimpleForm()),B.a.createElement("div",{className:U.a.tableListOperator},B.a.createElement(w.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"),o.length>0&&B.a.createElement(w.a,{type:"danger",onClick:this.batchDel},"批量删除")),B.a.createElement(F.a,{rowKey:"id_",size:"middle",tableAlert:!0,selectedRows:o,loading:n,data:t,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),B.a.createElement(q,r()({},m,{modalVisible:s})),d&&Object.keys(c).length?B.a.createElement(z,r()({},p,{modalVisible:d})):null)}}]),a}(N.PureComponent))||n)||n;a.default=A}}]);