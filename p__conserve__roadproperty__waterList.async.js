(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{Azue:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r=a("bx4M"),i=(a("14J3"),a("BMrR")),o=(a("+L6B"),a("2/Rp")),l=(a("iQDF"),a("+eQT")),s=(a("jCWc"),a("kPKH")),p=(a("+BJd"),a("mr32")),m=a("lwsE"),u=a.n(m),c=a("W8MJ"),d=a.n(c),h=a("a1gu"),g=a.n(h),y=a("Nsbk"),f=a.n(y),E=a("7W2i"),v=a.n(E),w=(a("OaEy"),a("2fM7")),C=(a("y8nQ"),a("Vl3Y")),D=a("q1tI"),H=a.n(D),L=a("MuoO"),N=a("wd/R"),x=a.n(N),M=a("CkN6"),Y=a("9zHi"),T=a.n(Y),b=a("ns75"),B=a.n(b),S=C.a.Item,k=w.a.Option,F=[{type:1,name:"水位点位"},{type:2,name:"位移点位"}],A=Object(L.connect)(function(e){return{ConservePoint:e.ConservePoint,loading:e.loading.models.ConservePoint}})(n=C.a.create()(n=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=g()(this,(e=f()(t)).call.apply(e,[this].concat(r)))).state={formValues:[],pageBean:{page:1,pageSize:10,showTotal:!0},defaultQuery:{property:"type",value:1,group:"main",operation:"EQUAL",relation:"AND"}},a.columns=[{title:"地点",dataIndex:"addr"},{title:"点位名称",dataIndex:"ponitName"},{title:"点位类型",dataIndex:"type",render:function(e){return F[e-1].name}},{title:"时间",dataIndex:"createTime",width:170,render:function(e){return x()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"正常水位",render:function(e){return 1===e.type?e.normalHigh:"—"}},{title:"预警水位",render:function(e){return 1===e.type?e.warningHigh:"—"}},{title:"水位",width:100,render:function(e){return 1===e.type?e.waterLevel:"—"}},{title:"预警位移",render:function(e){return 2===e.type?e.warningHigh:"—"}},{title:"位移",render:function(e){return 2===e.type?e.waterLevel:"—"}},{title:"状态",width:130,render:function(e,t){return t.warning?H.a.createElement(p.a,{color:"#f50"},"预警"):H.a.createElement(p.a,{color:"#108ee9"},"正常")}}],a.getList=function(e){(0,a.props.dispatch)({type:"ConservePoint/waterList",payload:e})},a.getWaterList=function(){(0,a.props.dispatch)({type:"ConservePoint/fetch",payload:{pageBean:{page:1,pageSize:1e3,showTotal:!0}}})},a.handleFormReset=function(){var e=a.props.form,t=a.state,n=t.pageBean,r=t.defaultQuery;e.resetFields(),a.setState({formValues:[]}),a.getList({pageBean:n,querys:[r]})},a.handleStandardTableChange=function(e){var t=a.state,n=t.formValues,r=t.defaultQuery,i={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:n.length?n:[r]};a.getList(i)},a.handleSearch=function(e){e.preventDefault();var t=a.props.form,n=a.state.pageBean;t.validateFields(function(e,t){if(!e){var r=[{property:"createTime",value:t.createTime?[x()(t.createTime[0]).format("YYYY-MM-DD HH:mm:ss"),x()(t.createTime[1]).format("YYYY-MM-DD HH:mm:ss")]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"type",value:t.type,group:"main",operation:"EQUAL",relation:"AND"},{property:"ponitCode",value:t.ponitCode?t.ponitCode.split("-")[0]:"",group:"main",operation:"EQUAL",relation:"AND"}].filter(function(e){return""!==e.value});a.setState({formValues:r}),a.getList({pageBean:n,querys:r})}})},a.pointChange=function(e){var t=e?e.split("-")[1]:"";a.props.form.setFieldsValue({type:parseInt(t,10)})},a}return v()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.pageBean,a=e.defaultQuery;this.getList({pageBean:t,querys:[a]}),this.getWaterList()}},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form,a=e.ConservePoint.data.list;return H.a.createElement(C.a,{onSubmit:this.handleSearch,layout:"inline"},H.a.createElement(i.a,{gutter:16},H.a.createElement(s.a,{md:5,sm:24},H.a.createElement("div",{className:B.a.inputMain},H.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"点位名称"),H.a.createElement(S,{style:{flex:1}},t.getFieldDecorator("ponitCode")(H.a.createElement(w.a,{style:{width:"100%"},placeholder:"请选择",onChange:this.pointChange},a.map(function(e){return H.a.createElement(k,{key:e.id_,value:"".concat(e.pointCode,"-").concat(e.type)},e.pointName)})))))),H.a.createElement(s.a,{md:5,sm:24},H.a.createElement("div",{className:B.a.inputMain},H.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"点位类型"),H.a.createElement(S,{style:{flex:1}},t.getFieldDecorator("type",{initialValue:1})(H.a.createElement(w.a,{style:{width:"100%"},placeholder:"请选择"},F.map(function(e){return H.a.createElement(k,{value:e.type,key:e.type},e.name)})))))),H.a.createElement(s.a,{md:6,sm:24},H.a.createElement("div",{className:B.a.inputMain},H.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"时间"),H.a.createElement(S,{style:{flex:1}},t.getFieldDecorator("createTime")(H.a.createElement(l.a.RangePicker,{className:B.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[x()("00:00:00","HH:mm:ss"),x()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"}))))),H.a.createElement(s.a,{md:5,sm:24},H.a.createElement("span",{className:T.a.submitButtons},H.a.createElement(o.a,{type:"primary",htmlType:"submit"},"查询"),H.a.createElement(o.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,t=e.ConservePoint.waterListData,a=e.loading;return H.a.createElement(r.a,{bordered:!1},H.a.createElement("div",{className:T.a.tableList},H.a.createElement("div",{className:T.a.tableListForm},this.renderSimpleForm()),H.a.createElement(M.a,{rowKey:"id_",size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:a,data:t,columns:this.columns,onChange:this.handleStandardTableChange})))}}]),t}(D.PureComponent))||n)||n;t.default=A}}]);