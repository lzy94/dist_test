(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{ht2c:function(e,a,t){"use strict";t.r(a);var n,l=t("pVnL"),r=t.n(l),i=(t("IzEo"),t("bx4M")),o=(t("14J3"),t("BMrR")),c=(t("5NDa"),t("5rEg")),d=(t("jCWc"),t("kPKH")),s=(t("nRaC"),t("5RzL")),m=t("MVZn"),p=t.n(m),u=(t("5Dmo"),t("3S7+")),h=(t("+L6B"),t("2/Rp")),E=t("lwsE"),f=t.n(E),g=t("W8MJ"),b=t.n(g),y=t("a1gu"),v=t.n(y),I=t("Nsbk"),M=t.n(I),w=t("7W2i"),C=t.n(w),S=(t("2qtc"),t("kLXV")),x=(t("bP8k"),t("gFTJ")),L=(t("OaEy"),t("2fM7")),N=(t("y8nQ"),t("Vl3Y")),V=t("q1tI"),F=t.n(V),k=t("MuoO"),B=t("mf+E"),D=t("CkN6"),R=t("+n12"),T=t("9zHi"),O=t.n(T),z=t("wd/R"),Y=t.n(z),U=t("ns75"),J=t.n(U),j=t("ZP6J"),q=t.n(j),H=N.a.Item,A=L.a.Option,P=["/comquery/freight"],G=N.a.create()(function(e){var a=e.modalVisible,t=(e.form,e.handleUpdateModalVisible),n=e.detail;return F.a.createElement(S.a,{destroyOnClose:!0,title:"货运从业人员详情",className:q.a.myModal+" "+q.a.modalbody,visible:a,onCancel:function(){return t()},width:800,footer:null},F.a.createElement("div",{className:q.a.detailMsg},F.a.createElement("div",{style:{padding:20}},F.a.createElement(x.a,{bordered:!0,size:"small",column:2},F.a.createElement(x.a.Item,{label:"驾驶证号"},n.driverCode),F.a.createElement(x.a.Item,{label:"驾驶人姓名"},n.driverName),F.a.createElement(x.a.Item,{label:"从业资格证号"},n.licenceCode),F.a.createElement(x.a.Item,{label:"性别"},"1"===n.sex?"男":"女"),F.a.createElement(x.a.Item,{label:"从业资格类别"},["经营性道路旅客运输驾驶员","经营性道路货物运输驾驶员","道路危险货物运输驾驶员"][parseInt(n.occupationType)-1]),F.a.createElement(x.a.Item,{label:"超限超载情况"},n.overloadCondition),F.a.createElement(x.a.Item,{label:"发证机关"},n.licenceOrang),F.a.createElement(x.a.Item,{label:"有效日期"},Y()(n.effectiveDate).format("YYYY-MM-DD")),F.a.createElement(x.a.Item,{label:"联系电话"},n.phone),F.a.createElement(x.a.Item,{label:"邮箱"},n.email),F.a.createElement(x.a.Item,{label:"住址",span:2},n.address),F.a.createElement(x.a.Item,{label:"是否所属货运企业"},"1"===n.isTransportCompany?"是":"否"),F.a.createElement(x.a.Item,{label:"货运企业"},n.transportCompanyName),F.a.createElement(x.a.Item,{label:"是否所属货运企业"},"1"===n.isSourceCompany?"是":"否"),F.a.createElement(x.a.Item,{label:"源头企业"},n.transportSourceName)))))}),K=Object(k.connect)(function(e){var a=e.system,t=e.Freight,n=e.loading;return{treeList:a.treeList,Freight:t,loading:n.models.Freight}})(n=N.a.create()(n=function(e){function a(){var e,t;f()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=v()(this,(e=M()(a)).call.apply(e,[this].concat(l)))).state={updateModalVisible:!1,formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"驾驶证号",dataIndex:"driverCode"},{title:"驾驶证员姓名",dataIndex:"driverName"},{title:"性别",dataIndex:"sex",render:function(e){var a="";switch(e){case"1":a="男";break;case"2":a="女";break;default:a="其他"}return a}},{title:"从业资格证号",dataIndex:"licenceCode"},{title:"从业资格类别",dataIndex:"occupationType"},{title:"发证机关",dataIndex:"licenceOrang"},{title:"有效日期",dataIndex:"effectiveDate",render:function(e){return Y()(e).format("YYYY-MM-DD")}},{title:"操作",width:70,render:function(e,a){return F.a.createElement(V.Fragment,null,F.a.createElement(u.a,{placement:"left",title:"详情"},F.a.createElement(h.a,{onClick:function(){return t.showModal(a.id)},type:"primary",shape:"circle",icon:"eye",size:"small"})))}}],t.showModal=function(e){(0,t.props.dispatch)({type:"Freight/detail",payload:e,callback:function(e){t.setState({detail:e}),t.handleUpdateModalVisible(!0)}})},t.getList=function(e){(0,t.props.dispatch)({type:"Freight/fetch",payload:e})},t.handleStandardTableChange=function(e,a,n){var l=t.state.formValues,r={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:l};t.getList(r)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:a})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.state.pageBean,l=p()({},a),r=Object.keys(l).map(function(e){return l[e]?{property:e,value:l[e],group:"main",operation:"organCode"===e?"RIGHT_LIKE":"occupationType"===e?"EQUAL":"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:r}),t.getList({pageBean:n,querys:r})}})},t.handleUpdateModalVisible=function(e,a){t.setState({updateModalVisible:!!e})},t}return C()(a,e),b()(a,[{key:"componentDidMount",value:function(){if(Object(R.b)(P[0])){var e=this.state.pageBean;this.getList({pageBean:e})}}},{key:"renderSimpleForm",value:function(){var e=this.props,a=e.treeList,t=e.form.getFieldDecorator;return F.a.createElement(N.a,{onSubmit:this.handleSearch,layout:"inline"},F.a.createElement(o.a,{gutter:{md:8,lg:16,xl:32}},F.a.createElement(d.a,{md:5,sm:24},F.a.createElement("div",{className:J.a.inputMain},F.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),F.a.createElement(H,{style:{flex:1}},t("organCode")(F.a.createElement(s.a,{className:J.a.inputGroupLeftRadius,treeData:a,style:{width:"100%"},placeholder:"请选择"}))))),F.a.createElement(d.a,{md:5,sm:24},F.a.createElement(H,null,t("driverCode")(F.a.createElement(c.a,{addonBefore:"驾驶证号"})))),F.a.createElement(d.a,{md:4,sm:24},F.a.createElement(H,null,t("driverName")(F.a.createElement(c.a,{addonBefore:"姓名"})))),F.a.createElement(d.a,{md:4,sm:24},F.a.createElement(H,null,t("licenceCode")(F.a.createElement(c.a,{addonBefore:"从业资格证号"})))),F.a.createElement(d.a,{md:6,sm:24},F.a.createElement("div",{className:J.a.inputMain},F.a.createElement("span",{style:{width:"110px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"从业资格类别"),F.a.createElement(H,{style:{flex:1}},t("occupationType")(F.a.createElement(L.a,{className:J.a.inputGroupLeftRadius,placeholder:"请选择",style:{width:"100%"}},F.a.createElement(A,{value:"1"},"经营性道路旅客运输驾驶员 "),F.a.createElement(A,{value:"2"},"经营性道路货物运输驾驶员 "),F.a.createElement(A,{value:"3"},"道路危险货物运输驾驶员 "))))))),F.a.createElement("div",{style:{overflow:"hidden"}},F.a.createElement("div",{style:{float:"right",marginBottom:24}},F.a.createElement(h.a,{type:"primary",htmlType:"submit"},"查询"),F.a.createElement(h.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))}},{key:"render",value:function(){var e=this.props,a=e.Freight.data,t=e.loading,n=this.state,l=n.updateModalVisible,o=n.detail,c={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate,handleModalVisible:this.handleModalVisible,detail:o,loading:t};return F.a.createElement(V.Fragment,null,Object(R.b)(P[0])?null:F.a.createElement(B.a,{to:"/exception/403"}),F.a.createElement(i.a,{bordered:!1},F.a.createElement("div",{className:O.a.tableList},F.a.createElement("div",{className:O.a.tableListForm},this.renderSimpleForm()),F.a.createElement(D.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),l&&"{}"!==JSON.stringify(o)?F.a.createElement(G,r()({},c,{modalVisible:l})):null)}}]),a}(V.PureComponent))||n)||n;a.default=K}}]);