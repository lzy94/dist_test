(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{DXQd:function(e,t,a){"use strict";a.r(t);var l=a("pVnL"),n=a.n(l),r=(a("IzEo"),a("bx4M")),i=(a("14J3"),a("BMrR")),c=(a("jCWc"),a("kPKH")),o=(a("5NDa"),a("5rEg")),s=(a("miYZ"),a("tsqr")),d=(a("2qtc"),a("kLXV")),u=(a("P2fV"),a("NJEC")),m=(a("/zsF"),a("PArb")),p=(a("5Dmo"),a("3S7+")),f=(a("+L6B"),a("2/Rp")),h=a("lwsE"),E=a.n(h),g=a("W8MJ"),b=a.n(g),C=a("a1gu"),y=a.n(C),v=a("Nsbk"),k=a.n(v),D=a("7W2i"),M=a.n(D),F=(a("y8nQ"),a("Vl3Y")),L=a("q1tI"),S=a.n(L),w=a("wd/R"),B=a.n(w),V=a("MuoO"),N=a("CkN6"),x=a("MVZn"),A=a.n(x),q=(a("DZo9"),a("8z0m")),R=(a("Pwec"),a("CtXQ")),T=(a("giR+"),a("fyUT")),P=(a("iQDF"),a("+eQT")),j=a("+n12"),U=a("NWc4"),Y=a.n(U),z=F.a.Item;var O=F.a.create({mapPropsToFields:function(e){return function(e){for(var t=Object.keys(e),a={},l=0;l<t.length;l+=1)a[t[l]]=F.a.createFormField({value:"completionDate"===t[l]||"startDate"===t[l]?B()(new Date(e[t[l]]),"YYYY-MM-DD"):e[t[l]]});return a}(e.field)},onValuesChange:function(e,t){e.onChange(t)}})(function(e){var t=e.form,a=e.fileList,l=e.uploadChange;return S.a.createElement("table",{className:Y.a.table,style:{tableLayout:"auto"}},S.a.createElement("colgroup",null,S.a.createElement("col",{width:80})),S.a.createElement("tbody",null,S.a.createElement("tr",null,S.a.createElement("td",{colSpan:3,className:Y.a.title},"（一）交工验收情况登记")),S.a.createElement("tr",null,S.a.createElement("td",{className:Y.a.title},"一"),S.a.createElement("td",null,"工程名称"),S.a.createElement("td",null,S.a.createElement(z,null,t.getFieldDecorator("projectName",{rules:[{required:!0,message:"请输入工程名称"}]})(S.a.createElement(o.a,{placeholder:"请输入"}))))),S.a.createElement("tr",null,S.a.createElement("td",{className:Y.a.title},"二"),S.a.createElement("td",null,"工程地点及主要控制点"),S.a.createElement("td",null,S.a.createElement(z,null,t.getFieldDecorator("projectPlace",{rules:[{required:!0,message:"请输入工程地点及主要控制点"}]})(S.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),S.a.createElement("tr",null,S.a.createElement("td",{className:Y.a.title},"三"),S.a.createElement("td",null,"建设依据"),S.a.createElement("td",null,S.a.createElement(z,null,t.getFieldDecorator("construcBasis",{rules:[{required:!0,message:"请输入建设依据"}]})(S.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),S.a.createElement("tr",null,S.a.createElement("td",{className:Y.a.title},"四"),S.a.createElement("td",null,"技术标准与主要指标"),S.a.createElement("td",null,S.a.createElement(z,null,t.getFieldDecorator("technicalStandard",{rules:[{required:!0,message:"请输入技术标准与主要指标"}]})(S.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),S.a.createElement("tr",null,S.a.createElement("td",{className:Y.a.title},"五"),S.a.createElement("td",null,"建设规模及性质"),S.a.createElement("td",null,S.a.createElement(z,null,t.getFieldDecorator("construcNature",{rules:[{required:!0,message:"请输入建设规模及性质"}]})(S.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),S.a.createElement("tr",null,S.a.createElement("td",{className:Y.a.title,rowSpan:2},"六"),S.a.createElement("td",null,"开工日期"),S.a.createElement("td",null,S.a.createElement(z,null,t.getFieldDecorator("startDate",{rules:[{required:!0,message:"请选择开工日期"}]})(S.a.createElement(P.a,{style:{width:"100%"},placeholder:"请选择"}))))),S.a.createElement("tr",null,S.a.createElement("td",null,"完工日期"),S.a.createElement("td",null,S.a.createElement(z,null,t.getFieldDecorator("completionDate",{rules:[{required:!0,message:"请选择完工日期"}]})(S.a.createElement(P.a,{style:{width:"100%"},placeholder:"请选择"}))))),S.a.createElement("tr",null,S.a.createElement("td",{className:Y.a.title},"七"),S.a.createElement("td",null,"批准概算"),S.a.createElement("td",null,S.a.createElement(z,null,t.getFieldDecorator("budget",{rules:[{required:!0,message:"请输入批准概算"}]})(S.a.createElement(T.a,{style:{width:"100%"},placeholder:"请输入"}))))),S.a.createElement("tr",null,S.a.createElement("td",{className:Y.a.title},"八"),S.a.createElement("td",null,"工程建设主要内容"),S.a.createElement("td",null,S.a.createElement(z,null,t.getFieldDecorator("construcContent",{rules:[{required:!0,message:"请输入工程建设主要内容"}]})(S.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),S.a.createElement("tr",null,S.a.createElement("td",{className:Y.a.title},"九"),S.a.createElement("td",null,"实际征用土地数（亩）"),S.a.createElement("td",null,S.a.createElement(z,null,t.getFieldDecorator("landNumber",{rules:[{required:!0,message:"请输入实际征用土地数（亩）"}]})(S.a.createElement(T.a,{style:{width:"100%"},placeholder:"请输入"}))))),S.a.createElement("tr",null,S.a.createElement("td",{className:Y.a.title},"十"),S.a.createElement("td",null,"建设项目工程质量交工验收结论"),S.a.createElement("td",null,S.a.createElement(z,null,t.getFieldDecorator("acceptanceConclusion",{rules:[{required:!0,message:"请输入建设项目工程质量交工验收结论"}]})(S.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),S.a.createElement("tr",null,S.a.createElement("td",{className:Y.a.title},"十一"),S.a.createElement("td",null,"存在问题处理措施"),S.a.createElement("td",null,S.a.createElement(z,null,t.getFieldDecorator("treatmentMeasures",{rules:[{required:!0,message:"请输入存在问题处理措施"}]})(S.a.createElement(o.a.TextArea,{placeholder:"请输入"}))))),S.a.createElement("tr",null,S.a.createElement("td",{className:Y.a.title},"十二"),S.a.createElement("td",null,"附件（自行上传）"),S.a.createElement("td",{style:{textAlign:"left"}},S.a.createElement(z,null,t.getFieldDecorator("annexUrl",{rules:[{required:!0,message:"附件"}]})(S.a.createElement(q.a,n()({},{name:"files",action:"/result/api/file/v1/fileUpload",listType:"picture",accept:".pdf,.doc,.docx,.zip",className:"upload-list-inline",data:{type:9},headers:{Authorization:"Bearer ".concat(Object(j.w)("token")[0]),"x-requested-with":"XMLHttpRequest"},beforeUpload:j.p,onChange:l},{defaultFileList:a}),!a.length&&S.a.createElement(f.a,null,S.a.createElement(R.a,{type:"upload"})," 附件( pdf , doc, docx, zip)"))))))))});O.defaultProps={field:{},fileList:[],uploadChange:function(){},onChange:function(){}};var I,J,Q,W,X,Z,H,K=O,G=a("ZP6J"),$=a.n(G),_=Object(V.connect)(function(e){return{BuildCompletionAcceptance:e.BuildCompletionAcceptance,loading:e.loading.models.BuildCompletionAcceptance}})((Q=J=function(e){function t(e){var a;return E()(this,t),(a=y()(this,k()(t).call(this,e))).state={fileList:[],field:{}},a.uploadChange=function(e){"done"===e.file.status?200===e.file.response.code?(s.a.success("上传成功"),a.setState({fileList:e.fileList})):s.a.error(e.file.response.code.msg):"error"===e.file.status?s.a.error("上传失败"):"removed"===e.file.status&&a.setState({fileList:e.fileList})},a.fieldChange=function(e){a.setState(function(t){var a=t.field;return{field:A()({},a,e)}})},a.save=function(){a.MyForm.current.validateFields(function(e,t){if(!e){var l=a.props,n=l.dispatch,r=l.modalCallback,i=a.state.fileList;if(i.length){var c=A()({},t,{annexUrl:i.length?i[0].response.filePath:""});t.startDate>t.completionDate?s.a.error("完工时间必须大于开工时间"):n({type:"BuildCompletionAcceptance/add",payload:c,callback:function(){s.a.success("添加成功"),r(),a.cancelClick()}})}else s.a.error("请选择文件")}})},a.cancelClick=function(){(0,a.props.handleModalVisible)()},a.MyForm=S.a.createRef(),a}return M()(t,e),b()(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.modalVisible,l=this.state,n=l.fileList,i=l.field;return S.a.createElement(d.a,{destroyOnClose:!0,title:"新建验收情况登记",className:$.a.formModal,visible:a,onCancel:this.cancelClick,width:800,footer:[S.a.createElement(f.a,{key:"back",onClick:this.cancelClick},"取消"),S.a.createElement(f.a,{key:"submit",type:"primary",loading:t,onClick:this.save},"确定")]},S.a.createElement(r.a,{bordered:!1},S.a.createElement(K,{onChange:this.fieldChange,uploadChange:this.uploadChange,fileList:n,field:i,ref:this.MyForm})))}}]),t}(L.PureComponent),J.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},I=Q))||I,ee=Object(V.connect)(function(e){return{BuildCompletionAcceptance:e.BuildCompletionAcceptance,loading:e.loading.models.BuildCompletionAcceptance}})((Z=X=function(e){function t(e){var a;return E()(this,t),(a=y()(this,k()(t).call(this,e))).state={fileList:[],field:{},isSet:!1},a.uploadChange=function(e){"done"===e.file.status?200===e.file.response.code?(s.a.success("上传成功"),a.setState({fileList:e.fileList})):s.a.error(e.file.response.code.msg):"error"===e.file.status?s.a.error("上传失败"):"removed"===e.file.status&&a.setState({fileList:e.fileList})},a.fieldChange=function(e){a.setState(function(t){var a=t.field;return{field:A()({},a,e)}})},a.save=function(){a.MyForm.current.validateFields(function(e,t){if(!e){var l=a.props,n=l.dispatch,r=l.modalCallback,i=a.state,c=i.field;if(i.fileList.length){var o=A()({},c);if(t.startDate>t.completionDate)s.a.error("完工时间必须大于开工时间");else{for(var d=Object.keys(t),u=0;u<d.length;u+=1)o[d[u]]=t[d[u]];if("object"==typeof t.annexUrl){var m=t.annexUrl.file.response;o.annexUrl=m?m.filePath:""}a.setState({field:o}),n({type:"BuildCompletionAcceptance/add",payload:o,callback:function(){s.a.success("编辑成功"),r(),a.cancelClick()}})}}else s.a.error("请选择文件")}})},a.cancelClick=function(){(0,a.props.handleModalVisible)()},a.MyForm=S.a.createRef(),a}return M()(t,e),b()(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.modalVisible,l=this.state,n=l.field,i=l.fileList;return S.a.createElement(d.a,{destroyOnClose:!0,title:"编辑验收情况登记",className:$.a.formModal,visible:a,onCancel:this.cancelClick,width:800,footer:[S.a.createElement(f.a,{key:"back",onClick:this.cancelClick},"取消"),S.a.createElement(f.a,{key:"submit",type:"primary",loading:t,onClick:this.save},"确定")]},S.a.createElement(r.a,{bordered:!1},S.a.createElement(K,{onChange:this.fieldChange,uploadChange:this.uploadChange,fileList:i,field:n,ref:this.MyForm})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.detail,l=t.isSet;return l?null:{isSet:!l,field:a,fileList:a.annexUrl?[{uid:"-1",name:"当前文件",status:"done",url:j.B+a.annexUrl}]:[]}}}]),t}(L.PureComponent),X.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},W=Z))||W,te=a("9zHi"),ae=a.n(te),le=F.a.Item,ne=Object(V.connect)(function(e){return{BuildCompletionAcceptance:e.BuildCompletionAcceptance,loading:e.loading.models.BuildCompletionAcceptance}})(H=F.a.create()(H=function(e){function t(){var e,a;E()(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=y()(this,(e=k()(t)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,updateModalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},a.columns=[{title:"工程名称",dataIndex:"projectName"},{title:"工程地点及主要控制点",dataIndex:"projectPlace"},{title:"建设依据",dataIndex:"construcBasis"},{title:"技术标准与主要指标",dataIndex:"technicalStandard"},{title:"建设规模及性质",dataIndex:"construcNature"},{title:"开工日期",dataIndex:"startDate",render:function(e){return B()(e).format("YYYY-MM-DD")}},{title:"完工日期",dataIndex:"completionDate",render:function(e){return B()(e).format("YYYY-MM-DD")}},{title:"操作",width:100,render:function(e,t){return S.a.createElement(L.Fragment,null,S.a.createElement(p.a,{placement:"left",title:"编辑"},S.a.createElement(f.a,{onClick:function(){return a.showDetailModal(t.id)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),S.a.createElement(m.a,{type:"vertical"}),S.a.createElement(u.a,{title:"是否删除数据?",onConfirm:function(){return a.delUtil(t.id)},okText:"确定",cancelText:"取消"},S.a.createElement(p.a,{placement:"left",title:"删除"},S.a.createElement(f.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],a.batchDel=function(){d.a.confirm({title:"提示",content:"确定要删除数据吗？",okType:"danger",onOk:function(){var e=a.state.selectedRows;a.delUtil(e.map(function(e){return e.id}).join())}})},a.delUtil=function(e){(0,a.props.dispatch)({type:"BuildCompletionAcceptance/remove",payload:{ids:e},callback:function(){s.a.success("删除成功");var e=a.state.pageBean;a.getList({pageBean:e}),a.setState({selectedRows:[]})}})},a.getList=function(e){(0,a.props.dispatch)({type:"BuildCompletionAcceptance/fetch",payload:e})},a.showDetailModal=function(e){(0,a.props.dispatch)({type:"BuildCompletionAcceptance/detail",payload:e,callback:function(e){a.setState({detail:e},function(){return a.handleUpdateModalVisible(!0)})}})},a.handleStandardTableChange=function(e){var t=a.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:t};a.getList(l)},a.handleFormReset=function(){var e=a.props.form,t=a.state.pageBean;e.resetFields(),a.setState({formValues:[],selectedRows:[]}),a.getList({pageBean:t})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props.form,l=a.state.pageBean;t.validateFields(function(e,t){if(!e){var n={projectName:t.name},r=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});a.setState({formValues:r}),a.getList({pageBean:l,querys:r})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleUpdateModalVisible=function(e){a.setState({updateModalVisible:!!e}),e||a.setState({detail:{}})},a.modalCallback=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",t=a.state,l=t.pageBean,n=t.formValues;return"add"===e?a.getList({pageBean:l}):a.getList({pageBean:l,querys:n})},a}return M()(t,e),b()(t,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return S.a.createElement(F.a,{onSubmit:this.handleSearch,layout:"inline"},S.a.createElement(i.a,{gutter:16},S.a.createElement(c.a,{md:5,sm:24},S.a.createElement(le,null,e("name")(S.a.createElement(o.a,{addonBefore:"工程名称",placeholder:"请输入"})))),S.a.createElement(c.a,{md:4,sm:24},S.a.createElement("span",{className:ae.a.submitButtons},S.a.createElement(f.a,{type:"primary",htmlType:"submit"},"查询"),S.a.createElement(f.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.BuildCompletionAcceptance.data,l=t.loading,i=this.state,c=i.selectedRows,o=i.modalVisible,s=i.updateModalVisible,d=i.detail,u={modalCallback:this.modalCallback},m={handleModalVisible:this.handleModalVisible},p={detail:d,handleModalVisible:this.handleUpdateModalVisible};return S.a.createElement(L.Fragment,null,S.a.createElement(r.a,{bordered:!1},S.a.createElement("div",{className:ae.a.tableList},S.a.createElement("div",{className:ae.a.tableListForm},this.renderSimpleForm()),S.a.createElement("div",{className:ae.a.tableListOperator},S.a.createElement(f.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"),c.length>0&&S.a.createElement(f.a,{type:"danger",onClick:this.batchDel},"批量删除")),S.a.createElement(N.a,{tableAlert:!0,selectedRows:c,loading:l,data:a,size:"middle",columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),o&&S.a.createElement(_,n()({},u,m,{modalVisible:o})),s&&Object.keys(d).length&&S.a.createElement(ee,n()({},u,p,{modalVisible:s})))}}]),t}(L.PureComponent))||H)||H;t.default=ne}}]);