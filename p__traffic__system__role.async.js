(window.webpackJsonp=window.webpackJsonp||[]).push([[189],{KsIa:function(e,a,t){"use strict";t.r(a);var l,n=t("pVnL"),o=t.n(n),r=(t("IzEo"),t("bx4M")),s=(t("14J3"),t("BMrR")),i=(t("jCWc"),t("kPKH")),c=t("MVZn"),d=t.n(c),u=(t("miYZ"),t("tsqr")),p=(t("lUTK"),t("BvKs")),m=(t("qVdP"),t("jsC+")),h=(t("Pwec"),t("CtXQ")),g=(t("/zsF"),t("PArb")),f=(t("BoS7"),t("Sdc0")),b=t("lwsE"),y=t.n(b),R=t("W8MJ"),k=t.n(R),v=t("a1gu"),E=t.n(v),M=t("Nsbk"),S=t.n(M),V=t("PJYZ"),C=t.n(V),w=t("7W2i"),A=t.n(w),T=(t("g9YV"),t("wCAj")),L=(t("+L6B"),t("2/Rp")),I=(t("P2fV"),t("NJEC")),U=(t("ozfa"),t("MJZm")),D=(t("T2oS"),t("W9HT")),N=(t("nRaC"),t("5RzL")),B=(t("sRBo"),t("kaz8")),O=(t("5NDa"),t("5rEg")),F=(t("2qtc"),t("kLXV")),x=(t("y8nQ"),t("Vl3Y")),j=t("q1tI"),q=t.n(j),K=t("MuoO"),z=t("CkN6"),P=t("+n12"),J=t("mf+E"),H=t("9zHi"),G=t.n(H),_=t("ZP6J"),Z=t.n(_),W=["/system/role","/system/role/addRole","/system/role/updateRole","/system/role/deleteRoleByIds","/system/role/menu","/system/role/user","/conserve/data/role","/conserve/data/role/add","/conserve/data/role/update","/conserve/data/role/delete","/conserve/data/role/user","/conserve/data/role/menu","/maritime/data/role","/maritime/data/role/add","/maritime/data/role/update","/maritime/data/role/delete","/maritime/data/role/user","/maritime/data/role/menu","/transport/system/role","/transport/system/role/add","/transport/system/role/update","/transport/system/role/delete","/transport/system/role/user","/transport/system/role/menu"],Y=[[],[]],Q=[],X=x.a.Item,$=F.a.confirm,ee=[],ae=x.a.create()(function(e){var a=e.loading,t=e.modalVisible,l=e.form,n=e.handleAdd,o=e.handleModalVisible,r=e.treeList,s=e.getRoleName,i=e.setRoleCode;e.pinyin;return q.a.createElement(F.a,{destroyOnClose:!0,title:"添加角色",className:Z.a.formModal,visible:t,onOk:function(){l.validateFields(function(e,a){e||n(a,function(){return l.resetFields()})})},onCancel:function(){return o()}},q.a.createElement(D.a,{spinning:a,tip:"正在获取角色代码···"},q.a.createElement("div",{className:Z.a.formModalBody},q.a.createElement(X,{hasFeedback:!0,label:"角色名称"},l.getFieldDecorator("roleName",{rules:[{required:!0,message:"请输入角色名称！"}]})(q.a.createElement(O.a,{placeholder:"请输入",onChange:s}))),q.a.createElement(X,{label:"角色代码"},l.getFieldDecorator("code",{rules:[{required:!0,message:"请先获取角色代码"}]})(q.a.createElement(O.a,{placeholder:"请输入",onFocus:function(){i(function(e){l.setFieldsValue({code:e})})}}))),q.a.createElement(X,{label:"部门"},l.getFieldDecorator("department",{rules:[{required:!0,message:"请选择部门"}]})(q.a.createElement(B.a.Group,null,Y[0].map(function(e,a){return q.a.createElement(B.a,{value:e,key:a},Y[1][a])})))),q.a.createElement(X,{hasFeedback:!0,label:"所属机构"},l.getFieldDecorator("organId",{rules:[{required:!0,message:"请选择所属机构！"}]})(q.a.createElement(N.a,{treeData:r,style:{width:"100%"},placeholder:"请输入"}))),q.a.createElement(X,{label:"角色描述"},l.getFieldDecorator("description",{rules:[{message:"请输入角色描述！"}]})(q.a.createElement(O.a.TextArea,{placeholder:"请输入"}))))))}),te=x.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleUpdate,n=e.handleModalVisible,o=e.treeList,r=e.getRoleName,s=(e.setRoleCode,e.pinyin,e.detailData);return q.a.createElement(F.a,{destroyOnClose:!0,title:"修改角色",className:Z.a.formModal,visible:a,onOk:function(){t.validateFields(function(e,a){e||(t.resetFields(),l(a))})},onCancel:function(){return n()}},q.a.createElement("div",{className:Z.a.formModalBody},q.a.createElement(X,{hasFeedback:!0,label:"角色名称"},t.getFieldDecorator("roleName",{initialValue:s.roleName,rules:[{required:!0,message:"请输入角色名称！"}]})(q.a.createElement(O.a,{placeholder:"请输入",onChange:r}))),q.a.createElement(X,{label:"角色代码"},t.getFieldDecorator("code",{initialValue:s.code})(q.a.createElement(O.a,{disabled:!0,placeholder:"请输入",style:{color:"rgba(0,0,0,.7)"}}))),q.a.createElement(X,{label:"部门"},t.getFieldDecorator("department",{rules:[{required:!0,message:"请选择部门"}],initialValue:s.department?s.department.split(","):[]})(q.a.createElement(B.a.Group,null,Y[0].map(function(e,a){return q.a.createElement(B.a,{value:e,key:a},Y[1][a])})))),q.a.createElement(X,{hasFeedback:!0,label:"所属机构"},t.getFieldDecorator("organId",{initialValue:s.organId,rules:[{required:!0,message:"请选择所属机构！"}]})(q.a.createElement(N.a,{treeData:o,style:{width:"100%"},placeholder:"请输入"}))),q.a.createElement(X,{label:"角色描述"},t.getFieldDecorator("description",{initialValue:s.description,rules:[{message:"请输入角色描述！"}]})(q.a.createElement(O.a.TextArea,{placeholder:"请输入"})))))}),le=x.a.create()(function(e){var a=e.modalVisible,t=e.handleModalVisible,l=e.menuTreeList,n=e.renderTreeNodes,o=e.roleAliasList,r=e.roleAliasCheck,s=e.saveRoleAlias;return q.a.createElement(F.a,{destroyOnClose:!0,title:"菜单分配",visible:a,className:Z.a.myModal,onOk:s,onCancel:function(){return t()},width:300},q.a.createElement(U.a,{showLine:!0,checkable:!0,onCheck:r,checkedKeys:o},n(l)))}),ne=x.a.create()(function(e){var a=e.modalVisible,t=e.handleModalVisible,l=e.data,n=e.loading,o=e.roleDataDel,r=e.roleDataDelBatch,s=e.showRoleUserAddModal,i=e.userRoleRowSelect,c=e.roleUserTableChange,d=[{title:"登录名",dataIndex:"username",width:"150px"},{title:"用户名称",dataIndex:"fullname"},{title:"电话",dataIndex:"mobile"},{title:"操作",width:"80px",render:function(e,a){return q.a.createElement(j.Fragment,null,q.a.createElement(I.a,{title:"是否移除数据?",onConfirm:function(){return o(a.account)},okText:"确定",cancelText:"取消"},q.a.createElement("a",{href:"javascript:void(0)",style:{color:"#f5222d"}},"移除")))}}],u={onChange:function(e,a){i(a)},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name,name:e.name}}};return q.a.createElement(F.a,{destroyOnClose:!0,title:"当前角色用户列表",className:Z.a.myModal,visible:a,onCancel:function(){return t()},width:800,footer:[q.a.createElement(L.a,{key:"back",onClick:function(){return t()}},"取消")]},q.a.createElement("div",{style:{marginBottom:10}},q.a.createElement(L.a,{size:"small",style:{marginRight:5},type:"primary",icon:"plus",onClick:s},"添加"),q.a.createElement(L.a,{size:"small",type:"danger",icon:"delete",onClick:function(){return r()}},"批量移除")),q.a.createElement(T.a,{rowKey:"id",bordered:!0,loading:n,rowSelection:u,columns:d,size:"middle",dataSource:l.list,pagination:l.pagination,onChange:c}),",")}),oe=x.a.create()(function(e){var a=e.modalVisible,t=e.handleModalVisible,l=e.data,n=e.userRoleRowSelect,o=e.userRoleModalOk,r=e.roleUserAddTableChange,s={onChange:function(e,a){n(a)},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name,name:e.name}}};return q.a.createElement(F.a,{destroyOnClose:!0,title:"添加用户",className:Z.a.myModal,rowSelection:s,visible:a,onOk:o,onCancel:function(){return t()},width:800},q.a.createElement(T.a,{rowKey:"id",bordered:!0,rowSelection:s,columns:[{title:"登录名",dataIndex:"account",width:"150px"},{title:"用户名称",dataIndex:"fullname"},{title:"电话",dataIndex:"mobile"}],size:"middle",dataSource:l.list,pagination:l.pagination,onChange:r}))}),re=Object(K.connect)(function(e){var a=e.system,t=e.Role,l=e.loading;return{system:a,Role:t,currentUser:e.user.currentUser,loading:l.models.Role,systemLoading:l.models.system}})(l=x.a.create()(l=function(e){function a(e){var t;return y()(this,a),(t=E()(this,S()(a).call(this,e))).state={modalVisible:!1,updateModalVisible:!1,roleMenuModalVisible:!1,userRoleModalVisible:!1,userRoleAddModalVisible:!1,selectedRows:[],userRoleRowSelectRows:[],userRowSelectAccounts:[],formValues:[],roleAliasList:[],roleAliasListAll:[],treeFormValue:{},expandCheckKeys:[],menuTreeList:[],roleCode:"",roleName:"",pinyin:"",roleAliasID:"",userRoleModalCode:"",userRoleModalOrganId:"",defaultFormValue:{property:"isDelete",value:"0",group:"main",operation:"NOT_EQUAL",relation:"AND"},pageBean:{page:1,pageSize:10,showTotal:!0},deptSearch:{}},t.columns=[{title:"角色代码",dataIndex:"code",width:"150px"},{title:"角色名称",dataIndex:"roleName"},{title:"角色描述",dataIndex:"description"},{title:"所属机构",dataIndex:"organName"},{title:"操作",width:"260px",render:function(e,a){return q.a.createElement(j.Fragment,null,q.a.createElement(f.a,{checkedChildren:"启用",unCheckedChildren:"禁用",checked:1===a.enabled,onClick:function(){return t.switchClick(a)}}),q.a.createElement(g.a,{type:"vertical"}),q.a.createElement(m.a,{overlay:t.tableMenu(a)},q.a.createElement(L.a,null,"更多操作 ",q.a.createElement(h.a,{type:"down"}))))}}],t.getList=function(e){(0,t.props.dispatch)({type:"Role/fetch",payload:e})},t.tableMenu=function(e){return q.a.createElement(p.b,{onClick:t.handleMenuClick.bind(C()(t),e)},Object(P.c)(Q[5])?q.a.createElement(p.b.Item,{key:"user"},q.a.createElement(h.a,{type:"user"}),"分配用户"):null,Object(P.c)(Q[4])?q.a.createElement(p.b.Item,{key:"menu"},q.a.createElement(h.a,{type:"menu"}),"分配菜单"):null,Object(P.c)(Q[2])?q.a.createElement(p.b.Item,{key:"edit"},q.a.createElement(h.a,{type:"form"}),"编辑"):null,Object(P.c)(Q[3])?q.a.createElement(p.b.Item,{key:"del",style:{color:"#f5222d"}},q.a.createElement(h.a,{type:"delete"}),"删除"):null)},t.handleMenuClick=function(e,a){var l=C()(t);switch(a.key){case"edit":l.showEditModal(e.code);break;case"del":$({title:"提示",content:"是否删除数据?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){l.dataDel(e.id)},onCancel:function(){}});break;case"user":t.showUserRoleModal(e);break;case"menu":t.showRoleMenuModal(e.id)}},t.userRoleModalOk=function(){var e=t.state,a=e.userRoleRowSelectRows,l=e.userRoleModalCode,n=e.pageBean;if(!a.length)return u.a.error("请先选择用户");(0,t.props.dispatch)({type:"Role/saveUserRoleData",payload:{code:l,accounts:a.map(function(e){return e.account}).join()},callback:function(){u.a.success("添加成功"),t.handleUserRoleAddModalVisible(),t.setState({userRoleRowSelectRows:[]}),t.getRoleUsersList({filter:{pageBean:n},code:l})}})},t.userRoleRowSelect=function(e){t.setState({userRoleRowSelectRows:e})},t.showRoleUserAddModal=function(){var e=t.props.dispatch,a=t.state;e({type:"Role/getUserData",payload:{pageBean:{page:1,pageSize:10,showTotal:!0},querys:[a.defaultFormValue,{property:"organId",value:a.userRoleModalOrganId,group:"main",operation:"RIGHT_LIKE",relation:"AND"}]}}),t.handleUserRoleAddModalVisible(!0)},t.userRoleSelectTableRow=function(e){t.setState({userRowSelectAccounts:e.map(function(e){return e.account}).join()})},t.roleDataDelBatch=function(){var e=t.props.dispatch,a=t.state,l=a.userRoleModalCode,n=a.userRowSelectAccounts,o=a.pageBean;if(!n.length||!n)return u.a.error("请先选择用户");var r=C()(t);$({title:"移除用户",content:"您确定要移除用户吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){e({type:"Role/removeRoleUser",payload:{code:l,accounts:n},callback:function(){u.a.success("用户移除成功"),r.setState({userRowSelectAccounts:[]}),t.getRoleUsersList({filter:{pageBean:o},code:l})}})},onCancel:function(){}})},t.roleUserTableChange=function(e){var a=t.state.userRoleModalCode;t.getRoleUsersList({filter:{pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0}},code:a})},t.roleUserAddTableChange=function(e){var a=t.props.dispatch,l=t.state,n=l.userRoleModalOrganId,o=l.defaultFormValue;a({type:"Role/getUserData",payload:{pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:[o,{property:"organId",value:n,group:"main",operation:"LIKE",relation:"AND"}]}})},t.roleDataDel=function(e){var a=t.props.dispatch,l=t.state,n=l.userRoleModalCode,o=l.pageBean;a({type:"Role/removeRoleUser",payload:{code:n,accounts:e},callback:function(){u.a.success("用户移除成功"),t.setState({userRowSelectAccounts:[]}),t.getRoleUsersList({filter:{pageBean:o},code:n})}})},t.showUserRoleModal=function(e){var a=t.state.pageBean;t.getRoleUsersList({filter:{pageBean:a},code:e.code},function(){t.setState({userRoleModalCode:e.code,userRoleModalOrganId:e.organId}),t.handleUserRoleModalVisible(!0)})},t.getRoleUsersList=function(e,a){(0,t.props.dispatch)({type:"Role/roleUsersList",payload:e,callback:function(){a&&a()}})},t.showRoleMenuModal=function(e){var a=t.state.menuTreeList;(0,t.props.dispatch)({type:"Role/roleAlias",payload:{roleId:e},callback:function(l){var n=[];for(var o in t.formTree(a),ee=t.unique(ee),l)ee.indexOf(l[o])<0&&n.push(l[o]);t.setState({roleAliasList:n,roleAliasID:e}),t.handleRoleMenuModalVisible(!0)}})},t.unique=function(e){return e.filter(function(e,a,t){return t.indexOf(e,0)===a})},t.formTree=function(e){e.map(function(e){ee.push(parseInt(e.parentId)),e.children.length&&t.formTree(e.children)})},t.roleAliasCheck=function(e,a){var l=a.halfCheckedKeys;t.setState({roleAliasList:e,roleAliasListAll:e.concat(l)})},t.saveRoleAlias=function(){var e=t.props.dispatch,a=t.state,l=a.roleAliasID;a.roleAliasList;e({type:"Role/saveRoleAlias",payload:{menuId:a.roleAliasListAll,roleId:l},callback:function(){u.a.success("菜单权限分配成功"),t.handleRoleMenuModalVisible(),t.setState({roleAliasID:""})}})},t.clearRoleAlias=function(){var e=t.state.selectedRows;if(e){var a=t.props.dispatch,l=C()(t);$({title:"权限清除",content:"您确定要批量清除权限吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a({type:"Role/clearRoleAlias",payload:{roleId:e.map(function(e){return e.id}).join()},callback:function(){u.a.success("清除成功"),l.setState({selectedRows:[]})}})},onCancel:function(){}})}},t.showEditModal=function(e){(0,t.props.dispatch)({type:"Role/detailData",payload:{code:e},callback:function(e){t.handleUpdateModalVisible(!0),t.setState({roleName:e.roleName})}})},t.delBatch=function(){var e=t.state.selectedRows;if(e){var a=C()(t);$({title:"删除",content:"您确定要批量删除吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a.deleteUtil(e.map(function(e){return e.id}).join()+",")},onCancel:function(){}})}},t.activateBatch=function(){var e=t.state.selectedRows;if(e){var a=C()(t);$({title:"提示",content:"您确定要批量启用吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a.activateUtil(e.map(function(e){return e.code}).join())},onCancel:function(){}})}},t.forbiddenBatch=function(){var e=t.state.selectedRows;if(e){var a=C()(t);$({title:"提示",content:"您确定要批量删禁用吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a.forbiddenUtil(e.map(function(e){return e.code}).join())},onCancel:function(){}})}},t.forbiddenUtil=function(e){var a=t.props.dispatch,l=t.state,n=l.defaultFormValue,o=l.pageBean,r=l.deptSearch;a({type:"Role/forbidden",payload:e,callback:function(){u.a.success("禁用成功");var e=[n];Object.keys(r).length&&e.push(r),e.push(t.organArr()),t.getList({pageBean:o,querys:e}),t.setState({selectedRows:[]})}})},t.activateUtil=function(e){var a=t.props.dispatch,l=t.state,n=l.defaultFormValue,o=l.deptSearch,r=l.pageBean;a({type:"Role/activate",payload:e,callback:function(){u.a.success("启用成功");var e=[n];Object.keys(o).length&&e.push(o),e.push(t.organArr()),t.getList({pageBean:r,querys:e}),t.setState({selectedRows:[]})}})},t.switchClick=function(e){1===e.enabled?t.forbiddenUtil(e.code):t.activateUtil(e.code)},t.dataDel=function(e){t.deleteUtil(e)},t.deleteUtil=function(e){var a=t.props.dispatch,l=t.state,n=l.defaultFormValue,o=l.pageBean,r=l.deptSearch;a({type:"Role/remove",payload:{ids:e},callback:function(){u.a.success("删除成功");var e=[n];Object.keys(r).length&&e.push(r),e.push(t.organArr()),t.getList({pageBean:o,querys:e})}})},t.handleStandardTableChange=function(e){var a=t.state,l=a.formValues,n=a.defaultFormValue,o=a.deptSearch,r=[];r.unshift(n),Object.keys(o).length&&r.push(o),r.push(t.organArr());var s={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:r.concat(l)};t.getList(s)},t.handleFormReset=function(){var e=t.props.form,a=t.state,l=a.defaultFormValue,n=a.pageBean,o=a.deptSearch;e.resetFields(),t.setState({formValues:[],selectedKeys:[],treeFormValue:{}});var r=[l];Object.keys(o).length&&r.push(o),r.push(t.organArr()),t.getList({pageBean:n,querys:r})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props.form,l=t.state,n=l.defaultFormValue,o=l.pageBean,r=l.deptSearch;a.validateFields(function(e,a){if(!e){var l=d()({},a),s=Object.keys(l).map(function(e){return l[e]?{property:e,value:l[e],group:"main",operation:"LIKE",relation:"OR"}:""}).filter(function(e){return e});t.setState({formValues:s}),s.unshift(n),Object.keys(r).length&&s.push(r),s.push(t.organArr()),t.getList({pageBean:o,querys:s})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e,roleName:""}),e||t.setState({pinyin:""})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e,roleName:""}),e||t.setState({pinyin:""})},t.handleRoleMenuModalVisible=function(e){t.setState({roleMenuModalVisible:!!e})},t.handleUserRoleModalVisible=function(e){t.setState({userRoleModalVisible:!!e})},t.handleUserRoleAddModalVisible=function(e){t.setState({userRoleAddModalVisible:!!e})},t.handleAdd=function(e,a){var l=t.props,n=l.dispatch,o=l.currentUser,r=t.state,s=r.defaultFormValue,i=r.pageBean,c=r.deptSearch;e.department=e.department.join(),n({type:"Role/add",payload:e,callback:function(){u.a.success("添加成功"),t.setState({pinyin:""}),t.handleModalVisible();var e=[s];Object.keys(c).length&&e.push(c),e.push({property:"organId",value:o.organId,group:"main",operation:"RIGHT_LIKE",relation:"AND"}),t.getList({pageBean:i,querys:e}),a&&a()}})},t.handleUpdate=function(e){var a=t.props,l=a.dispatch,n=a.Role.detailData,o=t.state,r=o.defaultFormValue,s=o.pageBean,i=o.deptSearch;e.enabled=n.enabled,e.department=e.department.join(),l({type:"Role/update",payload:e,callback:function(){u.a.success("编辑成功"),t.handleUpdateModalVisible();var e=[r];Object.keys(i).length&&e.push(i),e.push(t.organArr()),t.getList({pageBean:s,querys:e})}})},t.organArr=function(){var e=t.state.treeFormValue,a=t.props.currentUser;return"{}"!==JSON.stringify(e)?e:{property:"organId",value:a.organId,group:"main",operation:"RIGHT_LIKE",relation:"OR"}},t.onSelect=function(e,a){if(e[0]){t.setState({selectedKeys:e});var l=t.state,n=l.formValues,o=l.defaultFormValue,r=l.pageBean,s=l.deptSearch,i=[],c={property:"organId",value:e[0],group:"main",operation:"RIGHT_LIKE",relation:"OR"};t.setState({treeFormValue:c}),i.unshift(o),Object.keys(s).length&&i.push(s),i.push(c),i=i.concat(n),t.getList({pageBean:r,querys:i})}},t.renderTreeNodes=function(e){return e.map(function(e){return e.children?q.a.createElement(U.a.TreeNode,{title:e.title,key:e.key,dataRef:e},t.renderTreeNodes(e.children)):q.a.createElement(U.a.TreeNode,e)})},t.setRoleCode=function(e){var a=t.state.roleName,l=t.props.dispatch;if(!a)return u.a.error("请先输入角色名称");l({type:"system/getPinyin",payload:{chinese:a,type:2},callback:function(a){t.setState({pinyin:a}),e&&e(a)}})},t.getRoleName=function(e){t.setState({roleName:e.target.value})},t.expandCheck=function(e){t.setState({expandCheckKeys:e})},Y=Object(P.B)(),Q=Object(P.I)(W),t}return A()(a,e),k()(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props.dispatch,t=this.state,l=t.defaultFormValue,n=t.pageBean,o=localStorage.getItem("organId"),r=JSON.parse(localStorage.getItem("mainMsg")||"{}"),s=r.department?r.department.split(","):[],i={property:"department",value:s.join(),group:"main",operation:"LIKE",relation:"AND"},c=[l];s.length<4&&(c.push(i),this.setState({deptSearch:i})),this.getList({pageBean:n,querys:[].concat(c,[{property:"organId",value:o,group:"main",operation:"RIGHT_LIKE",relation:"AND"}])}),a({type:"menu/getMenuData2",payload:{prefix:"",type:0},callback:function(a){e.setState({menuTreeList:Object(P.x)(a)})}})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return q.a.createElement(x.a,{onSubmit:this.handleSearch,layout:"inline"},q.a.createElement(s.a,{gutter:{md:8,lg:16,xl:16}},q.a.createElement(i.a,{md:6,sm:24},q.a.createElement(X,null,e("code")(q.a.createElement(O.a,{addonBefore:"角色代码",placeholder:"请输入"})))),q.a.createElement(i.a,{md:6,sm:24},q.a.createElement(X,null,e("roleName")(q.a.createElement(O.a,{addonBefore:"角色名称",placeholder:"请输入"})))),q.a.createElement(i.a,{md:6,sm:24},q.a.createElement("span",{className:G.a.submitButtons},q.a.createElement(L.a,{type:"primary",htmlType:"submit"},"查询"),q.a.createElement(L.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.system.treeList,l=a.Role,n=l.data,s=l.detailData,i=l.roleUserList,c=l.userData,d=a.loading,u=a.systemLoading,p=this.state,m=p.expandCheckKeys,h=p.menuTreeList,g=p.selectedKeys,f=p.selectedRows,b=p.modalVisible,y=p.updateModalVisible,R=p.pinyin,k=p.roleMenuModalVisible,v=p.roleAliasList,E=p.userRoleModalVisible,M=p.userRoleAddModalVisible,S={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,getRoleName:this.getRoleName,setRoleCode:this.setRoleCode,treeList:t,pinyin:R,loading:u},V={handleUpdate:this.handleUpdate,handleModalVisible:this.handleUpdateModalVisible,getRoleName:this.getRoleName,setRoleCode:this.setRoleCode,treeList:t,pinyin:R,detailData:s},C={handleModalVisible:this.handleRoleMenuModalVisible,renderTreeNodes:this.renderTreeNodes,roleAliasCheck:this.roleAliasCheck,saveRoleAlias:this.saveRoleAlias,menuTreeList:h,roleAliasList:v},w={handleModalVisible:this.handleUserRoleModalVisible,showRoleUserAddModal:this.showRoleUserAddModal,data:i,loading:d,roleDataDel:this.roleDataDel,roleDataDelBatch:this.roleDataDelBatch,roleUserTableChange:this.roleUserTableChange},A={handleModalVisible:this.handleUserRoleAddModalVisible,data:c,renderTreeNodes:this.renderTreeNodes,userRoleModalOk:this.userRoleModalOk,treeList:t,roleUserAddTableChange:this.roleUserAddTableChange};return q.a.createElement(j.Fragment,null,Object(P.c)(Q[0])?null:q.a.createElement(J.a,{to:"/exception/403"}),q.a.createElement("div",{className:G.a.tableMain},q.a.createElement(D.a,{spinning:u},q.a.createElement("div",{className:G.a.treeLeft},q.a.createElement(U.a,{selectedKeys:g,showLine:!0,onSelect:this.onSelect,expandedKeys:m[0]?m:[t[0]?t[0].key:""],onExpand:this.expandCheck},this.renderTreeNodes(t)))),q.a.createElement("div",{className:G.a.rightTable},q.a.createElement(r.a,{bordered:!1,style:{height:"100%"}},q.a.createElement("div",{className:G.a.tableList},q.a.createElement("div",{className:G.a.tableListForm},this.renderSimpleForm()),q.a.createElement("div",{className:G.a.tableListOperator},Object(P.c)(Q[1])?q.a.createElement(L.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"):null,f.length>0&&q.a.createElement("span",null,Object(P.c)(Q[3])?q.a.createElement(L.a,{type:"danger",onClick:function(){return e.delBatch()}},"批量删除"):null,q.a.createElement(L.a,{type:"danger",onClick:this.clearRoleAlias},"清除授权"),q.a.createElement(L.a,{onClick:this.activateBatch},"批量启用"),q.a.createElement(L.a,{onClick:this.forbiddenBatch},"批量禁用"))),q.a.createElement(z.a,{tableAlert:!0,selectedRows:f,loading:d,data:n,size:"middle",columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))))),q.a.createElement(ae,o()({},S,{modalVisible:b})),q.a.createElement(te,o()({},V,{modalVisible:y})),q.a.createElement(le,o()({},C,{modalVisible:k})),q.a.createElement(ne,o()({userRoleRowSelect:this.userRoleSelectTableRow},w,{modalVisible:E})),q.a.createElement(oe,o()({},A,{modalVisible:M,userRoleRowSelect:this.userRoleRowSelect})))}}]),a}(j.PureComponent))||l)||l;a.default=re}}]);