(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{ec6P:function(e,a,t){"use strict";t.r(a);var l,n=t("pVnL"),r=t.n(n),i=(t("IzEo"),t("bx4M")),s=(t("miYZ"),t("tsqr")),c=(t("P2fV"),t("NJEC")),o=(t("/zsF"),t("PArb")),d=(t("5Dmo"),t("3S7+")),m=t("lwsE"),u=t.n(m),p=t("W8MJ"),h=t.n(p),g=t("a1gu"),E=t.n(g),f=t("Nsbk"),b=t.n(f),y=t("7W2i"),v=t.n(y),M=(t("2qtc"),t("kLXV")),V=(t("14J3"),t("BMrR")),k=(t("7Kak"),t("9yH6")),C=(t("iQDF"),t("+eQT")),D=(t("jCWc"),t("kPKH")),F=(t("5NDa"),t("5rEg")),w=(t("+L6B"),t("2/Rp")),L=(t("OaEy"),t("2fM7")),N=(t("y8nQ"),t("Vl3Y")),S=t("q1tI"),B=t.n(S),U=t("MuoO"),x=t("wd/R"),q=t.n(x),z=t("CkN6"),A=t("9zHi"),T=t.n(A),P=t("ZP6J"),I=t.n(P),O=t("ns75"),Y=t.n(O),J=N.a.Item,R=L.a.Option,H=N.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleAdd,n=e.handleModalVisible,r=e.loading,i=e.departmentUserList,s=e.changerChange;return B.a.createElement(M.a,{destroyOnClose:!0,title:"添加港口",className:I.a.formModal,visible:a,onCancel:function(){return n()},footer:[B.a.createElement(w.a,{key:"back",onClick:function(){return n()}},"取消"),B.a.createElement(w.a,{key:"submit",type:"primary",loading:r,onClick:function(){t.validateFields(function(e,a){e||l(a,function(){return t.resetFields()})})}},"确定")]},B.a.createElement("div",{className:I.a.formModalBody},B.a.createElement(V.a,{gutter:20},B.a.createElement(D.a,{sm:12},B.a.createElement(J,{label:"港口名称"},t.getFieldDecorator("portName",{rules:[{required:!0,message:"请输入港口名称"}]})(B.a.createElement(F.a,{placeholder:"请输入"}))),B.a.createElement(J,{label:"负责人"},t.getFieldDecorator("changerId",{rules:[{required:!0,message:"请选择负责人"}]})(B.a.createElement(L.a,{placeholder:"请选择",style:{width:"100%"},onChange:s},i.map(function(e){return B.a.createElement(R,{key:e.id,value:e.id},e.fullname)})))),B.a.createElement(J,{label:"地址"},t.getFieldDecorator("portAddr",{rules:[{required:!0,message:"请输入地址"}]})(B.a.createElement(F.a.TextArea,{autosize:!0,placeholder:"请输入"})))),B.a.createElement(D.a,{sm:12},B.a.createElement(J,{label:"港口编号"},t.getFieldDecorator("portCode",{rules:[{required:!0,message:"请输入港口编号"}]})(B.a.createElement(F.a,{placeholder:"请输入"}))),B.a.createElement(J,{label:"注册时间"},t.getFieldDecorator("registTime",{rules:[{required:!0,message:"请选择注册时间"}]})(B.a.createElement(C.a,{placeholder:"请选择",style:{width:"100%"}}))),B.a.createElement(J,{label:"状态"},t.getFieldDecorator("state",{rules:[{required:!0,message:"请输入地址"}]})(B.a.createElement(k.a.Group,null,B.a.createElement(k.a,{value:1},"营运中"),B.a.createElement(k.a,{value:2},"停业中"))))))))}),j=N.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleUpdate,n=e.handleModalVisible,r=e.loading,i=e.departmentUserList,s=e.changerChange,c=e.detail;return B.a.createElement(M.a,{destroyOnClose:!0,title:"编辑港口",className:I.a.formModal,visible:a,onCancel:function(){return n()},width:700,footer:[B.a.createElement(w.a,{key:"back",onClick:function(){return n()}},"取消"),B.a.createElement(w.a,{key:"submit",type:"primary",loading:r,onClick:function(){t.validateFields(function(e,a){e||l(a,function(){return t.resetFields()})})}},"确定")]},B.a.createElement("div",{className:I.a.formModalBody},B.a.createElement(V.a,{gutter:20},B.a.createElement(D.a,{sm:12},B.a.createElement(J,{label:"港口名称"},t.getFieldDecorator("portName",{initialValue:c.portName,rules:[{required:!0,message:"请输入港口名称"}]})(B.a.createElement(F.a,{placeholder:"请输入"}))),B.a.createElement(J,{label:"负责人"},t.getFieldDecorator("changerId",{initialValue:c.changerId,rules:[{required:!0,message:"请选择负责人"}]})(B.a.createElement(L.a,{placeholder:"请选择",style:{width:"100%"},onChange:s},i.map(function(e){return B.a.createElement(R,{key:e.id,value:e.id},e.fullname)})))),B.a.createElement(J,{label:"地址"},t.getFieldDecorator("portAddr",{initialValue:c.portAddr,rules:[{required:!0,message:"请输入地址"}]})(B.a.createElement(F.a.TextArea,{autosize:!0,placeholder:"请输入"})))),B.a.createElement(D.a,{sm:12},B.a.createElement(J,{label:"港口编号"},t.getFieldDecorator("portCode",{initialValue:c.portCode,rules:[{required:!0,message:"请输入港口编号"}]})(B.a.createElement(F.a,{placeholder:"请输入"}))),B.a.createElement(J,{label:"注册时间"},t.getFieldDecorator("registTime",{initialValue:q()(new Date(c.registTime),"YYYY-MM-DD"),rules:[{required:!0,message:"请选择注册时间"}]})(B.a.createElement(C.a,{placeholder:"请选择",style:{width:"100%"}})))),B.a.createElement(J,{label:"状态"},t.getFieldDecorator("state",{initialValue:c.state,rules:[{required:!0,message:"请输入地址"}]})(B.a.createElement(k.a.Group,null,B.a.createElement(k.a,{value:1},"营运中"),B.a.createElement(k.a,{value:2},"停业中")))))))}),Q=Object(U.connect)(function(e){return{MaritimePort:e.MaritimePort,loading:e.loading.models.MaritimePort}})(l=N.a.create()(l=function(e){function a(){var e,t;u()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=E()(this,(e=b()(a)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,updateModalVisible:!1,formValues:[],changer:"",detail:{},departmentUserList:[],pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"港口名称",dataIndex:"portName"},{title:"负责人",dataIndex:"changer"},{title:"注册时间",dataIndex:"registTime",width:120,render:function(e){return q()(e).format("YYYY-MM-DD")}},{title:"地址",dataIndex:"portAddr"},{title:"状态",dataIndex:"state",width:80,render:function(e){return 1===e?"营运中":"停业中"}},{title:"操作",width:100,render:function(e,a){return B.a.createElement(S.Fragment,null,B.a.createElement(d.a,{placement:"left",title:"编辑"},B.a.createElement(w.a,{onClick:function(){return t.editData(a)},type:"primary",shape:"circle",icon:"edit",size:"small"})),B.a.createElement(o.a,{type:"vertical"}),B.a.createElement(c.a,{title:"是否删除数据?",onConfirm:function(){return t.dataDel(a.id)},okText:"确定",cancelText:"取消"},B.a.createElement(d.a,{placement:"left",title:"删除"},B.a.createElement(w.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.getList=function(e){(0,t.props.dispatch)({type:"MaritimePort/fetch",payload:e})},t.dataDel=function(e){(0,t.props.dispatch)({type:"MaritimePort/remove",payload:{id:e},callback:function(){s.a.success("删除成功"),t.getList({pageBean:t.state.pageBean})}})},t.editData=function(e){t.setState({detail:e,changer:e.changer},function(){return t.handleUpdateModalVisible(!0)})},t.getDepartmentUser=function(){(0,t.props.dispatch)({type:"system/departmentUser",payload:{menuType:-3},callback:function(e){t.setState({departmentUserList:e})}})},t.handleStandardTableChange=function(e){var a=t.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(l)},t.handleFormReset=function(){t.props.form.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:t.state.pageBean})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l=t.state.pageBean,n={portName:a.name,state:a.zt,changerId:a.fzr},r=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"portName"===e?"LIKE":"EQUAL",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:r}),t.getList({pageBean:l,querys:r})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e}),e||t.setState({detail:{}})},t.handleAdd=function(e,a){var l=t.props.dispatch,n=t.state,r=n.changer,i=n.pageBean;e.changer=r,l({type:"MaritimePort/add",payload:e,callback:function(){s.a.success("添加成功"),t.handleModalVisible(),t.getList({pageBean:i}),a&&a()}})},t.handleUpdate=function(e,a){var l=t.props.dispatch,n=t.state,r=n.detail,i=n.pageBean,c=n.changer,o=JSON.parse(JSON.stringify(r));for(var d in e.changer=c,e)o[d]=e[d];t.setState({detail:o}),l({type:"MaritimePort/update",payload:o,callback:function(){s.a.success("编辑成功"),t.handleUpdateModalVisible(),t.getList({pageBean:i}),a&&a()}})},t.changerChange=function(e,a){t.setState({changer:a.props.children})},t}return v()(a,e),h()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e}),this.getDepartmentUser()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,a=this.state.departmentUserList;return B.a.createElement(N.a,{onSubmit:this.handleSearch,layout:"inline"},B.a.createElement(V.a,{gutter:16},B.a.createElement(D.a,{md:6,sm:24},B.a.createElement(J,null,e("name")(B.a.createElement(F.a,{addonBefore:"港口名称",placeholder:"请输入"})))),B.a.createElement(D.a,{md:6,sm:24},B.a.createElement("div",{className:Y.a.inputMain},B.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"负责人"),B.a.createElement(J,{style:{flex:1}},e("fzr")(B.a.createElement(L.a,{placeholder:"请选择",style:{width:"100%"}},a.map(function(e){return B.a.createElement(R,{key:e.id,value:e.id},e.fullname)})))))),B.a.createElement(D.a,{md:6,sm:24},B.a.createElement("div",{className:Y.a.inputMain},B.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"状态"),B.a.createElement(J,{style:{flex:1}},e("zt")(B.a.createElement(L.a,{placeholder:"请选择",style:{width:"100%"}},B.a.createElement(R,{value:1},"营运中"),B.a.createElement(R,{value:2},"停业中")))))),B.a.createElement(D.a,{md:6,sm:24},B.a.createElement("span",{className:T.a.submitButtons},B.a.createElement(w.a,{type:"primary",htmlType:"submit"},"查询"),B.a.createElement(w.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.MaritimePort.data,l=a.loading,n=this.state,s=n.modalVisible,c=n.updateModalVisible,o=n.departmentUserList,d=n.detail,m={loading:l,departmentUserList:o,handleAdd:this.handleAdd,changerChange:this.changerChange,handleModalVisible:this.handleModalVisible},u={loading:l,detail:d,departmentUserList:o,changerChange:this.changerChange,handleModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate};return B.a.createElement(S.Fragment,null,B.a.createElement(i.a,{bordered:!1},B.a.createElement("div",{className:T.a.tableList},B.a.createElement("div",{className:T.a.tableListForm},this.renderSimpleForm()),B.a.createElement("div",{className:T.a.tableListOperator},B.a.createElement(w.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建")),B.a.createElement(z.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:l,data:t,columns:this.columns,onChange:this.handleStandardTableChange}))),s?B.a.createElement(H,r()({},m,{modalVisible:s})):null,c&&Object.keys(d).length?B.a.createElement(j,r()({},u,{modalVisible:c})):null)}}]),a}(S.PureComponent))||l)||l;a.default=Q}}]);