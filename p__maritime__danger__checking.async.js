(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{hV61:function(e,t,a){"use strict";a.r(t);var l=a("pVnL"),n=a.n(l),r=(a("IzEo"),a("bx4M")),i=(a("14J3"),a("BMrR")),s=(a("jCWc"),a("kPKH")),c=(a("5NDa"),a("5rEg")),o=a("MVZn"),m=a.n(o),d=(a("miYZ"),a("tsqr")),u=(a("2qtc"),a("kLXV")),h=(a("P2fV"),a("NJEC")),p=(a("/zsF"),a("PArb")),E=(a("5Dmo"),a("3S7+")),f=(a("+L6B"),a("2/Rp")),b=a("lwsE"),g=a.n(b),y=a("W8MJ"),v=a.n(y),S=a("a1gu"),w=a.n(S),N=a("Nsbk"),R=a.n(N),k=a("7W2i"),C=a.n(k),I=(a("y8nQ"),a("Vl3Y")),M=a("q1tI"),V=a.n(M),B=a("MuoO"),D=a("wd/R"),L=a.n(D),z=a("CkN6"),F=(a("bP8k"),a("gFTJ")),P=a("Py4S"),T=a.n(P),O=a("+n12"),x=a("lTPH"),j=a("ZP6J"),J=a.n(j),A=a("U1Es"),Y=a.n(A),q=function(e){function t(){var e,a;g()(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=w()(this,(e=R()(t)).call.apply(e,[this].concat(n)))).renderImg=function(e){return V.a.createElement(T.a,{backdrop:"rgba(255,255,255,.3)",src:"".concat(O.B).concat(e),alt:"图片",style:{width:"200px",height:"200px"}})},a.renderShipRules=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(x.m)(e,t).map(function(e,t){return V.a.createElement("li",{key:t,className:e.isError?Y.a.error:null},e.name)})},a}return C()(t,e),v()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.handleModalVisible,l=e.detail,n={marginTop:5};return V.a.createElement(u.a,{destroyOnClose:!0,title:"详情",className:J.a.formModal,visible:t,onCancel:function(){return a()},footer:null,width:1e3},V.a.createElement(r.a,{bordered:!1},V.a.createElement(F.a,{title:"基本信息",size:"small",layout:"vertical",bordered:!0},V.a.createElement(F.a.Item,{label:"船舶名称"},l.shipName),V.a.createElement(F.a.Item,{label:"船舶所有人"},l.shipOwner),V.a.createElement(F.a.Item,{label:"电话"},l.phone))),V.a.createElement(r.a,{bordered:!1,style:n},V.a.createElement("h3",{className:Y.a.title},"总体检查"),V.a.createElement("ul",{className:Y.a.list},this.renderShipRules(l.overallInspection,x.r))),V.a.createElement(r.a,{bordered:!1,style:n},V.a.createElement(F.a,{column:1,title:"证书检查",size:"small",layout:"vertical",bordered:!0},V.a.createElement(F.a.Item,{label:"船舶证书"},V.a.createElement("ul",{className:Y.a.list},this.renderShipRules(l.shipCertificate,x.f))),V.a.createElement(F.a.Item,{label:"船舶检验证书"},V.a.createElement("ul",{className:Y.a.list},this.renderShipRules(l.shipInspectionCertificate,x.B))),V.a.createElement(F.a.Item,{label:"船舶文书"},V.a.createElement("ul",{className:Y.a.list},this.renderShipRules(l.shipInstruments,x.C))),V.a.createElement(F.a.Item,{label:"船员文书"},V.a.createElement("ul",{className:Y.a.list},this.renderShipRules(l.crewPaperwork,x.j))),V.a.createElement(F.a.Item,{label:"防污文书"},V.a.createElement("ul",{className:Y.a.list},this.renderShipRules(l.antifoulingInstruments,x.b))))),V.a.createElement(r.a,{bordered:!1,style:n},V.a.createElement("h3",{className:Y.a.title},"船员配置"),V.a.createElement("ul",{className:Y.a.list},this.renderShipRules(l.crewConfiguration,x.i))),V.a.createElement(r.a,{bordered:!1,style:n},V.a.createElement("h3",{className:Y.a.title},"船舶进出港报告"),V.a.createElement("ul",{className:Y.a.list},this.renderShipRules(l.shipEntryReport,x.A))),V.a.createElement(r.a,{bordered:!1,style:n},V.a.createElement("h3",{className:Y.a.title},"重点跟踪船舶"),V.a.createElement("ul",{className:Y.a.list},this.renderShipRules(l.focusShips,x.l))),V.a.createElement(r.a,{bordered:!1,style:n},V.a.createElement("h3",{className:Y.a.title},"载客、载货情况"),V.a.createElement("ul",{className:Y.a.list},this.renderShipRules(l.cargoCustomerSituation,x.d))),V.a.createElement(r.a,{bordered:!1,style:n},V.a.createElement("h3",{className:Y.a.title},"航行"),V.a.createElement("ul",{className:Y.a.list},this.renderShipRules(l.sailing,x.y))),V.a.createElement(r.a,{bordered:!1,style:n},V.a.createElement("h3",{className:Y.a.title},"停泊"),V.a.createElement("ul",{className:Y.a.list},this.renderShipRules(l.mooring,x.e))),V.a.createElement(r.a,{bordered:!1,style:n},V.a.createElement(F.a,{column:2,size:"small",layout:"vertical",bordered:!0},V.a.createElement(F.a.Item,{label:"检查人员签字"},this.renderImg(l.inspectors)),V.a.createElement(F.a.Item,{label:"被检查人员签字"},this.renderImg(l.inspectedPerson)))))}}]),t}(M.PureComponent);q.defaultProps={detail:{},modalVisible:!1,handleModalVisible:function(){}};a("ns75");var U,H=a("9zHi"),W=a.n(H),Z=I.a.Item,K=Object(B.connect)(function(e){return{MaritimeChecking:e.MaritimeChecking,loading:e.loading.models.MaritimeChecking}})(U=I.a.create()(U=function(e){function t(){var e,a;g()(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=w()(this,(e=R()(t)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},a.columns=[{title:"船舶名称",dataIndex:"shipName"},{title:"船舶所有人",dataIndex:"shipOwner"},{title:"联系电话",dataIndex:"phone"},{title:"创建日期",dataIndex:"createTime"},{title:"操作",width:90,render:function(e,t){return V.a.createElement(M.Fragment,null,V.a.createElement(E.a,{placement:"left",title:"详情"},V.a.createElement(f.a,{onClick:function(){return a.showDetailModal(t)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),V.a.createElement(p.a,{type:"vertical"}),V.a.createElement(h.a,{title:"是否删除数据?",onConfirm:function(){return a.dataDel(t.id)},okText:"确定",cancelText:"取消"},V.a.createElement(E.a,{placement:"left",title:"删除"},V.a.createElement(f.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],a.getList=function(e){(0,a.props.dispatch)({type:"MaritimeChecking/fetch",payload:e})},a.showDetailModal=function(e){a.setState({detail:e},function(){return a.handleModalVisible(!0)})},a.dataDel=function(e){a.delUtil(e)},a.batchDel=function(){var e=a.state.selectedRows;e.length&&u.a.confirm({title:"提示",content:"是否删除数据？",onOk:function(){var t=e.map(function(e){return e.id});a.delUtil(t.join(),function(){a.setState({selectedRows:[]})})}})},a.delUtil=function(e,t){(0,a.props.dispatch)({type:"MaritimeChecking/remove",payload:{ids:e},callback:function(){d.a.success("删除成功");var e=a.state.pageBean;a.getList({pageBean:e}),t&&t()}})},a.handleStandardTableChange=function(e){var t=a.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:t};a.getList(l)},a.handleFormReset=function(){var e=a.props.form,t=a.state.pageBean;e.resetFields(),a.setState({formValues:[],selectedRows:[]}),a.getList({pageBean:t})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props.form,l=a.state.pageBean;t.validateFields(function(e,t){if(!e){var n=m()({},t,{createTime:t.time&&L()(t.time).format("YYYY-MM-DD")});delete n.time;var r=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});a.setState({formValues:r}),a.getList({pageBean:l,querys:r})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e}),e||a.setState({detail:{}})},a}return C()(t,e),v()(t,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return V.a.createElement(I.a,{onSubmit:this.handleSearch,layout:"inline"},V.a.createElement(i.a,{gutter:16},V.a.createElement(s.a,{md:6,sm:24},V.a.createElement(Z,null,e("shipName")(V.a.createElement(c.a,{addonBefore:"船舶名称",placeholder:"请输入"})))),V.a.createElement(s.a,{md:6,sm:24},V.a.createElement(Z,null,e("shipOwner")(V.a.createElement(c.a,{addonBefore:"船舶所有人",placeholder:"请输入"})))),V.a.createElement(s.a,{md:6,sm:24},V.a.createElement("span",{className:W.a.submitButtons},V.a.createElement(f.a,{type:"primary",htmlType:"submit"},"查询"),V.a.createElement(f.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,t=e.MaritimeChecking.data,a=e.loading,l=this.state,i=l.selectedRows,s=l.modalVisible,c=l.detail,o={detail:c,handleModalVisible:this.handleModalVisible};return V.a.createElement(M.Fragment,null,V.a.createElement(r.a,{bordered:!1},V.a.createElement("div",{className:W.a.tableList},V.a.createElement("div",{className:W.a.tableListForm},this.renderSimpleForm()),V.a.createElement("div",{className:W.a.tableListOperator},i.length>0&&V.a.createElement(f.a,{type:"danger",onClick:this.batchDel},"批量删除")),V.a.createElement(z.a,{size:"middle",tableAlert:!1,selectedRows:i,loading:a,data:t,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),s&&Object.keys(c).length?V.a.createElement(q,n()({},o,{modalVisible:s})):null)}}]),t}(M.PureComponent))||U)||U;t.default=K}}]);