(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{"6st5":function(e,a,t){"use strict";t.r(a);t("IzEo");var l=t("bx4M"),n=t("pVnL"),i=t.n(n),r=(t("miYZ"),t("tsqr")),o=(t("P2fV"),t("NJEC")),c=(t("/zsF"),t("PArb")),s=(t("5Dmo"),t("3S7+")),d=(t("+L6B"),t("2/Rp")),u=t("lwsE"),m=t.n(u),f=t("W8MJ"),p=t.n(f),h=t("a1gu"),b=t.n(h),y=t("Nsbk"),C=t.n(y),g=t("7W2i"),k=t.n(g),v=(t("y8nQ"),t("Vl3Y")),E=t("q1tI"),M=t.n(E),V=t("MuoO"),S=t("CkN6"),P=(t("2qtc"),t("kLXV")),F=t("MVZn"),T=t.n(F),w=(t("giR+"),t("fyUT")),G=(t("5NDa"),t("5rEg")),N=v.a.Item;function x(e){return e.replace(/^(0+)|[^\d]+/g,"")}var O=v.a.create({mapPropsToFields:function(e){return function(e){for(var a=Object.keys(e),t={},l=0;l<a.length;l+=1)t[a[l]]=v.a.createFormField(T()({},e[a[l]],{value:e[a[l]].value}));return t}(e.field)},onFieldsChange:function(e,a){e.onChange(a)}})(function(e){var a=e.form,t=e.type;return M.a.createElement(E.Fragment,null,M.a.createElement(N,{label:"方法名称"},a.getFieldDecorator("methodName",{rules:[{required:!0,message:"请输入方法名称！"}]})(M.a.createElement(G.a,{disabled:"edit"===t,placeholder:"请输入"}))),M.a.createElement(N,{label:"方法值"},a.getFieldDecorator("methodValue",{rules:[{required:!0,message:"请输入方法值！"}]})(M.a.createElement(G.a,{placeholder:"请输入"}))),M.a.createElement(N,{label:"下次调用时间（h）"},a.getFieldDecorator("nextTryTime",{rules:[{required:!0,message:"请输入方法值！"}]})(M.a.createElement(w.a,{formatter:x,parser:x,min:0,placeholder:"请输入",style:{width:"100%"}}))),M.a.createElement(N,{label:"限制次数"},a.getFieldDecorator("limitNumber",{rules:[{required:!0,message:"请输入限制次数！"}]})(M.a.createElement(w.a,{formatter:x,parser:x,placeholder:"请输入",min:0,style:{width:"100%"}}))))});O.defaultProps={type:"add",field:{},onChange:function(){}};var D,L,j,q,I,z,U,J=O,R=t("ZP6J"),A=t.n(R),B=Object(V.connect)(function(e){return{CarGPS:e.CarGPS,loading:e.loading.models.CarGPS}})((j=L=function(e){function a(e){var t;return m()(this,a),(t=b()(this,C()(a).call(this,e))).state={field:{}},t.cancelClick=function(){(0,t.props.handleModalVisible)()},t.onChange=function(e){t.setState(function(a){var t=a.field;return{field:T()({},t,e)}})},t.save=function(){t.MyForm.current.validateFields(function(e,a){if(!e){var l=t.props,n=l.dispatch,i=l.modalCallback;n({type:"CarGPS/update",payload:T()({},a,{nextTryTime:3600*a.nextTryTime}),callback:function(){r.a.success("添加成功"),i(),t.cancelClick()}})}})},t.MyForm=M.a.createRef(),t}return k()(a,e),p()(a,[{key:"render",value:function(){var e=this.props,a=e.loading,t=e.modalVisible,l=this.state.field;return M.a.createElement(P.a,{destroyOnClose:!0,title:"新建",className:A.a.formModal,visible:t,onCancel:this.cancelClick,footer:[M.a.createElement(d.a,{key:"back",onClick:this.cancelClick},"取消"),M.a.createElement(d.a,{key:"submit",type:"primary",loading:a,onClick:this.save},"确定")]},M.a.createElement("div",{className:A.a.formModalBody},M.a.createElement(J,{field:l,ref:this.MyForm,onChange:this.onChange})))}}]),a}(E.PureComponent),L.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},D=j))||D,Z=Object(V.connect)(function(e){return{CarGPS:e.CarGPS,loading:e.loading.models.CarGPS}})((z=I=function(e){function a(e){var t;return m()(this,a),(t=b()(this,C()(a).call(this,e))).state={field:{},detail:{},isSet:!1},t.cancelClick=function(){(0,t.props.handleModalVisible)()},t.onChange=function(e){t.setState(function(a){var t=a.detail;return{detail:T()({},t,e)}})},t.save=function(){t.MyForm.current.validateFields(function(e,a){if(!e){for(var l=t.props,n=l.dispatch,i=l.modalCallback,o=t.state,c=o.field,s=o.detail,d=T()({},c,a,{nextTryTime:3600*a.nextTryTime}),u=T()({},s),m=Object.keys(a),f=0;f<m.length;f+=1)u[m[f]]={value:a[m[f]]};t.setState({detail:u}),n({type:"CarGPS/update",payload:d,callback:function(){r.a.success("编辑成功"),i(),t.cancelClick()}})}})},t.MyForm=M.a.createRef(),t}return k()(a,e),p()(a,[{key:"render",value:function(){var e=this.props,a=e.loading,t=e.modalVisible,l=this.state.detail;return M.a.createElement(P.a,{destroyOnClose:!0,title:"编辑",className:A.a.formModal,visible:t,onCancel:this.cancelClick,footer:[M.a.createElement(d.a,{key:"back",onClick:this.cancelClick},"取消"),M.a.createElement(d.a,{key:"submit",type:"primary",loading:a,onClick:this.save},"确定")]},M.a.createElement("div",{className:A.a.formModalBody},M.a.createElement(J,{type:"edit",field:l,ref:this.MyForm,onChange:this.onChange})))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t=e.detail,l=a.isSet;if(!l){for(var n=Object.keys(t),i={},r=0;r<n.length;r+=1)i[n[r]]={value:t[n[r]]};return{isSet:!l,detail:i,field:t}}return null}}]),a}(E.PureComponent),I.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},q=z))||q,W=t("9zHi"),Y=t.n(W),H=Object(V.connect)(function(e){return{CarGPS:e.CarGPS,loading:e.loading.models.CarGPS}})(U=v.a.create()(U=function(e){function a(){var e,t;m()(this,a);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return(t=b()(this,(e=C()(a)).call.apply(e,[this].concat(n)))).state={detail:{},modalVisible:!1,updateModalVisible:!1},t.columns=[{title:"方法名称",dataIndex:"methodName"},{title:"方法值",dataIndex:"methodValue"},{title:"下次调用时间（h）",dataIndex:"nextTryTime"},{title:"限制次数",dataIndex:"limitNumber"},{title:"操作",width:90,render:function(e,a){return M.a.createElement(E.Fragment,null,M.a.createElement(s.a,{placement:"left",title:"编辑"},M.a.createElement(d.a,{onClick:function(){return t.showUpdateModal(a.id)},type:"primary",shape:"circle",icon:"edit",size:"small"})),M.a.createElement(c.a,{type:"vertical"}),M.a.createElement(o.a,{title:"是否删除数据?",onConfirm:function(){return t.deleteData(a.id)},okText:"确定",cancelText:"取消"},M.a.createElement(s.a,{placement:"left",title:"删除"},M.a.createElement(d.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.getList=function(){(0,t.props.dispatch)({type:"CarGPS/list"})},t.showUpdateModal=function(e){(0,t.props.dispatch)({type:"CarGPS/detail",payload:e,callback:function(e){return t.setState({detail:e},function(){return t.handleUpdateModalVisible(!0)})}})},t.deleteData=function(e){(0,t.props.dispatch)({type:"CarGPS/del",payload:e,callback:function(){r.a.success("删除成功"),t.getList()}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e}),e||t.setState({detail:{}})},t}return k()(a,e),p()(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this,a=this.props,t=a.loading,n=a.CarGPS.data,r=this.state,o=r.modalVisible,c=r.updateModalVisible,s=r.detail,u={handleModalVisible:this.handleModalVisible,modalCallback:this.getList},m={handleModalVisible:this.handleUpdateModalVisible,modalCallback:this.getList,detail:s};return M.a.createElement(l.a,{bordered:!1},M.a.createElement("div",{className:Y.a.tableList},M.a.createElement("div",{className:Y.a.tableListOperator},M.a.createElement(d.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建")),M.a.createElement(S.a,{tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:n,size:"middle",columns:this.columns})),o&&M.a.createElement(B,i()({modalVisible:o},u)),c&&Object.keys(s).length&&M.a.createElement(Z,i()({modalVisible:c},m)))}}]),a}(E.PureComponent))||U)||U;a.default=H}}]);