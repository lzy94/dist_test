(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{"6st5":function(e,t,a){"use strict";a.r(t);a("IzEo");var l=a("bx4M"),n=a("pVnL"),i=a.n(n),r=(a("miYZ"),a("tsqr")),o=(a("P2fV"),a("NJEC")),c=(a("/zsF"),a("PArb")),s=(a("5Dmo"),a("3S7+")),d=(a("+L6B"),a("2/Rp")),u=a("lwsE"),m=a.n(u),f=a("W8MJ"),p=a.n(f),h=a("a1gu"),b=a.n(h),y=a("Nsbk"),C=a.n(y),g=a("7W2i"),k=a.n(g),v=(a("y8nQ"),a("Vl3Y")),E=a("q1tI"),M=a.n(E),V=a("MuoO"),S=a("CkN6"),P=(a("2qtc"),a("kLXV")),F=a("MVZn"),T=a.n(F),w=(a("giR+"),a("fyUT")),x=(a("5NDa"),a("5rEg")),G=v.a.Item;function N(e){return e.replace(/^(0+)|[^\d]+/g,"")}var O=v.a.create({mapPropsToFields:function(e){return function(e){for(var t=Object.keys(e),a={},l=0;l<t.length;l+=1)a[t[l]]=v.a.createFormField(T()({},e[t[l]],{value:e[t[l]].value}));return a}(e.field)},onFieldsChange:function(e,t){e.onChange(t)}})(function(e){var t=e.form,a=e.type;return M.a.createElement(E.Fragment,null,M.a.createElement(G,{label:"方法名称"},t.getFieldDecorator("methodName",{rules:[{required:!0,message:"请输入方法名称！"}]})(M.a.createElement(x.a,{disabled:"edit"===a,placeholder:"请输入"}))),M.a.createElement(G,{label:"方法值"},t.getFieldDecorator("methodValue",{rules:[{required:!0,message:"请输入方法值！"}]})(M.a.createElement(x.a,{placeholder:"请输入"}))),M.a.createElement(G,{label:"下次调用时间（h）"},t.getFieldDecorator("nextTryTime",{rules:[{required:!0,message:"请输入方法值！"}]})(M.a.createElement(w.a,{formatter:N,parser:N,min:0,placeholder:"请输入",style:{width:"100%"}}))),M.a.createElement(G,{label:"限制次数"},t.getFieldDecorator("limitNumber",{rules:[{required:!0,message:"请输入限制次数！"}]})(M.a.createElement(w.a,{formatter:N,parser:N,placeholder:"请输入",min:0,style:{width:"100%"}}))))});O.defaultProps={type:"add",field:{},onChange:function(){}};var D,L,j,q,I,z,U,J=O,R=a("ZP6J"),A=a.n(R),B=Object(V.connect)(function(e){return{CarGPS:e.CarGPS,loading:e.loading.models.CarGPS}})((j=L=function(e){function t(e){var a;return m()(this,t),(a=b()(this,C()(t).call(this,e))).state={field:{}},a.cancelClick=function(){(0,a.props.handleModalVisible)()},a.onChange=function(e){a.setState(function(t){var a=t.field;return{field:T()({},a,e)}})},a.save=function(){a.MyForm.current.validateFields(function(e,t){if(!e){var l=a.props,n=l.dispatch,i=l.modalCallback;n({type:"CarGPS/update",payload:T()({},t,{nextTryTime:3600*t.nextTryTime}),callback:function(){r.a.success("添加成功"),i(),a.cancelClick()}})}})},a.MyForm=M.a.createRef(),a}return k()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.modalVisible,l=this.state.field;return M.a.createElement(P.a,{destroyOnClose:!0,title:"新建",className:A.a.formModal,visible:a,onCancel:this.cancelClick,footer:[M.a.createElement(d.a,{key:"back",onClick:this.cancelClick},"取消"),M.a.createElement(d.a,{key:"submit",type:"primary",loading:t,onClick:this.save},"确定")]},M.a.createElement("div",{className:A.a.formModalBody},M.a.createElement(J,{field:l,ref:this.MyForm,onChange:this.onChange})))}}]),t}(E.PureComponent),L.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},D=j))||D,Z=Object(V.connect)(function(e){return{CarGPS:e.CarGPS,loading:e.loading.models.CarGPS}})((z=I=function(e){function t(e){var a;return m()(this,t),(a=b()(this,C()(t).call(this,e))).state={field:{},detail:{},isSet:!1},a.cancelClick=function(){(0,a.props.handleModalVisible)()},a.onChange=function(e){a.setState(function(t){var a=t.detail;return{detail:T()({},a,e)}})},a.save=function(){a.MyForm.current.validateFields(function(e,t){if(!e){for(var l=a.props,n=l.dispatch,i=l.modalCallback,o=a.state,c=o.field,s=o.detail,d=T()({},c,t,{nextTryTime:3600*t.nextTryTime}),u=T()({},s),m=Object.keys(t),f=0;f<m.length;f+=1)u[m[f]]={value:t[m[f]]};a.setState({detail:u}),n({type:"CarGPS/update",payload:d,callback:function(){r.a.success("编辑成功"),i(),a.cancelClick()}})}})},a.MyForm=M.a.createRef(),a}return k()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.modalVisible,l=this.state.detail;return M.a.createElement(P.a,{destroyOnClose:!0,title:"编辑",className:A.a.formModal,visible:a,onCancel:this.cancelClick,footer:[M.a.createElement(d.a,{key:"back",onClick:this.cancelClick},"取消"),M.a.createElement(d.a,{key:"submit",type:"primary",loading:t,onClick:this.save},"确定")]},M.a.createElement("div",{className:A.a.formModalBody},M.a.createElement(J,{type:"edit",field:l,ref:this.MyForm,onChange:this.onChange})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.detail,l=t.isSet,n=T()({},a,{nextTryTime:a.nextTryTime/3600});if(!l){for(var i=Object.keys(n),r={},o=0;o<i.length;o+=1)r[i[o]]={value:n[i[o]]};return{isSet:!l,detail:r,field:n}}return null}}]),t}(E.PureComponent),I.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},q=z))||q,W=a("9zHi"),Y=a.n(W),H=Object(V.connect)(function(e){return{CarGPS:e.CarGPS,loading:e.loading.models.CarGPS}})(U=v.a.create()(U=function(e){function t(){var e,a;m()(this,t);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return(a=b()(this,(e=C()(t)).call.apply(e,[this].concat(n)))).state={detail:{},modalVisible:!1,updateModalVisible:!1},a.columns=[{title:"方法名称",dataIndex:"methodName"},{title:"方法值",dataIndex:"methodValue"},{title:"下次调用时间（h）",dataIndex:"nextTryTime",render:function(e){return e/3600}},{title:"限制次数",dataIndex:"limitNumber"},{title:"操作",width:90,render:function(e,t){return M.a.createElement(E.Fragment,null,M.a.createElement(s.a,{placement:"left",title:"编辑"},M.a.createElement(d.a,{onClick:function(){return a.showUpdateModal(t.id)},type:"primary",shape:"circle",icon:"edit",size:"small"})),M.a.createElement(c.a,{type:"vertical"}),M.a.createElement(o.a,{title:"是否删除数据?",onConfirm:function(){return a.deleteData(t.id)},okText:"确定",cancelText:"取消"},M.a.createElement(s.a,{placement:"left",title:"删除"},M.a.createElement(d.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],a.getList=function(){(0,a.props.dispatch)({type:"CarGPS/list"})},a.showUpdateModal=function(e){(0,a.props.dispatch)({type:"CarGPS/detail",payload:e,callback:function(e){return a.setState({detail:e},function(){return a.handleUpdateModalVisible(!0)})}})},a.deleteData=function(e){(0,a.props.dispatch)({type:"CarGPS/del",payload:e,callback:function(){r.a.success("删除成功"),a.getList()}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleUpdateModalVisible=function(e){a.setState({updateModalVisible:!!e}),e||a.setState({detail:{}})},a}return k()(t,e),p()(t,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.CarGPS.data,r=this.state,o=r.modalVisible,c=r.updateModalVisible,s=r.detail,u={handleModalVisible:this.handleModalVisible,modalCallback:this.getList},m={handleModalVisible:this.handleUpdateModalVisible,modalCallback:this.getList,detail:s};return M.a.createElement(l.a,{bordered:!1},M.a.createElement("div",{className:Y.a.tableList},M.a.createElement("div",{className:Y.a.tableListOperator},M.a.createElement(d.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建")),M.a.createElement(S.a,{tableAlert:!1,selectedRows:0,rowSelection:null,loading:a,data:n,size:"middle",columns:this.columns})),o&&M.a.createElement(B,i()({modalVisible:o},u)),c&&Object.keys(s).length&&M.a.createElement(Z,i()({modalVisible:c},m)))}}]),t}(E.PureComponent))||U)||U;t.default=H}}]);