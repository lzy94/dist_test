(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"4svU":function(e,t,a){"use strict";a.r(t);var n,l=a("pVnL"),r=a.n(l),i=(a("14J3"),a("BMrR")),s=(a("jCWc"),a("kPKH")),c=(a("5NDa"),a("5rEg")),o=a("MVZn"),m=a.n(o),d=(a("miYZ"),a("tsqr")),u=(a("+L6B"),a("2/Rp")),p=(a("5Dmo"),a("3S7+")),h=a("lwsE"),g=a.n(h),f=a("W8MJ"),E=a.n(f),b=a("a1gu"),v=a.n(b),y=a("Nsbk"),w=a.n(y),I=a("7W2i"),k=a.n(I),S=(a("2qtc"),a("kLXV")),B=(a("IzEo"),a("bx4M")),L=(a("bP8k"),a("gFTJ")),R=(a("y8nQ"),a("Vl3Y")),V=a("q1tI"),C=a.n(V),M=a("MuoO"),x=a("CkN6"),F=a("9zHi"),N=a.n(F),T=a("ZP6J"),D=a.n(T),z=a("Py4S"),O=a.n(z),W=a("+n12"),J=R.a.Item,U=R.a.create()(function(e){var t=e.modalVisible,a=e.handleModalVisible,n=e.detail,l=(n.inspecImg?n.inspecImg.split(","):[]).filter(function(e){return e}).map(function(e){return C.a.createElement("div",{key:e,style:{overflow:"hidden",width:170,height:170,float:"left",marginRight:10,marginBottom:10}},C.a.createElement(O.a,{backdrop:"rgba(255,255,255,.3)",src:W.B+e,alt:"图片",style:{width:"100%",height:"170px"}}))});return C.a.createElement(S.a,{destroyOnClose:!0,title:"详情",width:800,className:D.a.formModal,visible:t,footer:null,onCancel:function(){return a()}},C.a.createElement(B.a,{bordered:!1},C.a.createElement(L.a,{size:"small",bordered:!0,column:2},C.a.createElement(L.a.Item,{label:"巡查单位"},n.inspecUnit),C.a.createElement(L.a.Item,{label:"巡查天气"},n.inspecWeather),C.a.createElement(L.a.Item,{label:"巡查路线"},n.inspecRoute),C.a.createElement(L.a.Item,{label:"巡查性质"},n.inspecNature),C.a.createElement(L.a.Item,{label:"清除杂草"},n.clearWeeds," KM"),C.a.createElement(L.a.Item,{label:"清除死树"},n.clearTree," 颗"),C.a.createElement(L.a.Item,{label:"清除垃圾"},n.clearTrash," KM"),C.a.createElement(L.a.Item,{label:"运输车"},n.callShipcar),C.a.createElement(L.a.Item,{label:"路面综合养护机"},n.callMaintenance),C.a.createElement(L.a.Item,{label:"灌缝机"},n.callMachine),C.a.createElement(L.a.Item,{label:"调用钩机"},n.callHook),C.a.createElement(L.a.Item,{label:"调用挖掘机"},n.callExcavator),C.a.createElement(L.a.Item,{label:"事件详情",span:2},n.eventDatails),C.a.createElement(L.a.Item,{label:"巡查图片",span:2},l))))}),j=Object(M.connect)(function(e){return{ConserveLogs:e.ConserveLogs,loading:e.loading.models.ConserveLogs}})(n=R.a.create()(n=function(e){function t(){var e,a;g()(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=v()(this,(e=w()(t)).call.apply(e,[this].concat(l)))).state={modalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},a.columns=[{title:"巡查单位",dataIndex:"inspecUnit"},{title:"巡查天气",dataIndex:"inspecWeather"},{title:"巡查路线",dataIndex:"inspecRoute"},{title:"巡查性质",dataIndex:"inspecNature"},{title:"事件详情",width:200,dataIndex:"eventDatails",render:function(e){return e?e.length>15?C.a.createElement(p.a,{title:e},e.substring(0,15)+"..."):e:""}},{title:"操作",width:80,render:function(e,t){return C.a.createElement(V.Fragment,null,C.a.createElement(p.a,{placement:"left",title:"详情"},C.a.createElement(u.a,{onClick:function(){return a.getDetail(t)},type:"primary",shape:"circle",icon:"eye",size:"small"})))}}],a.getDetail=function(e){a.setState({detail:e},function(){return a.handleModalVisible(!0)})},a.getList=function(e){(0,a.props.dispatch)({type:"ConserveLogs/fetch",payload:e})},a.delBatch=function(){var e=a.state.selectedRows;if(!e.length)return d.a.error("请选择要删除的数据");S.a.confirm({title:"提示",content:"您确定要批量删除吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a.delUtil(e.map(function(e){return e.id}).join())}})},a.delUtil=function(e){(0,a.props.dispatch)({type:"ConserveLogs/remove",payload:{ids:e},callback:function(){d.a.success("删除成功"),a.getList({pageBean:a.state.pageBean}),a.setState({selectedRows:[]})}})},a.handleStandardTableChange=function(e){var t=a.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:t};a.getList(n)},a.handleFormReset=function(){a.props.form.resetFields(),a.setState({formValues:[],selectedRows:[]}),a.getList({pageBean:a.state.pageBean})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=m()({},t),l=a.state.pageBean,r=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});a.setState({formValues:r}),a.getList({pageBean:l,querys:r})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a}return k()(t,e),E()(t,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return C.a.createElement(R.a,{onSubmit:this.handleSearch,layout:"inline"},C.a.createElement(i.a,{gutter:{md:8,lg:16,xl:32}},C.a.createElement(s.a,{md:6,sm:24},C.a.createElement(J,null,e("inspecUnit")(C.a.createElement(c.a,{addonBefore:"巡查单位",placeholder:"请输入"})))),C.a.createElement(s.a,{md:6,sm:24},C.a.createElement(J,null,e("inspecRoute")(C.a.createElement(c.a,{addonBefore:"巡查路线",placeholder:"请输入"})))),C.a.createElement(s.a,{md:6,sm:24},C.a.createElement(J,null,e("inspecWeather")(C.a.createElement(c.a,{addonBefore:"巡查天气",placeholder:"请输入"})))),C.a.createElement(s.a,{md:6,sm:24},C.a.createElement("span",{className:N.a.submitButtons},C.a.createElement(u.a,{type:"primary",htmlType:"submit"},"查询"),C.a.createElement(u.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,t=e.ConserveLogs.data,a=e.loading,n=this.state,l=n.selectedRows,i=n.modalVisible,s=n.detail,c={detail:s,handleModalVisible:this.handleModalVisible};return C.a.createElement(V.Fragment,null,C.a.createElement(B.a,{bordered:!1},C.a.createElement("div",{className:N.a.tableList},C.a.createElement("div",{className:N.a.tableListForm},this.renderSimpleForm()),C.a.createElement("div",{className:N.a.tableListOperator},C.a.createElement("span",null,C.a.createElement(u.a,{type:"danger",onClick:this.delBatch},"批量删除"))),C.a.createElement(x.a,{size:"middle",selectedRows:l,loading:a,data:t,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),i&&Object.keys(s).length?C.a.createElement(U,r()({},c,{modalVisible:i})):null)}}]),t}(V.PureComponent))||n)||n;t.default=j}}]);