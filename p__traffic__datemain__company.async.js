(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{ub82:function(e,a,t){"use strict";t.r(a);t("IzEo");var l,r=t("bx4M"),n=(t("miYZ"),t("tsqr")),i=(t("P2fV"),t("NJEC")),d=(t("/zsF"),t("PArb")),c=(t("5Dmo"),t("3S7+")),o=t("lwsE"),s=t.n(o),m=t("W8MJ"),p=t.n(m),u=t("a1gu"),E=t.n(u),h=t("Nsbk"),g=t.n(h),b=t("7W2i"),y=t.n(b),f=t("pVnL"),F=t.n(f),D=t("MVZn"),C=t.n(D),k=t("lSNA"),V=t.n(k),M=(t("2qtc"),t("kLXV")),v=(t("14J3"),t("BMrR")),L=(t("giR+"),t("fyUT")),w=(t("iQDF"),t("+eQT")),N=(t("nRaC"),t("5RzL")),B=(t("jCWc"),t("kPKH")),O=(t("5NDa"),t("5rEg")),S=(t("+L6B"),t("2/Rp")),x=(t("OaEy"),t("2fM7")),R=(t("y8nQ"),t("Vl3Y")),q=t("q1tI"),T=t.n(q),A=t("MuoO"),I=t("wd/R"),j=t.n(I),z=t("mf+E"),U=t("CkN6"),Y=t("+n12"),J=t("9zHi"),P=t.n(J),G=t("ns75"),H=t.n(G),K=t("ZP6J"),Q=t.n(K),W=R.a.Item,Z=x.a.Option,X=["/datemain/company","/datemain/company/add","/datemain/company/update","/datemain/company/delete","/transport/datemain/company"],_=["身份证","执法证","军官证","护照","其他"],$=R.a.create()(function(e){var a=e.treeList,t=e.modalVisible,l=e.form,r=e.handleAdd,n=e.handleModalVisible,i=e.loading,d=function(){l.validateFields(function(e,a){e||r(a,function(){return l.resetFields()})})};return T.a.createElement(M.a,{destroyOnClose:!0,title:"添加货运企业",className:Q.a.formModal,visible:t,onOk:d,onCancel:function(){return n()},footer:[T.a.createElement(S.a,{key:"back",onClick:function(){return n()}},"取消"),T.a.createElement(S.a,{key:"submit",type:"primary",loading:i,onClick:d},"确定")],width:800},T.a.createElement("div",{className:Q.a.formModalBody},T.a.createElement(v.a,{gutter:40},T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{hasFeedback:!0,label:"企业名称"},l.getFieldDecorator("companyName",{rules:[{required:!0,message:"请输入企业名称！"}]})(T.a.createElement(O.a,{placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{hasFeedback:!0,label:"企业号码"},l.getFieldDecorator("companyPhone",{rules:[{required:!0,message:"请输入企业号码！"}]})(T.a.createElement(O.a,{placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{hasFeedback:!0,label:"企业地址"},l.getFieldDecorator("address",{rules:[{required:!0,message:"请输入企业地址！"}]})(T.a.createElement(O.a,{placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{hasFeedback:!0,label:"法人代表"},l.getFieldDecorator("legalRepresent",{rules:[{required:!0,message:"请输入法人代表！"}]})(T.a.createElement(O.a,{placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"法人代表证件类型"},l.getFieldDecorator("idCardType",{})(T.a.createElement(x.a,{style:{width:"100%"},placeholder:"请选择"},_.map(function(e,a){return T.a.createElement(Z,{key:a,value:a+1},e)}))))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"法人代表证件号码"},l.getFieldDecorator("idCardNo",{})(T.a.createElement(O.a,{placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"机构"},l.getFieldDecorator("organCode",{rules:[{required:!0,message:"请选择机构"}]})(T.a.createElement(N.a,{className:H.a.inputGroupLeftRadius,treeData:a,style:{width:"100%"},placeholder:"请选择"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{hasFeedback:!0,label:"道路运输证号"},l.getFieldDecorator("transportCode",{rules:[{required:!0,message:"请输入道路运输证号！"}]})(T.a.createElement(O.a,{placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"发证日期"},l.getFieldDecorator("getLicenceDate",{})(T.a.createElement(w.a,{style:{width:"100%"},placeholder:"请选择"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"承运人名称"},l.getFieldDecorator("carrier",{})(T.a.createElement(O.a,{placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"承运人地址"},l.getFieldDecorator("carrierAddr",{})(T.a.createElement(O.a,{placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"承运人邮编"},l.getFieldDecorator("carrierMail",{})(T.a.createElement(L.a,{style:{width:"100%"},placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"备注"},l.getFieldDecorator("remark",{})(T.a.createElement(O.a.TextArea,{placeholder:"请输入"})))))))}),ee=R.a.create()(function(e){var a,t=e.treeList,l=e.modalVisible,r=e.form,n=e.handleUpdate,i=e.handleUpdateModalVisible,d=e.loading,c=e.detail,o=function(){r.validateFields(function(e,a){e||(r.resetFields(),n(a))})},s=Object(Y.c)(X[2]),m=s?{footer:[T.a.createElement(S.a,{key:"back",onClick:function(){return i()}},"取消"),T.a.createElement(S.a,{key:"submit",type:"primary",loading:d,onClick:o},"确定")]}:{footer:null},p=s?{}:{color:"rgba(0,0,0,.7)",border:0};return T.a.createElement(M.a,F()({destroyOnClose:!0,title:s?"编辑货运企业":"货运企业详情",visible:l,className:Q.a.formModal,onOk:o,onCancel:function(){return i()},width:800},m),T.a.createElement("div",{className:Q.a.formModalBody},T.a.createElement(v.a,{gutter:40},T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{hasFeedback:s,label:"企业名称"},r.getFieldDecorator("companyName",{initialValue:c.companyName,rules:[{required:!0,message:"请输入企业名称！"}]})(T.a.createElement(O.a,{disabled:!s,style:p,placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{hasFeedback:s,label:"企业号码"},r.getFieldDecorator("companyPhone",{initialValue:c.companyPhone,rules:[{required:!0,message:"请输入企业号码！"}]})(T.a.createElement(O.a,(a={disabled:!s,style:p},V()(a,"disabled",!s),V()(a,"style",p),V()(a,"placeholder","请输入"),a))))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{hasFeedback:s,label:"企业地址"},r.getFieldDecorator("address",{initialValue:c.address,rules:[{required:!0,message:"请输入企业地址！"}]})(T.a.createElement(O.a,{disabled:!s,style:p,placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{hasFeedback:s,label:"法人代表"},r.getFieldDecorator("legalRepresent",{initialValue:c.legalRepresent,rules:[{required:!0,message:"请输入法人代表！"}]})(T.a.createElement(O.a,{disabled:!s,style:p,placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},s?T.a.createElement(W,{label:"法人代表证件类型"},r.getFieldDecorator("idCardType",{initialValue:parseInt(c.idCardType)})(T.a.createElement(x.a,{style:{width:"100%"},placeholder:"请选择"},_.map(function(e,a){return T.a.createElement(Z,{key:a,value:a+1},e)})))):T.a.createElement(W,{label:"法人代表证件类型"},r.getFieldDecorator("idCardType",{initialValue:_[parseInt(c.idCardType)-1]})(T.a.createElement(O.a,{disabled:!s,style:p})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"法人代表证件号码"},r.getFieldDecorator("idCardNo",{initialValue:c.idCardNo})(T.a.createElement(O.a,{disabled:!s,style:p,placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"机构"},r.getFieldDecorator("organCode",{initialValue:c.organCode,rules:[{required:!0,message:"请选择机构"}]})(T.a.createElement(N.a,{className:H.a.inputGroupLeftRadius,treeData:t,disabled:!s,style:C()({width:"100%"},p),placeholder:"请选择"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{hasFeedback:s,label:"道路运输证号"},r.getFieldDecorator("transportCode",{initialValue:c.transportCode,rules:[{required:!0,message:"请输入道路运输证号！"}]})(T.a.createElement(O.a,{disabled:!s,style:p,placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},s?T.a.createElement(W,{label:"发证日期"},r.getFieldDecorator("getLicenceDate",{initialValue:j()(new Date(c.getLicenceDate),"YYYY-MM-DD")})(T.a.createElement(w.a,{style:{width:"100%"},placeholder:"请选择"}))):T.a.createElement(W,{label:"发证日期"},r.getFieldDecorator("getLicenceDate",{initialValue:j()(new Date(c.getLicenceDate)).format("YYYY-MM-DD")})(T.a.createElement(O.a,{disabled:!s,style:p,placeholder:"请选择"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"承运人名称"},r.getFieldDecorator("carrier",{initialValue:c.carrier})(T.a.createElement(O.a,{disabled:!s,style:p,placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"承运人地址"},r.getFieldDecorator("carrierAddr",{initialValue:c.carrierAddr})(T.a.createElement(O.a,{disabled:!s,style:p,placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"承运人邮编"},r.getFieldDecorator("carrierMail",{initialValue:c.carrierMail})(T.a.createElement(L.a,{disabled:!s,style:C()({width:"100%"},p),placeholder:"请输入"})))),T.a.createElement(B.a,{md:12,sm:24},T.a.createElement(W,{label:"备注"},r.getFieldDecorator("remark",{initialValue:c.remark})(T.a.createElement(O.a.TextArea,{disabled:!s,style:p,placeholder:"请输入"})))))))}),ae=Object(A.connect)(function(e){var a=e.system,t=e.Company,l=e.loading;return{treeList:a.treeList,Company:t,loading:l.models.Company}})(l=R.a.create()(l=function(e){function a(){var e,t;s()(this,a);for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];return(t=E()(this,(e=g()(a)).call.apply(e,[this].concat(r)))).state={modalVisible:!1,updateModalVisible:!1,formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"企业名称",dataIndex:"companyName"},{title:"企业号码",dataIndex:"companyPhone"},{title:"地址",dataIndex:"address"},{title:"法人代表",dataIndex:"legalRepresent"},{title:"道路运输证号",dataIndex:"transportCode"},{title:"承运人名称",dataIndex:"carrier"},{title:"承运人地址",dataIndex:"carrierAddr"},{title:"操作",width:Object(Y.c)(X[3])?100:70,render:function(e,a){return T.a.createElement(q.Fragment,null,Object(Y.c)(X[2])?T.a.createElement(c.a,{placement:"left",title:"编辑"},T.a.createElement(S.a,{onClick:function(){return t.showModal(a.id)},type:"primary",shape:"circle",icon:"edit",size:"small"})):T.a.createElement(c.a,{placement:"left",title:"详情"},T.a.createElement(S.a,{onClick:function(){return t.showModal(a.id)},type:"primary",shape:"circle",icon:"eye",size:"small"})),Object(Y.c)(X[3])?T.a.createElement(q.Fragment,null,T.a.createElement(d.a,{type:"vertical"}),T.a.createElement(i.a,{title:"是否删除数据?",onConfirm:function(){return t.dataDel(a.id)},okText:"确定",cancelText:"取消"},T.a.createElement(c.a,{placement:"left",title:"删除"},T.a.createElement(S.a,{type:"danger",shape:"circle",icon:"delete",size:"small"})))):null)}}],t.showModal=function(e){(0,t.props.dispatch)({type:"Company/detail",payload:e,callback:function(e){t.setState({detail:e}),t.handleUpdateModalVisible(!0)}})},t.dataDel=function(e){var a=t.state.pageBean;(0,t.props.dispatch)({type:"Company/remove",payload:{id:e},callback:function(){n.a.success("删除成功"),t.getList({pageBean:a})}})},t.getList=function(e){(0,t.props.dispatch)({type:"Company/fetch",payload:e})},t.handleStandardTableChange=function(e,a,l){var r=t.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:r};t.getList(n)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:a})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l=t.state.pageBean,r=C()({},a),n=Object.keys(r).map(function(e){return r[e]?{property:e,value:r[e],group:"main",operation:"organCode"===e?"RIGHT_LIKE":"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:n}),t.getList({pageBean:l,querys:n})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e,a){t.setState({updateModalVisible:!!e})},t.handleAdd=function(e,a){var l=t.props.dispatch,r=t.state.pageBean;l({type:"Company/add",payload:e,callback:function(){n.a.success("添加成功"),t.handleModalVisible(),t.getList({pageBean:r}),a&&a()}})},t.handleUpdate=function(e){for(var a=t.props.dispatch,l=t.state,r=l.pageBean,i=l.detail,d=Object.keys(e),c=JSON.parse(JSON.stringify(i)),o=0;o<d.length;o++)c[d[o]]=e[d[o]];t.setState({detail:c}),a({type:"Company/update",payload:c,callback:function(){n.a.success("编辑成功"),t.handleUpdateModalVisible(),t.getList({pageBean:r})}})},t}return y()(a,e),p()(a,[{key:"componentDidMount",value:function(){if(Object(Y.c)(X[0])){var e=this.state.pageBean;this.getList({pageBean:e})}}},{key:"renderSimpleForm",value:function(){var e=this.props,a=e.treeList,t=e.form.getFieldDecorator;return T.a.createElement(R.a,{onSubmit:this.handleSearch,layout:"inline"},T.a.createElement(v.a,{gutter:{md:8,lg:16,xl:32}},T.a.createElement(B.a,{md:5,sm:24},T.a.createElement("div",{className:H.a.inputMain},T.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),T.a.createElement(W,{style:{flex:1}},t("organCode")(T.a.createElement(N.a,{className:H.a.inputGroupLeftRadius,treeData:a,style:{width:"100%"},placeholder:"请选择"}))))),T.a.createElement(B.a,{md:5,sm:24},T.a.createElement(W,null,t("companyName")(T.a.createElement(O.a,{addonBefore:"企业名称",placeholder:"请输入"})))),T.a.createElement(B.a,{md:5,sm:24},T.a.createElement(W,null,t("legalRepresent")(T.a.createElement(O.a,{addonBefore:"法人代表",placeholder:"请输入"})))),T.a.createElement(B.a,{md:5,sm:24},T.a.createElement(W,null,t("transportCode")(T.a.createElement(O.a,{addonBefore:"道路运输证号",placeholder:"请输入"})))),T.a.createElement(B.a,{md:4,sm:24},T.a.createElement("span",{className:P.a.submitButtons,style:{float:"right"}},T.a.createElement(S.a,{type:"primary",htmlType:"submit"},"查询"),T.a.createElement(S.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.treeList,l=a.Company.data,n=a.loading,i=this.state,d=i.modalVisible,c=i.updateModalVisible,o=i.detail,s={treeList:t,handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,loading:n},m={treeList:t,handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate,detail:o,loading:n};return T.a.createElement(q.Fragment,null,Object(Y.c)(X[0])||Object(Y.c)(X[4])?null:T.a.createElement(z.a,{to:"/exception/403"}),T.a.createElement(r.a,{bordered:!1},T.a.createElement("div",{className:P.a.tableList},T.a.createElement("div",{className:P.a.tableListForm},this.renderSimpleForm()),T.a.createElement("div",{className:P.a.tableListOperator},Object(Y.c)(X[1])?T.a.createElement(S.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"):null),T.a.createElement(U.a,{size:"middle",selectedRows:0,rowSelection:null,loading:n,data:l,tableAlert:!1,columns:this.columns,onChange:this.handleStandardTableChange}))),T.a.createElement($,F()({},s,{modalVisible:d})),c&&"{}"!==JSON.stringify(o)?T.a.createElement(ee,F()({},m,{modalVisible:c})):null)}}]),a}(q.PureComponent))||l)||l;a.default=ae}}]);