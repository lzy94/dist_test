(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{sNHQ:function(e,a,t){"use strict";t.r(a);var l,n=t("pVnL"),i=t.n(n),o=(t("IzEo"),t("bx4M")),d=t("MVZn"),s=t.n(d),r=(t("miYZ"),t("tsqr")),c=(t("P2fV"),t("NJEC")),u=(t("/zsF"),t("PArb")),m=(t("5Dmo"),t("3S7+")),p=(t("+L6B"),t("2/Rp")),h=t("lwsE"),f=t.n(h),g=t("W8MJ"),b=t.n(g),E=t("a1gu"),v=t.n(E),V=t("Nsbk"),y=t.n(V),C=t("7W2i"),M=t.n(C),k=(t("2qtc"),t("kLXV")),w=(t("5NDa"),t("5rEg")),R=(t("y8nQ"),t("Vl3Y")),N=t("q1tI"),D=t.n(N),T=t("MuoO"),F=t("CkN6"),S=t("9zHi"),U=t.n(S),L=t("ZP6J"),O=t.n(L),q=R.a.Item,x=R.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleAdd,n=e.handleModalVisible;return D.a.createElement(k.a,{destroyOnClose:!0,title:"新建标签",className:O.a.formModal,visible:a,onOk:function(){t.validateFields(function(e,a){e||l(a,function(){return t.resetFields()})})},onCancel:function(){return n()}},D.a.createElement("div",{className:O.a.formModalBody},D.a.createElement(q,{label:"名称"},t.getFieldDecorator("tagName",{rules:[{required:!0,message:"请输入名称！"}]})(D.a.createElement(w.a,{placeholder:"请输入"}))),D.a.createElement(q,{label:"编号"},t.getFieldDecorator("tagCode",{rules:[{required:!0,message:"请输入编号！"}]})(D.a.createElement(w.a,{placeholder:"请输入"})))))}),A=R.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleUpdate,n=e.handleModalVisible,i=e.detail;return D.a.createElement(k.a,{destroyOnClose:!0,title:"编辑标签",className:O.a.formModal,visible:a,onOk:function(){t.validateFields(function(e,a){e||l(a,function(){return t.resetFields()})})},onCancel:function(){return n()}},D.a.createElement("div",{className:O.a.formModalBody},D.a.createElement(q,{label:"名称"},t.getFieldDecorator("tagName",{initialValue:i.tagName,rules:[{required:!0,message:"请输入名称！"}]})(D.a.createElement(w.a,{placeholder:"请输入"}))),D.a.createElement(q,{label:"编号"},t.getFieldDecorator("tagCode",{initialValue:i.tagCode,rules:[{required:!0,message:"请输入编号！"}]})(D.a.createElement(w.a,{placeholder:"请输入"})))))}),z=Object(T.connect)(function(e){return{RoadConserveTag:e.RoadConserveTag,loading:e.loading.models.RoadConserveTag}})(l=R.a.create()(l=function(e){function a(){var e,t;f()(this,a);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return(t=v()(this,(e=y()(a)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,updateModalVisible:!1,selectedRows:[],detail:{}},t.columns=[{title:"名称",dataIndex:"tagName"},{title:"编号",dataIndex:"tagCode"},{title:"操作",width:100,render:function(e,a){return D.a.createElement(N.Fragment,null,D.a.createElement(m.a,{placement:"left",title:"编辑"},D.a.createElement(p.a,{onClick:function(){return t.editData(a)},type:"primary",shape:"circle",icon:"edit",size:"small"})),D.a.createElement(u.a,{type:"vertical"}),D.a.createElement(c.a,{title:"是否删除数据?",onConfirm:function(){return t.dataDel(a.id)},okText:"确定",cancelText:"取消"},D.a.createElement(m.a,{placement:"left",title:"删除"},D.a.createElement(p.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.getList=function(){(0,t.props.dispatch)({type:"RoadConserveTag/fetch"})},t.editData=function(e){t.setState({detail:e},function(){return t.handleUpdateModalVisible(!0)})},t.dataDel=function(e){return t.delUtil(e)},t.delBatch=function(){var e=t.state.selectedRows;e&&k.a.confirm({title:"提示",content:"您确定要批量删除吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){t.delUtil(e.map(function(e){return e.id}).join())}})},t.delUtil=function(e){(0,t.props.dispatch)({type:"RoadConserveTag/remove",payload:{ids:e},callback:function(){r.a.success("删除成功"),t.handleModalVisible(),t.getList(),t.setState({selectedRows:[]})}})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e})},t.handleAdd=function(e,a){(0,t.props.dispatch)({type:"RoadConserveTag/saveData",payload:e,callback:function(){r.a.success("添加成功"),t.handleModalVisible(),t.getList(),a()}})},t.handleUpdate=function(e){var a=t.props.dispatch,l=t.state.detail,n=s()({},l);n.tagName=e.tagName,n.tagCode=e.tagCode,t.setState({detail:n}),a({type:"RoadConserveTag/saveData",payload:n,callback:function(){r.a.success("编辑成功"),t.handleUpdateModalVisible(),t.getList(),t.setState({detail:{}})}})},t}return M()(a,e),b()(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this,a=this.props,t=a.RoadConserveTag.data,l=a.loading,n=this.state,d=n.selectedRows,s=n.modalVisible,r=n.updateModalVisible,c=n.detail,u={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},m={detail:c,handleModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate};return D.a.createElement(N.Fragment,null,D.a.createElement(o.a,{bordered:!1},D.a.createElement("div",{className:U.a.tableList},D.a.createElement("div",{className:U.a.tableListOperator},D.a.createElement(p.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"),d.length>0&&D.a.createElement(p.a,{type:"danger",onClick:this.delBatch},"批量删除")),D.a.createElement(F.a,{size:"middle",tableAlert:!0,selectedRows:d,loading:l,data:t,columns:this.columns,pagination:!1,onSelectRow:this.handleSelectRows}))),D.a.createElement(x,i()({},u,{modalVisible:s})),r&&Object.keys(c).length?D.a.createElement(A,i()({},m,{modalVisible:r})):null)}}]),a}(N.PureComponent))||l)||l;a.default=z}}]);