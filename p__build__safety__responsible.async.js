(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{oPuL:function(e,a,t){"use strict";t.r(a);var l=t("pVnL"),r=t.n(l),n=(t("IzEo"),t("bx4M")),c=(t("14J3"),t("BMrR")),o=(t("jCWc"),t("kPKH")),i=(t("5NDa"),t("5rEg")),s=(t("miYZ"),t("tsqr")),d=(t("2qtc"),t("kLXV")),m=(t("P2fV"),t("NJEC")),u=(t("/zsF"),t("PArb")),p=(t("5Dmo"),t("3S7+")),E=(t("+L6B"),t("2/Rp")),g=t("lwsE"),h=t.n(g),S=t("W8MJ"),f=t.n(S),b=t("a1gu"),y=t.n(b),v=t("Nsbk"),F=t.n(v),k=t("7W2i"),D=t.n(k),w=(t("y8nQ"),t("Vl3Y")),M=t("q1tI"),N=t.n(M),q=t("MuoO"),C=t("CkN6"),R=t("NWc4"),B=t.n(R),V=w.a.Item;var P=w.a.create({mapPropsToFields:function(e){return function(e){for(var a=Object.keys(e),t={},l=0;l<a.length;l+=1)t[a[l]]=w.a.createFormField({value:e[a[l]]});return t}(e.field)}})(function(e){var a=e.form;return N.a.createElement("table",{className:B.a.table},N.a.createElement("tbody",null,N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2,className:B.a.title},"工程项目名称"),N.a.createElement("td",{colSpan:10},N.a.createElement(V,null,a.getFieldDecorator("buildProjectName",{rules:[{required:!0,message:"请输入工程项目名称！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:6,className:B.a.title},"从业单位质量责任人"),N.a.createElement("td",{colSpan:6,className:B.a.title},"质量责任")),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2,rowSpan:3,className:B.a.title},"项目法人"),N.a.createElement("td",null,"名称"),N.a.createElement("td",{colSpan:3},N.a.createElement(V,null,a.getFieldDecorator("projectName",{rules:[{required:!0,message:"请输入名称！"}]})(N.a.createElement(i.a,{placeholder:"请输入"})))),N.a.createElement("td",{colSpan:6,rowSpan:3},N.a.createElement(V,{style:{height:"100%"}},a.getFieldDecorator("qualityRespon",{rules:[{required:!0,message:"请输入质量责任！"}]})(N.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"法定代表人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("projectLegalPerson",{rules:[{required:!0,message:"请输入法定代表人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"项目负责人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("projectManager",{rules:[{required:!0,message:"请输入项目负责人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2,rowSpan:3,className:B.a.title},"代理建设管理单位"),N.a.createElement("td",null,"名称"),N.a.createElement("td",{colSpan:3},N.a.createElement(V,null,a.getFieldDecorator("buildUnitName",{rules:[{required:!0,message:"请输入建设管理名称！"}]})(N.a.createElement(i.a,{placeholder:"请输入"})))),N.a.createElement("td",{colSpan:6,rowSpan:3},N.a.createElement(V,{style:{height:"100%"}},a.getFieldDecorator("buildQualityRespon",{rules:[{required:!0,message:"请输入质量责任！"}]})(N.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"法定代表人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("buildLegalPerson",{rules:[{required:!0,message:"请输入法定代表人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"项目负责人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("buildProjectManager",{rules:[{required:!0,message:"请输入项目负责人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2,rowSpan:4,className:B.a.title},"勘察单位"),N.a.createElement("td",null,"名称"),N.a.createElement("td",{colSpan:3},N.a.createElement(V,null,a.getFieldDecorator("surveyUnitName",{rules:[{required:!0,message:"请输入勘察单位名称！"}]})(N.a.createElement(i.a,{placeholder:"请输入"})))),N.a.createElement("td",{colSpan:6,rowSpan:4},N.a.createElement(V,{style:{height:"100%"}},a.getFieldDecorator("surveyQualityRespon",{rules:[{required:!0,message:"请输入质量责任！"}]})(N.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"合同段号"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("surveySegmentNumber",{rules:[{required:!0,message:"请输入合同段号！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"法定代表人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("surveyLegalPerson",{rules:[{required:!0,message:"请输入法定代表人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"项目负责人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("surveyProjectManager",{rules:[{required:!0,message:"请输入项目负责人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2,rowSpan:4,className:B.a.title},"设计单位"),N.a.createElement("td",null,"名称"),N.a.createElement("td",{colSpan:3},N.a.createElement(V,null,a.getFieldDecorator("designName",{rules:[{required:!0,message:"请输入设计单位名称！"}]})(N.a.createElement(i.a,{placeholder:"请输入"})))),N.a.createElement("td",{colSpan:6,rowSpan:4},N.a.createElement(V,{style:{height:"100%"}},a.getFieldDecorator("designQualityRespon",{rules:[{required:!0,message:"请输入质量责任！"}]})(N.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"合同段号"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("designSegmentNumber",{rules:[{required:!0,message:"请输入合同段号！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"法定代表人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("designLegalPerson",{rules:[{required:!0,message:"请输入法定代表人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"项目负责人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("designProjectManager",{rules:[{required:!0,message:"请输入项目负责人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2,rowSpan:4,className:B.a.title},"施工单位"),N.a.createElement("td",null,"名称"),N.a.createElement("td",{colSpan:3},N.a.createElement(V,null,a.getFieldDecorator("construcName",{rules:[{required:!0,message:"请输入施工单位名称！"}]})(N.a.createElement(i.a,{placeholder:"请输入"})))),N.a.createElement("td",{colSpan:6,rowSpan:4},N.a.createElement(V,{style:{height:"100%"}},a.getFieldDecorator("construcQualityRespon",{rules:[{required:!0,message:"请输入质量责任！"}]})(N.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"合同段号"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("construcSegmentNumber",{rules:[{required:!0,message:"请输入合同段号！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"法定代表人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("construcLegalPerson",{rules:[{required:!0,message:"请输入法定代表人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"项目负责人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("construcProjectManager",{rules:[{required:!0,message:"请输入项目负责人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2,rowSpan:4,className:B.a.title},"监理单位"),N.a.createElement("td",null,"名称"),N.a.createElement("td",{colSpan:3},N.a.createElement(V,null,a.getFieldDecorator("superName",{rules:[{required:!0,message:"请输入监理单位名称！"}]})(N.a.createElement(i.a,{placeholder:"请输入"})))),N.a.createElement("td",{colSpan:6,rowSpan:4},N.a.createElement(V,{style:{height:"100%"}},a.getFieldDecorator("superQualityRespon",{rules:[{required:!0,message:"请输入质量责任！"}]})(N.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"合同段号"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("superSegmentNumber",{rules:[{required:!0,message:"请输入合同段号！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"法定代表人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("superLegalPerson",{rules:[{required:!0,message:"请输入法定代表人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"项目负责人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("superProjectManager",{rules:[{required:!0,message:"请输入项目负责人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2,rowSpan:3,className:B.a.title},"试验检测单位"),N.a.createElement("td",null,"名称"),N.a.createElement("td",{colSpan:3},N.a.createElement(V,null,a.getFieldDecorator("detectName",{rules:[{required:!0,message:"请输入试验检测单位名称！"}]})(N.a.createElement(i.a,{placeholder:"请输入"})))),N.a.createElement("td",{colSpan:6,rowSpan:3},N.a.createElement(V,{style:{height:"100%"}},a.getFieldDecorator("detectQualityRespon",{rules:[{required:!0,message:"请输入质量责任！"}]})(N.a.createElement(i.a.TextArea,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"法定代表人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("detectLegalPerson",{rules:[{required:!0,message:"请输入法定代表人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"}))))),N.a.createElement("tr",null,N.a.createElement("td",{colSpan:2},"项目负责人"),N.a.createElement("td",{colSpan:2},N.a.createElement(V,null,a.getFieldDecorator("detectProjectManager",{rules:[{required:!0,message:"请输入项目负责人！"}]})(N.a.createElement(i.a,{placeholder:"请输入"})))))))});P.defaultProps={field:{},onChange:function(){}};var j,L,x,T,I,O,U,z=P,A=t("ZP6J"),Q=t.n(A),J=Object(q.connect)(function(e){return{BuildSafetyResponsible:e.BuildSafetyResponsible,loading:e.loading.models.BuildSafetyResponsible}})((x=L=function(e){function a(e){var t;return h()(this,a),(t=y()(this,F()(a).call(this,e))).state={},t.save=function(){t.MyForm.current.validateFields(function(e,a){if(!e){var l=t.props,r=l.dispatch,n=l.modalCallback;r({type:"BuildSafetyResponsible/add",payload:a,callback:function(){s.a.success("添加成功"),n(),t.cancelClick()}})}})},t.cancelClick=function(){(0,t.props.handleModalVisible)()},t.MyForm=N.a.createRef(),t}return D()(a,e),f()(a,[{key:"render",value:function(){var e=this.props,a=e.loading,t=e.modalVisible;return N.a.createElement(d.a,{destroyOnClose:!0,title:"新建从业质量责任人",className:Q.a.formModal,visible:t,onCancel:this.cancelClick,width:1e3,footer:[N.a.createElement(E.a,{key:"back",onClick:this.cancelClick},"取消"),N.a.createElement(E.a,{key:"submit",type:"primary",loading:a,onClick:this.save},"确定")]},N.a.createElement(n.a,{bordered:!1},N.a.createElement(z,{ref:this.MyForm})))}}]),a}(M.PureComponent),L.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},j=x))||j,W=t("MVZn"),Z=t.n(W),H=Object(q.connect)(function(e){return{BuildSafetyResponsible:e.BuildSafetyResponsible,loading:e.loading.models.BuildSafetyResponsible}})((O=I=function(e){function a(e){var t;return h()(this,a),(t=y()(this,F()(a).call(this,e))).state={detail:{},isSet:!1},t.save=function(){t.MyForm.current.validateFields(function(e,a){if(!e){for(var l=t.props,r=l.dispatch,n=l.modalCallback,c=t.state.detail,o=Z()({},c),i=Object.keys(a),d=0;d<i.length;d+=1)o[i[d]]=a[i[d]];t.setState({detail:o}),r({type:"BuildSafetyResponsible/add",payload:o,callback:function(){s.a.success("编辑成功"),n(),t.cancelClick()}})}})},t.cancelClick=function(){(0,t.props.handleModalVisible)()},t.MyForm=N.a.createRef(),t}return D()(a,e),f()(a,[{key:"render",value:function(){var e=this.props,a=e.loading,t=e.modalVisible,l=this.state.detail;return N.a.createElement(d.a,{destroyOnClose:!0,title:"编辑从业质量责任人",className:Q.a.formModal,visible:t,onCancel:this.cancelClick,width:1e3,footer:[N.a.createElement(E.a,{key:"back",onClick:this.cancelClick},"取消"),N.a.createElement(E.a,{key:"submit",type:"primary",loading:a,onClick:this.save},"确定")]},N.a.createElement(n.a,{bordered:!1},N.a.createElement(z,{field:l,ref:this.MyForm})))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t=e.detail,l=a.isSet;return l?null:{isSet:!l,detail:t}}}]),a}(M.PureComponent),I.defaultProps={modalVisible:!1,handleModalVisible:function(){},modalCallback:function(){}},T=O))||T,K=t("9zHi"),Y=t.n(K),X=w.a.Item,G=Object(q.connect)(function(e){return{BuildSafetyResponsible:e.BuildSafetyResponsible,loading:e.loading.models.BuildSafetyResponsible}})(U=w.a.create()(U=function(e){function a(){var e,t;h()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=y()(this,(e=F()(a)).call.apply(e,[this].concat(r)))).state={modalVisible:!1,updateModalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"项目名称",dataIndex:"buildProjectName"},{title:"法定代表人",dataIndex:"projectLegalPerson"},{title:"项目负责人",dataIndex:"projectManager"},{title:"代理建设管理单位名称",dataIndex:"buildUnitName"},{title:"法定代表人",dataIndex:"buildLegalPerson"},{title:"项目负责人",dataIndex:"buildProjectManager"},{title:"勘察单位",dataIndex:"surveyUnitName"},{title:"法定代表人",dataIndex:"surveyLegalPerson"},{title:"项目负责人",dataIndex:"surveyProjectManager"},{title:"操作",width:100,render:function(e,a){return N.a.createElement(M.Fragment,null,N.a.createElement(p.a,{placement:"left",title:"编辑"},N.a.createElement(E.a,{onClick:function(){return t.showDetailModal(a.id)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),N.a.createElement(u.a,{type:"vertical"}),N.a.createElement(m.a,{title:"是否删除数据?",onConfirm:function(){return t.delUtil(a.id)},okText:"确定",cancelText:"取消"},N.a.createElement(p.a,{placement:"left",title:"删除"},N.a.createElement(E.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.batchDel=function(){d.a.confirm({title:"提示",content:"确定要删除数据吗？",okType:"danger",onOk:function(){var e=t.state.selectedRows;t.delUtil(e.map(function(e){return e.id}).join())}})},t.delUtil=function(e){(0,t.props.dispatch)({type:"BuildSafetyResponsible/remove",payload:{ids:e},callback:function(){s.a.success("删除成功");var e=t.state.pageBean;t.getList({pageBean:e}),t.setState({selectedRows:[]})}})},t.getList=function(e){(0,t.props.dispatch)({type:"BuildSafetyResponsible/fetch",payload:e})},t.showDetailModal=function(e){(0,t.props.dispatch)({type:"BuildSafetyResponsible/detail",payload:e,callback:function(e){t.setState({detail:e},function(){return t.handleUpdateModalVisible(!0)})}})},t.handleStandardTableChange=function(e){var a=t.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(l)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[],selectedRows:[]}),t.getList({pageBean:a})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props.form,l=t.state.pageBean;a.validateFields(function(e,a){if(!e){var r={projectName:a.name,projectManager:a.xmdzr,buildUnitName:a.dljsgldw,surveyUnitName:a.kcdw},n=Object.keys(r).map(function(e){return r[e]?{property:e,value:r[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:n}),t.getList({pageBean:l,querys:n})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e}),e||t.setState({detail:{}})},t.modalCallback=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",a=t.state,l=a.pageBean,r=a.formValues;return"add"===e?t.getList({pageBean:l}):t.getList({pageBean:l,querys:r})},t}return D()(a,e),f()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return N.a.createElement(w.a,{onSubmit:this.handleSearch,layout:"inline"},N.a.createElement(c.a,{gutter:16},N.a.createElement(o.a,{md:5,sm:24},N.a.createElement(X,null,e("name")(N.a.createElement(i.a,{addonBefore:"项目名称",placeholder:"请输入"})))),N.a.createElement(o.a,{md:5,sm:24},N.a.createElement(X,null,e("dljsgldw")(N.a.createElement(i.a,{addonBefore:"代理建设管理单位",placeholder:"请输入"})))),N.a.createElement(o.a,{md:5,sm:24},N.a.createElement(X,null,e("xmdzr")(N.a.createElement(i.a,{addonBefore:"项目负责人",placeholder:"请输入"})))),N.a.createElement(o.a,{md:5,sm:24},N.a.createElement(X,null,e("kcdw")(N.a.createElement(i.a,{addonBefore:"勘察单位",placeholder:"请输入"})))),N.a.createElement(o.a,{md:4,sm:24},N.a.createElement("span",{className:Y.a.submitButtons},N.a.createElement(E.a,{type:"primary",htmlType:"submit"},"查询"),N.a.createElement(E.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.BuildSafetyResponsible.data,l=a.loading,c=this.state,o=c.selectedRows,i=c.modalVisible,s=c.updateModalVisible,d=c.detail,m={modalCallback:this.modalCallback},u={handleModalVisible:this.handleModalVisible},p={detail:d,handleModalVisible:this.handleUpdateModalVisible};return N.a.createElement(M.Fragment,null,N.a.createElement(n.a,{bordered:!1},N.a.createElement("div",{className:Y.a.tableList},N.a.createElement("div",{className:Y.a.tableListForm},this.renderSimpleForm()),N.a.createElement("div",{className:Y.a.tableListOperator},N.a.createElement(E.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"),o.length>0&&N.a.createElement(E.a,{type:"danger",onClick:this.batchDel},"批量删除")),N.a.createElement(C.a,{tableAlert:!0,selectedRows:o,loading:l,data:t,size:"middle",columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),i&&N.a.createElement(J,r()({},m,u,{modalVisible:i})),s&&Object.keys(d).length&&N.a.createElement(H,r()({},m,p,{modalVisible:s})))}}]),a}(M.PureComponent))||U)||U;a.default=G}}]);