(window.webpackJsonp=window.webpackJsonp||[]).push([[147],{PNPw:function(e,a,t){"use strict";t.r(a);t("IzEo");var l,n,r,i,s,c,o,m,d,u,p,g,E,f,h,y,v,b,D,w,L,C,N,I,S,V,x,k,T,R=t("bx4M"),F=(t("R9oj"),t("ECub")),M=(t("2qtc"),t("kLXV")),B=t("lwsE"),A=t.n(B),U=t("W8MJ"),O=t.n(U),Y=t("a1gu"),H=t.n(Y),P=t("Nsbk"),G=t.n(P),z=t("7W2i"),j=t.n(z),q=(t("7Kak"),t("9yH6")),Q=t("q1tI"),J=t.n(Q),W=t("y1Nh"),K=t("MuoO"),X=t("mf+E"),_=t("+n12"),Z=t("pVnL"),$=t.n(Z),ee=(t("14J3"),t("BMrR")),ae=(t("iQDF"),t("+eQT")),te=(t("5NDa"),t("5rEg")),le=(t("jCWc"),t("kPKH")),ne=(t("nRaC"),t("5RzL")),re=(t("miYZ"),t("tsqr")),ie=t("lSNA"),se=t.n(ie),ce=t("MVZn"),oe=t.n(ce),me=(t("+L6B"),t("2/Rp")),de=(t("+BJd"),t("mr32")),ue=(t("5Dmo"),t("3S7+")),pe=(t("OaEy"),t("2fM7")),ge=(t("y8nQ"),t("Vl3Y")),Ee=t("wd/R"),fe=t.n(Ee),he=t("CkN6"),ye=(t("riYV"),t("0tLQ")),ve=t("9zHi"),be=t.n(ve),De=t("ns75"),we=t.n(De),Le=ge.a.Item,Ce=pe.a.Option,Ne=["未审核","初审通过","复审通过","无效数据","免处罚数据","终审办结（归档）",""],Ie=["无需录入","等待录入","完成录入"],Se={pageNo:1,pageSize:10},Ve={isStatus:0,overLoadFlag:1},xe=Object(K.connect)(function(e){var a=e.TrafficApiV2BusData,t=e.loading,l=e.system,n=e.user;return{Site:e.Site,system:l,currentUser:n.currentUser,TrafficApiV2BusData:a,loading:t.models.TrafficApiV2BusData}})(l=ge.a.create()(l=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,formValues:[],detailID:0,siteList:[]},t.columns=[{title:"检测站",dataIndex:"siteName",width:190,render:function(e){return e?e.length>12?J.a.createElement(ue.a,{title:e},"".concat(e.substring(0,12),"...")):e:""}},{title:"车牌号码",dataIndex:"carNo"},{title:"检测时间",width:170,dataIndex:"previewTime",render:function(e){return fe()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"轴数",dataIndex:"axleNumber"},{title:"限重(t)",dataIndex:"weightLimited",render:function(e){return J.a.createElement(de.a,{color:"#87d068"},(e/1e3).toFixed(2)," ")}},{title:"总重(t)",dataIndex:"totalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"超限重(t)",dataIndex:"overLoad",render:function(e){return e>0?J.a.createElement(de.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"overLoadRate",render:function(e){return e?(100*e).toFixed(2):e}},{title:"处理次数",dataIndex:"dealNum"},{title:"交警录入状态",dataIndex:"isEntry",render:function(e){return Ie[e]}},{title:"状态",dataIndex:"isStatus",render:function(e,a){return 1!==a.isRetrial||e?Ne[parseInt(e,10)]:"被退回"}},{title:"操作",width:70,render:function(e,a){return J.a.createElement(Q.Fragment,null,J.a.createElement(ue.a,{placement:"left",title:"审核"},J.a.createElement(me.a,{onClick:function(){return t.showDetailModal(a.id)},type:"primary",shape:"circle",icon:"solution",size:"small"})))}}],t.showDetailModal=function(e){t.setState({detailID:e},function(){return t.handleModalVisible(!0)})},t.getList=function(e){(0,t.props.dispatch)({type:"TrafficApiV2BusData/busDynamicDataForPage",payload:oe()({},e)})},t.getSiteIN=function(){return{siteCodes:t.state.siteList.map(function(e){return e.code})}},t.handleStandardTableChange=function(e){var a=t.state.formValues,l=oe()({pageNo:e.current,pageSize:e.pageSize},Ve,a);t.getList(l)},t.handleFormReset=function(){t.props.form.resetFields();var e=Object(_.w)("organId");t.getSite(e,function(){var e=t.getSiteIN();t.setState({formValues:e}),t.getList(oe()({},Se,Ve,e))})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l="YYYY-MM-DDTHH:mm:ss",n=a.previewTime,r=a.status,i=a.siteCodes,s=n?{startPreviewTime:fe()(n[0]).format(l),endPreviewTime:fe()(n[1]).format(l)}:{},c={};if(r){var o=r.split("_");c=se()({},o[0],o[1])}if(t.getSiteIN().siteCodes.length){var m=i?[i]:t.getSiteIN().siteCodes,d=oe()({},a,s,c,{siteCodes:m});delete d.previewTime,delete d.status,t.setState({formValues:d}),t.getList(oe()({},Se,Ve,d))}else re.a.error("当前机构暂无站点")}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e}),e||t.resetDetail()},t.handleCarGPSVisible=function(e){t.setState({carGPSVisible:!!e}),e||t.setState({carGPSParams:{}})},t.resetDetail=function(){(0,t.props.dispatch)({type:"TrafficApiV2BusData/resetDetail"})},t.treeSelectChange=function(e){t.props.form.setFieldsValue({siteCodes:void 0}),t.getSite(e)},t.getSite=function(e,a){var l=t.props;(0,l.dispatch)({type:"Site/siteByUserSite",payload:{organId:e,siteIds:l.siteList.map(function(e){return e.code})},callback:function(e){var l=e.map(function(e){return"1"===e.siteType?{code:e.siteCode,name:e.siteName}:""}).filter(function(e){return e});t.setState({siteList:l},function(){a&&a()})}})},t.modalSuccess=function(){re.a.success("操作成功");var e=t.state.formValues;t.getList(oe()({},e,Ve,e))},t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){var e=this.props.siteList,a={siteCodes:e.map(function(e){return e.code})};this.getList(oe()({},Se,Ve,a)),this.setState({siteList:e,formValues:a})}},{key:"renderSimpleForm",value:function(){var e=this.props,a=e.system.treeList,t=e.form.getFieldDecorator,l=this.state.siteList,n=Object(_.w)("organId").toString();return J.a.createElement(ge.a,{onSubmit:this.handleSearch,layout:"inline"},J.a.createElement(ee.a,{gutter:16},J.a.createElement(le.a,{md:5,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),J.a.createElement(Le,{style:{flex:1}},t("name")(J.a.createElement(ne.a,{className:we.a.inputGroupLeftRadius,treeData:a,treeDefaultExpandedKeys:[n],style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测点"),J.a.createElement(Le,{style:{flex:1}},t("siteCodes")(J.a.createElement(pe.a,{dropdownMatchSelectWidth:!1,className:we.a.inputGroupLeftRadius,placeholder:"请选择"},l.map(function(e){return J.a.createElement(Ce,{key:e.code,value:e.code},e.name)})))))),J.a.createElement(le.a,{md:5,sm:24},J.a.createElement(te.a.Group,{compact:!0},J.a.createElement(Le,{style:{display:"inline-block",width:"60%"}},t("startOverLoadRate")(J.a.createElement(te.a,{className:"".concat(we.a.inputGroupRightRadius," ").concat(we.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),J.a.createElement(Le,{style:{display:"inline-block",width:"40%"}},t("endOverLoadRate")(J.a.createElement(te.a,{className:we.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),J.a.createElement(Le,{style:{flex:1}},t("axleNumber")(J.a.createElement(pe.a,{className:we.a.inputGroupLeftRadius,placeholder:"请选择"},J.a.createElement(Ce,{value:""},"全部轴数"),J.a.createElement(Ce,{value:2},"2"),J.a.createElement(Ce,{value:3},"3"),J.a.createElement(Ce,{value:4},"4"),J.a.createElement(Ce,{value:5},"5"),J.a.createElement(Ce,{value:6},"6"),J.a.createElement(Ce,{value:"other"},"其他")))))),J.a.createElement(le.a,{md:6,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),J.a.createElement(Le,{style:{flex:1}},t("previewTime")(J.a.createElement(ae.a.RangePicker,{className:we.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[fe()("00:00:00","HH:mm:ss"),fe()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})))))),J.a.createElement(ee.a,{gutter:16},J.a.createElement(le.a,{md:5,sm:24},J.a.createElement(te.a.Group,{compact:!0},J.a.createElement(Le,{style:{display:"inline-block",width:"50%"}},t("startTotalLoad")(J.a.createElement(te.a,{className:"".concat(we.a.inputGroupRightRadius," ").concat(we.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),J.a.createElement(Le,{style:{display:"inline-block",width:"50%"}},t("endTotalLoad")(J.a.createElement(te.a,{className:we.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement(Le,null,t("carNo")(J.a.createElement(te.a,{addonBefore:"车牌号",placeholder:"请输入"})))),J.a.createElement(le.a,{md:5,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"审核状态"),J.a.createElement(Le,{style:{flex:1}},t("status")(J.a.createElement(pe.a,{className:we.a.inputGroupLeftRadius,placeholder:"请选择"},J.a.createElement(Ce,{value:"isStatus_0"},"待审核"),J.a.createElement(Ce,{value:"isRetrial_1"},"被退回")))))),J.a.createElement(le.a,{md:10,sm:24},J.a.createElement("div",{style:{overflow:"hidden"}},J.a.createElement("div",{style:{float:"right",marginBottom:24}},J.a.createElement(me.a,{type:"primary",htmlType:"submit"},"查询"),J.a.createElement(me.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.TrafficApiV2BusData.dyData,t=e.loading,l=this.state,n=l.modalVisible,r=l.detailID,i={handleModalVisible:this.handleModalVisible,modalSuccess:this.modalSuccess,detailID:r};return J.a.createElement(Q.Fragment,null,J.a.createElement("div",{className:be.a.tableList},J.a.createElement("div",{className:be.a.tableListForm},this.renderSimpleForm()),J.a.createElement(he.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange})),n&&r?J.a.createElement(ye.a,$()({},i,{modalVisible:n})):null)}}]),a}(Q.PureComponent))||l)||l,ke=(t("/zsF"),t("PArb")),Te=t("PJYZ"),Re=t.n(Te),Fe=(t("giR+"),t("fyUT")),Me=(t("T2oS"),t("W9HT")),Be=(t("DZo9"),t("8z0m")),Ae=(t("Pwec"),t("CtXQ")),Ue=t("90cL"),Oe=t("faNv"),Ye=t("smft"),He=t("ZP6J"),Pe=t.n(He),Ge=ge.a.Item,ze=Object(K.connect)(function(e){var a=e.loading,t=e.TrafficApiV2BusData,l=e.user;return{TrafficApiV2BusData:t,loading:a.models.TrafficApiV2BusData,currentUser:l.currentUser}})(n=ge.a.create()((i=r=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={},t.okHandle=function(){var e=t.props,a=e.form,l=e.detailID,n=e.dispatch,r=e.modalSuccess,i=e.handleModalVisible,s=e.currentUser,c=s.id,o=s.fullname;a.validateFields(function(e,a){if(!e){var t=oe()({},a,{busDataId:l,userId:c,userName:o});n({type:"TrafficApiV2BusData/lawCaseReturn",payload:t,callback:function(){i(),r()}})}})},t}return j()(a,e),O()(a,[{key:"render",value:function(){var e=this.props,a=e.modalVisible,t=e.handleModalVisible,l=e.form;return J.a.createElement(M.a,{destroyOnClose:!0,title:"退回重审",visible:a,className:Pe.a.formModal,onOk:this.okHandle,onCancel:function(){return t()}},J.a.createElement("div",{className:Pe.a.formModalBody},J.a.createElement(Ge,{labelCol:{span:6},wrapperCol:{span:15},label:"退回重审原因"},l.getFieldDecorator("reason",{initialValue:"车辆检测信息与实际不符或照片缺失",rules:[{required:!0,message:"请输入重审原因"}]})(J.a.createElement(te.a.TextArea,{rows:3,autosize:!0,placeholder:"请输入"})))))}}]),a}(Q.PureComponent),r.defaultProps={modalVisible:!1,handleModalVisible:function(){}},n=i))||n)||n,je=t("lzeG"),qe=["/lawment/dynamic/casehand/addBusInfo","/lawment/dynamic/casehand/focusData","/lawment/dynamic/casehand/lawCaseRevoke","/lawment/dynamic/casehand/lawCaseReturn"],Qe=ge.a.Item,Je=q.a.Group,We=pe.a.Option,Ke=ge.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleModalVisible,n=e.sendLawCaseRevoke,r=e.fileListIdCard,i=e.fileListCancelProof,s=e.fileListCard,c=e.fileListDriveLicense,o=e.IdCardImgChange,m=e.cancelProofChange,d=e.cardChange,u=e.loading,p=e.driveLicenseChange,g={name:"files",action:"/result/api/file/v1/fileUpload",listType:"picture",accept:".jpg,.jpeg,.png",data:{type:5,xbType:""},headers:{Authorization:"Bearer ".concat(Object(_.w)("token")[0]),"x-requested-with":"XMLHttpRequest"}};return J.a.createElement(M.a,{destroyOnClose:!0,title:"撤销处罚",className:Pe.a.formModal,visible:a,onOk:function(){t.validateFields(function(e,a){e||n(a,function(){return t.resetFields()})})},onCancel:function(){return l()}},J.a.createElement("div",{className:Pe.a.formModalBody},J.a.createElement(Me.a,{spinning:!!u},J.a.createElement(ge.a,{layout:"vertical"},J.a.createElement(Qe,{label:"免处罚原因"},t.getFieldDecorator("reason",{initialValue:"本次超限运输行为已经办理了超限运输许可，且按许可要求合法运输"})(J.a.createElement(pe.a,{dropdownMatchSelectWidth:!1,style:{width:"100%"}},J.a.createElement(We,{value:"本次超限运输行为已经办理了超限运输许可，且按许可要求合法运输"},"本次超限运输行为已经办理了超限运输许可，且按许可要求合法运输"),J.a.createElement(We,{value:"本次违法行为通过检测点后，已被其他公路管理机构依法查处"},"本次违法行为通过检测点后，已被其他公路管理机构依法查处"),J.a.createElement(We,{value:"因称重检测设备出现异常情况导致称重数据与事实不符"},"因称重检测设备出现异常情况导致称重数据与事实不符"),J.a.createElement(We,{value:"因车辆使用假牌、套牌等原因，导致处罚主体或事实错误"},"因车辆使用假牌、套牌等原因，导致处罚主体或事实错误"),J.a.createElement(We,{value:"法律法规规定的其他不予处罚的情形"},"法律法规规定的其他不予处罚的情形"),J.a.createElement(We,{value:"公路管理机构认为应当撤销处罚的其他情形"},"公路管理机构认为应当撤销处罚的其他情形")))),J.a.createElement(ee.a,{gutter:{md:8,lg:8,xl:8}},J.a.createElement(le.a,{md:12,sm:24},J.a.createElement(Qe,{label:"委托代理人身份证"},t.getFieldDecorator("agentIdcardUrl",{rules:[{required:!0,message:"请选择委托代理人身份证照片"}]})(J.a.createElement(Be.a,$()({},g,{defaultFileList:r,onChange:o}),r.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片"))))),J.a.createElement(le.a,{md:12,sm:24},J.a.createElement(Qe,{label:"撤销凭证"},t.getFieldDecorator("cancelProofUrl",{rules:[{required:!0,message:"请选择撤销凭证照片"}]})(J.a.createElement(Be.a,$()({},g,{defaultFileList:i,onChange:m}),i.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片")))))),J.a.createElement(ee.a,{gutter:{md:8,lg:8,xl:8}},J.a.createElement(le.a,{md:12,sm:24},J.a.createElement(Qe,{label:"当事人身份证/企业营业执照"},t.getFieldDecorator("cardUrl",{rules:[{required:!0,message:"请选择当事人身份证/企业营业执照"}]})(J.a.createElement(Be.a,$()({},g,{defaultFileList:s,onChange:d}),s.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片"))))),J.a.createElement(le.a,{md:12,sm:24},J.a.createElement(Qe,{label:"车辆行驶证图片"},t.getFieldDecorator("driveLicenseUrl",{rules:[{required:!0,message:"请选择车辆行驶证图片"}]})(J.a.createElement(Be.a,$()({},g,{defaultFileList:c,onChange:p}),c.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片"))))))))))}),Xe=Object(K.connect)(function(e){var a=e.DynamicLaw,t=e.loading,l=e.TrafficApiV2BusData,n=e.user;return{DynamicLaw:a,loading:t.models.DynamicLaw,TrafficApiV2BusData:l,apiV2Loading:t.models.TrafficApiV2BusData,currentUser:n.currentUser}})(s=ge.a.create()((o=c=function(e){function a(e){var t;return A()(this,a),(t=H()(this,G()(a).call(this,e))).state={truckBelong:1,previewCode:"",focusDataVisible:!1,lawCaseReturnVisible:!1,lawCaseRevokeVisible:!1,registerInfo:{},busDynamicLawDate:{},openRecord:[],fileListIdCard:[],fileListCancelProof:[],fileListCard:[],fileListDriveLicense:[],busStaticData:{},detail:{}},t.columns=[{title:"操作员",dataIndex:"executor"},{title:"办理时间",dataIndex:"executorTime"},{title:"状态",dataIndex:"logType"},{title:"原因",dataIndex:"remark"}],t.getDetail=function(){var e=t.props;(0,e.dispatch)({type:"TrafficApiV2BusData/dyDataDetail",payload:e.detailID})},t.truckBelongChange=function(e){t.setState({truckBelong:e.target.value})},t.handleAdd=function(e,a){var l=t.props.dispatch,n=t.state,r=n.registerInfo,i=n.previewCode,s=oe()({},e,{previewCode:i});"{}"!==JSON.stringify(r)&&(s.id=r.id),l({type:"DynamicLaw/add",payload:s,callback:function(){re.a.success("操作成功"),a(),t.getDetail()}})},t.handleFocusDataVisible=function(e){t.setState({focusDataVisible:!!e})},t.handleLawCaseReturnVisible=function(e){t.setState({lawCaseReturnVisible:!!e})},t.handLawCaseRevokeVisible=function(e){t.setState({lawCaseRevokeVisible:!!e})},t.sendLawCaseRevoke=function(e,a){var l=t.props,n=l.dispatch,r=l.modalSuccess,i=l.handleModalVisible,s=l.detailID,c=l.currentUser,o=c.id,m=c.fullname;n({type:"TrafficApiV2BusData/lawCaseRevoke",payload:oe()({},e,{busDataId:s,userName:m,userId:o,cardUrl:e.cardUrl?e.cardUrl.file.response.filePath:"",agentIdcardUrl:e.agentIdcardUrl?e.agentIdcardUrl.file.response.filePath:"",cancelProofUrl:e.cancelProofUrl?e.cancelProofUrl.file.response.filePath:"",driveLicenseUrl:e.driveLicenseUrl?e.driveLicenseUrl.file.response.filePath:""}),callback:function(){setTimeout(function(){a&&a(),t.handLawCaseRevokeVisible(),i(),r()},500)}})},t.prevCarousel=function(){t.myCarousel.prev()},t.nextCarousel=function(){t.myCarousel.next()},t.focusDataClick=function(){t.handleFocusDataVisible(!0)},t.lawCaseReturnClick=function(){t.handleLawCaseReturnVisible(!0)},t.lawCaseRevokeClick=function(){t.handLawCaseRevokeVisible(!0)},t.IdCardImgChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListIdCard:e})})},t.cardChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListCard:e})})},t.cancelProofChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListCancelProof:e})})},t.driveLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListDriveLicense:e})})},t.imgChangeUtil=function(e,a){"done"===e.file.status?200===e.file.response.code?(re.a.success("上传成功"),a(e.fileList)):re.a.error(e.file.response.code.msg):"error"===e.file.status?re.a.error("上传失败"):"removed"===e.file.status&&a(e.fileList)},t.modalSuccess=function(){var e=t.props,a=e.modalSuccess,l=e.handleModalVisible;a(),l()},t.modalTitle=function(){var e=t.props,a=e.form,l=e.isRegist,n=t.state.busDynamicLawDate,r={color:"#fff",marginLeft:5};return J.a.createElement("div",{className:Pe.a.modalHeader},J.a.createElement("div",{className:Pe.a.title},J.a.createElement("span",{className:Pe.a.value},n.carNo),J.a.createElement("span",{className:Pe.a.time},fe()(n.previewTime).format("YYYY-M-D HH:mm:ss"))),J.a.createElement("div",null,Object(_.b)(qe[0])?l?null:J.a.createElement(me.a,{type:"primary",onClick:function(){a.validateFields(function(e,l){e||t.handleAdd(l,function(){return a.resetFields()})})}},"确认车辆信息"):null,Object(_.b)(qe[1])?J.a.createElement(me.a,{style:oe()({background:"#f1a325",borderColor:"#f1a325"},r),onClick:function(){return t.focusDataClick()}},"重点关注"):null,Object(_.b)(qe[2])?J.a.createElement(me.a,{onClick:function(){return t.lawCaseRevokeClick()},style:oe()({background:"#ea644a",borderColor:"#ea644a"},r)},"撤销处罚"):null,Object(_.b)(qe[3])?J.a.createElement(me.a,{onClick:function(){return t.lawCaseReturnClick()},style:oe()({background:"#38b03f",borderColor:"#38b03f"},r)},"退回重审"):null))},t.myCarousel=J.a.createRef(),t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.getDetail()},100)}},{key:"renderForm",value:function(){var e=this.props.form,a=this.state,t=a.truckBelong,l=a.registerInfo,n=a.busDynamicLawDate,r={labelCol:{xs:{span:8},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:16}}};return J.a.createElement(Q.Fragment,null,J.a.createElement("div",{className:Pe.a.inputGroup},J.a.createElement(ee.a,{gutter:8},J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"车牌号码"},r),e.getFieldDecorator("carNo",{initialValue:l.carNo||n.carNo,rules:[{required:!0,validator:_.f}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"车主姓名"},r),e.getFieldDecorator("vehicleOwner",{initialValue:l.vehicleOwner,rules:[{required:!0,message:"请输入车主姓名！"}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"车辆类型"},r),e.getFieldDecorator("carType",{initialValue:l.carType})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"核定载重"},r),e.getFieldDecorator("weightLimited",{initialValue:l.weightLimited})(J.a.createElement(Fe.a,{min:0,placeholder:"单位(kg)",style:{width:"100%"}}))))),J.a.createElement(ee.a,{gutter:8},J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"手机号码"},r),e.getFieldDecorator("phone",{initialValue:l.phone,rules:[{required:!0,validator:_.h}]})(J.a.createElement(te.a,null)))),2===t?J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"统一信用码"},r),e.getFieldDecorator("creditCode",{initialValue:l.creditCode})(J.a.createElement(te.a,null)))):J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"身份证号"},r),e.getFieldDecorator("idCard",{initialValue:l.idCard,rules:[{required:!0,validator:_.d}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"外廓尺寸"},r),e.getFieldDecorator("externalDimensions",{initialValue:l.externalDimensions})(J.a.createElement(te.a,{placeholder:"输入格式(XX-XX-XX)"})))),J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"车辆总重"},r),e.getFieldDecorator("totalWeight",{initialValue:l.totalWeight})(J.a.createElement(Fe.a,{placeholder:"单位(kg)",min:0,style:{width:"100%"}}))))),J.a.createElement(ee.a,{gutter:8},J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"车辆厂牌"},r),e.getFieldDecorator("brandName",{initialValue:l.brandName})(J.a.createElement(te.a,null)))),2===t?J.a.createElement(Q.Fragment,null,J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"法人姓名"},r),e.getFieldDecorator("legalRepresentative",{initialValue:l.legalRepresentative})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"注册地址"},r),e.getFieldDecorator("registAddr",{initialValue:l.registAddr})(J.a.createElement(te.a,null))))):J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"车主地址"},r),e.getFieldDecorator("vehicleOwnerAddr",{initialValue:l.vehicleOwnerAddr,rules:[{required:!0,message:"请输入车主地址"}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:6,sm:12},J.a.createElement(Qe,$()({label:"轴数"},r),e.getFieldDecorator("axleNumber",{initialValue:l.axleNumber||n.axleNumber,rules:[{required:!0,message:"请输入轴数"}]})(J.a.createElement(Fe.a,{min:0,placeholder:"",style:{width:"100%"}})))))))}},{key:"render",value:function(){var e=this.props,a=e.modalVisible,t=e.handleModalVisible,l=e.form,n=e.loading,r=e.detailID,i=e.apiV2Loading,s=this.state,c=s.truckBelong,o=s.focusDataVisible,m=s.lawCaseReturnVisible,d=s.lawCaseRevokeVisible,u=s.busDynamicLawDate,p=s.fileListCancelProof,g=s.fileListCard,E=s.fileListDriveLicense,f=s.fileListIdCard,h=s.openRecord,y=s.busStaticData,v=s.detail,b={handleModalVisible:this.handleFocusDataVisible,detail:v,modalSuccess:this.modalSuccess},D={detailID:r,modalSuccess:this.modalSuccess,handleModalVisible:this.handleLawCaseReturnVisible},w={handleModalVisible:this.handLawCaseRevokeVisible,sendLawCaseRevoke:this.sendLawCaseRevoke,fileListIdCard:f,fileListCancelProof:p,fileListCard:g,loading:i,fileListDriveLicense:E,IdCardImgChange:this.IdCardImgChange,cancelProofChange:this.cancelProofChange,cardChange:this.cardChange,driveLicenseChange:this.driveLicenseChange};return J.a.createElement(Q.Fragment,null,J.a.createElement(M.a,{destroyOnClose:!0,className:Pe.a.modalStyle,title:this.modalTitle(),visible:a,footer:null,onCancel:function(){return t()},width:1150},J.a.createElement(Me.a,{spinning:i},J.a.createElement("div",{className:Pe.a.detailMsg},J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"profile"})," 车辆基本信息",J.a.createElement(Qe,{style:{display:"inline-block",marginBottom:0,verticalAlign:"middle",marginLeft:20}},l.getFieldDecorator("truckBelong",{initialValue:c})(J.a.createElement(Je,{onChange:this.truckBelongChange},J.a.createElement(q.a,{value:1},"个人"),J.a.createElement(q.a,{value:2},"企业")))),J.a.createElement(me.a,{style:{float:"right"},size:"small",href:"http://www.gsxt.gov.cn/index.html",target:"_blank"},"企业法人查询")),J.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderForm())),J.a.createElement(Ue.a,{detail:u,isTitle:!0}),"{}"!==JSON.stringify(y)?J.a.createElement(Oe.a,{detail:y}):null,J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"table"})," 操作记录"),J.a.createElement("div",{className:Pe.a.recordList,style:{padding:"0 20px 20px"}},J.a.createElement(Ye.a,{loading:n,list:h,columns:this.columns}))))),o&&J.a.createElement(je.a,$()({},b,{modalVisible:o})),m&&J.a.createElement(ze,$()({},D,{modalVisible:m})),d&&J.a.createElement(Ke,$()({},w,{modalVisible:d})))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t=e.TrafficApiV2BusData.dyDataDetail,l=a.detail;if(JSON.stringify(l)!==JSON.stringify(t)){var n=t.registerInfo,r=t.openRecord,i=t.busDynamicLawDate,s=n||{};return{detail:t,busDynamicLawDate:i,openRecord:r,registerInfo:s,truckBelong:s.truckBelong||1,previewCode:i.previewCode,busStaticData:i.busStaticData||{}}}return null}}]),a}(Q.PureComponent),c.defaultProps={handleModalVisible:function(){}},s=o))||s)||s,_e=(t("Q9mQ"),t("diRs")),Ze=["/lawment/dynamic/casehand/lawCaseRegist"],$e=ae.a.RangePicker,ea=pe.a.Option,aa=ge.a.Item,ta=q.a.Group,la={marginBottom:0},na=Object(K.connect)(function(e){var a=e.DynamicLaw,t=e.loading;return{TrafficApiV2BusData:e.TrafficApiV2BusData,api2Loading:t.models.TrafficApiV2BusData,DynamicLaw:a,loading:t.models.DynamicLaw}})(m=ge.a.create()((u=d=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={detail:{},registerInfo:{},busDynamicLawDate:{},openRecord:{},previewCode:"",partyRadio:1,isAgent:0,fileListCardUrl:[],fileListDriveLicense:[],fileListDriverLicense:[],fileListAgentIdCard:[],fileListTransportLicense:[],fileListPractitioner:[]},t.getDetail=function(){var e=t.props;(0,e.dispatch)({type:"TrafficApiV2BusData/dyDataDetail",payload:e.detailID})},t.partyRadioChange=function(e){var a=e.target.value;t.setState({partyRadio:a})},t.isAgentChange=function(e){var a=e.target.value;t.setState({isAgent:a})},t.renderParty=function(){var e=t.props.form,a=t.state.registerInfo;return J.a.createElement("div",{className:Pe.a.inputGroup},J.a.createElement(ge.a,{labelCol:{span:7},wrapperCol:{span:17}},J.a.createElement(ee.a,{gutter:8},J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"类型"},e.getFieldDecorator("personalororgan",{initialValue:1})(J.a.createElement(pe.a,{disabled:!0,style:{width:"100%"}},J.a.createElement(ea,{value:1},"个人"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"姓名"},e.getFieldDecorator("partyName",{initialValue:a.vehicleOwner})(J.a.createElement(te.a,{readOnly:!0})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:oe()({},la),label:"性别"},e.getFieldDecorator("partySex",{initialValue:1})(J.a.createElement(pe.a,{style:{width:"100%"}},J.a.createElement(ea,{value:1},"男"),J.a.createElement(ea,{value:2},"女"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"身份证号"},e.getFieldDecorator("partyIdcard",{initialValue:a.idCard,rules:[{validator:_.d}]})(J.a.createElement(te.a,{readOnly:!0})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"联系方式"},e.getFieldDecorator("partyTel",{initialValue:a.phone})(J.a.createElement(te.a,{readOnly:!0})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"住址"},e.getFieldDecorator("partyAddr",{initialValue:a.vehicleOwnerAddr})(J.a.createElement(te.a,{readOnly:!0})))))))},t.renderPartyEnterprise=function(){var e=t.props.form,a=t.state.registerInfo;return J.a.createElement("div",{className:Pe.a.inputGroup},J.a.createElement(ge.a,{labelCol:{span:7},wrapperCol:{span:17}},J.a.createElement(ee.a,{gutter:8},J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"类型"},e.getFieldDecorator("personalororgan",{initialValue:2})(J.a.createElement(pe.a,{disabled:!0,style:{width:"100%"}},J.a.createElement(ea,{value:2},"企业或其他组织"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"企业名称"},e.getFieldDecorator("partyName",{initialValue:a.vehicleOwner})(J.a.createElement(te.a,{readOnly:!0})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"法人姓名"},e.getFieldDecorator("legalMan",{initialValue:a.legalRepresentative})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"统一信用码"},e.getFieldDecorator("creditCode",{initialValue:a.creditCode})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"企业电话"},e.getFieldDecorator("companyTel",{})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"注册地址"},e.getFieldDecorator("companyAddr",{initialValue:a.registAddr})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"法人手机"},e.getFieldDecorator("legalManTel",{initialValue:a.phone})(J.a.createElement(te.a,{readOnly:!0})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"法人住址"},e.getFieldDecorator("legalManAddr",{})(J.a.createElement(te.a,null)))))))},t.renderAgent=function(){var e=t.props.form;return J.a.createElement("div",{className:Pe.a.inputGroup},J.a.createElement(ge.a,{labelCol:{span:7},wrapperCol:{span:17}},J.a.createElement(ee.a,{gutter:8},J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"代理人姓名"},e.getFieldDecorator("agentName",{})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"性别"},e.getFieldDecorator("agentSex",{initialValue:1})(J.a.createElement(pe.a,null,J.a.createElement(ea,{value:1},"男"),J.a.createElement(ea,{value:2},"女"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"身份证号"},e.getFieldDecorator("agentIdcard",{rules:[{validator:_.d}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"联系方式"},e.getFieldDecorator("agentTel",{rules:[{validator:_.h}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"住址"},e.getFieldDecorator("agentAddr",{})(J.a.createElement(te.a,null)))))))},t.renderDriver=function(){var e=t.props.form,a=1===t.state.partyRadio?t.state.registerInfo:{};return J.a.createElement("div",{className:Pe.a.inputGroup},J.a.createElement(ge.a,{labelCol:{span:7},wrapperCol:{span:17}},J.a.createElement(ee.a,{gutter:8},J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"驾驶员姓名"},e.getFieldDecorator("driverName",{initialValue:a.vehicleOwner})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"性别"},e.getFieldDecorator("driverSex",{initialValue:1})(J.a.createElement(pe.a,null,J.a.createElement(ea,{value:1},"男"),J.a.createElement(ea,{value:2},"女"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"身份证号"},e.getFieldDecorator("driverIdcard",{initialValue:a.idCard,rules:[{validator:_.d}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"联系方式"},e.getFieldDecorator("driverTel",{initialValue:a.phone,rules:[{required:!0,validator:_.h}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"住址"},e.getFieldDecorator("driverAddr",{initialValue:a.vehicleOwnerAddr})(J.a.createElement(te.a,null)))))))},t.toops=function(){return J.a.createElement("div",{style:{width:400}},J.a.createElement("h3",null,"非现场执法处罚优惠规则"),J.a.createElement("p",null,"1、违法超限超载",J.a.createElement("span",{style:{color:"red"}},"5吨"),"以上-",J.a.createElement("span",{style:{color:"red"}},"10吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻80%实施处罚。",J.a.createElement("br",null),"2、违法超限超载",J.a.createElement("span",{style:{color:"red"}},"10吨"),"以上-",J.a.createElement("span",{style:{color:"red"}},"20吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻75%实施处罚。",J.a.createElement("br",null),"3、违法超限超载",J.a.createElement("span",{style:{color:"red"}},"20吨"),"以上-",J.a.createElement("span",{style:{color:"red"}},"30吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻70%实施处罚。",J.a.createElement("br",null),"4、违法超限超载",J.a.createElement("span",{style:{color:"red"}},"30吨"),"以上-",J.a.createElement("span",{style:{color:"red"}},"40吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻65%实施处罚。",J.a.createElement("br",null),"5、违法超限超载",J.a.createElement("span",{style:{color:"red"}},"40吨"),"以上的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻60%实施处罚。",J.a.createElement("br",null),"6、1年内同一车辆经动态自动称重设备记录多次违法行为且主动前来接受调查处理的，按《超限运输车辆行驶公路管理规定》的处罚标准，累计罚款不超过",J.a.createElement("span",{style:{color:"red"}},"3万元"),"。"))},t.renderCaseInfo=function(){var e=t.props.form,a=t.state,l=a.registerInfo,n=a.busDynamicLawDate;return J.a.createElement("div",{className:Pe.a.inputGroup},J.a.createElement(ge.a,{labelCol:{span:7},wrapperCol:{span:17}},J.a.createElement(ee.a,{gutter:8},J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"案卷号"},e.getFieldDecorator("caseNo",{rules:[{required:!0,message:"请输入案卷号"}]})(J.a.createElement(Fe.a,{style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"货物名称"},e.getFieldDecorator("goodsName",{rules:[{required:!0,message:"请输入货物名称"}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"承办人"},e.getFieldDecorator("undertaker",{rules:[{required:!0,message:"请输入承办人 "}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"案件来源"},e.getFieldDecorator("caseSource",{initialValue:"非现场执法"})(J.a.createElement(pe.a,null,J.a.createElement(ea,{value:"非现场执法"},"非现场执法"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"车货总重(kg)"},e.getFieldDecorator("weight",{initialValue:l.totalWeight})(J.a.createElement(Fe.a,{readOnly:!0,style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"执法证号"},e.getFieldDecorator("enforcementNo",{})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement(aa,{labelCol:{span:10},wrapperCol:{span:14},style:la,label:"案由"},e.getFieldDecorator("caseReasonCarNo",{initialValue:l.carNo})(J.a.createElement(te.a,{readOnly:!0})))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement("div",{className:Pe.a.radius},J.a.createElement(aa,{wrapperCol:{span:24},style:la},e.getFieldDecorator("caseReason",{})(J.a.createElement(te.a,null))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"轴数"},e.getFieldDecorator("axisNum",{initialValue:n.axleNumber})(J.a.createElement(Fe.a,{readOnly:!0,style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"协办人"},e.getFieldDecorator("coOrganizer",{rules:[{required:!0,message:"请输入协办人"}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement("div",{className:we.a.inputTip},J.a.createElement(_e.a,{content:t.toops()},J.a.createElement(Ae.a,{type:"question-circle"}))),J.a.createElement(aa,{style:la,className:we.a.inputLabelLeft,label:"处罚金额"},e.getFieldDecorator("punishMoney",{rules:[{required:!0,message:"请输入处罚金额"}]})(J.a.createElement(Fe.a,{style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"超限(kg)"},e.getFieldDecorator("limited",{initialValue:n.overLoad})(J.a.createElement(Fe.a,{readOnly:!0,style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"执法证号"},e.getFieldDecorator("organizerNo",{initialValue:""})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"讨论时间"},e.getFieldDecorator("discussTime",{rules:[{required:!0,message:"请选择讨论时间"}]})(J.a.createElement($e,{showTime:!0,style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"询问时间"},e.getFieldDecorator("askTime",{rules:[{required:!0,message:"请选择询问时间"}]})(J.a.createElement($e,{showTime:!0,style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"车辆说明"},e.getFieldDecorator("carDesc",{})(J.a.createElement(te.a.TextArea,{autosize:!0})))))))},t.cardUrlChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListCardUrl:e})})},t.driveLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListDriveLicense:e})})},t.driverLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListDriverLicense:e})})},t.agentIdCardChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListAgentIdCard:e})})},t.transportLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListTransportLicense:e})})},t.practitionerChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListPractitioner:e})})},t.imgChangeUtil=function(e,a){"done"===e.file.status?200===e.file.response.code?(re.a.success("上传成功"),a(e.fileList)):re.a.error(e.file.response.code.msg):"error"===e.file.status?re.a.error("上传失败"):"removed"===e.file.status&&a(e.fileList)},t.renderEnclosure=function(){var e=t.props.form,a=t.state,l=a.isAgent,n=a.fileListCardUrl,r=a.fileListDriveLicense,i=a.fileListDriverLicense,s=a.fileListAgentIdCard,c=a.fileListTransportLicense,o=a.fileListPractitioner,m={name:"files",action:"/result/api/file/v1/fileUpload",listType:"picture",accept:".jpg,.jpeg,.png",data:{type:5,xbType:""},headers:{Authorization:"Bearer ".concat(Object(_.w)("token")[0]),"x-requested-with":"XMLHttpRequest"}};return J.a.createElement(Q.Fragment,null,J.a.createElement(ee.a,{gutter:{md:8,lg:16,xl:16}},J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"当事人身份证/企业营业执照"},e.getFieldDecorator("cardUrl",{rules:[{required:!0,message:"请上传当事人身份证/企业营业执照"}]})(J.a.createElement(Be.a,$()({},m,{defaultFileList:n,onChange:t.cardUrlChange}),n.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"车辆行驶证"},e.getFieldDecorator("driveLicenseUrl",{rules:[{required:!0,message:"请上传车辆行驶证"}]})(J.a.createElement(Be.a,$()({},m,{defaultFileList:r,onChange:t.driveLicenseChange}),r.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"驾驶员驾驶证"},e.getFieldDecorator("driverLicenseUrl",{rules:[{required:!0,message:"请上传驾驶员驾驶证"}]})(J.a.createElement(Be.a,$()({},m,{defaultFileList:i,onChange:t.driverLicenseChange}),i.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片")))))),J.a.createElement(ee.a,{gutter:{md:8,lg:16,xl:16}},l?J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"委托代理人身份证"},e.getFieldDecorator("agentIdcardUrl",{rules:[{required:!0,message:"请上传委托代理人身份证"}]})(J.a.createElement(Be.a,$()({},m,{defaultFileList:s,onChange:t.agentIdCardChange}),s.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片"))))):null,J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"车辆道路运输证或其他"},e.getFieldDecorator("transportLicenseUrl",{rules:[{required:!0,message:"请上传车辆道路运输证或其他"}]})(J.a.createElement(Be.a,$()({},m,{defaultFileList:c,onChange:t.transportLicenseChange}),c.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(aa,{style:la,label:"驾驶员从业资格证或其他"},e.getFieldDecorator("practitionerUrl",{rules:[{required:!0,message:"请上传驾驶员从业资格证或其他"}]})(J.a.createElement(Be.a,$()({},m,{defaultFileList:o,onChange:t.practitionerChange}),o.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片")))))))},t.okHandle=function(){var e=t.props,a=e.form,l=e.dispatch,n=e.modalSuccess,r=e.handleModalVisible,i=t.state.busDynamicLawDate;a.validateFields(function(e,a){if(!e){var t=JSON.parse(JSON.stringify(a)),s=a.askTime||["",""],c=a.discussTime||["",""];if(t.askBeginTime=fe()(s[0]).format("YYYY-MM-DD HH:mm:ss"),t.askEndTime=fe()(s[1]).format("YYYY-MM-DD HH:mm:ss"),t.discussBeginTime=fe()(c[0]).format("YYYY-MM-DD HH:mm:ss"),t.discussEndTime=fe()(c[1]).format("YYYY-MM-DD HH:mm:ss"),t.caseReason="".concat(a.caseReasonCarNo,",").concat(a.caseReason),"object"==typeof a.cardUrl){var o=a.cardUrl.file.response;t.cardUrl=o?o.filePath:""}if("object"==typeof a.driveLicenseUrl){var m=a.driveLicenseUrl.file.response;t.driveLicenseUrl=m?m.filePath:""}if("object"==typeof a.driverLicenseUrl){var d=a.driverLicenseUrl.file.response;t.driverLicenseUrl=d?d.filePath:""}if("object"==typeof a.agentIdcardUrl){var u=a.agentIdcardUrl.file.response;t.agentIdcardUrl=u?u.filePath:""}if("object"==typeof a.transportLicenseUrl){var p=a.transportLicenseUrl.file.response;t.transportLicenseUrl=p?p.filePath:""}if("object"==typeof a.practitionerUrl){var g=a.practitionerUrl.file.response;t.practitionerUrl=g?g.filePath:""}t.previewCode=i.previewCode,delete t.askTime,delete t.discussTime,delete t.caseReasonCarNo,l({type:"DynamicLaw/lawCaseRegist",payload:t,callback:function(){n(),setTimeout(function(){return r()},500)}})}})},t.modalTitle=function(){return J.a.createElement("div",{className:Pe.a.modalHeader},J.a.createElement("div",{className:Pe.a.title},J.a.createElement("span",{className:Pe.a.value},"案件登记")),J.a.createElement("div",null,Object(_.b)(Ze[0])?J.a.createElement(me.a,{type:"primary",onClick:function(){return t.okHandle()}},"保存案件"):null))},t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){this.getDetail()}},{key:"render",value:function(){var e=this.props,a=e.form,t=e.modalVisible,l=e.handleModalVisible,n=this.state,r=n.partyRadio,i=n.isAgent;return J.a.createElement(M.a,{destroyOnClose:!0,className:Pe.a.modalStyle,title:this.modalTitle(),visible:t,onCancel:function(){return l()},width:1150,footer:null},J.a.createElement("div",{className:Pe.a.detailMsg},J.a.createElement("div",{className:Pe.a.detailMsgTitle}," 当事人信息"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},1===r?this.renderParty():this.renderPartyEnterprise())),J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},J.a.createElement("div",{className:Pe.a.detailMsgTitle}," 委托代理人信息"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},J.a.createElement(aa,{labelCol:{span:2},wrapperCol:{span:10},style:la,label:"委托代理人"},a.getFieldDecorator("isAgent",{initialValue:i})(J.a.createElement(ta,{onChange:this.isAgentChange},J.a.createElement(q.a,{value:1},"是"),J.a.createElement(q.a,{value:0},"否")))),i?this.renderAgent():null)),J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},J.a.createElement("div",{className:Pe.a.detailMsgTitle}," 驾驶员信息"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderDriver())),J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},J.a.createElement("div",{className:Pe.a.detailMsgTitle}," 案件信息"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderCaseInfo())),J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},J.a.createElement("div",{className:Pe.a.detailMsgTitle}," 附件"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderEnclosure())))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t=e.TrafficApiV2BusData.dyDataDetail,l=a.detail;if(JSON.stringify(l)!==JSON.stringify(t)){var n=t.registerInfo,r=t.openRecord,i=t.busDynamicLawDate,s=n||{};return{detail:t,busDynamicLawDate:i,openRecord:r,registerInfo:s,truckBelong:s.truckBelong||1,previewCode:i.previewCode,busStaticData:i.busStaticData||{}}}return null}}]),a}(Q.PureComponent),d.defaultProps={handleModalVisible:function(){}},m=u))||m)||m,ra=(t("sRBo"),t("kaz8")),ia=ge.a.Item,sa=ra.a.Group,ca=Object(K.connect)(function(e){return{DynamicLaw:e.DynamicLaw,loading:e.loading.models.DynamicLaw}})(p=ge.a.create()((E=g=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={printFileList:[],downLoaing:!1},t.getList=function(){var e=t.props;(0,e.dispatch)({type:"DynamicLaw/fileList",payload:{pageBean:{page:1,pageSize:1e5,showTotal:!0},querys:[{property:"organCode",value:e.organCode||51,group:"main",operation:"EQUAL",relation:"AND"}]},callback:function(e){t.setState({printFileList:e})}})},t.renderOption=function(){return t.state.printFileList.map(function(e){return J.a.createElement("div",{key:e.fileId},J.a.createElement(ra.a,{value:e.fileId},e.fileName))})},t.templatePrint=function(e){t.setState({downLoaing:!0});var a=t.props,l=a.handleModalVisible,n=a.dispatch,r=a.previewCode;n({type:"DynamicLaw/filePrint",payload:{carNo:a.carNo,previewCode:r,fileIds:e.template.join()},callback:function(e){404===e?re.a.error("模板异常，无法下载"):setTimeout(function(){return l()},1500),t.setState({downLoaing:!1})}})},t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this,a=this.props,t=a.modalVisible,l=a.handleModalVisible,n=a.form,r=this.state,i=r.printFileList,s=r.downLoaing,c=i.length<=0?{footer:null}:{};return J.a.createElement(M.a,$()({destroyOnClose:!0,title:"打印预览选择",className:Pe.a.formModal,visible:t,onOk:function(){n.validateFields(function(a,t){a||e.templatePrint(t)})},onCancel:function(){return l()}},c),J.a.createElement(Me.a,{spinning:s,tip:"正在下载······"},J.a.createElement("div",{className:Pe.a.formModalBody},i.length<=0?J.a.createElement(F.a,{description:"暂无模板，请先上传"}):J.a.createElement(ia,{label:"模板名称"},n.getFieldDecorator("template",{initialValue:i.map(function(e){return e.fileId})})(J.a.createElement(sa,null,this.renderOption()))))))}}]),a}(Q.PureComponent),g.defaultProps={handleModalVisible:function(){}},p=E))||p)||p,oa=ae.a.RangePicker,ma=pe.a.Option,da=ge.a.Item,ua=q.a.Group,pa={marginBottom:0},ga=["/lawment/dynamic/casehand/lawCaseRegist","/lawment/dynamic/casehand/getFilePrint"],Ea=Object(K.connect)(function(e){var a=e.File,t=e.DynamicLaw,l=e.loading;return{File:a,DynamicLaw:t,loading:l.models.DynamicLaw,fileLoading:l.models.File}})(f=ge.a.create()((y=h=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={detail:{},partyRadio:1,isAgent:0,templateVisible:!1,fileListCardUrl:[],fileListDriveLicense:[],fileListDriverLicense:[],fileListAgentIdCard:[],fileListTransportLicense:[],fileListPractitioner:[],pageBean:{page:1,pageSize:100,showTotal:!0},baseQuery:[{property:"fileType",value:3,group:"main",operation:"EQUAL",relation:"AND"}]},t.getLawCase=function(){var e=t.props;(0,e.dispatch)({type:"DynamicLaw/getLawCase",payload:{previewCode:e.previewCode},callback:function(e){e&&(t.setState({partyRadio:parseInt(e.personalororgan,10),isAgent:parseInt(e.isAgent,10)}),t.setStateImage(e,function(){setTimeout(function(){t.setState({detail:e})},100)}))}})},t.handleTemplateVisible=function(e){t.setState({templateVisible:!!e})},t.partyRadioChange=function(e){var a=e.target.value;t.setState({partyRadio:a})},t.isAgentChange=function(e){var a=e.target.value;t.setState({isAgent:a})},t.renderParty=function(){var e=t.props.form,a=t.state.detail;return J.a.createElement("div",{className:Pe.a.inputGroup},J.a.createElement(ge.a,{labelCol:{span:7},wrapperCol:{span:17}},J.a.createElement(ee.a,{gutter:8},J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"类型"},e.getFieldDecorator("personalororgan",{initialValue:1})(J.a.createElement(pe.a,{disabled:!0,style:{width:"100%"}},J.a.createElement(ma,{value:1},"个人"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"姓名"},e.getFieldDecorator("partyName",{initialValue:a.partyName})(J.a.createElement(te.a,{readOnly:!0})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"性别"},e.getFieldDecorator("partySex",{initialValue:a.partySex})(J.a.createElement(pe.a,{style:{width:"100%"}},J.a.createElement(ma,{value:1},"男"),J.a.createElement(ma,{value:2},"女"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"身份证号"},e.getFieldDecorator("partyIdcard",{initialValue:a.partyIdcard,rules:[{validator:_.d}]})(J.a.createElement(te.a,{readOnly:!0})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"联系方式"},e.getFieldDecorator("partyTel",{initialValue:a.partyTel})(J.a.createElement(te.a,{readOnly:!0})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"住址"},e.getFieldDecorator("partyAddr",{initialValue:a.partyAddr})(J.a.createElement(te.a,{readOnly:!0})))))))},t.renderPartyEnterprise=function(){var e=t.props.form,a=t.state.detail;return J.a.createElement("div",{className:Pe.a.inputGroup},J.a.createElement(ge.a,{labelCol:{span:6},wrapperCol:{span:18}},J.a.createElement(ee.a,{gutter:8},J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"类型"},e.getFieldDecorator("personalororgan",{initialValue:2})(J.a.createElement(pe.a,{disabled:!0,style:{width:"100%"}},J.a.createElement(ma,{value:2},"企业或其他组织"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"企业名称"},e.getFieldDecorator("partyName",{initialValue:a.partyName})(J.a.createElement(te.a,{readOnly:!0})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"法定代表人"},e.getFieldDecorator("legalMan",{initialValue:a.legalMan})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{labelCol:{span:7},wrapperCol:{span:17},style:pa,label:"统一信用代码"},e.getFieldDecorator("creditCode",{initialValue:a.creditCode})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"企业电话"},e.getFieldDecorator("companyTel",{initialValue:a.companyTel})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"注册地址"},e.getFieldDecorator("companyAddr",{initialValue:a.companyAddr})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"法人手机"},e.getFieldDecorator("legalManTel",{initialValue:a.legalManTel})(J.a.createElement(te.a,{readOnly:!0})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"法人住址"},e.getFieldDecorator("legalManAddr",{initialValue:a.legalManAddr})(J.a.createElement(te.a,null)))))))},t.renderAgent=function(){var e=t.props.form,a=t.state.detail;return J.a.createElement("div",{className:Pe.a.inputGroup},J.a.createElement(ge.a,{labelCol:{span:7},wrapperCol:{span:17}},J.a.createElement(ee.a,{gutter:8},J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"代理人姓名"},e.getFieldDecorator("agentName",{initialValue:a.agentName})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"性别"},e.getFieldDecorator("agentSex",{initialValue:a.agentSex})(J.a.createElement(pe.a,null,J.a.createElement(ma,{value:1},"男"),J.a.createElement(ma,{value:2},"女"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"身份证号"},e.getFieldDecorator("agentIdcard",{initialValue:a.agentIdcard,rules:[{validator:_.d}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"联系方式"},e.getFieldDecorator("agentTel",{initialValue:a.agentTel,rules:[{validator:_.h}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"住址"},e.getFieldDecorator("agentAddr",{initialValue:a.agentAddr})(J.a.createElement(te.a,null)))))))},t.renderDriver=function(){var e=t.props.form,a=t.state.detail;return J.a.createElement("div",{className:Pe.a.inputGroup},J.a.createElement(ge.a,{labelCol:{span:7},wrapperCol:{span:17}},J.a.createElement(ee.a,{gutter:8},J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"驾驶员姓名"},e.getFieldDecorator("driverName",{initialValue:a.driverName})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"性别"},e.getFieldDecorator("driverSex",{initialValue:a.driverSex})(J.a.createElement(pe.a,null,J.a.createElement(ma,{value:1},"男"),J.a.createElement(ma,{value:2},"女"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"身份证号"},e.getFieldDecorator("driverIdcard",{initialValue:a.driverIdcard,rules:[{validator:_.d}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"联系方式"},e.getFieldDecorator("driverTel",{initialValue:a.driverTel,rules:[{required:!0,validator:_.h}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"住址"},e.getFieldDecorator("driverAddr",{initialValue:a.driverAddr})(J.a.createElement(te.a,null)))))))},t.toops=function(){return J.a.createElement("div",{style:{width:400}},J.a.createElement("h3",null,"非现场执法处罚优惠规则"),J.a.createElement("p",null,"1、违法超限超载",J.a.createElement("span",{style:{color:"red"}},"5吨"),"以上-",J.a.createElement("span",{style:{color:"red"}},"10吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻80%实施处罚。",J.a.createElement("br",null),"2、违法超限超载",J.a.createElement("span",{style:{color:"red"}},"10吨"),"以上-",J.a.createElement("span",{style:{color:"red"}},"20吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻75%实施处罚。",J.a.createElement("br",null),"3、违法超限超载",J.a.createElement("span",{style:{color:"red"}},"20吨"),"以上-",J.a.createElement("span",{style:{color:"red"}},"30吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻70%实施处罚。",J.a.createElement("br",null),"4、违法超限超载",J.a.createElement("span",{style:{color:"red"}},"30吨"),"以上-",J.a.createElement("span",{style:{color:"red"}},"40吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻65%实施处罚。",J.a.createElement("br",null),"5、违法超限超载",J.a.createElement("span",{style:{color:"red"}},"40吨"),"以上的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻60%实施处罚。",J.a.createElement("br",null),"6、1年内同一车辆经动态自动称重设备记录多次违法行为且主动前来接受调查处理的，按《超限运输车辆行驶公路管理规定》的处罚标准，累计罚款不超过",J.a.createElement("span",{style:{color:"red"}},"3万元"),"。"))},t.renderCaseInfo=function(){var e=t.props.form,a=t.state.detail;return J.a.createElement("div",{className:Pe.a.inputGroup},J.a.createElement(ge.a,{labelCol:{span:7},wrapperCol:{span:17}},J.a.createElement(ee.a,{gutter:8},J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"案卷号"},e.getFieldDecorator("caseNo",{initialValue:a.caseNo,rules:[{required:!0,message:"请输入案卷号"}]})(J.a.createElement(Fe.a,{style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"货物名称"},e.getFieldDecorator("goodsName",{initialValue:a.goodsName,rules:[{required:!0,message:"请输入货物名称"}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"承办人"},e.getFieldDecorator("undertaker",{initialValue:a.undertaker||"",rules:[{required:!0,message:"请输入承办人 "}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"案件来源"},e.getFieldDecorator("caseSource",{initialValue:a.caseSource||"非现场执法"})(J.a.createElement(pe.a,null,J.a.createElement(ma,{value:"非现场执法"},"非现场执法"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"车货总重(kg)"},e.getFieldDecorator("weight",{initialValue:a.weight})(J.a.createElement(Fe.a,{readOnly:!0,style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"执法证号"},e.getFieldDecorator("enforcementNo",{initialValue:a.enforcementNo})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement(da,{labelCol:{span:10},wrapperCol:{span:14},style:pa,label:"案由"},e.getFieldDecorator("caseReasonCarNo",{initialValue:a.caseReason?a.caseReason.split(",")[0]:""})(J.a.createElement(te.a,{readOnly:!0})))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement("div",{className:Pe.a.radius},J.a.createElement(da,{wrapperCol:{span:24},style:pa},e.getFieldDecorator("caseReason",{initialValue:a.caseReason?a.caseReason.split(",")[1]:""})(J.a.createElement(te.a,null))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"轴数"},e.getFieldDecorator("axisNum",{initialValue:a.axisNum})(J.a.createElement(Fe.a,{readOnly:!0,style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"协办人"},e.getFieldDecorator("coOrganizer",{initialValue:a.coOrganizer,rules:[{required:!0,message:"请输入协办人"}]})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement("div",{className:we.a.inputTip},J.a.createElement(_e.a,{content:t.toops()},J.a.createElement(Ae.a,{type:"question-circle"}))),J.a.createElement(da,{style:pa,label:"处罚金额",className:we.a.inputLabelLeft},e.getFieldDecorator("punishMoney",{initialValue:a.punishMoney,rules:[{required:!0,message:"请输入处罚金额"}]})(J.a.createElement(Fe.a,{style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"超限(kg)"},e.getFieldDecorator("limited",{initialValue:a.limited})(J.a.createElement(Fe.a,{readOnly:!0,style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"执法证号"},e.getFieldDecorator("organizerNo",{initialValue:a.organizerNo})(J.a.createElement(te.a,null)))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"讨论时间"},e.getFieldDecorator("discussTime",{rules:[{required:!0,message:"请选择讨论时间"}],initialValue:a.discussBeginTime&&a.discussEndTime?[fe()(new Date(a.discussBeginTime),"YYYY-MM-DD HH:mm:ss"),fe()(new Date(a.discussEndTime),"YYYY-MM-DD HH:mm:ss")]:""})(J.a.createElement(oa,{showTime:!0,style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"询问时间"},e.getFieldDecorator("askTime",{initialValue:a.askBeginTime&&a.askEndTime?[fe()(new Date(a.askBeginTime),"YYYY-MM-DD HH:mm:ss"),fe()(new Date(a.askEndTime),"YYYY-MM-DD HH:mm:ss")]:"",rules:[{required:!0,message:"请选择询问时间"}]})(J.a.createElement(oa,{showTime:!0,style:{width:"100%"}})))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"车辆说明"},e.getFieldDecorator("carDesc",{initialValue:a.carDesc})(J.a.createElement(te.a.TextArea,{autosize:!0})))))))},t.formatUploadImg=function(e,a,l){t.setState(se()({},l,e[a]?[{uid:"1",name:"当前图片",status:"done",url:_.B+e[a],thumbUrl:_.B+e[a]}]:[]))},t.setStateImage=function(e,a){t.formatUploadImg(e,"cardUrl","fileListCardUrl"),t.formatUploadImg(e,"driveLicenseUrl","fileListDriveLicense"),t.formatUploadImg(e,"driverLicenseUrl","fileListDriverLicense"),t.formatUploadImg(e,"agentIdcardUrl","fileListAgentIdCard"),t.formatUploadImg(e,"transportLicenseUrl","fileListTransportLicense"),t.formatUploadImg(e,"practitionerUrl","fileListPractitioner"),a&&a()},t.cardUrlChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListCardUrl:e})})},t.driveLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListDriveLicense:e})})},t.driverLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListDriverLicense:e})})},t.agentIdCardChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListAgentIdCard:e})})},t.transportLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListTransportLicense:e})})},t.practitionerChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListPractitioner:e})})},t.imgChangeUtil=function(e,a){"done"===e.file.status?200===e.file.response.code?(re.a.success("上传成功"),a(e.fileList)):re.a.error(e.file.response.code.msg):"error"===e.file.status?re.a.error("上传失败"):"removed"===e.file.status&&a(e.fileList)},t.renderEnclosureDetail=function(){var e=t.props.form,a=t.state,l=a.detail,n=a.isAgent,r=a.fileListCardUrl,i=a.fileListDriveLicense,s=a.fileListDriverLicense,c=a.fileListAgentIdCard,o=a.fileListTransportLicense,m=a.fileListPractitioner,d={name:"files",action:"/result/api/file/v1/fileUpload",listType:"picture",accept:".jpg,.jpeg,.png",data:{type:5,xbType:""},headers:{Authorization:"Bearer ".concat(Object(_.w)("token")[0]),"x-requested-with":"XMLHttpRequest"}};return J.a.createElement(Q.Fragment,null,J.a.createElement(ee.a,{gutter:{md:8,lg:16,xl:16}},J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"当事人身份证/企业营业执照"},e.getFieldDecorator("cardUrl",{initialValue:l.cardUrl,rules:[{required:!0,message:"请上传当事人身份证/企业营业执照"}]})(J.a.createElement(Be.a,$()({},d,{defaultFileList:r,onChange:t.cardUrlChange}),r.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"车辆行驶证"},e.getFieldDecorator("driveLicenseUrl",{initialValue:l.driveLicenseUrl,rules:[{required:!0,message:"请上传车辆行驶证"}]})(J.a.createElement(Be.a,$()({},d,{defaultFileList:i,onChange:t.driveLicenseChange}),i.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"驾驶员驾驶证"},e.getFieldDecorator("driverLicenseUrl",{initialValue:l.driverLicenseUrl,rules:[{required:!0,message:"请上传驾驶员驾驶证"}]})(J.a.createElement(Be.a,$()({},d,{defaultFileList:s,onChange:t.driverLicenseChange}),s.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片")))))),J.a.createElement(ee.a,{gutter:{md:8,lg:16,xl:16}},n?J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"委托代理人身份证"},e.getFieldDecorator("agentIdcardUrl",{initialValue:l.agentIdcardUrl,rules:[{required:!0,message:"请上传委托代理人身份证"}]})(J.a.createElement(Be.a,$()({},d,{defaultFileList:c,onChange:t.agentIdCardChange}),c.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片"))))):null,J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"车辆道路运输证或其他"},e.getFieldDecorator("transportLicenseUrl",{initialValue:l.transportLicenseUrl,rules:[{required:!0,message:"请上传车辆道路运输证或其他"}]})(J.a.createElement(Be.a,$()({},d,{defaultFileList:o,onChange:t.transportLicenseChange}),o.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片"))))),J.a.createElement(le.a,{md:8,sm:24},J.a.createElement(da,{style:pa,label:"驾驶员从业资格证或其他"},e.getFieldDecorator("practitionerUrl",{initialValue:l.practitionerUrl,rules:[{required:!0,message:"请上传驾驶员从业资格证或其他"}]})(J.a.createElement(Be.a,$()({},d,{defaultFileList:m,onChange:t.practitionerChange}),m.length?null:J.a.createElement(me.a,null,J.a.createElement(Ae.a,{type:"upload"})," 选择图片")))))))},t.okHandle=function(){var e=t.props,a=e.form,l=e.previewCode,n=e.dispatch,r=e.handleModalVisible,i=e.modalSuccess,s=t.state.detail;a.validateFields(function(e,c){if(!e){a.resetFields();var o=JSON.parse(JSON.stringify(c)),m=JSON.parse(JSON.stringify(s)),d=c.askTime||["",""],u=c.discussTime||["",""];if(o.askBeginTime=fe()(d[0]).format("YYYY-MM-DD HH:mm:ss"),o.askEndTime=fe()(d[1]).format("YYYY-MM-DD HH:mm:ss"),o.discussBeginTime=fe()(u[0]).format("YYYY-MM-DD HH:mm:ss"),o.discussEndTime=fe()(u[1]).format("YYYY-MM-DD HH:mm:ss"),o.caseReason="".concat(c.caseReasonCarNo,",").concat(c.caseReason),"object"==typeof c.cardUrl){var p=c.cardUrl.file.response;o.cardUrl=p?p.filePath:""}if("object"==typeof c.driveLicenseUrl){var g=c.driveLicenseUrl.file.response;o.driveLicenseUrl=g?g.filePath:""}if("object"==typeof c.driverLicenseUrl){var E=c.driverLicenseUrl.file.response;o.driverLicenseUrl=E?E.filePath:""}if("object"==typeof c.agentIdcardUrl){var f=c.agentIdcardUrl.file.response;o.agentIdcardUrl=f?f.filePath:""}if("object"==typeof c.transportLicenseUrl){var h=c.transportLicenseUrl.file.response;o.transportLicenseUrl=h?h.filePath:""}if("object"==typeof c.practitionerUrl){var y=c.practitionerUrl.file.response;o.practitionerUrl=y?y.filePath:""}for(var v in o.previewCode=l,delete o.askTime,delete o.discussTime,delete o.caseReasonCarNo,o)m[v]=o[v];t.setState({detail:m}),n({type:"DynamicLaw/lawCaseRegist",payload:m,callback:function(){i(),setTimeout(function(){return r()},500)}})}})},t.showTemplateModal=function(){t.handleTemplateVisible(!0)},t.modalTitle=function(){return J.a.createElement("div",{className:Pe.a.modalHeader},J.a.createElement("div",{className:Pe.a.title},J.a.createElement("span",{className:Pe.a.value},"案件登记")),J.a.createElement("div",null,Object(_.b)(ga[0])?J.a.createElement(me.a,{type:"primary",onClick:function(){return t.okHandle()}},"保存案件"):null,Object(_.b)(ga[1])?J.a.createElement(me.a,{className:we.a.import,style:{marginLeft:8},onClick:function(){return t.showTemplateModal()}},"打印预览"):null))},t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){this.getLawCase()}},{key:"render",value:function(){var e=this.props,a=e.form,t=e.modalVisible,l=e.handleModalVisible,n=e.previewCode,r=e.carNo,i=e.loading,s=this.state,c=s.partyRadio,o=s.isAgent,m=s.detail,d=s.templateVisible,u={organCode:m.organCode,previewCode:n,carNo:r,handleModalVisible:this.handleTemplateVisible};return J.a.createElement(da,null,J.a.createElement(M.a,{destroyOnClose:!0,title:this.modalTitle(),visible:t,className:Pe.a.modalStyle,onCancel:function(){return l()},width:1150,footer:null},J.a.createElement(Me.a,{spinning:i},J.a.createElement("div",{className:Pe.a.detailMsg},J.a.createElement("div",{className:Pe.a.detailMsgTitle}," 当事人信息"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},1===c?this.renderParty():this.renderPartyEnterprise())),J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},J.a.createElement("div",{className:Pe.a.detailMsgTitle}," 委托代理人信息"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},J.a.createElement(da,{labelCol:{span:2},wrapperCol:{span:10},style:pa,label:"委托代理人"},a.getFieldDecorator("isAgent",{initialValue:o})(J.a.createElement(ua,{onChange:this.isAgentChange},J.a.createElement(q.a,{value:1},"是"),J.a.createElement(q.a,{value:0},"否")))),o?this.renderAgent():null)),J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},J.a.createElement("div",{className:Pe.a.detailMsgTitle}," 驾驶员信息"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderDriver())),J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},J.a.createElement("div",{className:Pe.a.detailMsgTitle}," 案件信息"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderCaseInfo())),J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},J.a.createElement("div",{className:Pe.a.detailMsgTitle}," 附件"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},"{}"!==JSON.stringify(m)?this.renderEnclosureDetail():null)))),d?J.a.createElement(ca,$()({},u,{modalVisible:d})):null)}}]),a}(Q.PureComponent),h.defaultProps={handleModalVisible:function(){}},f=y))||f)||f,fa=ge.a.Item,ha=pe.a.Option,ya=ae.a.RangePicker,va=["/lawment/dynamic/casehand/lawCaseClose"],ba={pageNo:1,pageSize:10},Da={isStatus:1},wa=Object(K.connect)(function(e){var a=e.DynamicLaw,t=e.TrafficApiV2BusData,l=e.loading,n=e.system,r=e.user;return{Site:e.Site,system:n,currentUser:r.currentUser,DynamicLaw:a,loading:l.models.DynamicLaw,TrafficApiV2BusData:t,api2Loading:l.models.TrafficApiV2BusData}})(v=ge.a.create()(v=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,registerVisible:!1,registerUpdateVisible:!1,formValues:{},carNo:"",detailID:0,previewCode:"",siteCode:"",siteList:[],isRegist:0},t.columns=[{title:"检测站",dataIndex:"siteName"},{title:"车牌号码",dataIndex:"carNo"},{title:"检测时间",width:170,dataIndex:"previewTime",render:function(e){return fe()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"轴数",dataIndex:"axleNumber"},{title:"限重(t)",dataIndex:"weightLimited",render:function(e){return J.a.createElement(de.a,{color:"#87d068"},(e/1e3).toFixed(2)," ")}},{title:"总重(t)",dataIndex:"totalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"超限重(t)",dataIndex:"overLoad",render:function(e){return e>0?J.a.createElement(de.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"overLoadRate",render:function(e){return e?(100*e).toFixed(2):e}},{title:"审核时间",width:170,dataIndex:"executorTime"},{title:"操作",width:140,render:function(e,a){return J.a.createElement(Q.Fragment,null,J.a.createElement(ue.a,{placement:"left",title:"确认车辆信息"},J.a.createElement(me.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),J.a.createElement(ke.a,{type:"vertical"}),J.a.createElement(ue.a,{placement:"left",title:"案件登记"},J.a.createElement(me.a,{style:a.isRegist?{background:"green",borderColor:"green"}:null,onClick:function(){return t.showRegisterModal(a)},type:"primary",shape:"circle",icon:"file-protect",size:"small"})),Object(_.b)(va[0])&&a.isRegist?J.a.createElement(Q.Fragment,null,J.a.createElement(ke.a,{type:"vertical"}),J.a.createElement(ue.a,{placement:"left",title:"案件办结"},J.a.createElement(me.a,{onClick:function(){return t.lawCaseCloseClick(a)},type:"primary",shape:"circle",icon:"file-done",size:"small"}))):null)}}],t.showRegisterModal=function(e){return t.setState({carNo:e.carNo,detailID:e.id,previewCode:e.previewCode}),e.isRegist?t.handleRegisterUpdateVisible(!0):t.handleRegisterVisible(!0)},t.showDetailModal=function(e){t.setState({detailID:e.id,siteCode:e.siteCode,isRegist:e.isRegist}),t.handleModalVisible(!0)},t.lawCaseCloseClick=function(e){var a=Re()(t);if(!e.isRegist)return M.a.warning({title:"系统提示",content:"该案件案件登记未完成，请先案件登记"});var l=t.props.dispatch,n=t.state.formValues;return M.a.confirm({title:"系统提示",content:"案件确认无误，办结完成后，将无法进行更改！",onOk:function(){l({type:"DynamicLaw/lawCaseClose",payload:{previewCode:e.previewCode},callback:function(){re.a.success("操作成功"),a.getList(oe()({},ba,Da,n))}})}})},t.getList=function(e){(0,t.props.dispatch)({type:"TrafficApiV2BusData/busDynamicDataForPage",payload:oe()({},e)})},t.getSiteIN=function(){return{siteCodes:t.state.siteList.map(function(e){return e.code})}},t.handleStandardTableChange=function(e){var a=t.state.formValues,l=oe()({pageNo:e.current,pageSize:e.pageSize},Da,a);t.getList(l)},t.handleFormReset=function(){var e=t.props.form,a=Object(_.w)("organId");e.resetFields(),t.getSite(a,function(){var e=t.getSiteIN();t.setState({formValues:e}),t.getList(oe()({},ba,Da,e))})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l="YYYY-MM-DDTHH:mm:ss",n=a.previewTime,r=a.siteCodes,i=n?{startPreviewTime:fe()(n[0]).format(l),endPreviewTime:fe()(n[1]).format(l)}:{};if(t.getSiteIN().siteCodes.length){var s=r?[r]:t.getSiteIN().siteCodes,c=oe()({},a,i,{siteCodes:s});delete c.previewTime,t.setState({formValues:c}),t.getList(oe()({},ba,Da,c))}else re.a.error("当前机构暂无站点")}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e}),e||t.resetDetail()},t.resetDetail=function(){(0,t.props.dispatch)({type:"TrafficApiV2BusData/resetDetail"})},t.handleRegisterVisible=function(e){t.setState({registerVisible:!!e})},t.handleRegisterUpdateVisible=function(e){t.setState({registerUpdateVisible:!!e}),e||t.setState({carNo:"",detailID:0})},t.treeSelectChange=function(e){t.props.form.setFieldsValue({siteCodes:void 0}),t.getSite(e)},t.getSite=function(e,a){var l=t.props;(0,l.dispatch)({type:"Site/siteByUserSite",payload:{organId:e,siteIds:l.siteList.map(function(e){return e.code})},callback:function(e){var l=e.map(function(e){return"1"===e.siteType?{code:e.siteCode,name:e.siteName}:""});t.setState({siteList:l},function(){a&&a(l)})}})},t.modalSuccess=function(){re.a.success("操作成功");var e=t.state.formValues;t.getList(oe()({},e,Da,e))},t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){var e=this.props.siteList,a={siteCodes:e.map(function(e){return e.code})};this.getList(oe()({},ba,Da,a)),this.setState({siteList:e,formValues:a})}},{key:"renderSimpleForm",value:function(){var e=this.props,a=e.system.treeList,t=e.form.getFieldDecorator,l=this.state.siteList,n=Object(_.w)("organId").toString();return J.a.createElement(ge.a,{onSubmit:this.handleSearch,layout:"inline"},J.a.createElement(ee.a,{gutter:16},J.a.createElement(le.a,{md:5,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),J.a.createElement(fa,{style:{flex:1}},t("name")(J.a.createElement(ne.a,{className:we.a.inputGroupLeftRadius,treeData:a,treeDefaultExpandedKeys:[n],style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测点"),J.a.createElement(fa,{style:{flex:1}},t("siteCodes")(J.a.createElement(pe.a,{dropdownMatchSelectWidth:!1,className:we.a.inputGroupLeftRadius,placeholder:"请选择"},l.map(function(e){return J.a.createElement(ha,{key:e.code,value:e.code},e.name)})))))),J.a.createElement(le.a,{md:5,sm:24},J.a.createElement(te.a.Group,{compact:!0},J.a.createElement(fa,{style:{display:"inline-block",width:"60%"}},t("startOverLoadRate")(J.a.createElement(te.a,{className:"".concat(we.a.inputGroupRightRadius," ").concat(we.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),J.a.createElement(fa,{style:{display:"inline-block",width:"40%"}},t("endOverLoadRate")(J.a.createElement(te.a,{className:we.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),J.a.createElement(fa,{style:{flex:1}},t("axleNumber")(J.a.createElement(pe.a,{className:we.a.inputGroupLeftRadius,placeholder:"请选择"},J.a.createElement(ha,{value:""},"全部轴数"),J.a.createElement(ha,{value:2},"2"),J.a.createElement(ha,{value:3},"3"),J.a.createElement(ha,{value:4},"4"),J.a.createElement(ha,{value:5},"5"),J.a.createElement(ha,{value:6},"6"),J.a.createElement(ha,{value:"other"},"其他")))))),J.a.createElement(le.a,{md:6,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),J.a.createElement(fa,{style:{flex:1}},t("previewTime")(J.a.createElement(ya,{className:we.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[fe()("00:00:00","HH:mm:ss"),fe()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})))))),J.a.createElement(ee.a,{gutter:16},J.a.createElement(le.a,{md:5,sm:24},J.a.createElement(te.a.Group,{compact:!0},J.a.createElement(fa,{style:{display:"inline-block",width:"50%"}},t("startTotalLoad")(J.a.createElement(te.a,{className:"".concat(we.a.inputGroupRightRadius," ").concat(we.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),J.a.createElement(fa,{style:{display:"inline-block",width:"50%"}},t("endTotalLoad")(J.a.createElement(te.a,{className:we.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement(fa,null,t("carNo")(J.a.createElement(te.a,{addonBefore:"车牌号",placeholder:"请输入"})))),J.a.createElement(le.a,{md:10,sm:24,offset:5},J.a.createElement("div",{style:{overflow:"hidden"}},J.a.createElement("div",{style:{float:"right",marginBottom:24}},J.a.createElement(me.a,{type:"primary",htmlType:"submit"},"查询"),J.a.createElement(me.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.TrafficApiV2BusData.dyData,t=e.api2Loading,l=this.state,n=l.isRegist,r=l.modalVisible,i=l.registerVisible,s=l.registerUpdateVisible,c=l.detailID,o=l.siteCode,m=l.previewCode,d=l.carNo,u={handleModalVisible:this.handleModalVisible,detailID:c,siteCode:o,modalSuccess:this.modalSuccess,loading:t,isRegist:n},p={carNo:d,detailID:c,previewCode:m,modalSuccess:this.modalSuccess},g={handleModalVisible:this.handleRegisterVisible},E={handleModalVisible:this.handleRegisterUpdateVisible};return J.a.createElement(Q.Fragment,null,J.a.createElement("div",{className:be.a.tableList},J.a.createElement("div",{className:be.a.tableListForm},this.renderSimpleForm()),J.a.createElement(he.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange})),r&&c?J.a.createElement(Xe,$()({},u,{modalVisible:r})):null,i&&J.a.createElement(na,$()({},p,g,{modalVisible:i})),s&&J.a.createElement(Ea,$()({},p,E,{modalVisible:s})))}}]),a}(Q.PureComponent))||v)||v,La=(t("cWXX"),t("/ezw")),Ca=(t("bP8k"),t("gFTJ")),Na=Object(K.connect)(function(e){return{DynamicLaw:e.DynamicLaw,loading:e.loading.models.DynamicLaw}})(b=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={registerInfo:{},busDynamicLawDate:{},openRecord:[],busStaticData:{}},t.renderCarMsg=function(){var e=t.state.registerInfo;return J.a.createElement(Ca.a,{bordered:!0,size:"small",column:4},J.a.createElement(Ca.a.Item,{label:"车辆所属",span:4},1===e.truckBelong?"个人":"企业"),J.a.createElement(Ca.a.Item,{label:"车牌号码"},e.carNo),J.a.createElement(Ca.a.Item,{label:"车主姓名"},e.vehicleOwner),J.a.createElement(Ca.a.Item,{label:"车辆类型"},e.carType),J.a.createElement(Ca.a.Item,{label:"核定载重(kg)"},e.weightLimited),J.a.createElement(Ca.a.Item,{label:"手机号码"},e.phone),2===e.truckBelong?J.a.createElement(Ca.a.Item,{label:"统一信用码"},e.creditCode):J.a.createElement(Ca.a.Item,{label:"身份证号"},e.idCard),J.a.createElement(Ca.a.Item,{label:"外廓尺寸"},e.externalDimensions),J.a.createElement(Ca.a.Item,{label:"车辆总重(kg)"},e.totalWeight),J.a.createElement(Ca.a.Item,{label:"车辆厂牌"},e.brandName),2===e.truckBelong?J.a.createElement(Ca.a.Item,{label:"法人姓名"},e.legalRepresentative):J.a.createElement(Ca.a.Item,{style:{display:"none"}}),2===e.truckBelong?J.a.createElement(Ca.a.Item,{label:"注册地址"},e.registAddr):J.a.createElement(Ca.a.Item,{label:"车主地址"},e.vehicleOwnerAddr))},t.columns=[{title:"操作员",dataIndex:"executor"},{title:"办理时间",dataIndex:"executorTime"},{title:"状态",dataIndex:"logType"},{title:"原因",dataIndex:"remark"}],t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){var e=this.props.detail,a=e.registerInfo||{};this.setState({registerInfo:a,busDynamicLawDate:e.busDynamicLawDate,openRecord:e.openRecord,busStaticData:e.busStaticData||{}})}},{key:"render",value:function(){var e=this.props.loading,a=this.state,t=a.busDynamicLawDate,l=a.openRecord,n=a.busStaticData;return J.a.createElement("div",{style:{background:"#EEF1FC"}},J.a.createElement(Me.a,{spinning:e},J.a.createElement("div",{className:Pe.a.detailMsg,style:{borderRadius:"0 0 4px 4px"}},J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"profile"})," 车辆基本信息",J.a.createElement(me.a,{style:{float:"right"},size:"small",href:"http://www.gsxt.gov.cn/index.html",target:"_blank"},"企业法人查询")),J.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderCarMsg())),J.a.createElement(Ue.a,{detail:t,isTitle:!0}),"{}"!==JSON.stringify(n)?J.a.createElement(Oe.a,{detail:n}):null,J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"table"})," 操作记录"),J.a.createElement("div",{className:Pe.a.recordList,style:{padding:"0 20px 20px"}},J.a.createElement(Ye.a,{loading:e,list:l,columns:this.columns})))))}}]),a}(Q.PureComponent))||b,Ia=t("Py4S"),Sa=t.n(Ia),Va=Object(K.connect)(function(e){return{DynamicLaw:e.DynamicLaw,loading:e.loading.models.DynamicLaw}})(D=ge.a.create()(D=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={detail:{},partyRadio:1,isAgent:0},t.renderParty=function(){var e=t.state.detail;return J.a.createElement(J.a.Fragment,null,J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"profile"}),"  当事人信息"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},J.a.createElement(Ca.a,{bordered:!0,size:"small"},J.a.createElement(Ca.a.Item,{label:"当事人类型",span:3},"个人"),J.a.createElement(Ca.a.Item,{label:"姓名"},e.partyName),J.a.createElement(Ca.a.Item,{label:"性别"},1===e.partySex?"男":"女"),J.a.createElement(Ca.a.Item,{label:"身份证号"},e.partyIdcard),J.a.createElement(Ca.a.Item,{label:"联系方式"},e.partyTel),J.a.createElement(Ca.a.Item,{label:"住址"},e.partyAddr))))},t.renderPartyEnterprise=function(){var e=t.state.detail;return J.a.createElement(J.a.Fragment,null,J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"profile"}),"  当事人信息"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},J.a.createElement(Ca.a,{bordered:!0,size:"small"},J.a.createElement(Ca.a.Item,{label:"当事人类型",span:3},"企业或者其他组织"),J.a.createElement(Ca.a.Item,{label:"企业名称"},e.partyName),J.a.createElement(Ca.a.Item,{label:"法定代表人"},e.legalMan),J.a.createElement(Ca.a.Item,{label:"统一信用代码"},e.creditCode),J.a.createElement(Ca.a.Item,{label:"企业电话"},e.companyTel),J.a.createElement(Ca.a.Item,{label:"注册地址"},e.companyAddr),J.a.createElement(Ca.a.Item,{label:"法人手机"},e.legalManTel),J.a.createElement(Ca.a.Item,{label:"法人家庭住址"},e.legalManAddr))))},t.renderAgent=function(){var e=t.state.detail;return J.a.createElement(J.a.Fragment,null,J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"profile"}),"  委托代理人信息"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},J.a.createElement(Ca.a,{bordered:!0,size:"small"},J.a.createElement(Ca.a.Item,{label:"代理人姓名"},e.agentName),J.a.createElement(Ca.a.Item,{label:"性别"},1===e.agentSex?"男":"女"),J.a.createElement(Ca.a.Item,{label:"身份证号"},e.agentIdcard),J.a.createElement(Ca.a.Item,{label:"联系方式"},e.agentTel),J.a.createElement(Ca.a.Item,{label:"住址"},e.agentAddr))))},t.renderDriver=function(){var e=t.state.detail;return J.a.createElement(J.a.Fragment,null,J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"profile"}),"  驾驶员信息"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},J.a.createElement(Ca.a,{bordered:!0,size:"small"},J.a.createElement(Ca.a.Item,{label:"驾驶员姓名"},e.driverName),J.a.createElement(Ca.a.Item,{label:"性别"},1===e.driverSex?"男":"女"),J.a.createElement(Ca.a.Item,{label:"身份证号"},e.driverIdcard),J.a.createElement(Ca.a.Item,{label:"联系方式"},e.driverTel),J.a.createElement(Ca.a.Item,{label:"住址"},e.driverAddr))))},t.renderCaseInfo=function(){var e=t.state.detail;return J.a.createElement(J.a.Fragment,null,J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"profile"}),"  案件信息"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},J.a.createElement(Ca.a,{bordered:!0,size:"small",column:4},J.a.createElement(Ca.a.Item,{label:"案件来源",span:2},e.caseSource||"非现场执法"),J.a.createElement(Ca.a.Item,{label:"案由",span:2},e.caseReason?e.caseReason.split(",")[0]+" - "+e.caseReason.split(",")[1]:""),J.a.createElement(Ca.a.Item,{label:"车货总重(t)"},(e.weight/1e3).toFixed(2)),J.a.createElement(Ca.a.Item,{label:"轴数"},e.axisNum),J.a.createElement(Ca.a.Item,{label:"超限"},e.limited),J.a.createElement(Ca.a.Item,{label:"处罚金额"},e.punishMoney),J.a.createElement(Ca.a.Item,{label:"货物名称",span:2},e.goodsName),J.a.createElement(Ca.a.Item,{label:"询问时间",span:2},e.askBeginTime&&e.askEndTime?fe()(new Date(e.askBeginTime)).format("YYYY-MM-DD HH:mm:ss")+" ~ "+fe()(new Date(e.askEndTime)).format("YYYY-MM-DD HH:mm:ss"):""),J.a.createElement(Ca.a.Item,{label:"案卷号",span:2},e.caseNo),J.a.createElement(Ca.a.Item,{label:"讨论时间",span:2},e.discussBeginTime&&e.discussEndTime?fe()(new Date(e.discussBeginTime)).format("YYYY-MM-DD HH:mm:ss")+" ~ "+fe()(new Date(e.discussEndTime)).format("YYYY-MM-DD HH:mm:ss"):""),J.a.createElement(Ca.a.Item,{label:"承办人"},e.undertaker),J.a.createElement(Ca.a.Item,{label:"执法证号"},e.enforcementNo),J.a.createElement(Ca.a.Item,{label:"协办人"},e.coOrganizer),J.a.createElement(Ca.a.Item,{label:"执法证号"},e.organizerNo),J.a.createElement(Ca.a.Item,{label:"车辆说明",span:4},e.carDesc))))},t.renderImg=function(e,a){return J.a.createElement("div",{style:{overflow:"hidden",width:100,height:100}},J.a.createElement(Sa.a,{backdrop:"rgba(255,255,255,.3)",src:_.B+e,alt:a,style:{height:"100px"}}))},t.renderEnclosureDetail=function(){var e=t.state.detail;return J.a.createElement(J.a.Fragment,null,J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"profile"}),"  附件"),J.a.createElement("div",{style:{padding:"0 20px 20px"}},J.a.createElement(Ca.a,{layout:"vertical",bordered:!0,size:"small"},J.a.createElement(Ca.a.Item,{label:"当事人身份证/企业营业执照"},t.renderImg(e.cardUrl,"当事人身份证/企业营业执照")),J.a.createElement(Ca.a.Item,{label:"车辆行驶证"},t.renderImg(e.driveLicenseUrl,"车辆行驶证")),J.a.createElement(Ca.a.Item,{label:"驾驶员驾驶证"},t.renderImg(e.driverLicenseUrl,"驾驶员驾驶证")),J.a.createElement(Ca.a.Item,{label:"委托代理人身份证"},t.renderImg(e.agentIdcardUrl,"委托代理人身份证")),J.a.createElement(Ca.a.Item,{label:"车辆道路运输证或其他"},t.renderImg(e.transportLicenseUrl,"车辆道路运输证或其他")),J.a.createElement(Ca.a.Item,{label:"驾驶员从业资格证或其他"},t.renderImg(e.practitionerUrl,"驾驶员从业资格证或其他")))))},t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){var e=this.props.detail;this.setState({detail:e,partyRadio:parseInt(e.personalororgan),isAgent:parseInt(e.isAgent)})}},{key:"render",value:function(){var e=this.state,a=e.partyRadio,t=e.isAgent,l=e.detail;return J.a.createElement("div",{style:{background:"#EEF1FC"}},1===a?J.a.createElement("div",{className:Pe.a.detailMsg,style:{borderRadius:"0 0 4px 4px"}},this.renderParty()):J.a.createElement("div",{className:Pe.a.detailMsg},this.renderPartyEnterprise()),t?J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}}," ",this.renderAgent()):null,J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},this.renderDriver()),J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}}," ",this.renderCaseInfo()),"{}"!==JSON.stringify(l)?J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},this.renderEnclosureDetail()):null)}}]),a}(Q.PureComponent))||D)||D,xa=["/lawment/dynamic/casehand/lawCaseRevoke","/lawment/dynamic/casehand/getFilePrint"],ka=[{key:"car",tab:"车辆详细信息"},{key:"case",tab:"案件登记信息"}],Ta=Object(K.connect)(function(e){return{DynamicLaw:e.DynamicLaw,loading:e.loading.models.DynamicLaw}})(w=ge.a.create()((C=L=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={key:"car",caseDetail:{},detailID:"",carDetail:{},templateVisible:!1,lawCaseRevokeVisible:!1},t.getLawCase=function(){var e=t.props;(0,e.dispatch)({type:"DynamicLaw/getLawCase",payload:{previewCode:e.previewCode},callback:function(e){e&&t.setState({caseDetail:e})}})},t.getOvertruckRegisterInfo=function(){var e=t.props;(0,e.dispatch)({type:"DynamicLaw/busDynamicLawDataByPreviewCode",payload:{previewCode:e.previewCode},callback:function(e){e&&t.setState({carDetail:e,detailID:e.busDynamicLawDate.id})}})},t.onTabChange=function(e){t.setState({key:e})},t.renderContent=function(e){var a=t.props.previewCode,l=t.state,n=l.caseDetail,r=l.carDetail,i="";switch(e){case"car":i=J.a.createElement(Na,{previewCode:a,detail:r});break;case"case":i=J.a.createElement(Va,{previewCode:a,detail:n});break;default:i=""}return i},t.modalTitle=function(){var e=t.state.carDetail.busDynamicLawDate||{};return J.a.createElement("div",{className:Pe.a.modalHeader},J.a.createElement("div",{className:Pe.a.title},J.a.createElement("span",{className:Pe.a.value},e.carNo),J.a.createElement("span",{className:Pe.a.time},fe()(e.previewTime).format("YYYY-M-D HH:mm:ss"))),J.a.createElement("div",null,Object(_.b)(xa[0])?J.a.createElement(me.a,{style:oe()({background:"#f1a325",borderColor:"#f1a325"},{color:"#fff",marginLeft:5}),onClick:function(){return t.handLawCaseRevokeVisible(!0)}},"退回重审"):null,Object(_.b)(xa[1])?J.a.createElement(me.a,{style:{background:"#38b03f",color:"#fff",marginLeft:5},onClick:function(){return t.handleTemplateVisible(!0)}},"打印预览"):null))},t.modalSuccess=function(){var e=t.props,a=e.handleModalVisible,l=e.modalSuccess;a(),l()},t.handLawCaseRevokeVisible=function(e){t.setState({lawCaseRevokeVisible:!!e})},t.handleTemplateVisible=function(e){t.setState({templateVisible:!!e})},t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){this.getOvertruckRegisterInfo(),this.getLawCase()}},{key:"render",value:function(){var e=this.props,a=e.handleModalVisible,t=e.modalVisible,l=e.loading,n=e.previewCode,r=this.state,i=r.key,s=r.caseDetail,c=r.carDetail,o=r.templateVisible,m=r.lawCaseRevokeVisible,d=r.detailID,u={organCode:s.organCode,previewCode:n,carNo:Object.keys(c).length?c.busDynamicLawDate.carNo:"",handleModalVisible:this.handleTemplateVisible},p={handleModalVisible:this.handLawCaseRevokeVisible,modalSuccess:this.modalSuccess,detailID:d};return J.a.createElement(M.a,{destroyOnClose:!0,title:this.modalTitle(),visible:t,onCancel:function(){return a()},width:1150,footer:null,className:Pe.a.modalStyle},J.a.createElement(R.a,{bordered:!1,tabList:ka,activeTabKey:i,bodyStyle:{padding:0},onTabChange:this.onTabChange,headStyle:{padding:0,margin:"0 24px"}},J.a.createElement(La.a,{loading:l},"{}"!==JSON.stringify(c)?this.renderContent(i):null)),o&&J.a.createElement(ca,$()({},u,{modalVisible:o})),m&&J.a.createElement(ze,$()({},p,{modalVisible:m})))}}]),a}(Q.PureComponent),L.defaultProps={handleModalVisible:function(){}},w=C))||w)||w,Ra=["/lawment/dynamic/penalty"],Fa=ge.a.Item,Ma=pe.a.Option,Ba=Object(K.connect)(function(e){var a=e.DynamicLaw,t=e.loading;return{system:e.system,currentUser:e.user.currentUser,DynamicLaw:a,loading:t.models.DynamicLaw}})(N=ge.a.create()(N=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,formValues:[],detail:{},detailID:0,previewCode:"",importLoading:!1,pageBean:{page:1,pageSize:10,showTotal:!0},baseQuery:[{property:"isArchive",value:0,group:"main",operation:"EQUAL",relation:"AND"},{property:"closCase",value:2,group:"main",operation:"EQUAL",relation:"AND"}]},t.columns=[{title:"案卷号",dataIndex:"caseNo"},{title:"当事人",dataIndex:"partyName"},{title:"车牌号",dataIndex:"caseReason",render:function(e){return e?e.split(",")[0]:""}},{title:"总重(t)",dataIndex:"weight",render:function(e){return(e/1e3).toFixed(2)}},{title:"超重(t)",dataIndex:"limited",render:function(e){return e>0?J.a.createElement(de.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"处罚金额",dataIndex:"punishMoney"},{title:"结案日期",dataIndex:"closeTime"},{title:"承办人",dataIndex:"undertaker"},{title:"状态",dataIndex:"isArchive",render:function(){return"未签批"}},{title:"操作",width:100,render:function(e,a){return J.a.createElement(Q.Fragment,null,J.a.createElement(ue.a,{placement:"left",title:"查看详情"},J.a.createElement(me.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),Object(_.b)(Ra[0])?J.a.createElement(Q.Fragment,null,J.a.createElement(ke.a,{type:"vertical"}),J.a.createElement(ue.a,{placement:"left",title:"签批"},J.a.createElement(me.a,{onClick:function(){return t.placeOnFile(a.previewCode)},type:"primary",shape:"circle",icon:"database",size:"small"}))):null)}}],t.showDetailModal=function(e){t.setState({detailID:e.id,previewCode:e.previewCode}),t.handleModalVisible(!0)},t.placeOnFile=function(e){var a=Re()(t);M.a.confirm({title:"系统提示",content:"确定通过签批吗？",onOk:function(){var t=a.props.dispatch,l=a.state,n=l.pageBean,r=l.formValues,i=l.baseQuery;t({type:"DynamicLaw/batchPass",payload:{previewCode:e},callback:function(){re.a.success("操作成功"),a.getList({pageBean:n,querys:i.concat(r)})}})}})},t.jzUploadFile=function(e){var a=t.props.dispatch,l=t.state,n=l.pageBean,r=l.formValues,i=l.baseQuery;a({type:"DynamicLaw/jzUpload",payload:{previewCode:e},callback:function(){re.a.success("上传成功"),t.getList({pageBean:n,querys:i.concat(r)})}})},t.getList=function(e){(0,t.props.dispatch)({type:"DynamicLaw/getBusDynamicLawCase",payload:oe()({},e,{sorter:[{direction:"DESC",property:"closeTime"}]})})},t.handleStandardTableChange=function(e){var a=t.state,l=a.formValues,n=a.baseQuery,r={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:n.concat(l)};t.getList(r)},t.handleFormReset=function(){var e=t.props.form,a=t.state,l=a.pageBean,n=a.baseQuery;e.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:l,querys:n})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l=t.state,n=l.pageBean,r=l.baseQuery,i=[{property:"limited",value:a.overLoadRateStart&&a.overLoadRateEnd?[a.overLoadRateStart/100,a.overLoadRateEnd/100]:"",group:"main",operation:"BETWEEN",relation:"OR"},{property:"axisNum",value:"other"===a.axisNum?6:a.axisNum||"",group:"main",operation:"other"===a.axisNum?"GREAT":"EQUAL",relation:"OR"},{property:"weight",value:a.totalLoadStart&&a.totalLoadEnd?[1e3*a.totalLoadStart,1e3*a.totalLoadEnd]:"",group:"main",operation:"BETWEEN",relation:"OR"},{property:"caseReason",value:a.caseReason||"",group:"main",operation:"LIKE",relation:"OR"}].filter(function(e){return e.value});t.setState({formValues:i}),t.getList({pageBean:n,querys:r.concat(i)})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.importClick=function(){t.setState({importLoading:!0});var e=t.props.dispatch,a=t.state,l=a.pageBean,n=a.baseQuery,r=a.formValues;e({type:"DynamicLaw/exportBusDynamicLawCase",payload:{pageBean:l,querys:n.concat(r)},callback:function(e){404===e&&re.a.error("暂无数据"),t.setState({importLoading:!1})}})},t.modalSuccess=function(){re.a.success("操作成功");var e=t.state,a=e.pageBean,l=e.formValues,n=e.baseQuery;t.getList({pageBean:a,querys:n.concat(l)})},t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){var e=this.state,a=e.pageBean,t=e.baseQuery;this.getList({pageBean:a,querys:t})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,a=this.state.importLoading;return J.a.createElement(ge.a,{onSubmit:this.handleSearch,layout:"inline"},J.a.createElement(ee.a,{gutter:16},J.a.createElement(le.a,{md:5,sm:24},J.a.createElement(te.a.Group,{compact:!0},J.a.createElement(Fa,{style:{display:"inline-block",width:"60%"}},e("overLoadRateStart")(J.a.createElement(te.a,{className:"".concat(we.a.inputGroupRightRadius," ").concat(we.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),J.a.createElement(Fa,{style:{display:"inline-block",width:"40%"}},e("overLoadRateEnd")(J.a.createElement(te.a,{className:we.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),J.a.createElement(Fa,{style:{flex:1}},e("axisNum")(J.a.createElement(pe.a,{className:we.a.inputGroupLeftRadius,placeholder:"请选择"},J.a.createElement(Ma,{value:""},"全部轴数"),J.a.createElement(Ma,{value:2},"2"),J.a.createElement(Ma,{value:3},"3"),J.a.createElement(Ma,{value:4},"4"),J.a.createElement(Ma,{value:5},"5"),J.a.createElement(Ma,{value:6},"6"),J.a.createElement(Ma,{value:"other"},"其他")))))),J.a.createElement(le.a,{md:5,sm:24},J.a.createElement(te.a.Group,{compact:!0},J.a.createElement(Fa,{style:{display:"inline-block",width:"50%"}},e("totalLoadStart")(J.a.createElement(te.a,{className:"".concat(we.a.inputGroupRightRadius," ").concat(we.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),J.a.createElement(Fa,{style:{display:"inline-block",width:"50%"}},e("totalLoadEnd")(J.a.createElement(te.a,{className:we.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement(Fa,null,e("caseReason")(J.a.createElement(te.a,{addonBefore:"车牌号",placeholder:"请输入"})))),J.a.createElement(le.a,{md:6,sm:24},J.a.createElement("div",{style:{overflow:"hidden"}},J.a.createElement("div",{style:{float:"right",marginBottom:24}},J.a.createElement(me.a,{type:"primary",htmlType:"submit"},"查询"),J.a.createElement(me.a,{className:we.a.import,icon:"import",onClick:this.importClick,loading:a,disabled:a,style:{marginLeft:8}},"导出"),J.a.createElement(me.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.DynamicLaw.data,t=e.loading,l=this.state,n=l.modalVisible,r=l.detailID,i=l.previewCode,s={handleModalVisible:this.handleModalVisible,detailID:r,previewCode:i,modalSuccess:this.modalSuccess};return J.a.createElement(Q.Fragment,null,J.a.createElement("div",{className:be.a.tableList},J.a.createElement("div",{className:be.a.tableListForm},this.renderSimpleForm()),J.a.createElement(he.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange})),n&&r?J.a.createElement(Ta,$()({},s,{modalVisible:n})):null)}}]),a}(Q.PureComponent))||N)||N,Aa=t("k5DC"),Ua=["/lawment/dynamic/filepige/upload","/lawment/dynamic/penalty"],Oa=ge.a.Item,Ya=pe.a.Option,Ha=Object(K.connect)(function(e){var a=e.DynamicLaw,t=e.loading;return{system:e.system,currentUser:e.user.currentUser,DynamicLaw:a,loading:t.models.DynamicLaw}})(I=ge.a.create()(I=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,formValues:[],detailID:0,previewCode:"",importLoading:!1,pageBean:{page:1,pageSize:10,showTotal:!0},baseQuery:[{property:"isArchive",value:1,group:"main",operation:"EQUAL",relation:"AND"},{property:"closCase",value:2,group:"main",operation:"EQUAL",relation:"AND"}]},t.columns=[{title:"案卷号",dataIndex:"caseNo"},{title:"当事人",dataIndex:"partyName"},{title:"车牌号",dataIndex:"caseReason",render:function(e){return e?e.split(",")[0]:""}},{title:"总重(t)",dataIndex:"weight",render:function(e){return(e/1e3).toFixed(2)}},{title:"超重(t)",dataIndex:"limited",render:function(e){return e>0?J.a.createElement(de.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"处罚金额",dataIndex:"punishMoney"},{title:"结案日期",dataIndex:"closeTime"},{title:"承办人",dataIndex:"undertaker"},{title:"状态",dataIndex:"isArchive",render:function(){return"已签批"}},{title:"操作",width:140,render:function(e,a){return J.a.createElement(Q.Fragment,null,J.a.createElement(ue.a,{placement:"left",title:"查看详情"},J.a.createElement(me.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),Object(_.b)(Ua[0])?J.a.createElement(Q.Fragment,null,J.a.createElement(ke.a,{type:"vertical"}),J.a.createElement(ue.a,{placement:"left",title:"案卷上传"},J.a.createElement(me.a,{disabled:!!a.isUpload,onClick:function(){return t.jzUploadFile(a.previewCode)},type:"primary",shape:"circle",icon:"upload",size:"small"}))):null,Object(_.b)(Ua[1])&&2!==a.isArchive?J.a.createElement(Q.Fragment,null," ",J.a.createElement(ke.a,{type:"vertical"}),J.a.createElement(ue.a,{placement:"left",title:"确认归档"},J.a.createElement(me.a,{onClick:function(){return t.placeOnFile(a.previewCode)},type:"primary",shape:"circle",icon:"database",size:"small"}))):null)}}],t.showDetailModal=function(e){t.setState({detailID:e.id,previewCode:e.previewCode}),t.handleModalVisible(!0)},t.placeOnFile=function(e){var a=Re()(t);M.a.confirm({title:"系统提示",content:"确定归档吗？",onOk:function(){var t=a.props.dispatch,l=a.state,n=l.pageBean,r=l.formValues,i=l.baseQuery;t({type:"DynamicLaw/caseArchive",payload:{previewCode:e},callback:function(){re.a.success("操作成功"),a.getList({pageBean:n,querys:i.concat(r)})}})}})},t.jzUploadFile=function(e){var a=t.props.dispatch,l=t.state,n=l.pageBean,r=l.formValues,i=l.baseQuery;a({type:"DynamicLaw/jzUpload",payload:{previewCode:e},callback:function(){re.a.success("上传成功"),t.getList({pageBean:n,querys:i.concat(r)})}})},t.getList=function(e){(0,t.props.dispatch)({type:"DynamicLaw/getBusDynamicLawCase",payload:oe()({},e,{sorter:[{direction:"DESC",property:"closeTime"}]})})},t.handleStandardTableChange=function(e){var a=t.state,l=a.formValues,n=a.baseQuery,r={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:n.concat(l)};t.getList(r)},t.handleFormReset=function(){var e=t.props.form,a=t.state,l=a.pageBean,n=a.baseQuery;e.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:l,querys:n})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l=t.state,n=l.pageBean,r=l.baseQuery,i=[{property:"limited",value:a.overLoadRateStart&&a.overLoadRateEnd?[a.overLoadRateStart/100,a.overLoadRateEnd/100]:"",group:"main",operation:"BETWEEN",relation:"OR"},{property:"axisNum",value:"other"===a.axisNum?6:a.axisNum||"",group:"main",operation:"other"===a.axisNum?"GREAT":"EQUAL",relation:"OR"},{property:"weight",value:a.totalLoadStart&&a.totalLoadEnd?[1e3*a.totalLoadStart,1e3*a.totalLoadEnd]:"",group:"main",operation:"BETWEEN",relation:"OR"},{property:"caseReason",value:a.caseReason||"",group:"main",operation:"LIKE",relation:"OR"}].filter(function(e){return e.value});t.setState({formValues:i}),t.getList({pageBean:n,querys:r.concat(i)})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.importClick=function(){t.setState({importLoading:!0});var e=t.props.dispatch,a=t.state,l=a.pageBean,n=a.baseQuery,r=a.formValues;e({type:"DynamicLaw/exportBusDynamicLawCase",payload:{pageBean:l,querys:n.concat(r)},callback:function(e){404===e&&re.a.error("暂无数据"),t.setState({importLoading:!1})}})},t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){var e=this.state,a=e.pageBean,t=e.baseQuery;this.getList({pageBean:a,querys:t})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,a=this.state.importLoading;return J.a.createElement(ge.a,{onSubmit:this.handleSearch,layout:"inline"},J.a.createElement(ee.a,{gutter:16},J.a.createElement(le.a,{md:5,sm:24},J.a.createElement(te.a.Group,{compact:!0},J.a.createElement(Oa,{style:{display:"inline-block",width:"60%"}},e("overLoadRateStart")(J.a.createElement(te.a,{className:"".concat(we.a.inputGroupRightRadius," ").concat(we.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),J.a.createElement(Oa,{style:{display:"inline-block",width:"40%"}},e("overLoadRateEnd")(J.a.createElement(te.a,{className:we.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),J.a.createElement(Oa,{style:{flex:1}},e("axisNum")(J.a.createElement(pe.a,{className:we.a.inputGroupLeftRadius,placeholder:"请选择"},J.a.createElement(Ya,{value:""},"全部轴数"),J.a.createElement(Ya,{value:2},"2"),J.a.createElement(Ya,{value:3},"3"),J.a.createElement(Ya,{value:4},"4"),J.a.createElement(Ya,{value:5},"5"),J.a.createElement(Ya,{value:6},"6"),J.a.createElement(Ya,{value:"other"},"其他")))))),J.a.createElement(le.a,{md:5,sm:24},J.a.createElement(te.a.Group,{compact:!0},J.a.createElement(Oa,{style:{display:"inline-block",width:"50%"}},e("totalLoadStart")(J.a.createElement(te.a,{className:"".concat(we.a.inputGroupRightRadius," ").concat(we.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),J.a.createElement(Oa,{style:{display:"inline-block",width:"50%"}},e("totalLoadEnd")(J.a.createElement(te.a,{className:we.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement(Oa,null,e("caseReason")(J.a.createElement(te.a,{addonBefore:"车牌号",placeholder:"请输入"})))),J.a.createElement(le.a,{md:6,sm:24},J.a.createElement("div",{style:{overflow:"hidden"}},J.a.createElement("div",{style:{float:"right",marginBottom:24}},J.a.createElement(me.a,{type:"primary",htmlType:"submit"},"查询"),J.a.createElement(me.a,{className:we.a.import,icon:"import",onClick:this.importClick,loading:a,disabled:a,style:{marginLeft:8}},"导出"),J.a.createElement(me.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.DynamicLaw.data,t=e.loading,l=this.state,n=l.modalVisible,r=l.detailID,i=l.previewCode,s={handleModalVisible:this.handleModalVisible,detailID:r,previewCode:i};return J.a.createElement(Q.Fragment,null,J.a.createElement("div",{className:be.a.tableList},J.a.createElement("div",{className:be.a.tableListForm},this.renderSimpleForm()),J.a.createElement(he.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange})),n&&r?J.a.createElement(Aa.a,$()({},s,{modalVisible:n})):null)}}]),a}(Q.PureComponent))||I)||I,Pa=["/lawment/dynamic/casehand/focusData"],Ga=Object(K.connect)(function(e){return{DynamicLaw:e.DynamicLaw,loading:e.loading.models.DynamicLaw}})(S=function(e){function a(e){var t;return A()(this,a),(t=H()(this,G()(a).call(this,e))).state={registerInfo:{},busDynamicLawDate:{},openRecord:[],busStaticData:{},focusDataVisible:!1},t.handleFocusModalVisible=function(e){t.setState({focusDataVisible:!!e})},t.modalSuccess=function(){(0,t.props.handleModalVisible)()},t.modalTitle=function(){var e=t.state.busDynamicLawDate;return J.a.createElement("div",{className:Pe.a.modalHeader},J.a.createElement("div",{className:Pe.a.title},J.a.createElement("span",{className:Pe.a.value},e.carNo),J.a.createElement("span",{className:Pe.a.time},fe()(e.previewTime).format("YYYY-M-D HH:mm:ss"))),J.a.createElement("div",null,Object(_.b)(Pa[0])?J.a.createElement(me.a,{style:oe()({background:"#f1a325",borderColor:"#f1a325"},{color:"#fff"}),onClick:function(){return t.focusDataClick()}},"重点关注"):null))},t.focusDataClick=function(){t.handleFocusModalVisible(!0)},t.getBusDynamicLawDataByPreviewCode=function(){var e=t.props;(0,e.dispatch)({type:"DynamicLaw/busDynamicLawDataByPreviewCode",payload:{previewCode:e.previewCode},callback:function(e){if(e){var a=e.registerInfo||{};t.setState({registerInfo:a,busDynamicLawDate:e.busDynamicLawDate,openRecord:e.openRecord,busStaticData:e.busStaticData||{}})}}})},t.renderCarMsg=function(){var e=t.state,a=e.registerInfo,l=e.busDynamicLawDate;return J.a.createElement(Ca.a,{bordered:!0,size:"small",column:4},J.a.createElement(Ca.a.Item,{label:"车辆所属",span:4},1===a.truckBelong?"个人":"企业"),J.a.createElement(Ca.a.Item,{label:"车牌号码"},a.carNo||l.carNo),J.a.createElement(Ca.a.Item,{label:"车主姓名"},a.vehicleOwner),J.a.createElement(Ca.a.Item,{label:"车辆类型"},a.carType),J.a.createElement(Ca.a.Item,{label:"核定载重(kg)"},a.weightLimited),J.a.createElement(Ca.a.Item,{label:"手机号码"},a.phone),2===a.truckBelong?J.a.createElement(Ca.a.Item,{label:"统一信用码"},a.creditCode):J.a.createElement(Ca.a.Item,{label:"身份证号"},a.idCard),J.a.createElement(Ca.a.Item,{label:"外廓尺寸"},a.externalDimensions),J.a.createElement(Ca.a.Item,{label:"车辆总重(kg)"},a.totalWeight),J.a.createElement(Ca.a.Item,{label:"车辆厂牌"},a.brandName),2===a.truckBelong?J.a.createElement(Ca.a.Item,{label:"法人姓名"},a.legalRepresentative):J.a.createElement(Ca.a.Item,{style:{display:"none"}}),2===a.truckBelong?J.a.createElement(Ca.a.Item,{label:"注册地址"},a.registAddr):J.a.createElement(Ca.a.Item,{label:"车主地址"},a.vehicleOwnerAddr))},t.columns=[{title:"操作员",dataIndex:"executor"},{title:"办理时间",dataIndex:"executorTime"},{title:"状态",dataIndex:"logType"},{title:"原因",dataIndex:"remark"}],t.myCarousel=J.a.createRef(),t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){this.getBusDynamicLawDataByPreviewCode()}},{key:"render",value:function(){var e=this.props,a=e.loading,t=e.modalVisible,l=e.handleModalVisible,n=this.state,r=n.busDynamicLawDate,i=n.openRecord,s=n.focusDataVisible,c=n.registerInfo,o=n.busStaticData,m={handleModalVisible:this.handleFocusModalVisible,modalSuccess:this.modalSuccess,detail:{busDynamicLawDate:r,registerInfo:c}};return J.a.createElement(Q.Fragment,null,J.a.createElement(M.a,{destroyOnClose:!0,className:Pe.a.modalStyle,title:this.modalTitle(),visible:t,onCancel:function(){return l()},width:1150,footer:null},J.a.createElement(Me.a,{spinning:a},J.a.createElement("div",{className:Pe.a.detailMsg},J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"profile"})," 车辆基本信息",J.a.createElement(me.a,{style:{float:"right"},size:"small",href:"http://www.gsxt.gov.cn/index.html",target:"_blank"},"企业法人查询")),J.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderCarMsg())),J.a.createElement(Ue.a,{detail:r,isTitle:!0}),"{}"!==JSON.stringify(o)?J.a.createElement(Oe.a,{detail:o}):null,J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"table"})," 操作记录"),J.a.createElement("div",{className:Pe.a.recordList,style:{padding:"0 20px 20px"}},J.a.createElement(Ye.a,{loading:a,list:i,columns:this.columns}))))),s?J.a.createElement(je.a,$()({},m,{modalVisible:s})):null)}}]),a}(Q.PureComponent))||S,za=ge.a.Item,ja=pe.a.Option,qa=Object(K.connect)(function(e){var a=e.system,t=e.DynamicLaw,l=e.loading;return{Site:e.Site,system:a,DynamicLaw:t,loading:l.models.DynamicLaw}})(V=ge.a.create()(V=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,previewCode:"",formValues:[],siteList:[],importLoading:!1,pageBean:{page:1,pageSize:10,showTotal:!0},organCode:""},t.columns=[{title:"检测站",dataIndex:"siteName"},{title:"车牌号",dataIndex:"carNo"},{title:"检测时间",width:170,dataIndex:"previewTime",render:function(e){return fe()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"轴数",dataIndex:"axleNumber"},{title:"总重(t)",dataIndex:"totalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"overLoadRate",render:function(e){return e?(100*e).toFixed(2):e}},{title:"承办人",dataIndex:"createBy"},{title:"作废时间",width:170,dataIndex:"createTime"},{title:"作废理由",dataIndex:"reson"},{title:"操作",width:70,render:function(e,a){return J.a.createElement(Q.Fragment,null,J.a.createElement(ue.a,{placement:"left",title:"查看详情"},J.a.createElement(me.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})))}}],t.showDetailModal=function(e){t.setState({previewCode:e.previewCode}),t.handleModalVisible(!0)},t.getList=function(e){(0,t.props.dispatch)({type:"DynamicLaw/getBusInvalidData",payload:e})},t.getSiteIN=function(){return[{property:"siteCode",value:t.state.siteList.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}]},t.handleStandardTableChange=function(e){var a=t.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a.length?a:t.getSiteIN()};t.getList(l)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean,l=Object(_.w)("organId");e.resetFields(),t.setState({formValues:[],organCode:""});t.getSite(l,function(){t.getList({pageBean:a,querys:t.getSiteIN()})})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l=t.state,n=l.pageBean,r=(l.organCode,Object(_.w)("organId").toString(),[a.siteCode?{property:"siteCode",value:a.siteCode||"",group:"main",operation:"EQUAL",relation:"AND"}:t.getSiteIN()[0].value.length?t.getSiteIN()[0]:{},{property:"overLoadRate",value:a.overLoadRateStart&&a.overLoadRateEnd?[a.overLoadRateStart/100,a.overLoadRateEnd/100]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"axleNumber",value:"other"===a.axleNumber?6:a.axleNumber||"",group:"main",operation:"other"===a.axleNumber?"GREAT":"EQUAL",relation:"AND"},{property:"previewTime",value:a.previewTime?[fe()(a.previewTime[0]).format("YYYY-MM-DD HH:mm:ss"),fe()(a.previewTime[1]).format("YYYY-MM-DD HH:mm:ss")]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"totalLoad",value:a.totalLoadStart&&a.totalLoadEnd?[1e3*a.totalLoadStart,1e3*a.totalLoadEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"carNo",value:a.carNo||"",group:"main",operation:"LIKE",relation:"AND"}].filter(function(e){return e.value}));t.setState({formValues:r}),t.getList({pageBean:n,querys:r})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.getSite=function(e,a){var l=t.props;(0,l.dispatch)({type:"Site/siteByUserSite",payload:{organId:e,siteIds:l.siteList.map(function(e){return e.code})},callback:function(e){var l=e.map(function(e){return"1"===e.siteType?{code:e.siteCode,name:e.siteName}:""});t.setState({siteList:l},function(){a&&a(l)})}})},t.treeSelectChange=function(e){t.props.form.setFieldsValue({siteCode:""}),t.getSite(e),t.setState({organCode:e})},t.importClick=function(){t.setState({importLoading:!0});var e=t.props.dispatch,a=t.state,l=a.pageBean,n=a.formValues;e({type:"DynamicLaw/exportBusInvalid",payload:{pageBean:l,querys:n.length?n:t.getSiteIN()},callback:function(e){404===e&&re.a.error("暂无数据"),t.setState({importLoading:!1})}})},t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean,a=this.props.siteList,t=[{property:"siteCode",value:a.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}];this.getList({pageBean:e,querys:t}),this.setState({siteList:a})}},{key:"renderSimpleForm",value:function(){var e=this.props,a=e.system.treeList,t=e.form.getFieldDecorator,l=this.state,n=l.siteList,r=l.importLoading,i=Object(_.w)("organId").toString();return J.a.createElement(ge.a,{onSubmit:this.handleSearch,layout:"inline"},J.a.createElement(ee.a,{gutter:16},J.a.createElement(le.a,{md:5,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),J.a.createElement(za,{style:{flex:1}},t("name")(J.a.createElement(ne.a,{className:we.a.inputGroupLeftRadius,treeData:a,treeDefaultExpandedKeys:[i],style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测点"),J.a.createElement(za,{style:{flex:1}},t("siteCode")(J.a.createElement(pe.a,{dropdownMatchSelectWidth:!1,className:we.a.inputGroupLeftRadius,placeholder:"请选择"},n.map(function(e){return J.a.createElement(ja,{key:e.code,value:e.code},e.name)})))))),J.a.createElement(le.a,{md:5,sm:24},J.a.createElement(te.a.Group,{compact:!0},J.a.createElement(za,{style:{display:"inline-block",width:"60%"}},t("overLoadRateStart")(J.a.createElement(te.a,{className:"".concat(we.a.inputGroupRightRadius," ").concat(we.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),J.a.createElement(za,{style:{display:"inline-block",width:"40%"}},t("overLoadRateEnd")(J.a.createElement(te.a,{className:we.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),J.a.createElement(za,{style:{flex:1}},t("axleNumber")(J.a.createElement(pe.a,{className:we.a.inputGroupLeftRadius,placeholder:"请选择"},J.a.createElement(ja,{value:""},"全部轴数"),J.a.createElement(ja,{value:2},"2"),J.a.createElement(ja,{value:3},"3"),J.a.createElement(ja,{value:4},"4"),J.a.createElement(ja,{value:5},"5"),J.a.createElement(ja,{value:6},"6"),J.a.createElement(ja,{value:"other"},"其他")))))),J.a.createElement(le.a,{md:6,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),J.a.createElement(za,{style:{flex:1}},t("previewTime")(J.a.createElement(ae.a.RangePicker,{className:we.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[fe()("00:00:00","HH:mm:ss"),fe()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})))))),J.a.createElement(ee.a,{gutter:16},J.a.createElement(le.a,{md:5,sm:24},J.a.createElement(te.a.Group,{compact:!0},J.a.createElement(za,{style:{display:"inline-block",width:"50%"}},t("totalLoadStart")(J.a.createElement(te.a,{className:"".concat(we.a.inputGroupRightRadius," ").concat(we.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),J.a.createElement(za,{style:{display:"inline-block",width:"50%"}},t("totalLoadEnd")(J.a.createElement(te.a,{className:we.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement(za,null,t("carNo")(J.a.createElement(te.a,{addonBefore:"车牌号",placeholder:"请输入"})))),J.a.createElement(le.a,{md:10,sm:24,offset:5},J.a.createElement("div",{style:{overflow:"hidden"}},J.a.createElement("div",{style:{float:"right",marginBottom:24}},J.a.createElement(me.a,{type:"primary",htmlType:"submit"},"查询"),J.a.createElement(me.a,{className:we.a.import,icon:"import",onClick:this.importClick,loading:r,disabled:r,style:{marginLeft:8}},"导出"),J.a.createElement(me.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.DynamicLaw.data,t=e.loading,l=this.state,n=l.modalVisible,r=l.previewCode,i={handleModalVisible:this.handleModalVisible,previewCode:r};return J.a.createElement(Q.Fragment,null,J.a.createElement("div",{className:be.a.tableList},J.a.createElement("div",{className:be.a.tableListForm},this.renderSimpleForm()),J.a.createElement(he.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange})),n?J.a.createElement(Ga,$()({},i,{modalVisible:n})):null)}}]),a}(Q.PureComponent))||V)||V,Qa=["/lawment/dynamic/casehand/focusData"],Ja=Object(K.connect)(function(e){return{DynamicLaw:e.DynamicLaw,loading:e.loading.models.DynamicLaw}})(x=function(e){function a(e){var t;return A()(this,a),(t=H()(this,G()(a).call(this,e))).state={registerInfo:{},busDynamicLawDate:{},openRecord:[],busStaticData:{},focusDataVisible:!1},t.getBusDynamicLawDataByPreviewCode=function(){var e=t.props;(0,e.dispatch)({type:"DynamicLaw/busDynamicLawDataByPreviewCode",payload:{previewCode:e.previewCode},callback:function(e){if(e){var a=e.registerInfo||{};t.setState({registerInfo:a,busDynamicLawDate:e.busDynamicLawDate,openRecord:e.openRecord,busStaticData:e.busStaticData||{}})}}})},t.renderCarMsg=function(){var e=t.state,a=e.registerInfo,l=e.busDynamicLawDate;return J.a.createElement(Ca.a,{bordered:!0,size:"small",column:4},J.a.createElement(Ca.a.Item,{label:"车辆所属",span:4},1===a.truckBelong?"个人":"企业"),J.a.createElement(Ca.a.Item,{label:"车牌号码"},a.carNo||l.carNo),J.a.createElement(Ca.a.Item,{label:"车主姓名"},a.vehicleOwner),J.a.createElement(Ca.a.Item,{label:"车辆类型"},a.carType),J.a.createElement(Ca.a.Item,{label:"核定载重(kg)"},a.weightLimited),J.a.createElement(Ca.a.Item,{label:"手机号码"},a.phone),2===a.truckBelong?J.a.createElement(Ca.a.Item,{label:"统一信用码"},a.creditCode):J.a.createElement(Ca.a.Item,{label:"身份证号"},a.idCard),J.a.createElement(Ca.a.Item,{label:"外廓尺寸"},a.externalDimensions),J.a.createElement(Ca.a.Item,{label:"车辆总重(kg)"},a.totalWeight),J.a.createElement(Ca.a.Item,{label:"车辆厂牌"},a.brandName),2===a.truckBelong?J.a.createElement(Ca.a.Item,{label:"法人姓名"},a.legalRepresentative):J.a.createElement(Ca.a.Item,{style:{display:"none"}}),2===a.truckBelong?J.a.createElement(Ca.a.Item,{label:"注册地址"},a.registAddr):J.a.createElement(Ca.a.Item,{label:"车主地址"},a.vehicleOwnerAddr))},t.modalSuccess=function(){(0,t.props.handleModalVisible)()},t.modalTitle=function(){var e=t.state.busDynamicLawDate;return J.a.createElement("div",{className:Pe.a.modalHeader},J.a.createElement("div",{className:Pe.a.title},J.a.createElement("span",{className:Pe.a.value},e.carNo),J.a.createElement("span",{className:Pe.a.time},fe()(e.previewTime).format("YYYY-M-D HH:mm:ss"))),J.a.createElement("div",null,Object(_.b)(Qa[0])?J.a.createElement(me.a,{style:oe()({background:"#f1a325",borderColor:"#f1a325"},{color:"#fff"}),onClick:function(){return t.focusDataClick()}},"重点关注"):null))},t.focusDataClick=function(){t.handleFocusModalVisible(!0)},t.handleFocusModalVisible=function(e){t.setState({focusDataVisible:!!e})},t.renderImg=function(e,a){return J.a.createElement("div",{style:{overflow:"hidden",width:100,height:100}},J.a.createElement(Sa.a,{backdrop:"rgba(255,255,255,.3)",src:_.B+e,alt:a,style:{height:"100px"}}))},t.columns=[{title:"操作员",dataIndex:"executor"},{title:"办理时间",dataIndex:"executorTime"},{title:"状态",dataIndex:"logType"},{title:"原因",dataIndex:"remark"}],t.myCarousel=J.a.createRef(),t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){this.getBusDynamicLawDataByPreviewCode()}},{key:"render",value:function(){var e=this.props,a=e.loading,t=e.modalVisible,l=e.handleModalVisible,n=e.enclosureList,r=this.state,i=r.busDynamicLawDate,s=r.openRecord,c=r.focusDataVisible,o=r.registerInfo,m=r.busStaticData,d={handleModalVisible:this.handleFocusModalVisible,modalSuccess:this.modalSuccess,detail:{busDynamicLawDate:i,registerInfo:o}};return J.a.createElement(Q.Fragment,null,J.a.createElement(M.a,{destroyOnClose:!0,title:this.modalTitle(),visible:t,onCancel:function(){return l()},width:1100,footer:null,className:Pe.a.modalStyle},J.a.createElement(Me.a,{spinning:a},J.a.createElement("div",{className:Pe.a.detailMsg},J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"profile"})," 车辆基本信息",J.a.createElement(me.a,{style:{float:"right"},size:"small",href:"http://www.gsxt.gov.cn/index.html",target:"_blank"},"企业法人查询")),J.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderCarMsg())),J.a.createElement(Ue.a,{detail:i,isTitle:!0}),"{}"!==JSON.stringify(m)?J.a.createElement(Oe.a,{detail:m}):null,J.a.createElement("div",{className:Pe.a.detailMsg,style:{padding:20,marginTop:16}},J.a.createElement("div",{className:we.a.modalTitle},J.a.createElement(Ae.a,{type:"file"})," 附件记录"),J.a.createElement(Ca.a,{layout:"vertical",bordered:!0,size:"small",column:4},J.a.createElement(Ca.a.Item,{label:"委托代理人身份证照片"},this.renderImg(n.agentIdcardUrl,"委托代理人身份证照片")),J.a.createElement(Ca.a.Item,{label:"撤销凭证照片"},this.renderImg(n.cancelProofUrl,"委托代理人身份证照片")),J.a.createElement(Ca.a.Item,{label:"当事人身份证/企业营业执照"},this.renderImg(n.cardUrl,"当事人身份证/企业营业执照")),J.a.createElement(Ca.a.Item,{label:"车辆行驶证图片"},this.renderImg(n.driveLicenseUrl,"车辆行驶证图片")))),J.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},J.a.createElement("div",{className:Pe.a.detailMsgTitle},J.a.createElement(Ae.a,{type:"table"})," 操作记录"),J.a.createElement("div",{className:Pe.a.recordList,style:{padding:"0 20px 20px"}},J.a.createElement(Ye.a,{loading:a,list:s,columns:this.columns}))))),c?J.a.createElement(je.a,$()({},d,{modalVisible:c})):null)}}]),a}(Q.PureComponent))||x,Wa=ge.a.Item,Ka=pe.a.Option,Xa=["/lawment/dynamic/penalty/info"],_a=Object(K.connect)(function(e){return{system:e.system,DynamicLaw:e.DynamicLaw,loading:e.loading.models.DynamicLaw}})(k=ge.a.create()(k=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,formValues:[],siteList:[],importLoading:!1,pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"车牌号",dataIndex:"carNo"},{title:"检测时间",width:170,dataIndex:"previewTime",render:function(e){return fe()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"轴数",dataIndex:"axleNumber"},{title:"总重(t)",dataIndex:"totalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"超限重(t)",dataIndex:"overLoad",render:function(e){return e>0?J.a.createElement(de.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"overLoadRate",render:function(e){return e?(100*e).toFixed(2):e}},{title:"承办人",dataIndex:"createBy"},{title:"撤销时间",width:170,dataIndex:"createTime"},{title:"撤销理由",dataIndex:"reason",render:function(e){return e}},Object(_.b)(Xa[0])?{title:"操作",width:70,render:function(e,a){return J.a.createElement(Q.Fragment,null,J.a.createElement(ue.a,{placement:"left",title:"查看详情"},J.a.createElement(me.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})))}}:""].filter(function(e){return e}),t.showDetailModal=function(e){t.setState({previewCode:e.previewCode,enclosureList:{agentIdcardUrl:e.agentIdcardUrl,cancelProofUrl:e.cancelProofUrl,cardUrl:e.cardUrl,driveLicenseUrl:e.driveLicenseUrl}}),t.handleModalVisible(!0)},t.getList=function(e){(0,t.props.dispatch)({type:"DynamicLaw/getBusPenaltyData",payload:oe()({},e,{sorter:[{direction:"DESC",property:"previewTime"}]})})},t.getSiteIN=function(){return[{property:"siteCode",value:t.state.siteList.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}]},t.handleStandardTableChange=function(e){var a=t.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a.length?a:t.getSiteIN()};t.getList(l)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields();var l=Object(_.w)("organId");t.setState({formValues:[]}),t.getSite(l,function(){t.getList({pageBean:a,querys:t.getSiteIN()})})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l=t.state.pageBean,n=[a.siteCode?{property:"siteCode",value:a.siteCode||"",group:"main",operation:"EQUAL",relation:"AND"}:t.getSiteIN()[0].value.length?t.getSiteIN()[0]:{},{property:"overLoadRate",value:a.overLoadRateStart&&a.overLoadRateEnd?[a.overLoadRateStart/100,a.overLoadRateEnd/100]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"axleNumber",value:"other"===a.axleNumber?6:a.axleNumber||"",group:"main",operation:"other"===a.axleNumber?"GREAT":"EQUAL",relation:"AND"},{property:"previewTime",value:a.previewTime?[fe()(a.previewTime[0]).format("YYYY-MM-DD HH:mm:ss"),fe()(a.previewTime[1]).format("YYYY-MM-DD HH:mm:ss")]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"totalLoad",value:a.totalLoadStart&&a.totalLoadEnd?[1e3*a.totalLoadStart,1e3*a.totalLoadEnd]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"carNo",value:a.carNo||"",group:"main",operation:"LIKE",relation:"AND"}].filter(function(e){return e.value});t.setState({formValues:n}),t.getList({pageBean:l,querys:n})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.getSite=function(e,a){var l=t.props;(0,l.dispatch)({type:"Site/siteByUserSite",payload:{organId:e,siteIds:l.siteList.map(function(e){return e.code})},callback:function(e){var l=e.map(function(e){return"1"===e.siteType?{code:e.siteCode,name:e.siteName}:""});t.setState({siteList:l},function(){a&&a(l)})}})},t.treeSelectChange=function(e){t.props.form.setFieldsValue({siteCode:""}),t.getSite(e)},t.importClick=function(){t.setState({importLoading:!0});var e=t.props.dispatch,a=t.state,l=a.pageBean,n=a.formValues;e({type:"DynamicLaw/exportBusPenalty",payload:{pageBean:l,querys:n.length?n:t.getSiteIN()},callback:function(e){404===e&&re.a.error("暂无数据"),t.setState({importLoading:!1})}})},t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean,a=this.props.siteList,t=[{property:"siteCode",value:a.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}];this.getList({pageBean:e,querys:t}),this.setState({siteList:a})}},{key:"renderSimpleForm",value:function(){var e=this.props,a=e.system.treeList,t=e.form.getFieldDecorator,l=this.state.importLoading,n=this.state.siteList,r=Object(_.w)("organId").toString();return J.a.createElement(ge.a,{onSubmit:this.handleSearch,layout:"inline"},J.a.createElement(ee.a,{gutter:16},J.a.createElement(le.a,{md:5,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),J.a.createElement(Wa,{style:{flex:1}},t("name")(J.a.createElement(ne.a,{className:we.a.inputGroupLeftRadius,treeData:a,treeDefaultExpandedKeys:[r],style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测点"),J.a.createElement(Wa,{style:{flex:1}},t("siteCode")(J.a.createElement(pe.a,{dropdownMatchSelectWidth:!1,className:we.a.inputGroupLeftRadius,placeholder:"请选择"},n.map(function(e){return J.a.createElement(Ka,{key:e.code,value:e.code},e.name)})))))),J.a.createElement(le.a,{md:5,sm:24},J.a.createElement(te.a.Group,{compact:!0},J.a.createElement(Wa,{style:{display:"inline-block",width:"60%"}},t("overLoadRateStart")(J.a.createElement(te.a,{className:"".concat(we.a.inputGroupRightRadius," ").concat(we.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),J.a.createElement(Wa,{style:{display:"inline-block",width:"40%"}},t("overLoadRateEnd")(J.a.createElement(te.a,{className:we.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),J.a.createElement(Wa,{style:{flex:1}},t("axleNumber")(J.a.createElement(pe.a,{className:we.a.inputGroupLeftRadius,placeholder:"请选择"},J.a.createElement(Ka,{value:""},"全部轴数"),J.a.createElement(Ka,{value:2},"2"),J.a.createElement(Ka,{value:3},"3"),J.a.createElement(Ka,{value:4},"4"),J.a.createElement(Ka,{value:5},"5"),J.a.createElement(Ka,{value:6},"6"),J.a.createElement(Ka,{value:"other"},"其他")))))),J.a.createElement(le.a,{md:6,sm:24},J.a.createElement("div",{className:we.a.inputMain},J.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),J.a.createElement(Wa,{style:{flex:1}},t("previewTime")(J.a.createElement(ae.a.RangePicker,{className:we.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[fe()("00:00:00","HH:mm:ss"),fe()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})))))),J.a.createElement(ee.a,{gutter:16},J.a.createElement(le.a,{md:5,sm:24},J.a.createElement(te.a.Group,{compact:!0},J.a.createElement(Wa,{style:{display:"inline-block",width:"50%"}},t("totalLoadStart")(J.a.createElement(te.a,{className:"".concat(we.a.inputGroupRightRadius," ").concat(we.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),J.a.createElement(Wa,{style:{display:"inline-block",width:"50%"}},t("totalLoadEnd")(J.a.createElement(te.a,{className:we.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),J.a.createElement(le.a,{md:4,sm:24},J.a.createElement(Wa,null,t("carNo")(J.a.createElement(te.a,{addonBefore:"车牌号",placeholder:"请输入"})))),J.a.createElement(le.a,{md:10,sm:24,offset:5},J.a.createElement("div",{style:{overflow:"hidden"}},J.a.createElement("div",{style:{float:"right",marginBottom:24}},J.a.createElement(me.a,{type:"primary",htmlType:"submit"},"查询"),J.a.createElement(me.a,{className:we.a.import,icon:"import",onClick:this.importClick,loading:l,disabled:l,style:{marginLeft:8}},"导出"),J.a.createElement(me.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.DynamicLaw.data,t=e.loading,l=this.state,n=l.modalVisible,r=l.previewCode,i=l.enclosureList,s={handleModalVisible:this.handleModalVisible,previewCode:r,enclosureList:i};return J.a.createElement(Q.Fragment,null,J.a.createElement("div",{className:be.a.tableList},J.a.createElement("div",{className:be.a.tableListForm},this.renderSimpleForm()),J.a.createElement(he.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange})),n?J.a.createElement(Ja,$()({},s,{modalVisible:n})):null)}}]),a}(Q.PureComponent))||k)||k,Za=q.a.Group,$a=["/lawment/dynamic"],et=Object(K.connect)(function(e){var a=e.user;return{system:e.system,currentUser:a.currentUser}})(T=function(e){function a(){var e,t;A()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=H()(this,(e=G()(a)).call.apply(e,[this].concat(n)))).state={tabKey:"",siteList:[],radioButtonList:[]},t.tabChange=function(e){t.setState({tabKey:e.target.value})},t.renderChildrenByTabKey=function(e,a){var t="";switch(e){case"/traffic/lawment/dynamic/check":t=J.a.createElement(xe,{siteList:a});break;case"/traffic/lawment/dynamic/casehand":t=J.a.createElement(wa,{siteList:a});break;case"/traffic/lawment/dynamic/archive":t=J.a.createElement(Ba,{siteList:a});break;case"/traffic/lawment/dynamic/filepige":t=J.a.createElement(Ha,{siteList:a});break;case"/traffic/lawment/dynamic/invalid":t=J.a.createElement(qa,{siteList:a});break;case"/traffic/lawment/dynamic/penalty":t=J.a.createElement(_a,{siteList:a});break;default:t=null}return t},t.renderTitle=function(){var e=t.state,a=e.tabKey,l=e.radioButtonList;if(a)return J.a.createElement("div",{style:{clear:"both"}},J.a.createElement("span",{style:{display:"inline-block",lineHeight:"32px"}},"动态执法"),J.a.createElement(Za,{defaultValue:a,style:{float:"right"},buttonStyle:"solid",onChange:t.tabChange},l.length?l.map(function(e){return J.a.createElement(q.a.Button,{key:e.path,value:e.path},e.name)}):null))},t}return j()(a,e),O()(a,[{key:"componentDidMount",value:function(){var e=this;if(Object(_.b)($a[0])){var a=Object(_.G)(this.props.match.url);this.setState({radioButtonList:a,tabKey:a.length?a[0].path:""}),(0,this.props.dispatch)({type:"system/userSite",payload:{siteType:1},callback:function(a){if(a.length){var t=a.map(function(e,a){var t=Object.keys(e);return{index:a+1,code:t[0],name:e[t[0]],direction:[e[t[1]],e[t[2]]]}});e.setState({siteList:t})}else M.a.error({title:"提示",content:"您没有绑定站点！！！"})}})}}},{key:"render",value:function(){var e=this.state,a=e.tabKey,t=e.siteList;return J.a.createElement(W.GridContent,null,Object(_.b)($a[0])?J.a.createElement(R.a,{bordered:!1,title:this.renderTitle()},t.length?this.renderChildrenByTabKey(a,t):J.a.createElement(F.a,{image:F.a.PRESENTED_IMAGE_SIMPLE})):J.a.createElement(X.a,{to:"/exception/403"}))}}]),a}(Q.PureComponent))||T;a.default=et}}]);