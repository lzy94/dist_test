(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{PNPw:function(e,a,t){"use strict";t.r(a);t("IzEo");var l,r,n,i,s,o,c,d,m,u,p,g,E,f,h,y,v,b,D,w,L,C,N,S,V,F,k,I,R=t("bx4M"),x=(t("R9oj"),t("ECub")),T=(t("2qtc"),t("kLXV")),M=t("lwsE"),B=t.n(M),U=t("W8MJ"),A=t.n(U),O=t("a1gu"),P=t.n(O),H=t("Nsbk"),Y=t.n(H),z=t("7W2i"),j=t.n(z),G=(t("7Kak"),t("9yH6")),q=t("q1tI"),Q=t.n(q),J=t("y1Nh"),K=t("MuoO"),W=t("mf+E"),_=t("+n12"),X=t("pVnL"),Z=t.n(X),$=(t("14J3"),t("BMrR")),ee=(t("iQDF"),t("+eQT")),ae=(t("5NDa"),t("5rEg")),te=(t("jCWc"),t("kPKH")),le=(t("nRaC"),t("5RzL")),re=t("lSNA"),ne=t.n(re),ie=(t("miYZ"),t("tsqr")),se=t("MVZn"),oe=t.n(se),ce=(t("+L6B"),t("2/Rp")),de=(t("+BJd"),t("mr32")),me=(t("5Dmo"),t("3S7+")),ue=(t("OaEy"),t("2fM7")),pe=(t("y8nQ"),t("Vl3Y")),ge=t("wd/R"),Ee=t.n(ge),fe=t("CkN6"),he=(t("riYV"),t("0tLQ")),ye=t("9zHi"),ve=t.n(ye),be=t("ns75"),De=t.n(be),we=pe.a.Item,Le=ue.a.Option,Ce=["未审核","初审通过","复审通过","无效数据","免处罚数据","终审办结（归档）",""],Ne=["无需录入","等待录入","完成录入"],Se={pageNo:1,pageSize:10},Ve={isStatus:0,overLoadFlag:1},Fe=Object(K.connect)(function(e){var a=e.TrafficApiV2BusData,t=e.loading,l=e.system,r=e.user;return{Site:e.Site,system:l,currentUser:r.currentUser,TrafficApiV2BusData:a,loading:t.models.TrafficApiV2BusData}})(l=pe.a.create()(l=function(e){function a(){var e,t;B()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=P()(this,(e=Y()(a)).call.apply(e,[this].concat(r)))).state={modalVisible:!1,formValues:[],detailID:0,siteList:[]},t.columns=[{title:"检测站",dataIndex:"siteName",width:190,render:function(e){return e?e.length>12?Q.a.createElement(me.a,{title:e},"".concat(e.substring(0,12),"...")):e:""}},{title:"车牌号码",dataIndex:"carNo"},{title:"检测时间",width:170,dataIndex:"previewTime",render:function(e){return Ee()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"轴数",dataIndex:"axleNumber"},{title:"限重(t)",dataIndex:"weightLimited",render:function(e){return Q.a.createElement(de.a,{color:"#87d068"},(e/1e3).toFixed(2)," ")}},{title:"总重(t)",dataIndex:"totalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"超限重(t)",dataIndex:"overLoad",render:function(e){return e>0?Q.a.createElement(de.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"overLoadRate",render:function(e){return e?(100*e).toFixed(2):e}},{title:"处理次数",dataIndex:"dealNum"},{title:"交警录入状态",dataIndex:"isEntry",render:function(e){return Ne[e]}},{title:"状态",dataIndex:"isStatus",render:function(e,a){return 1!==a.isRetrial||e?Ce[parseInt(e,10)]:"被退回"}},{title:"操作",width:70,render:function(e,a){return Q.a.createElement(q.Fragment,null,Q.a.createElement(me.a,{placement:"left",title:"审核"},Q.a.createElement(ce.a,{onClick:function(){return t.showDetailModal(a.id)},type:"primary",shape:"circle",icon:"solution",size:"small"})))}}],t.showDetailModal=function(e){t.setState({detailID:e},function(){return t.handleModalVisible(!0)})},t.getList=function(e){(0,t.props.dispatch)({type:"TrafficApiV2BusData/busDynamicDataForPage",payload:oe()({},e)})},t.getSiteIN=function(){return{siteCodes:t.state.siteList.map(function(e){return e.code})}},t.handleStandardTableChange=function(e){var a=t.state.formValues,l=oe()({pageNo:e.current,pageSize:e.pageSize},Ve,a);t.getList(l)},t.handleFormReset=function(){t.props.form.resetFields();var e=Object(_.z)("organId");t.getSite(e,function(){var e=t.getSiteIN();t.setState({formValues:e}),t.getList(oe()({},Se,Ve,e))})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l="YYYY-MM-DDTHH:mm:ss",r=a.previewTime,n=a.status,i=a.siteCodes,s=a.startOverLoadRate,o=a.endOverLoadRate,c=a.startTotalLoad,d=a.endTotalLoad;if(!s&&!o||Object(_.F)(s)&&Object(_.F)(o))if(!c&&!d||Object(_.F)(c)&&Object(_.F)(d)){var m=r?{startPreviewTime:Ee()(r[0]).format(l),endPreviewTime:Ee()(r[1]).format(l)}:{},u={};if(n){var p=n.split("_");u=ne()({},p[0],p[1])}if(t.getSiteIN().siteCodes.length){var g=i?[i]:t.getSiteIN().siteCodes,E=oe()({},a,m,u,{siteCodes:g});delete E.previewTime,delete E.status,t.setState({formValues:E}),t.getList(oe()({},Se,Ve,E))}else ie.a.error("当前机构暂无站点")}else ie.a.error("总重请输入数字");else ie.a.error("超限幅度请输入数字")}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e}),e||t.resetDetail()},t.handleCarGPSVisible=function(e){t.setState({carGPSVisible:!!e}),e||t.setState({carGPSParams:{}})},t.resetDetail=function(){(0,t.props.dispatch)({type:"TrafficApiV2BusData/resetDetail"})},t.treeSelectChange=function(e){t.props.form.setFieldsValue({siteCodes:void 0}),t.getSite(e)},t.getSite=function(e,a){var l=t.props;(0,l.dispatch)({type:"Site/siteByUserSite",payload:{organId:e,siteIds:l.siteList.map(function(e){return e.code})},callback:function(e){var l=e.map(function(e){return"1"===e.siteType?{code:e.siteCode,name:e.siteName}:""}).filter(function(e){return e});t.setState({siteList:l},function(){a&&a()})}})},t.modalSuccess=function(){ie.a.success("操作成功");var e=t.state.formValues;t.getList(oe()({},Ve,e))},t.importClick=function(){t.setState({importLoading:!0});var e=t.props.dispatch,a=t.state.formValues;e({type:"TrafficApiV2BusData/import",payload:oe()({},Ve,a),callback:function(e){404===e&&ie.a.error("暂无数据"),t.setState({importLoading:!1})}})},t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){var e=this.props.siteList,a={siteCodes:e.map(function(e){return e.code})};this.getList(oe()({},Se,Ve,a)),this.setState({siteList:e,formValues:a})}},{key:"renderSimpleForm",value:function(){var e=this.props,a=e.system.treeList,t=e.form.getFieldDecorator,l=this.state.siteList,r=this.state.importLoading,n=Object(_.z)("organId").toString();return Q.a.createElement(pe.a,{onSubmit:this.handleSearch,layout:"inline"},Q.a.createElement($.a,{gutter:16},Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),Q.a.createElement(we,{style:{flex:1}},t("name")(Q.a.createElement(le.a,{className:De.a.inputGroupLeftRadius,treeData:a,treeDefaultExpandedKeys:[n],style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测点"),Q.a.createElement(we,{style:{flex:1}},t("siteCodes")(Q.a.createElement(ue.a,{dropdownMatchSelectWidth:!1,className:De.a.inputGroupLeftRadius,placeholder:"请选择"},l.map(function(e){return Q.a.createElement(Le,{key:e.code,value:e.code},e.name)})))))),Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(ae.a.Group,{compact:!0},Q.a.createElement(we,{style:{display:"inline-block",width:"60%"}},t("startOverLoadRate")(Q.a.createElement(ae.a,{className:"".concat(De.a.inputGroupRightRadius," ").concat(De.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),Q.a.createElement(we,{style:{display:"inline-block",width:"40%"}},t("endOverLoadRate")(Q.a.createElement(ae.a,{className:De.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),Q.a.createElement(we,{style:{flex:1}},t("axleNumber")(Q.a.createElement(ue.a,{className:De.a.inputGroupLeftRadius,placeholder:"请选择"},Q.a.createElement(Le,{value:""},"全部轴数"),Q.a.createElement(Le,{value:2},"2"),Q.a.createElement(Le,{value:3},"3"),Q.a.createElement(Le,{value:4},"4"),Q.a.createElement(Le,{value:5},"5"),Q.a.createElement(Le,{value:6},"6"),Q.a.createElement(Le,{value:"other"},"其他")))))),Q.a.createElement(te.a,{md:6,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),Q.a.createElement(we,{style:{flex:1}},t("previewTime")(Q.a.createElement(ee.a.RangePicker,{className:De.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[Ee()("00:00:00","HH:mm:ss"),Ee()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})))))),Q.a.createElement($.a,{gutter:16},Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(ae.a.Group,{compact:!0},Q.a.createElement(we,{style:{display:"inline-block",width:"50%"}},t("startTotalLoad")(Q.a.createElement(ae.a,{className:"".concat(De.a.inputGroupRightRadius," ").concat(De.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),Q.a.createElement(we,{style:{display:"inline-block",width:"50%"}},t("endTotalLoad")(Q.a.createElement(ae.a,{className:De.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement(we,null,t("carNo")(Q.a.createElement(ae.a,{addonBefore:"车牌号",placeholder:"请输入"})))),Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"审核状态"),Q.a.createElement(we,{style:{flex:1}},t("status")(Q.a.createElement(ue.a,{className:De.a.inputGroupLeftRadius,placeholder:"请选择"},Q.a.createElement(Le,{value:"isStatus_0"},"待审核"),Q.a.createElement(Le,{value:"isRetrial_1"},"被退回")))))),Q.a.createElement(te.a,{md:10,sm:24},Q.a.createElement("div",{style:{overflow:"hidden"}},Q.a.createElement("div",{style:{float:"right",marginBottom:24}},Q.a.createElement(ce.a,{type:"primary",htmlType:"submit"},"查询"),Q.a.createElement(ce.a,{className:De.a.import,icon:"import",onClick:this.importClick,loading:r,disabled:r,style:{marginLeft:8}},"导出"),Q.a.createElement(ce.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.TrafficApiV2BusData.dyData,t=e.loading,l=this.state,r=l.modalVisible,n=l.detailID,i={handleModalVisible:this.handleModalVisible,modalSuccess:this.modalSuccess,detailID:n};return Q.a.createElement(q.Fragment,null,Q.a.createElement("div",{className:ve.a.tableList},Q.a.createElement("div",{className:ve.a.tableListForm},this.renderSimpleForm()),Q.a.createElement(fe.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange})),r&&n?Q.a.createElement(he.a,Z()({},i,{modalVisible:r})):null)}}]),a}(q.PureComponent))||l)||l,ke=(t("/zsF"),t("PArb")),Ie=(t("cWXX"),t("/ezw")),Re=(t("giR+"),t("fyUT")),xe=(t("T2oS"),t("W9HT")),Te=(t("DZo9"),t("8z0m")),Me=(t("Pwec"),t("CtXQ")),Be=t("90cL"),Ue=t("faNv"),Ae=t("smft"),Oe=t("ZP6J"),Pe=t.n(Oe),He=pe.a.Item,Ye=Object(K.connect)(function(e){var a=e.loading,t=e.TrafficApiV2BusData,l=e.user;return{TrafficApiV2BusData:t,loading:a.models.TrafficApiV2BusData,currentUser:l.currentUser}})(r=pe.a.create()((i=n=function(e){function a(){var e,t;B()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=P()(this,(e=Y()(a)).call.apply(e,[this].concat(r)))).state={},t.okHandle=function(){var e=t.props,a=e.form,l=e.detailID,r=e.dispatch,n=e.modalSuccess,i=e.handleModalVisible,s=e.currentUser,o=s.id,c=s.fullname;a.validateFields(function(e,a){if(!e){var t=oe()({},a,{busDataId:l,userId:o,userName:c});r({type:"TrafficApiV2BusData/lawCaseReturn",payload:t,callback:function(){i(),n()}})}})},t}return j()(a,e),A()(a,[{key:"render",value:function(){var e=this.props,a=e.modalVisible,t=e.handleModalVisible,l=e.form;return Q.a.createElement(T.a,{destroyOnClose:!0,title:"退回重审",visible:a,className:Pe.a.formModal,onOk:this.okHandle,onCancel:function(){return t()}},Q.a.createElement("div",{className:Pe.a.formModalBody},Q.a.createElement(He,{labelCol:{span:6},wrapperCol:{span:15},label:"退回重审原因"},l.getFieldDecorator("reason",{initialValue:"车辆检测信息与实际不符或照片缺失",rules:[{required:!0,message:"请输入重审原因"}]})(Q.a.createElement(ae.a.TextArea,{rows:3,autosize:!0,placeholder:"请输入"})))))}}]),a}(q.PureComponent),n.defaultProps={modalVisible:!1,handleModalVisible:function(){}},r=i))||r)||r,ze=t("lzeG"),je=["/lawment/dynamic/casehand/addBusInfo","/lawment/dynamic/casehand/focusData","/lawment/dynamic/casehand/lawCaseRevoke","/lawment/dynamic/casehand/lawCaseReturn"],Ge=pe.a.Item,qe=G.a.Group,Qe=ue.a.Option,Je=pe.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleModalVisible,r=e.sendLawCaseRevoke,n=e.fileListIdCard,i=e.fileListCancelProof,s=e.fileListCard,o=e.fileListDriveLicense,c=e.IdCardImgChange,d=e.cancelProofChange,m=e.cardChange,u=e.loading,p=e.driveLicenseChange,g={name:"files",action:"/result/api/file/v1/fileUpload",listType:"picture",accept:".jpg,.jpeg,.png",data:{type:5,xbType:""},headers:{Authorization:"Bearer ".concat(Object(_.z)("token")[0]),"x-requested-with":"XMLHttpRequest"}};return Q.a.createElement(T.a,{destroyOnClose:!0,title:"撤销处罚",className:Pe.a.formModal,visible:a,onOk:function(){t.validateFields(function(e,a){e||r(a,function(){return t.resetFields()})})},onCancel:function(){return l()}},Q.a.createElement("div",{className:Pe.a.formModalBody},Q.a.createElement(xe.a,{spinning:!!u},Q.a.createElement(pe.a,{layout:"vertical"},Q.a.createElement(Ge,{label:"免处罚原因"},t.getFieldDecorator("reason",{initialValue:"本次超限运输行为已经办理了超限运输许可，且按许可要求合法运输"})(Q.a.createElement(ue.a,{dropdownMatchSelectWidth:!1,style:{width:"100%"}},Q.a.createElement(Qe,{value:"本次超限运输行为已经办理了超限运输许可，且按许可要求合法运输"},"本次超限运输行为已经办理了超限运输许可，且按许可要求合法运输"),Q.a.createElement(Qe,{value:"本次违法行为通过检测点后，已被其他公路管理机构依法查处"},"本次违法行为通过检测点后，已被其他公路管理机构依法查处"),Q.a.createElement(Qe,{value:"因称重检测设备出现异常情况导致称重数据与事实不符"},"因称重检测设备出现异常情况导致称重数据与事实不符"),Q.a.createElement(Qe,{value:"因车辆使用假牌、套牌等原因，导致处罚主体或事实错误"},"因车辆使用假牌、套牌等原因，导致处罚主体或事实错误"),Q.a.createElement(Qe,{value:"法律法规规定的其他不予处罚的情形"},"法律法规规定的其他不予处罚的情形"),Q.a.createElement(Qe,{value:"公路管理机构认为应当撤销处罚的其他情形"},"公路管理机构认为应当撤销处罚的其他情形")))),Q.a.createElement($.a,{gutter:{md:8,lg:8,xl:8}},Q.a.createElement(te.a,{md:12,sm:24},Q.a.createElement(Ge,{label:"委托代理人身份证"},t.getFieldDecorator("agentIdcardUrl",{rules:[{required:!0,message:"请选择委托代理人身份证照片"}]})(Q.a.createElement(Te.a,Z()({},g,{defaultFileList:n,onChange:c}),n.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片"))))),Q.a.createElement(te.a,{md:12,sm:24},Q.a.createElement(Ge,{label:"撤销凭证"},t.getFieldDecorator("cancelProofUrl",{rules:[{required:!0,message:"请选择撤销凭证照片"}]})(Q.a.createElement(Te.a,Z()({},g,{defaultFileList:i,onChange:d}),i.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片")))))),Q.a.createElement($.a,{gutter:{md:8,lg:8,xl:8}},Q.a.createElement(te.a,{md:12,sm:24},Q.a.createElement(Ge,{label:"当事人身份证/企业营业执照"},t.getFieldDecorator("cardUrl",{rules:[{required:!0,message:"请选择当事人身份证/企业营业执照"}]})(Q.a.createElement(Te.a,Z()({},g,{defaultFileList:s,onChange:m}),s.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片"))))),Q.a.createElement(te.a,{md:12,sm:24},Q.a.createElement(Ge,{label:"车辆行驶证图片"},t.getFieldDecorator("driveLicenseUrl",{rules:[{required:!0,message:"请选择车辆行驶证图片"}]})(Q.a.createElement(Te.a,Z()({},g,{defaultFileList:o,onChange:p}),o.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片"))))))))))}),Ke=Object(K.connect)(function(e){var a=e.DynamicLaw,t=e.loading,l=e.TrafficApiV2BusData,r=e.user;return{DynamicLaw:a,loading:t.models.DynamicLaw,TrafficApiV2BusData:l,apiV2Loading:t.models.TrafficApiV2BusData,currentUser:r.currentUser}})(s=pe.a.create()((c=o=function(e){function a(e){var t;return B()(this,a),(t=P()(this,Y()(a).call(this,e))).state={truckBelong:1,previewCode:"",focusDataVisible:!1,lawCaseReturnVisible:!1,lawCaseRevokeVisible:!1,registerInfo:{},busDynamicLawDate:{},openRecord:[],fileListIdCard:[],fileListCancelProof:[],fileListCard:[],fileListDriveLicense:[],busStaticData:{},detail:{}},t.columns=[{title:"操作员",dataIndex:"executor"},{title:"办理时间",dataIndex:"executorTime"},{title:"状态",dataIndex:"logType"},{title:"原因",dataIndex:"remark"}],t.getDetail=function(){var e=t.props;(0,e.dispatch)({type:"TrafficApiV2BusData/dyDataDetail",payload:e.detailID})},t.truckBelongChange=function(e){t.setState({truckBelong:e.target.value})},t.handleAdd=function(e,a){var l=t.props.dispatch,r=t.state,n=r.registerInfo,i=r.previewCode,s=oe()({},e,{previewCode:i});"{}"!==JSON.stringify(n)&&(s.id=n.id),l({type:"DynamicLaw/add",payload:s,callback:function(){ie.a.success("操作成功"),a(),t.getDetail()}})},t.handleFocusDataVisible=function(e){t.setState({focusDataVisible:!!e})},t.handleLawCaseReturnVisible=function(e){t.setState({lawCaseReturnVisible:!!e})},t.handLawCaseRevokeVisible=function(e){t.setState({lawCaseRevokeVisible:!!e})},t.sendLawCaseRevoke=function(e,a){var l=t.props,r=l.dispatch,n=l.modalSuccess,i=l.handleModalVisible,s=l.detailID,o=l.currentUser,c=o.id,d=o.fullname;r({type:"TrafficApiV2BusData/lawCaseRevoke",payload:oe()({},e,{busDataId:s,userName:d,userId:c,cardUrl:e.cardUrl?e.cardUrl.file.response.filePath:"",agentIdcardUrl:e.agentIdcardUrl?e.agentIdcardUrl.file.response.filePath:"",cancelProofUrl:e.cancelProofUrl?e.cancelProofUrl.file.response.filePath:"",driveLicenseUrl:e.driveLicenseUrl?e.driveLicenseUrl.file.response.filePath:""}),callback:function(){setTimeout(function(){a&&a(),t.handLawCaseRevokeVisible(),i(),n()},500)}})},t.prevCarousel=function(){t.myCarousel.prev()},t.nextCarousel=function(){t.myCarousel.next()},t.focusDataClick=function(){t.handleFocusDataVisible(!0)},t.lawCaseReturnClick=function(){t.handleLawCaseReturnVisible(!0)},t.lawCaseRevokeClick=function(){t.handLawCaseRevokeVisible(!0)},t.IdCardImgChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListIdCard:e})})},t.cardChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListCard:e})})},t.cancelProofChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListCancelProof:e})})},t.driveLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListDriveLicense:e})})},t.imgChangeUtil=function(e,a){"done"===e.file.status?200===e.file.response.code?(ie.a.success("上传成功"),a(e.fileList)):ie.a.error(e.file.response.code.msg):"error"===e.file.status?ie.a.error("上传失败"):"removed"===e.file.status&&a(e.fileList)},t.modalSuccess=function(){var e=t.props,a=e.modalSuccess,l=e.handleModalVisible;a(),l()},t.modalTitle=function(){var e=t.props,a=e.form,l=e.isRegist,r=t.state.busDynamicLawDate,n={color:"#fff",marginLeft:5};return Q.a.createElement("div",{className:Pe.a.modalHeader},Q.a.createElement("div",{className:Pe.a.title},Q.a.createElement("span",{className:Pe.a.value},r.carNo),Q.a.createElement("span",{className:Pe.a.time},Ee()(r.previewTime).format("YYYY-M-D HH:mm:ss"))),Q.a.createElement("div",null,Object(_.c)(je[0])?l?null:Q.a.createElement(ce.a,{type:"primary",onClick:function(){a.validateFields(function(e,l){e||t.handleAdd(l,function(){return a.resetFields()})})}},"确认车辆信息"):null,Object(_.c)(je[1])?Q.a.createElement(ce.a,{style:oe()({background:"#f1a325",borderColor:"#f1a325"},n),onClick:function(){return t.focusDataClick()}},"重点关注"):null,Object(_.c)(je[2])?Q.a.createElement(ce.a,{onClick:function(){return t.lawCaseRevokeClick()},style:oe()({background:"#ea644a",borderColor:"#ea644a"},n)},"撤销处罚"):null,Object(_.c)(je[3])?Q.a.createElement(ce.a,{onClick:function(){return t.lawCaseReturnClick()},style:oe()({background:"#38b03f",borderColor:"#38b03f"},n)},"退回重审"):null))},t.myCarousel=Q.a.createRef(),t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.getDetail()},100)}},{key:"renderForm",value:function(){var e=this.props.form,a=this.state,t=a.truckBelong,l=a.registerInfo,r=a.busDynamicLawDate,n={labelCol:{xs:{span:8},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:16}}};return Q.a.createElement(q.Fragment,null,Q.a.createElement("div",{className:Pe.a.inputGroup},Q.a.createElement($.a,{gutter:8},Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"车牌号码"},n),e.getFieldDecorator("carNo",{initialValue:l.carNo||r.carNo,rules:[{required:!0,validator:_.g}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"车主姓名"},n),e.getFieldDecorator("vehicleOwner",{initialValue:l.vehicleOwner,rules:[{required:!0,message:"请输入车主姓名！"}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"车辆类型"},n),e.getFieldDecorator("carType",{initialValue:l.carType})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"核定载重"},n),e.getFieldDecorator("weightLimited",{initialValue:l.weightLimited})(Q.a.createElement(Re.a,{min:0,placeholder:"单位(kg)",style:{width:"100%"}}))))),Q.a.createElement($.a,{gutter:8},Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"手机号码"},n),e.getFieldDecorator("phone",{initialValue:l.phone,rules:[{required:!0,validator:_.j}]})(Q.a.createElement(ae.a,null)))),2===t?Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"统一信用码"},n),e.getFieldDecorator("creditCode",{initialValue:l.creditCode})(Q.a.createElement(ae.a,null)))):Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"身份证号"},n),e.getFieldDecorator("idCard",{initialValue:l.idCard,rules:[{required:!0,validator:_.e}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"外廓尺寸"},n),e.getFieldDecorator("externalDimensions",{initialValue:l.externalDimensions})(Q.a.createElement(ae.a,{placeholder:"输入格式(XX-XX-XX)"})))),Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"车辆总重"},n),e.getFieldDecorator("totalWeight",{initialValue:l.totalWeight})(Q.a.createElement(Re.a,{placeholder:"单位(kg)",min:0,style:{width:"100%"}}))))),Q.a.createElement($.a,{gutter:8},Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"车辆厂牌"},n),e.getFieldDecorator("brandName",{initialValue:l.brandName})(Q.a.createElement(ae.a,null)))),2===t?Q.a.createElement(q.Fragment,null,Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"法人姓名"},n),e.getFieldDecorator("legalRepresentative",{initialValue:l.legalRepresentative})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"注册地址"},n),e.getFieldDecorator("registAddr",{initialValue:l.registAddr})(Q.a.createElement(ae.a,null))))):Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"车主地址"},n),e.getFieldDecorator("vehicleOwnerAddr",{initialValue:l.vehicleOwnerAddr,rules:[{required:!0,message:"请输入车主地址"}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:6,sm:12},Q.a.createElement(Ge,Z()({label:"轴数"},n),e.getFieldDecorator("axleNumber",{initialValue:l.axleNumber||r.axleNumber,rules:[{required:!0,message:"请输入轴数"}]})(Q.a.createElement(Re.a,{min:0,placeholder:"",style:{width:"100%"}})))))))}},{key:"render",value:function(){var e=this.props,a=e.modalVisible,t=e.handleModalVisible,l=e.form,r=e.loading,n=e.detailID,i=e.apiV2Loading,s=this.state,o=s.truckBelong,c=s.focusDataVisible,d=s.lawCaseReturnVisible,m=s.lawCaseRevokeVisible,u=s.busDynamicLawDate,p=s.fileListCancelProof,g=s.fileListCard,E=s.fileListDriveLicense,f=s.fileListIdCard,h=s.openRecord,y=s.busStaticData,v=s.detail,b={handleModalVisible:this.handleFocusDataVisible,detail:v,modalSuccess:this.modalSuccess},D={detailID:n,modalSuccess:this.modalSuccess,handleModalVisible:this.handleLawCaseReturnVisible},w={handleModalVisible:this.handLawCaseRevokeVisible,sendLawCaseRevoke:this.sendLawCaseRevoke,fileListIdCard:f,fileListCancelProof:p,fileListCard:g,loading:i,fileListDriveLicense:E,IdCardImgChange:this.IdCardImgChange,cancelProofChange:this.cancelProofChange,cardChange:this.cardChange,driveLicenseChange:this.driveLicenseChange};return Q.a.createElement(q.Fragment,null,Q.a.createElement(T.a,{destroyOnClose:!0,className:Pe.a.modalStyle,title:this.modalTitle(),visible:a,footer:null,onCancel:function(){return t()},width:1150},Q.a.createElement(xe.a,{spinning:i},Q.a.createElement("div",{className:Pe.a.detailMsg},Q.a.createElement("div",{className:Pe.a.detailMsgTitle},Q.a.createElement(Me.a,{type:"profile"})," 车辆基本信息",Q.a.createElement(Ge,{style:{display:"inline-block",marginBottom:0,verticalAlign:"middle",marginLeft:20}},l.getFieldDecorator("truckBelong",{initialValue:o})(Q.a.createElement(qe,{onChange:this.truckBelongChange},Q.a.createElement(G.a,{value:1},"个人"),Q.a.createElement(G.a,{value:2},"企业")))),Q.a.createElement(ce.a,{style:{float:"right"},size:"small",href:"http://www.gsxt.gov.cn/index.html",target:"_blank"},"企业法人查询")),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderForm())),Object.keys(u).length?Q.a.createElement(Be.a,{detail:u,isTitle:!0}):Q.a.createElement(Ie.a,{active:!0}),"{}"!==JSON.stringify(y)?Q.a.createElement(Ue.a,{detail:y}):null,Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle},Q.a.createElement(Me.a,{type:"table"})," 操作记录"),Q.a.createElement("div",{className:Pe.a.recordList,style:{padding:"0 20px 20px"}},Q.a.createElement(Ae.a,{loading:r,list:h,columns:this.columns}))))),c&&Q.a.createElement(ze.a,Z()({},b,{modalVisible:c})),d&&Q.a.createElement(Ye,Z()({},D,{modalVisible:d})),m&&Q.a.createElement(Je,Z()({},w,{modalVisible:m})))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t=e.TrafficApiV2BusData.dyDataDetail,l=a.detail;if(JSON.stringify(l)!==JSON.stringify(t)){var r=t.registerInfo,n=t.openRecord,i=t.busDynamicLawDate,s=r||{};return{detail:t,busDynamicLawDate:i,openRecord:n,registerInfo:s,truckBelong:s.truckBelong||1,previewCode:i.previewCode,busStaticData:i.busStaticData||{}}}return null}}]),a}(q.PureComponent),o.defaultProps={handleModalVisible:function(){}},s=c))||s)||s,We=pe.a.Item,_e=Object(K.connect)(function(e){var a=e.system,t=e.systemUser,l=e.user,r=e.loading;return{system:a,systemUser:t,currentUser:l.currentUser,loading:r.models.systemUser,systemLoading:r.models.system}})(d=pe.a.create()(d=function(e){function a(){var e,t;B()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=P()(this,(e=Y()(a)).call.apply(e,[this].concat(r)))).state={formValues:[],treeFormValue:{},defaultFormValue:[{property:"isDelete",value:"0",group:"main",operation:"NOT_EQUAL",relation:"AND"},{property:"lawCard",value:"",group:"main",operation:"NOTNULL",relation:"AND"},{property:"lawSigna",value:"",group:"main",operation:"NOTNULL",relation:"AND"}]},t.columns=[{title:"登录名",dataIndex:"account"},{title:"姓名",dataIndex:"fullname"},{title:"电话",dataIndex:"mobile"},{title:"机构",dataIndex:"organName"},{title:"执法证件号",dataIndex:"lawCard"},{title:"操作",width:80,render:function(e,a){return Q.a.createElement(ce.a,{icon:"check-circle",type:"primary",shape:"circle",onClick:function(){return t.okHandle(a)}})}}],t.handleStandardTableChange=function(e,a,l){var r=t.props,n=r.dispatch,i=r.currentUser,s=t.state,o=s.formValues,c=s.defaultFormValue,d=s.treeFormValue,m=c;"{}"!=JSON.stringify(d)?m.push(d):m.push({property:"organId",value:i.organId,group:"main",operation:"RIGHT_LIKE",relation:"AND"}),n({type:"systemUser/fetch",payload:{pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:m.concat(o)}})},t.handleFormReset=function(){var e=t.props,a=e.form,l=e.dispatch,r=e.currentUser,n=t.state.defaultFormValue,i=JSON.parse(JSON.stringify(n));a.resetFields(),t.setState({formValues:[]}),i.push({property:"organId",value:r.organId,group:"main",operation:"RIGHT_LIKE",relation:"AND"}),l({type:"systemUser/fetch",payload:{pageBean:{page:1,pageSize:10,showTotal:!0},querys:i}})},t.handleSearch=function(e){e.preventDefault();var a=t.props,l=a.dispatch,r=a.form,n=a.currentUser,i=t.state,s=i.treeFormValue,o=i.defaultFormValue;r.validateFields(function(e,a){if(!e){var r=oe()({},a),i=Object.keys(r).map(function(e){return r[e]?{property:e,value:r[e],group:"main",operation:"LIKE",relation:"OR"}:""}).filter(function(e){return e}).filter(function(e){return"organId"!==e.property});t.setState({formValues:i}),"{}"!=JSON.stringify(s)?i.push(s):i.push({property:"organId",value:n.organId,group:"main",operation:"RIGHT_LIKE",relation:"AND"}),l({type:"systemUser/fetch",payload:{pageBean:{page:1,pageSize:10,showTotal:!0},querys:o.concat(i)}})}})},t.okHandle=function(e){var a=t.props,l=a.selectData,r=a.handleModalVisible;l(e),r()},t.treeSelectChange=function(e,a){var l={property:"organId",value:e,group:"main",operation:"RIGHT_LIKE",relation:"OR"};t.setState({treeFormValue:l})},t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,a=this.state.defaultFormValue,t=JSON.parse(JSON.stringify(a)),l=localStorage.getItem("organId");t.push({property:"organId",value:l,group:"main",operation:"RIGHT_LIKE",relation:"AND"}),e({type:"systemUser/fetch",payload:{pageBean:{page:1,pageSize:10,showTotal:!0},querys:t}})}},{key:"renderSimpleForm",value:function(){var e=this.props,a=e.form.getFieldDecorator,t=e.system.treeList;return Q.a.createElement(pe.a,{onSubmit:this.handleSearch,layout:"inline"},Q.a.createElement($.a,{gutter:{md:8,lg:8,xl:8}},Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"区域"),Q.a.createElement(We,{style:{flex:1}},a("organId")(Q.a.createElement(le.a,{treeData:t,style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(We,null,a("account")(Q.a.createElement(ae.a,{addonBefore:"登录名",placeholder:"请输入"})))),Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(We,null,a("fullname")(Q.a.createElement(ae.a,{addonBefore:"姓名",placeholder:"请输入"})))),Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(We,null,a("mobile")(Q.a.createElement(ae.a,{addonBefore:"电话",placeholder:"请输入"})))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement("span",{className:ve.a.submitButtons,style:{float:"right"}},Q.a.createElement(ce.a,{type:"primary",htmlType:"submit"},"查询"),Q.a.createElement(ce.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,a=e.systemUser.data,t=e.loading,l=e.modalVisible,r=e.handleModalVisible,n={tableAlert:!1,size:"middle",loading:t,data:a,selectedRows:0,rowSelection:null,columns:this.columns,onChange:this.handleStandardTableChange};return Q.a.createElement(T.a,{destroyOnClose:!0,title:"选择人员",visible:l,className:Pe.a.formModal,onCancel:function(){return r()},width:1200,footer:null},Q.a.createElement("div",{className:Pe.a.formModalBody},Q.a.createElement("div",{className:ve.a.tableList},Q.a.createElement("div",{className:ve.a.tableListForm},this.renderSimpleForm()),Q.a.createElement(fe.a,n))))}}]),a}(q.PureComponent))||d)||d,Xe=["/lawment/dynamic/casehand/lawCaseRegist"],Ze=ee.a.RangePicker,$e=ue.a.Option,ea=pe.a.Item,aa=G.a.Group,ta={marginBottom:0},la=Object(K.connect)(function(e){var a=e.DynamicLaw,t=e.loading;return{TrafficApiV2BusData:e.TrafficApiV2BusData,api2Loading:t.models.TrafficApiV2BusData,DynamicLaw:a,loading:t.models.DynamicLaw}})(m=pe.a.create()((p=u=function(e){function a(e){var t;return B()(this,a),(t=P()(this,Y()(a).call(this,e))).state={detail:{},registerInfo:{},busDynamicLawDate:{},openRecord:{},previewCode:"",partyRadio:1,isAgent:0,fileListCardUrl:[],fileListDriveLicense:[],fileListDriverLicense:[],fileListAgentIdCard:[],fileListTransportLicense:[],fileListPractitioner:[],partyNameSignaFileList:[],fileListAudio:[],talkRecordFileList:[],visiblePerson:!1},t.showPersionModal=function(e,a,l){t.persionArg1=e,t.persionArg2=a,t.persionArg3=l,t.handlePersonVisible(!0)},t.handlePersonVisible=function(e){t.setState({visiblePerson:!!e})},t.selectData=function(e){var a,l=e.lawCard,r=e.fullname,n=e.lawSigna,i=t.props.form;t.signas[t.persionArg3]=n,i.setFieldsValue((a={},ne()(a,t.persionArg1,r),ne()(a,t.persionArg2,l),a))},t.getDetail=function(){var e=t.props;(0,e.dispatch)({type:"TrafficApiV2BusData/dyDataDetail",payload:e.detailID})},t.uploadBase=function(){return{name:"files",action:"/result/api/file/v1/fileUpload",listType:"picture",accept:".jpg,.jpeg,.png",data:{type:5,xbType:""},beforeUpload:_.D,headers:{Authorization:"Bearer ".concat(Object(_.z)("token")[0]),"x-requested-with":"XMLHttpRequest"}}},t.partyRadioChange=function(e){var a=e.target.value;t.setState({partyRadio:a})},t.isAgentChange=function(e){var a=e.target.value;t.setState({isAgent:a})},t.renderParty=function(){var e=t.props.form,a=t.state.registerInfo;return Q.a.createElement("div",{className:Pe.a.inputGroup},Q.a.createElement(pe.a,{labelCol:{span:7},wrapperCol:{span:17}},Q.a.createElement($.a,{gutter:8},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"类型"},e.getFieldDecorator("personalororgan",{initialValue:1})(Q.a.createElement(ue.a,{disabled:!0,style:{width:"100%"}},Q.a.createElement($e,{value:1},"个人"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"姓名"},e.getFieldDecorator("partyName",{initialValue:a.vehicleOwner})(Q.a.createElement(ae.a,{readOnly:!0})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:oe()({},ta),label:"性别"},e.getFieldDecorator("partySex",{initialValue:1})(Q.a.createElement(ue.a,{style:{width:"100%"}},Q.a.createElement($e,{value:1},"男"),Q.a.createElement($e,{value:2},"女"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"身份证号"},e.getFieldDecorator("partyIdcard",{initialValue:a.idCard,rules:[{validator:_.e}]})(Q.a.createElement(ae.a,{readOnly:!0})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"联系方式"},e.getFieldDecorator("partyTel",{initialValue:a.phone})(Q.a.createElement(ae.a,{readOnly:!0})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"住址"},e.getFieldDecorator("partyAddr",{initialValue:a.vehicleOwnerAddr})(Q.a.createElement(ae.a,{readOnly:!0})))))))},t.renderPartyEnterprise=function(){var e=t.props.form,a=t.state.registerInfo;return Q.a.createElement("div",{className:Pe.a.inputGroup},Q.a.createElement(pe.a,{labelCol:{span:7},wrapperCol:{span:17}},Q.a.createElement($.a,{gutter:8},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"类型"},e.getFieldDecorator("personalororgan",{initialValue:2})(Q.a.createElement(ue.a,{disabled:!0,style:{width:"100%"}},Q.a.createElement($e,{value:2},"企业或其他组织"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"企业名称"},e.getFieldDecorator("partyName",{initialValue:a.vehicleOwner})(Q.a.createElement(ae.a,{readOnly:!0})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"法人姓名"},e.getFieldDecorator("legalMan",{initialValue:a.legalRepresentative})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"统一信用码"},e.getFieldDecorator("creditCode",{initialValue:a.creditCode})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"企业电话"},e.getFieldDecorator("companyTel",{})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"注册地址"},e.getFieldDecorator("companyAddr",{initialValue:a.registAddr})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"法人手机"},e.getFieldDecorator("legalManTel",{initialValue:a.phone})(Q.a.createElement(ae.a,{readOnly:!0})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"法人住址"},e.getFieldDecorator("legalManAddr",{})(Q.a.createElement(ae.a,null)))))))},t.renderAgent=function(){var e=t.props.form;return Q.a.createElement("div",{className:Pe.a.inputGroup},Q.a.createElement(pe.a,{labelCol:{span:7},wrapperCol:{span:17}},Q.a.createElement($.a,{gutter:8},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"代理人姓名"},e.getFieldDecorator("agentName",{})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"性别"},e.getFieldDecorator("agentSex",{initialValue:1})(Q.a.createElement(ue.a,null,Q.a.createElement($e,{value:1},"男"),Q.a.createElement($e,{value:2},"女"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"身份证号"},e.getFieldDecorator("agentIdcard",{rules:[{validator:_.e}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"联系方式"},e.getFieldDecorator("agentTel",{rules:[{validator:_.j}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"住址"},e.getFieldDecorator("agentAddr",{})(Q.a.createElement(ae.a,null)))))))},t.renderDriver=function(){var e=t.props.form,a=1===t.state.partyRadio?t.state.registerInfo:{};return Q.a.createElement("div",{className:Pe.a.inputGroup},Q.a.createElement(pe.a,{labelCol:{span:7},wrapperCol:{span:17}},Q.a.createElement($.a,{gutter:8},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"驾驶员姓名"},e.getFieldDecorator("driverName",{initialValue:a.vehicleOwner})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"性别"},e.getFieldDecorator("driverSex",{initialValue:1})(Q.a.createElement(ue.a,null,Q.a.createElement($e,{value:1},"男"),Q.a.createElement($e,{value:2},"女"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"身份证号"},e.getFieldDecorator("driverIdcard",{initialValue:a.idCard,rules:[{validator:_.e}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"联系方式"},e.getFieldDecorator("driverTel",{initialValue:a.phone,rules:[{required:!0,validator:_.j}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"住址"},e.getFieldDecorator("driverAddr",{initialValue:a.vehicleOwnerAddr})(Q.a.createElement(ae.a,null)))))))},t.toops=function(){return Q.a.createElement("div",{style:{width:400}},Q.a.createElement("h3",null,"非现场执法处罚优惠规则"),Q.a.createElement("p",null,"1、违法超限超载",Q.a.createElement("span",{style:{color:"red"}},"5吨"),"以上-",Q.a.createElement("span",{style:{color:"red"}},"10吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻80%实施处罚。",Q.a.createElement("br",null),"2、违法超限超载",Q.a.createElement("span",{style:{color:"red"}},"10吨"),"以上-",Q.a.createElement("span",{style:{color:"red"}},"20吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻75%实施处罚。",Q.a.createElement("br",null),"3、违法超限超载",Q.a.createElement("span",{style:{color:"red"}},"20吨"),"以上-",Q.a.createElement("span",{style:{color:"red"}},"30吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻70%实施处罚。",Q.a.createElement("br",null),"4、违法超限超载",Q.a.createElement("span",{style:{color:"red"}},"30吨"),"以上-",Q.a.createElement("span",{style:{color:"red"}},"40吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻65%实施处罚。",Q.a.createElement("br",null),"5、违法超限超载",Q.a.createElement("span",{style:{color:"red"}},"40吨"),"以上的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻60%实施处罚。",Q.a.createElement("br",null),"6、1年内同一车辆经动态自动称重设备记录多次违法行为且主动前来接受调查处理的，按《超限运输车辆行驶公路管理规定》的处罚标准，累计罚款不超过",Q.a.createElement("span",{style:{color:"red"}},"3万元"),"。"))},t.renderCaseInfo=function(){var e=t.props.form,a=t.state,l=a.registerInfo,r=a.busDynamicLawDate;return Q.a.createElement("div",{className:Pe.a.inputGroup},Q.a.createElement(pe.a,{labelCol:{span:7},wrapperCol:{span:17}},Q.a.createElement($.a,{gutter:8},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"案卷号"},e.getFieldDecorator("caseNo",{rules:[{required:!0,message:"请输入案卷号"}]})(Q.a.createElement(Re.a,{style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"货物名称"},e.getFieldDecorator("goodsName",{rules:[{required:!0,message:"请输入货物名称"}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"承办人"},e.getFieldDecorator("undertaker",{rules:[{required:!0,message:"请选择承办人 "}]})(Q.a.createElement(ae.a,{readOnly:!0,onClick:function(){return t.showPersionModal("undertaker","enforcementNo","undertakerSigna")}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"案件来源"},e.getFieldDecorator("caseSource",{initialValue:"非现场执法"})(Q.a.createElement(ue.a,null,Q.a.createElement($e,{value:"非现场执法"},"非现场执法"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"车货总重(kg)"},e.getFieldDecorator("weight",{initialValue:l.totalWeight})(Q.a.createElement(Re.a,{readOnly:!0,style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"执法证号"},e.getFieldDecorator("enforcementNo",{})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement(ea,{labelCol:{span:10},wrapperCol:{span:14},style:ta,label:"案由"},e.getFieldDecorator("caseReasonCarNo",{initialValue:l.carNo})(Q.a.createElement(ae.a,{readOnly:!0})))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement("div",{className:Pe.a.radius},Q.a.createElement(ea,{wrapperCol:{span:24},style:ta},e.getFieldDecorator("caseReason",{})(Q.a.createElement(ae.a,null))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"轴数"},e.getFieldDecorator("axisNum",{initialValue:r.axleNumber})(Q.a.createElement(Re.a,{readOnly:!0,style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"协办人"},e.getFieldDecorator("coOrganizer",{rules:[{required:!0,message:"请输入协办人"}]})(Q.a.createElement(ae.a,{readOnly:!0,onClick:function(){return t.showPersionModal("coOrganizer","organizerNo","coOrganizerSigna")}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,className:De.a.inputLabelLeft,label:"处罚金额"},e.getFieldDecorator("punishMoney",{rules:[{required:!0,message:"请输入处罚金额"}]})(Q.a.createElement(Re.a,{style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"超限(kg)"},e.getFieldDecorator("limited",{initialValue:r.overLoad})(Q.a.createElement(Re.a,{readOnly:!0,style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"执法证号"},e.getFieldDecorator("organizerNo",{initialValue:""})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"讨论时间"},e.getFieldDecorator("discussTime",{rules:[{required:!0,message:"请选择讨论时间"}]})(Q.a.createElement(Ze,{showTime:!0,style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"询问时间"},e.getFieldDecorator("askTime",{rules:[{required:!0,message:"请选择询问时间"}]})(Q.a.createElement(Ze,{showTime:!0,style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"审核人"},e.getFieldDecorator("reviewer",{rules:[{required:!0,message:"请选择审核人"}]})(Q.a.createElement(ae.a,{readOnly:!0,onClick:function(){return t.showPersionModal("reviewer","reviewerNo","reviewerSigna")}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"情况说明"},e.getFieldDecorator("hapDesc")(Q.a.createElement(ue.a,{style:{width:"100%"},placeholder:"请选择"},Q.a.createElement($e,{value:"主动投案自首"},"主动投案自首"),Q.a.createElement($e,{value:"有重大立功表现"},"有重大立功表现"),Q.a.createElement($e,{value:"主动消除违法行为"},"主动消除违法行为"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"车辆说明"},e.getFieldDecorator("carDesc")(Q.a.createElement(ae.a.TextArea,{autosize:!0})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"负责人"},e.getFieldDecorator("principal",{rules:[{required:!0,message:"请选择负责人"}]})(Q.a.createElement(ae.a,{readOnly:!0,onClick:function(){return t.showPersionModal("principal","principalNo","principalSigna")}})))))))},t.cardUrlChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListCardUrl:e})})},t.driveLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListDriveLicense:e})})},t.driverLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListDriverLicense:e})})},t.agentIdCardChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListAgentIdCard:e})})},t.transportLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListTransportLicense:e})})},t.practitionerChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListPractitioner:e})})},t.audioChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListAudio:e})})},t.talkRecordChange=function(e){t.imgChangeUtil(e,function(e){t.setState({talkRecordFileList:e})})},t.imgChangeUtil=function(e,a){"done"===e.file.status?200===e.file.response.code?(ie.a.success("上传成功"),a(e.fileList)):ie.a.error(e.file.response.code.msg):"error"===e.file.status?ie.a.error("上传失败"):"removed"===e.file.status&&a(e.fileList)},t.audioRemove=function(e){e.preventDefault(),t.setState({fileListAudio:[]})},t.renderAudio=function(e){if(e.length){var a="";return a=e[0].url?e[0].url:_.E+e[0].response.filePath,Q.a.createElement("div",{style:{position:"relative",zIndex:10}},Q.a.createElement("a",{onClick:t.audioRemove,style:{position:"absolute",top:0,right:11,zIndex:100,fontSize:20,cursor:"pointer",lineHeight:"15px",color:"rgba(0, 0, 0, 0.45)"}},"×"),Q.a.createElement("audio",{style:{outline:"none"},src:a,controls:"controls"}))}return null},t.rendeautograph=function(){var e=t.props.form,a=t.state.partyNameSignaFileList;return Q.a.createElement($.a,{gutter:{md:8,lg:16,xl:16}},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"当事人签字"},e.getFieldDecorator("partyNameSigna",{})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:a,onChange:t.partyNameSignaChange}),a.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片"))))))},t.renderAudioData=function(){var e=t.state,a=e.fileListAudio,l=e.talkRecordFileList,r=t.props.form;return Q.a.createElement($.a,{gutter:{md:8,lg:16,xl:16}},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"询问记录音频资料"},r.getFieldDecorator("liveRecord")(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{accept:".mp3",showUploadList:!1,beforeUpload:_.b,onChange:t.audioChange}),a.length?null:Q.a.createElement(ce.a,{style:{marginBottom:10}},Q.a.createElement(Me.a,{type:"upload"})," 选择录音文件mp3")))),t.renderAudio(a)),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"讨论记录音频资料"},r.getFieldDecorator("talkRecord")(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{accept:".mp3",showUploadList:!1,beforeUpload:_.b,onChange:t.talkRecordChange}),l.length?null:Q.a.createElement(ce.a,{style:{marginBottom:10}},Q.a.createElement(Me.a,{type:"upload"})," 选择录音文件mp3")))),t.renderAudio(l)))},t.renderEnclosure=function(){var e=t.props.form,a=t.state,l=a.isAgent,r=a.fileListCardUrl,n=a.fileListDriveLicense,i=a.fileListDriverLicense,s=a.fileListAgentIdCard,o=a.fileListTransportLicense,c=a.fileListPractitioner;return Q.a.createElement(q.Fragment,null,Q.a.createElement($.a,{gutter:{md:8,lg:16,xl:16}},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"车辆道路运输证或其他"},e.getFieldDecorator("transportLicenseUrl",{rules:[{required:!0,message:"请上传车辆道路运输证或其他"}]})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:o,onChange:t.transportLicenseChange}),o.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"驾驶员从业资格证或其他"},e.getFieldDecorator("practitionerUrl",{rules:[{required:!0,message:"请上传驾驶员从业资格证或其他"}]})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:c,onChange:t.practitionerChange}),c.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"驾驶员驾驶证"},e.getFieldDecorator("driverLicenseUrl",{})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:i,onChange:t.driverLicenseChange}),i.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片")))))),Q.a.createElement($.a,{gutter:{md:8,lg:16,xl:16}},l?Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"委托代理人身份证"},e.getFieldDecorator("agentIdcardUrl",{rules:[{required:!0,message:"请上传委托代理人身份证"}]})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:s,onChange:t.agentIdCardChange}),s.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片"))))):null,Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"当事人身份证/企业营业执照"},e.getFieldDecorator("cardUrl",{})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:r,onChange:t.cardUrlChange}),r.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(ea,{style:ta,label:"车辆行驶证"},e.getFieldDecorator("driveLicenseUrl",{})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:n,onChange:t.driveLicenseChange}),n.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片")))))))},t.getUrl=function(e){if("object"==typeof e){var a=e.file.response;return a?a.filePath:""}return e},t.okHandle=function(){var e=t.props,a=e.form,l=e.dispatch,r=e.modalSuccess,n=e.handleModalVisible,i=t.state.busDynamicLawDate;a.validateFields(function(e,a){if(e){var s=Object.keys(e).map(function(a){return e[a].errors[0].message});ie.a.error(s.join(" , "))}else{var o=oe()({},JSON.parse(JSON.stringify(a)),t.signas),c=a.askTime||["",""],d=a.discussTime||["",""];o.askBeginTime=Ee()(c[0]).format("YYYY-MM-DD HH:mm:ss"),o.askEndTime=Ee()(c[1]).format("YYYY-MM-DD HH:mm:ss"),o.discussBeginTime=d[0]?Ee()(d[0]).format("YYYY-MM-DD HH:mm:ss"):"",o.discussEndTime=d[1]?Ee()(d[1]).format("YYYY-MM-DD HH:mm:ss"):"",o.caseReason="".concat(a.caseReasonCarNo,",").concat(a.caseReason||""),o.cardUrl=t.getUrl(a.cardUrl),o.driveLicenseUrl=t.getUrl(a.driveLicenseUrl),o.driverLicenseUrl=t.getUrl(a.driverLicenseUrl),o.agentIdcardUrl=t.getUrl(a.agentIdcardUrl),o.transportLicenseUrl=t.getUrl(a.transportLicenseUrl),o.practitionerUrl=t.getUrl(a.practitionerUrl),o.liveRecord=t.getUrl(a.liveRecord),o.talkRecord=t.getUrl(a.talkRecord),o.partyNameSigna=t.getUrl(a.partyNameSigna),o.previewCode=i.previewCode,delete o.askTime,delete o.discussTime,delete o.caseReasonCarNo,l({type:"DynamicLaw/lawCaseRegist",payload:o,callback:function(){r(),setTimeout(function(){return n()},500)}})}})},t.modalTitle=function(){return Q.a.createElement("div",{className:Pe.a.modalHeader},Q.a.createElement("div",{className:Pe.a.title},Q.a.createElement("span",{className:Pe.a.value},"案件登记")),Q.a.createElement("div",null,Object(_.c)(Xe[0])?Q.a.createElement(ce.a,{type:"primary",onClick:function(){return t.okHandle()}},"保存案件"):null))},t.persionArg1="",t.persionArg2="",t.persionArg3="",t.signas={},t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){this.getDetail()}},{key:"render",value:function(){var e=this.props,a=e.form,t=e.modalVisible,l=e.handleModalVisible,r=this.state,n=r.partyRadio,i=r.isAgent,s=r.visiblePerson;return Q.a.createElement(T.a,{destroyOnClose:!0,className:Pe.a.modalStyle,title:this.modalTitle(),visible:t,onCancel:function(){return l()},width:1150,footer:null},Q.a.createElement("div",{className:Pe.a.detailMsg},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 当事人信息"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},1===n?this.renderParty():this.renderPartyEnterprise())),Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 委托代理人信息"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},Q.a.createElement(ea,{labelCol:{span:2},wrapperCol:{span:10},style:ta,label:"委托代理人"},a.getFieldDecorator("isAgent",{initialValue:i})(Q.a.createElement(aa,{onChange:this.isAgentChange},Q.a.createElement(G.a,{value:1},"是"),Q.a.createElement(G.a,{value:0},"否")))),i?this.renderAgent():null)),Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 驾驶员信息"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderDriver())),Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 案件信息"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderCaseInfo())),Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 签字"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},this.rendeautograph())),Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 音频资料"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderAudioData())),Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 附件"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderEnclosure())),s&&Q.a.createElement(_e,{modalVisible:s,handleModalVisible:this.handlePersonVisible,selectData:this.selectData}))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t=e.TrafficApiV2BusData.dyDataDetail,l=a.detail;if(JSON.stringify(l)!==JSON.stringify(t)){var r=t.registerInfo,n=t.openRecord,i=t.busDynamicLawDate,s=r||{};return{detail:t,busDynamicLawDate:i,openRecord:n,registerInfo:s,truckBelong:s.truckBelong||1,previewCode:i.previewCode,busStaticData:i.busStaticData||{}}}return null}}]),a}(q.PureComponent),u.defaultProps={handleModalVisible:function(){}},m=p))||m)||m,ra=(t("sRBo"),t("kaz8")),na=pe.a.Item,ia=ra.a.Group,sa=Object(K.connect)(function(e){return{DynamicLaw:e.DynamicLaw,loading:e.loading.models.DynamicLaw}})(g=pe.a.create()((f=E=function(e){function a(){var e,t;B()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=P()(this,(e=Y()(a)).call.apply(e,[this].concat(r)))).state={printFileList:[],downLoaing:!1},t.getList=function(){var e=t.props;(0,e.dispatch)({type:"DynamicLaw/fileList",payload:{pageBean:{page:1,pageSize:1e5,showTotal:!0},querys:[{property:"organCode",value:e.organCode||51,group:"main",operation:"EQUAL",relation:"AND"}]},callback:function(e){t.setState({printFileList:e})}})},t.renderOption=function(){return t.state.printFileList.map(function(e){return Q.a.createElement("div",{key:e.fileId},Q.a.createElement(ra.a,{value:e.fileId},e.fileName))})},t.templatePrint=function(e){t.setState({downLoaing:!0});var a=t.props,l=a.handleModalVisible,r=a.dispatch,n=a.previewCode;r({type:"DynamicLaw/filePrint",payload:{carNo:a.carNo,previewCode:n,fileIds:e.template.join()},callback:function(e){404===e?ie.a.error("模板异常，无法下载"):setTimeout(function(){return l()},1500),t.setState({downLoaing:!1})}})},t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this,a=this.props,t=a.modalVisible,l=a.handleModalVisible,r=a.form,n=this.state,i=n.printFileList,s=n.downLoaing,o=i.length<=0?{footer:null}:{};return Q.a.createElement(T.a,Z()({destroyOnClose:!0,title:"打印预览选择",className:Pe.a.formModal,visible:t,onOk:function(){r.validateFields(function(a,t){a||e.templatePrint(t)})},onCancel:function(){return l()}},o),Q.a.createElement(xe.a,{spinning:s,tip:"正在下载······"},Q.a.createElement("div",{className:Pe.a.formModalBody},i.length<=0?Q.a.createElement(x.a,{description:"暂无模板，请先上传"}):Q.a.createElement(na,{label:"模板名称"},r.getFieldDecorator("template",{initialValue:i.map(function(e){return e.fileId})})(Q.a.createElement(ia,null,this.renderOption()))))))}}]),a}(q.PureComponent),E.defaultProps={onlineUrl:"",handleModalVisible:function(){}},g=f))||g)||g,oa=ee.a.RangePicker,ca=ue.a.Option,da=pe.a.Item,ma=G.a.Group,ua={marginBottom:0},pa=["/lawment/dynamic/casehand/lawCaseRegist","/lawment/dynamic/casehand/getFilePrint"],ga=Object(K.connect)(function(e){var a=e.File,t=e.DynamicLaw,l=e.loading;return{File:a,DynamicLaw:t,loading:l.models.DynamicLaw,fileLoading:l.models.File}})(h=pe.a.create()((v=y=function(e){function a(e){var t;return B()(this,a),(t=P()(this,Y()(a).call(this,e))).state={detail:{},partyRadio:1,isAgent:0,templateVisible:!1,fileListCardUrl:[],fileListDriveLicense:[],fileListDriverLicense:[],fileListAgentIdCard:[],fileListTransportLicense:[],fileListPractitioner:[],fileListAudio:[],talkRecordFileList:[],partyNameSignaFileList:[],visiblePerson:!1,pageBean:{page:1,pageSize:100,showTotal:!0},baseQuery:[{property:"fileType",value:3,group:"main",operation:"EQUAL",relation:"AND"}]},t.getLawCase=function(){var e=t.props;(0,e.dispatch)({type:"DynamicLaw/getLawCase",payload:{previewCode:e.previewCode},callback:function(e){e&&(t.setState({partyRadio:parseInt(e.personalororgan,10),isAgent:parseInt(e.isAgent,10)}),t.setStateImage(e,function(){setTimeout(function(){t.signas={coOrganizerSigna:e.coOrganizerSigna,undertakerSigna:e.undertakerSigna},t.setState({detail:e})},100)}))}})},t.uploadBase=function(){return{name:"files",action:"/result/api/file/v1/fileUpload",listType:"picture",accept:".jpg,.jpeg,.png",data:{type:5,xbType:""},beforeUpload:_.D,headers:{Authorization:"Bearer ".concat(Object(_.z)("token")[0]),"x-requested-with":"XMLHttpRequest"}}},t.showPersionModal=function(e,a,l){t.persionArg1=e,t.persionArg2=a,t.persionArg3=l,t.handlePersonVisible(!0)},t.handlePersonVisible=function(e){t.setState({visiblePerson:!!e})},t.selectData=function(e){var a,l=e.lawCard,r=e.fullname,n=e.lawSigna,i=t.props.form;t.signas[t.persionArg3]=n,i.setFieldsValue((a={},ne()(a,t.persionArg1,r),ne()(a,t.persionArg2,l),a))},t.handleTemplateVisible=function(e){t.setState({templateVisible:!!e})},t.partyRadioChange=function(e){var a=e.target.value;t.setState({partyRadio:a})},t.isAgentChange=function(e){var a=e.target.value;t.setState({isAgent:a})},t.renderParty=function(){var e=t.props.form,a=t.state.detail;return Q.a.createElement("div",{className:Pe.a.inputGroup},Q.a.createElement(pe.a,{labelCol:{span:7},wrapperCol:{span:17}},Q.a.createElement($.a,{gutter:8},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"类型"},e.getFieldDecorator("personalororgan",{initialValue:1})(Q.a.createElement(ue.a,{disabled:!0,style:{width:"100%"}},Q.a.createElement(ca,{value:1},"个人"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"姓名"},e.getFieldDecorator("partyName",{initialValue:a.partyName})(Q.a.createElement(ae.a,{readOnly:!0})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"性别"},e.getFieldDecorator("partySex",{initialValue:a.partySex})(Q.a.createElement(ue.a,{style:{width:"100%"}},Q.a.createElement(ca,{value:1},"男"),Q.a.createElement(ca,{value:2},"女"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"身份证号"},e.getFieldDecorator("partyIdcard",{initialValue:a.partyIdcard,rules:[{validator:_.e}]})(Q.a.createElement(ae.a,{readOnly:!0})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"联系方式"},e.getFieldDecorator("partyTel",{initialValue:a.partyTel})(Q.a.createElement(ae.a,{readOnly:!0})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"住址"},e.getFieldDecorator("partyAddr",{initialValue:a.partyAddr})(Q.a.createElement(ae.a,{readOnly:!0})))))))},t.renderPartyEnterprise=function(){var e=t.props.form,a=t.state.detail;return Q.a.createElement("div",{className:Pe.a.inputGroup},Q.a.createElement(pe.a,{labelCol:{span:6},wrapperCol:{span:18}},Q.a.createElement($.a,{gutter:8},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"类型"},e.getFieldDecorator("personalororgan",{initialValue:2})(Q.a.createElement(ue.a,{disabled:!0,style:{width:"100%"}},Q.a.createElement(ca,{value:2},"企业或其他组织"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"企业名称"},e.getFieldDecorator("partyName",{initialValue:a.partyName})(Q.a.createElement(ae.a,{readOnly:!0})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"法定代表人"},e.getFieldDecorator("legalMan",{initialValue:a.legalMan})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{labelCol:{span:7},wrapperCol:{span:17},style:ua,label:"统一信用代码"},e.getFieldDecorator("creditCode",{initialValue:a.creditCode})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"企业电话"},e.getFieldDecorator("companyTel",{initialValue:a.companyTel})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"注册地址"},e.getFieldDecorator("companyAddr",{initialValue:a.companyAddr})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"法人手机"},e.getFieldDecorator("legalManTel",{initialValue:a.legalManTel})(Q.a.createElement(ae.a,{readOnly:!0})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"法人住址"},e.getFieldDecorator("legalManAddr",{initialValue:a.legalManAddr})(Q.a.createElement(ae.a,null)))))))},t.renderAgent=function(){var e=t.props.form,a=t.state.detail;return Q.a.createElement("div",{className:Pe.a.inputGroup},Q.a.createElement(pe.a,{labelCol:{span:7},wrapperCol:{span:17}},Q.a.createElement($.a,{gutter:8},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"代理人姓名"},e.getFieldDecorator("agentName",{initialValue:a.agentName})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"性别"},e.getFieldDecorator("agentSex",{initialValue:a.agentSex})(Q.a.createElement(ue.a,null,Q.a.createElement(ca,{value:1},"男"),Q.a.createElement(ca,{value:2},"女"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"身份证号"},e.getFieldDecorator("agentIdcard",{initialValue:a.agentIdcard,rules:[{validator:_.e}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"联系方式"},e.getFieldDecorator("agentTel",{initialValue:a.agentTel,rules:[{validator:_.j}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"住址"},e.getFieldDecorator("agentAddr",{initialValue:a.agentAddr})(Q.a.createElement(ae.a,null)))))))},t.renderDriver=function(){var e=t.props.form,a=t.state.detail;return Q.a.createElement("div",{className:Pe.a.inputGroup},Q.a.createElement(pe.a,{labelCol:{span:7},wrapperCol:{span:17}},Q.a.createElement($.a,{gutter:8},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"驾驶员姓名"},e.getFieldDecorator("driverName",{initialValue:a.driverName})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"性别"},e.getFieldDecorator("driverSex",{initialValue:a.driverSex})(Q.a.createElement(ue.a,null,Q.a.createElement(ca,{value:1},"男"),Q.a.createElement(ca,{value:2},"女"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"身份证号"},e.getFieldDecorator("driverIdcard",{initialValue:a.driverIdcard,rules:[{validator:_.e}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"联系方式"},e.getFieldDecorator("driverTel",{initialValue:a.driverTel,rules:[{required:!0,validator:_.j}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"住址"},e.getFieldDecorator("driverAddr",{initialValue:a.driverAddr})(Q.a.createElement(ae.a,null)))))))},t.toops=function(){return Q.a.createElement("div",{style:{width:400}},Q.a.createElement("h3",null,"非现场执法处罚优惠规则"),Q.a.createElement("p",null,"1、违法超限超载",Q.a.createElement("span",{style:{color:"red"}},"5吨"),"以上-",Q.a.createElement("span",{style:{color:"red"}},"10吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻80%实施处罚。",Q.a.createElement("br",null),"2、违法超限超载",Q.a.createElement("span",{style:{color:"red"}},"10吨"),"以上-",Q.a.createElement("span",{style:{color:"red"}},"20吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻75%实施处罚。",Q.a.createElement("br",null),"3、违法超限超载",Q.a.createElement("span",{style:{color:"red"}},"20吨"),"以上-",Q.a.createElement("span",{style:{color:"red"}},"30吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻70%实施处罚。",Q.a.createElement("br",null),"4、违法超限超载",Q.a.createElement("span",{style:{color:"red"}},"30吨"),"以上-",Q.a.createElement("span",{style:{color:"red"}},"40吨"),"以下的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻65%实施处罚。",Q.a.createElement("br",null),"5、违法超限超载",Q.a.createElement("span",{style:{color:"red"}},"40吨"),"以上的，按《超限运输车辆行驶公路管理规定》的处罚标准减轻60%实施处罚。",Q.a.createElement("br",null),"6、1年内同一车辆经动态自动称重设备记录多次违法行为且主动前来接受调查处理的，按《超限运输车辆行驶公路管理规定》的处罚标准，累计罚款不超过",Q.a.createElement("span",{style:{color:"red"}},"3万元"),"。"))},t.renderCaseInfo=function(){var e=t.props.form,a=t.state.detail;return Q.a.createElement("div",{className:Pe.a.inputGroup},Q.a.createElement(pe.a,{labelCol:{span:7},wrapperCol:{span:17}},Q.a.createElement($.a,{gutter:8},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"案卷号"},e.getFieldDecorator("caseNo",{initialValue:a.caseNo,rules:[{required:!0,message:"请输入案卷号"}]})(Q.a.createElement(Re.a,{style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"货物名称"},e.getFieldDecorator("goodsName",{initialValue:a.goodsName,rules:[{required:!0,message:"请输入货物名称"}]})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"承办人"},e.getFieldDecorator("undertaker",{initialValue:a.undertaker||"",rules:[{required:!0,message:"请选择承办人 "}]})(Q.a.createElement(ae.a,{readOnly:!0,onClick:function(){return t.showPersionModal("undertaker","enforcementNo","undertakerSigna")}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"案件来源"},e.getFieldDecorator("caseSource",{initialValue:a.caseSource||"非现场执法"})(Q.a.createElement(ue.a,null,Q.a.createElement(ca,{value:"非现场执法"},"非现场执法"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"车货总重(kg)"},e.getFieldDecorator("weight",{initialValue:a.weight})(Q.a.createElement(Re.a,{readOnly:!0,style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"执法证号"},e.getFieldDecorator("enforcementNo",{initialValue:a.enforcementNo})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement(da,{labelCol:{span:10},wrapperCol:{span:14},style:ua,label:"案由"},e.getFieldDecorator("caseReasonCarNo",{initialValue:a.caseReason?a.caseReason.split(",")[0]:""})(Q.a.createElement(ae.a,{readOnly:!0})))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement("div",{className:Pe.a.radius},Q.a.createElement(da,{wrapperCol:{span:24},style:ua},e.getFieldDecorator("caseReason",{initialValue:a.caseReason&&a.caseReason.split(",")[1]||""})(Q.a.createElement(ae.a,null))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"轴数"},e.getFieldDecorator("axisNum",{initialValue:a.axisNum})(Q.a.createElement(Re.a,{readOnly:!0,style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"协办人"},e.getFieldDecorator("coOrganizer",{initialValue:a.coOrganizer,rules:[{required:!0,message:"请输入协办人"}]})(Q.a.createElement(ae.a,{readOnly:!0,onClick:function(){return t.showPersionModal("coOrganizer","organizerNo","coOrganizerSigna")}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"处罚金额",className:De.a.inputLabelLeft},e.getFieldDecorator("punishMoney",{initialValue:a.punishMoney,rules:[{required:!0,message:"请输入处罚金额"}]})(Q.a.createElement(Re.a,{style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"超限(kg)"},e.getFieldDecorator("limited",{initialValue:a.limited})(Q.a.createElement(Re.a,{readOnly:!0,style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"执法证号"},e.getFieldDecorator("organizerNo",{initialValue:a.organizerNo})(Q.a.createElement(ae.a,null)))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"讨论时间"},e.getFieldDecorator("discussTime",{rules:[{required:!0,message:"请选择讨论时间"}],initialValue:a.discussBeginTime&&a.discussEndTime?[Ee()(new Date(a.discussBeginTime),"YYYY-MM-DD HH:mm:ss"),Ee()(new Date(a.discussEndTime),"YYYY-MM-DD HH:mm:ss")]:""})(Q.a.createElement(oa,{showTime:!0,style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"询问时间"},e.getFieldDecorator("askTime",{initialValue:a.askBeginTime&&a.askEndTime?[Ee()(new Date(a.askBeginTime),"YYYY-MM-DD HH:mm:ss"),Ee()(new Date(a.askEndTime),"YYYY-MM-DD HH:mm:ss")]:"",rules:[{required:!0,message:"请选择询问时间"}]})(Q.a.createElement(oa,{showTime:!0,style:{width:"100%"}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"审核人"},e.getFieldDecorator("reviewer",{initialValue:a.reviewer,rules:[{required:!0,message:"请选择审核人"}]})(Q.a.createElement(ae.a,{readOnly:!0,onClick:function(){return t.showPersionModal("reviewer","reviewerNo","reviewerSigna")}})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"情况说明"},e.getFieldDecorator("hapDesc",{initialValue:a.hapDesc})(Q.a.createElement(ue.a,{style:{width:"100%"},placeholder:"请选择"},Q.a.createElement(ca,{value:"主动投案自首"},"主动投案自首"),Q.a.createElement(ca,{value:"有重大立功表现"},"有重大立功表现"),Q.a.createElement(ca,{value:"主动消除违法行为"},"主动消除违法行为"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"车辆说明"},e.getFieldDecorator("carDesc",{initialValue:a.carDesc})(Q.a.createElement(ae.a.TextArea,{autosize:!0})))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"负责人"},e.getFieldDecorator("principal",{initialValue:a.principal,rules:[{required:!0,message:"请选择负责人"}]})(Q.a.createElement(ae.a,{readOnly:!0,onClick:function(){return t.showPersionModal("principal","principalNo","principalSigna")}})))))))},t.formatUploadImg=function(e,a,l){t.setState(ne()({},l,e[a]?[{uid:"1",name:"当前图片",status:"done",url:_.E+e[a],thumbUrl:_.E+e[a]}]:[]))},t.setStateImage=function(e,a){t.formatUploadImg(e,"cardUrl","fileListCardUrl"),t.formatUploadImg(e,"driveLicenseUrl","fileListDriveLicense"),t.formatUploadImg(e,"driverLicenseUrl","fileListDriverLicense"),t.formatUploadImg(e,"agentIdcardUrl","fileListAgentIdCard"),t.formatUploadImg(e,"transportLicenseUrl","fileListTransportLicense"),t.formatUploadImg(e,"practitionerUrl","fileListPractitioner"),t.formatUploadImg(e,"liveRecord","fileListAudio"),t.formatUploadImg(e,"partyNameSigna","partyNameSignaFileList"),t.formatUploadImg(e,"talkRecord","talkRecordFileList"),a&&a()},t.cardUrlChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListCardUrl:e})})},t.driveLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListDriveLicense:e})})},t.driverLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListDriverLicense:e})})},t.agentIdCardChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListAgentIdCard:e})})},t.transportLicenseChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListTransportLicense:e})})},t.practitionerChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListPractitioner:e})})},t.audioChange=function(e){t.imgChangeUtil(e,function(e){t.setState({fileListAudio:e})})},t.talkRecordChange=function(e){t.imgChangeUtil(e,function(e){t.setState({talkRecordFileList:e})})},t.partyNameSignaChange=function(e){t.imgChangeUtil(e,function(e){t.setState({partyNameSignaFileList:e})})},t.imgChangeUtil=function(e,a){"done"===e.file.status?200===e.file.response.code?(ie.a.success("上传成功"),a(e.fileList)):ie.a.error(e.file.response.code.msg):"error"===e.file.status?ie.a.error("上传失败"):"removed"===e.file.status&&a(e.fileList)},t.audioRemove=function(e){e.preventDefault(),t.setState({fileListAudio:[]})},t.renderAudio=function(e){if(e.length){var a="";return a=e[0].url?e[0].url:_.E+e[0].response.filePath,Q.a.createElement("div",{style:{position:"relative",zIndex:10}},Q.a.createElement("a",{onClick:t.audioRemove,style:{position:"absolute",top:0,right:11,zIndex:100,fontSize:20,cursor:"pointer",lineHeight:"15px",color:"rgba(0, 0, 0, 0.45)"}},"×"),Q.a.createElement("audio",{style:{outline:"none"},src:a,controls:"controls"}))}return null},t.rendeautograph=function(){var e=t.props.form,a=t.state,l=a.detail.partyNameSigna,r=a.partyNameSignaFileList;return Q.a.createElement($.a,{gutter:{md:8,lg:16,xl:16}},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"当事人签字"},e.getFieldDecorator("partyNameSigna",{initialValue:l})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:r,onChange:t.partyNameSignaChange}),r.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片"))))))},t.renderAudioData=function(){var e=t.state,a=e.fileListAudio,l=e.talkRecordFileList,r=e.detail,n=t.props.form;return Q.a.createElement($.a,{gutter:{md:8,lg:16,xl:16}},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"询问记录音频资料"},n.getFieldDecorator("liveRecord",{initialValue:r.liveRecord})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{accept:".mp3",beforeUpload:_.b,showUploadList:!1,onChange:t.audioChange}),a.length?null:Q.a.createElement(ce.a,{style:{marginBottom:10}},Q.a.createElement(Me.a,{type:"upload"})," 选择录音文件mp3")))),t.renderAudio(a)),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"讨论记录音频资料"},n.getFieldDecorator("talkRecord",{initialValue:r.talkRecord})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{accept:".mp3",showUploadList:!1,beforeUpload:_.b,onChange:t.talkRecordChange}),l.length?null:Q.a.createElement(ce.a,{style:{marginBottom:10}},Q.a.createElement(Me.a,{type:"upload"})," 选择录音文件mp3")))),t.renderAudio(l)))},t.renderEnclosureDetail=function(){var e=t.props.form,a=t.state,l=a.detail,r=a.isAgent,n=a.fileListCardUrl,i=a.fileListDriveLicense,s=a.fileListDriverLicense,o=a.fileListAgentIdCard,c=a.fileListTransportLicense,d=a.fileListPractitioner;return Q.a.createElement(q.Fragment,null,Q.a.createElement($.a,{gutter:{md:8,lg:16,xl:16}},Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"车辆道路运输证或其他"},e.getFieldDecorator("transportLicenseUrl",{initialValue:l.transportLicenseUrl,rules:[{required:!0,message:"请上传车辆道路运输证或其他"}]})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:c,onChange:t.transportLicenseChange}),c.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"驾驶员从业资格证或其他"},e.getFieldDecorator("practitionerUrl",{initialValue:l.practitionerUrl,rules:[{required:!0,message:"请上传驾驶员从业资格证或其他"}]})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:d,onChange:t.practitionerChange}),d.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"驾驶员驾驶证"},e.getFieldDecorator("driverLicenseUrl",{initialValue:l.driverLicenseUrl})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:s,onChange:t.driverLicenseChange}),s.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片")))))),Q.a.createElement($.a,{gutter:{md:8,lg:16,xl:16}},r?Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"委托代理人身份证"},e.getFieldDecorator("agentIdcardUrl",{initialValue:l.agentIdcardUrl,rules:[{required:!0,message:"请上传委托代理人身份证"}]})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:o,onChange:t.agentIdCardChange}),o.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片"))))):null,Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"当事人身份证/企业营业执照"},e.getFieldDecorator("cardUrl",{initialValue:l.cardUrl})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:n,onChange:t.cardUrlChange}),n.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片"))))),Q.a.createElement(te.a,{md:8,sm:24},Q.a.createElement(da,{style:ua,label:"车辆行驶证"},e.getFieldDecorator("driveLicenseUrl",{initialValue:l.driveLicenseUrl})(Q.a.createElement(Te.a,Z()({},t.uploadBase(),{defaultFileList:i,onChange:t.driveLicenseChange}),i.length?null:Q.a.createElement(ce.a,null,Q.a.createElement(Me.a,{type:"upload"})," 选择图片")))))))},t.getUrl=function(e){if("object"==typeof e){var a=e.file.response;return a?a.filePath:""}return e},t.okHandle=function(){var e=t.props,a=e.form,l=e.previewCode,r=e.dispatch,n=e.handleModalVisible,i=e.modalSuccess,s=t.state.detail;a.validateFields(function(e,o){if(e){var c=Object.keys(e).map(function(a){return e[a].errors[0].message});ie.a.error(c.join(" , "))}else{a.resetFields();var d=oe()({},JSON.parse(JSON.stringify(o)),t.signas),m=JSON.parse(JSON.stringify(s)),u=o.askTime||["",""],p=o.discussTime||["",""];for(var g in d.askBeginTime=Ee()(u[0]).format("YYYY-MM-DD HH:mm:ss"),d.askEndTime=Ee()(u[1]).format("YYYY-MM-DD HH:mm:ss"),d.discussBeginTime=p[0]?Ee()(p[0]).format("YYYY-MM-DD HH:mm:ss"):"",d.discussEndTime=p[1]?Ee()(p[1]).format("YYYY-MM-DD HH:mm:ss"):"",d.caseReason="".concat(o.caseReasonCarNo,",").concat(o.caseReason||""),d.cardUrl=t.getUrl(o.cardUrl),d.driveLicenseUrl=t.getUrl(o.driveLicenseUrl),d.driverLicenseUrl=t.getUrl(o.driverLicenseUrl),d.agentIdcardUrl=t.getUrl(o.agentIdcardUrl),d.transportLicenseUrl=t.getUrl(o.transportLicenseUrl),d.practitionerUrl=t.getUrl(o.practitionerUrl),d.liveRecord=t.getUrl(o.liveRecord),d.talkRecord=t.getUrl(o.talkRecord),d.partyNameSigna=t.getUrl(o.partyNameSigna),d.previewCode=l,delete d.askTime,delete d.discussTime,delete d.caseReasonCarNo,d)m[g]=d[g];t.setState({detail:m}),r({type:"DynamicLaw/lawCaseRegist",payload:m,callback:function(){i(),setTimeout(function(){return n()},500)}})}})},t.showTemplateModal=function(){var e=t.state.detail,a=e.principalConfirm,l=e.reviewerConfirm;a&&l?t.handleTemplateVisible(!0):ie.a.error("案卷未确认，无法打印模板")},t.modalTitle=function(){return Q.a.createElement("div",{className:Pe.a.modalHeader},Q.a.createElement("div",{className:Pe.a.title},Q.a.createElement("span",{className:Pe.a.value},"案件登记")),Q.a.createElement("div",null,Object(_.c)(pa[0])?Q.a.createElement(ce.a,{type:"primary",onClick:function(){return t.okHandle()}},"保存案件"):null,Object(_.c)(pa[1])?Q.a.createElement(ce.a,{className:De.a.import,style:{marginLeft:8},onClick:function(){return t.showTemplateModal()}},"打印预览"):null))},t.persionArg1="",t.persionArg2="",t.persionArg3="",t.signas={},t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){this.getLawCase()}},{key:"render",value:function(){var e=this.props,a=e.form,t=e.modalVisible,l=e.handleModalVisible,r=e.previewCode,n=e.carNo,i=e.loading,s=this.state,o=s.partyRadio,c=s.isAgent,d=s.detail,m=s.templateVisible,u=s.visiblePerson,p={organCode:d.organCode,previewCode:r,carNo:n,handleModalVisible:this.handleTemplateVisible};return Q.a.createElement(da,null,Q.a.createElement(T.a,{destroyOnClose:!0,title:this.modalTitle(),visible:t,className:Pe.a.modalStyle,onCancel:function(){return l()},width:1150,footer:null},Q.a.createElement(xe.a,{spinning:i},Q.a.createElement("div",{className:Pe.a.detailMsg},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 当事人信息"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},1===o?this.renderParty():this.renderPartyEnterprise())),Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 委托代理人信息"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},Q.a.createElement(da,{labelCol:{span:2},wrapperCol:{span:10},style:ua,label:"委托代理人"},a.getFieldDecorator("isAgent",{initialValue:c})(Q.a.createElement(ma,{onChange:this.isAgentChange},Q.a.createElement(G.a,{value:1},"是"),Q.a.createElement(G.a,{value:0},"否")))),c?this.renderAgent():null)),Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 驾驶员信息"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderDriver())),Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 案件信息"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderCaseInfo())),Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 签字"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},"{}"!==JSON.stringify(d)?this.rendeautograph():null)),Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 音频资料"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},"{}"!==JSON.stringify(d)?this.renderAudioData():null)),Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle}," 附件"),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},"{}"!==JSON.stringify(d)?this.renderEnclosureDetail():null)))),m?Q.a.createElement(sa,Z()({},p,{modalVisible:m})):null,u&&Q.a.createElement(_e,{modalVisible:u,handleModalVisible:this.handlePersonVisible,selectData:this.selectData}))}}]),a}(q.PureComponent),y.defaultProps={handleModalVisible:function(){}},h=v))||h)||h,Ea=pe.a.Item,fa=ue.a.Option,ha=ee.a.RangePicker,ya=["/lawment/dynamic/casehand/lawCaseClose","/lawment/dynamic/casehand/reviewer","/lawment/dynamic/casehand/principal"],va={pageNo:1,pageSize:10},ba={isStatus:1},Da=Object(K.connect)(function(e){var a=e.DynamicLaw,t=e.TrafficApiV2BusData,l=e.loading,r=e.system,n=e.user;return{Site:e.Site,system:r,currentUser:n.currentUser,DynamicLaw:a,loading:l.models.DynamicLaw,TrafficApiV2BusData:t,api2Loading:l.models.TrafficApiV2BusData}})(b=pe.a.create()(b=function(e){function a(){var e,t;B()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=P()(this,(e=Y()(a)).call.apply(e,[this].concat(r)))).state={modalVisible:!1,registerVisible:!1,registerUpdateVisible:!1,formValues:{},carNo:"",detailID:0,previewCode:"",siteCode:"",siteList:[],isRegist:0},t.columns=[{title:"检测站",dataIndex:"siteName"},{title:"车牌号码",dataIndex:"carNo"},{title:"检测时间",width:170,dataIndex:"previewTime",render:function(e){return Ee()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"轴数",dataIndex:"axleNumber"},{title:"限重(t)",dataIndex:"weightLimited",render:function(e){return Q.a.createElement(de.a,{color:"#87d068"},(e/1e3).toFixed(2)," ")}},{title:"总重(t)",dataIndex:"totalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"超限重(t)",dataIndex:"overLoad",render:function(e){return e>0?Q.a.createElement(de.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"overLoadRate",render:function(e){return e?(100*e).toFixed(2):e}},{title:"审核时间",width:170,dataIndex:"executorTime"},{title:"操作",width:210,render:function(e,a){return Q.a.createElement(q.Fragment,null,Q.a.createElement(me.a,{placement:"left",title:"确认车辆信息"},Q.a.createElement(ce.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),Q.a.createElement(ke.a,{type:"vertical"}),Q.a.createElement(me.a,{placement:"left",title:"案件登记"},Q.a.createElement(ce.a,{style:a.isRegist?{background:"green",borderColor:"green"}:null,onClick:function(){return t.showRegisterModal(a)},type:"primary",shape:"circle",icon:"file-protect",size:"small"})),t.columnsBtn(a),Object(_.c)(ya[0])?!!a.isRegist&&Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(ke.a,{type:"vertical"}),Q.a.createElement(me.a,{placement:"left",title:"案件办结"},Q.a.createElement(ce.a,{onClick:function(){return t.lawCaseCloseClick(a)},type:"primary",shape:"circle",icon:"file-done",size:"small"}))):null)}}],t.columnsBtn=function(e){var a=e.principalConfirm,l=e.reviewerConfirm,r=e.previewCode;return(!a||!l)&&Q.a.createElement(Q.a.Fragment,null,Object(_.c)(ya[1])&&!l&&Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(ke.a,{type:"vertical"}),Q.a.createElement(me.a,{placement:"left",title:"案件监察"},Q.a.createElement(ce.a,{type:"primary",shape:"circle",icon:"safety-certificate",size:"small",onClick:function(){return t.RPMUtil("DynamicLaw/reviewer",r)}}))),Object(_.c)(ya[2])&&Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(ke.a,{type:"vertical"}),Q.a.createElement(me.a,{placement:"left",title:"案件管理"},Q.a.createElement(ce.a,{type:"primary",shape:"circle",icon:"profile",size:"small",disabled:!l,onClick:function(){return t.RPMUtil("DynamicLaw/principal",r)}}))))},t.showRegisterModal=function(e){return t.setState({carNo:e.carNo,detailID:e.id,previewCode:e.previewCode}),e.isRegist?t.handleRegisterUpdateVisible(!0):t.handleRegisterVisible(!0)},t.showDetailModal=function(e){t.setState({detailID:e.id,siteCode:e.siteCode,isRegist:e.isRegist}),t.handleModalVisible(!0)},t.lawCaseCloseClick=function(e){if(!e.isRegist)return T.a.warning({title:"系统提示",content:"该案件案件登记未完成，请先案件登记"});var a=t.props.dispatch;return T.a.confirm({title:"系统提示",content:"案件确认无误，办结完成后，将无法进行更改！",onOk:function(){a({type:"DynamicLaw/lawCaseClose",payload:{previewCode:e.previewCode},callback:function(){t.modalSuccess()}})}})},t.RPMUtil=function(e,a){T.a.confirm({title:"系统提示",content:"确认当前操作?",onOk:function(){var l=t.props.dispatch,r=ie.a.loading("确认中······",0);l({type:e,payload:a,callback:function(e){200===e&&t.modalSuccess(),r()}})}})},t.getList=function(e){(0,t.props.dispatch)({type:"TrafficApiV2BusData/busDynamicDataForPage",payload:oe()({},e)})},t.getSiteIN=function(){return{siteCodes:t.state.siteList.map(function(e){return e.code})}},t.handleStandardTableChange=function(e){var a=t.state.formValues,l=oe()({pageNo:e.current,pageSize:e.pageSize},ba,a);t.getList(l)},t.handleFormReset=function(){var e=t.props.form,a=Object(_.z)("organId");e.resetFields(),t.getSite(a,function(){var e=t.getSiteIN();t.setState({formValues:e}),t.getList(oe()({},va,ba,e))})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l="YYYY-MM-DDTHH:mm:ss",r=a.previewTime,n=a.siteCodes,i=a.startOverLoadRate,s=a.endOverLoadRate,o=a.startTotalLoad,c=a.endTotalLoad;if(!i&&!s||Object(_.F)(i)&&Object(_.F)(s))if(!o&&!c||Object(_.F)(o)&&Object(_.F)(c)){var d=r?{startPreviewTime:Ee()(r[0]).format(l),endPreviewTime:Ee()(r[1]).format(l)}:{};if(t.getSiteIN().siteCodes.length){var m=n?[n]:t.getSiteIN().siteCodes,u=oe()({},a,d,{siteCodes:m});delete u.previewTime,t.setState({formValues:u}),t.getList(oe()({},va,ba,u))}else ie.a.error("当前机构暂无站点")}else ie.a.error("总重请输入数字");else ie.a.error("超限幅度请输入数字")}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e}),e||t.resetDetail()},t.resetDetail=function(){(0,t.props.dispatch)({type:"TrafficApiV2BusData/resetDetail"})},t.handleRegisterVisible=function(e){t.setState({registerVisible:!!e})},t.handleRegisterUpdateVisible=function(e){t.setState({registerUpdateVisible:!!e}),e||t.setState({carNo:"",detailID:0})},t.treeSelectChange=function(e){t.props.form.setFieldsValue({siteCodes:void 0}),t.getSite(e)},t.getSite=function(e,a){var l=t.props;(0,l.dispatch)({type:"Site/siteByUserSite",payload:{organId:e,siteIds:l.siteList.map(function(e){return e.code})},callback:function(e){var l=e.map(function(e){return"1"===e.siteType?{code:e.siteCode,name:e.siteName}:""});t.setState({siteList:l},function(){a&&a(l)})}})},t.modalSuccess=function(){ie.a.success("操作成功");var e=t.state.formValues;t.getList(oe()({},e,ba,e))},t.importClick=function(){t.setState({importLoading:!0});var e=t.props.dispatch,a=t.state.formValues;e({type:"TrafficApiV2BusData/import",payload:oe()({},ba,a),callback:function(e){404===e&&ie.a.error("暂无数据"),t.setState({importLoading:!1})}})},t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){var e=this.props.siteList,a={siteCodes:e.map(function(e){return e.code})};this.getList(oe()({},va,ba,a)),this.setState({siteList:e,formValues:a})}},{key:"renderSimpleForm",value:function(){var e=this.props,a=e.system.treeList,t=e.form.getFieldDecorator,l=this.state,r=l.siteList,n=l.importLoading,i=Object(_.z)("organId").toString();return Q.a.createElement(pe.a,{onSubmit:this.handleSearch,layout:"inline"},Q.a.createElement($.a,{gutter:16},Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),Q.a.createElement(Ea,{style:{flex:1}},t("name")(Q.a.createElement(le.a,{className:De.a.inputGroupLeftRadius,treeData:a,treeDefaultExpandedKeys:[i],style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测点"),Q.a.createElement(Ea,{style:{flex:1}},t("siteCodes")(Q.a.createElement(ue.a,{dropdownMatchSelectWidth:!1,className:De.a.inputGroupLeftRadius,placeholder:"请选择"},r.map(function(e){return Q.a.createElement(fa,{key:e.code,value:e.code},e.name)})))))),Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(ae.a.Group,{compact:!0},Q.a.createElement(Ea,{style:{display:"inline-block",width:"60%"}},t("startOverLoadRate")(Q.a.createElement(ae.a,{className:"".concat(De.a.inputGroupRightRadius," ").concat(De.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),Q.a.createElement(Ea,{style:{display:"inline-block",width:"40%"}},t("endOverLoadRate")(Q.a.createElement(ae.a,{className:De.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),Q.a.createElement(Ea,{style:{flex:1}},t("axleNumber")(Q.a.createElement(ue.a,{className:De.a.inputGroupLeftRadius,placeholder:"请选择"},Q.a.createElement(fa,{value:""},"全部轴数"),Q.a.createElement(fa,{value:2},"2"),Q.a.createElement(fa,{value:3},"3"),Q.a.createElement(fa,{value:4},"4"),Q.a.createElement(fa,{value:5},"5"),Q.a.createElement(fa,{value:6},"6"),Q.a.createElement(fa,{value:"other"},"其他")))))),Q.a.createElement(te.a,{md:6,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),Q.a.createElement(Ea,{style:{flex:1}},t("previewTime")(Q.a.createElement(ha,{className:De.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[Ee()("00:00:00","HH:mm:ss"),Ee()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})))))),Q.a.createElement($.a,{gutter:16},Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(ae.a.Group,{compact:!0},Q.a.createElement(Ea,{style:{display:"inline-block",width:"50%"}},t("startTotalLoad")(Q.a.createElement(ae.a,{className:"".concat(De.a.inputGroupRightRadius," ").concat(De.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),Q.a.createElement(Ea,{style:{display:"inline-block",width:"50%"}},t("endTotalLoad")(Q.a.createElement(ae.a,{className:De.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement(Ea,null,t("carNo")(Q.a.createElement(ae.a,{addonBefore:"车牌号",placeholder:"请输入"})))),Q.a.createElement(te.a,{md:10,sm:24,offset:5},Q.a.createElement("div",{style:{overflow:"hidden"}},Q.a.createElement("div",{style:{float:"right",marginBottom:24}},Q.a.createElement(ce.a,{type:"primary",htmlType:"submit"},"查询"),Q.a.createElement(ce.a,{className:De.a.import,icon:"import",onClick:this.importClick,loading:n,disabled:n,style:{marginLeft:8}},"导出"),Q.a.createElement(ce.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.TrafficApiV2BusData.dyData,t=e.api2Loading,l=this.state,r=l.isRegist,n=l.modalVisible,i=l.registerVisible,s=l.registerUpdateVisible,o=l.detailID,c=l.siteCode,d=l.previewCode,m=l.carNo,u={handleModalVisible:this.handleModalVisible,detailID:o,siteCode:c,modalSuccess:this.modalSuccess,loading:t,isRegist:r},p={carNo:m,detailID:o,previewCode:d,modalSuccess:this.modalSuccess},g={handleModalVisible:this.handleRegisterVisible},E={handleModalVisible:this.handleRegisterUpdateVisible};return Q.a.createElement(q.Fragment,null,Q.a.createElement("div",{className:ve.a.tableList},Q.a.createElement("div",{className:ve.a.tableListForm},this.renderSimpleForm()),Q.a.createElement(fe.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange})),n&&o?Q.a.createElement(Ke,Z()({},u,{modalVisible:n})):null,i&&Q.a.createElement(la,Z()({},p,g,{modalVisible:i})),s&&Q.a.createElement(ga,Z()({},p,E,{modalVisible:s})))}}]),a}(q.PureComponent))||b)||b,wa=t("PJYZ"),La=t.n(wa),Ca=t("EQVw"),Na=t("HsTC"),Sa=["/lawment/dynamic/casehand/lawCaseRevoke","/lawment/dynamic/casehand/getFilePrint"],Va=[{key:"car",tab:"车辆详细信息"},{key:"case",tab:"案件登记信息"}],Fa=Object(K.connect)(function(e){return{DynamicLaw:e.DynamicLaw,loading:e.loading.models.DynamicLaw}})(D=pe.a.create()((L=w=function(e){function a(){var e,t;B()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=P()(this,(e=Y()(a)).call.apply(e,[this].concat(r)))).state={key:"car",caseDetail:{},detailID:"",carDetail:{},templateVisible:!1,lawCaseRevokeVisible:!1},t.getLawCase=function(){var e=t.props;(0,e.dispatch)({type:"DynamicLaw/getLawCase",payload:{previewCode:e.previewCode},callback:function(e){e&&t.setState({caseDetail:e})}})},t.getOvertruckRegisterInfo=function(){var e=t.props;(0,e.dispatch)({type:"DynamicLaw/busDynamicLawDataByPreviewCode",payload:{previewCode:e.previewCode},callback:function(e){e&&t.setState({carDetail:e,detailID:e.busDynamicLawDate.id})}})},t.onTabChange=function(e){t.setState({key:e})},t.renderContent=function(e){var a=t.props.previewCode,l=t.state,r=l.caseDetail,n=l.carDetail,i="";switch(e){case"car":i=Q.a.createElement(Ca.a,{previewCode:a,detail:n});break;case"case":i=Q.a.createElement(Na.a,{previewCode:a,detail:r});break;default:i=""}return i},t.modalTitle=function(){var e=t.state.carDetail.busDynamicLawDate||{};return Q.a.createElement("div",{className:Pe.a.modalHeader},Q.a.createElement("div",{className:Pe.a.title},Q.a.createElement("span",{className:Pe.a.value},e.carNo),Q.a.createElement("span",{className:Pe.a.time},Ee()(e.previewTime).format("YYYY-M-D HH:mm:ss"))),Q.a.createElement("div",null,Object(_.c)(Sa[1])?Q.a.createElement(ce.a,{style:{background:"#38b03f",color:"#fff",marginLeft:5},onClick:function(){return t.handleTemplateVisible(!0)}},"打印预览"):null))},t.modalSuccess=function(){var e=t.props,a=e.handleModalVisible,l=e.modalSuccess;a(),l()},t.handLawCaseRevokeVisible=function(e){t.setState({lawCaseRevokeVisible:!!e})},t.handleTemplateVisible=function(e){var a=t.props.RPType,l=a.reviewerConfirm,r=a.principalConfirm;l&&r?t.setState({templateVisible:!!e}):ie.a.error("案卷未确认，无法打印模板")},t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){this.getOvertruckRegisterInfo(),this.getLawCase()}},{key:"render",value:function(){var e=this.props,a=e.handleModalVisible,t=e.modalVisible,l=e.loading,r=e.previewCode,n=this.state,i=n.key,s=n.caseDetail,o=n.carDetail,c=n.templateVisible,d=n.lawCaseRevokeVisible,m=n.detailID,u={organCode:s.organCode,previewCode:r,carNo:Object.keys(o).length?o.busDynamicLawDate.carNo:"",handleModalVisible:this.handleTemplateVisible},p={handleModalVisible:this.handLawCaseRevokeVisible,modalSuccess:this.modalSuccess,detailID:m};return Q.a.createElement(T.a,{destroyOnClose:!0,title:this.modalTitle(),visible:t,onCancel:function(){return a()},width:1150,footer:null,className:Pe.a.modalStyle},Q.a.createElement(R.a,{bordered:!1,tabList:Va,activeTabKey:i,bodyStyle:{padding:0},onTabChange:this.onTabChange,headStyle:{padding:0,margin:"0 24px"}},Q.a.createElement(Ie.a,{loading:l},"{}"!==JSON.stringify(o)?this.renderContent(i):null)),c&&Q.a.createElement(sa,Z()({},u,{modalVisible:c})),d&&Q.a.createElement(Ye,Z()({},p,{modalVisible:d})))}}]),a}(q.PureComponent),w.defaultProps={handleModalVisible:function(){}},D=L))||D)||D,ka=["/lawment/dynamic/penalty"],Ia=pe.a.Item,Ra=ue.a.Option,xa=Object(K.connect)(function(e){var a=e.DynamicLaw,t=e.loading;return{system:e.system,currentUser:e.user.currentUser,DynamicLaw:a,loading:t.models.DynamicLaw}})(C=pe.a.create()(C=function(e){function a(){var e,t;B()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=P()(this,(e=Y()(a)).call.apply(e,[this].concat(r)))).state={modalVisible:!1,formValues:[],RPType:{reviewerConfirm:0,principalConfirm:0},detailID:0,previewCode:"",importLoading:!1,pageBean:{page:1,pageSize:10,showTotal:!0},baseQuery:[{property:"isArchive",value:0,group:"main",operation:"EQUAL",relation:"AND"},{property:"closCase",value:2,group:"main",operation:"EQUAL",relation:"AND"}]},t.columns=[{title:"案卷号",dataIndex:"caseNo"},{title:"当事人",dataIndex:"partyName"},{title:"车牌号",dataIndex:"caseReason",render:function(e){return e?e.split(",")[0]:""}},{title:"总重(t)",dataIndex:"weight",render:function(e){return(e/1e3).toFixed(2)}},{title:"超重(t)",dataIndex:"limited",render:function(e){return e>0?Q.a.createElement(de.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"处罚金额",dataIndex:"punishMoney"},{title:"结案日期",dataIndex:"closeTime"},{title:"承办人",dataIndex:"undertaker"},{title:"状态",dataIndex:"isArchive",render:function(){return"未签批"}},{title:"操作",width:90,render:function(e,a){return Q.a.createElement(q.Fragment,null,Q.a.createElement(me.a,{placement:"left",title:"查看详情"},Q.a.createElement(ce.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),Object(_.c)(ka[0])?Q.a.createElement(q.Fragment,null,Q.a.createElement(ke.a,{type:"vertical"}),Q.a.createElement(me.a,{placement:"left",title:"签批"},Q.a.createElement(ce.a,{onClick:function(){return t.placeOnFile(a.previewCode)},type:"primary",shape:"circle",icon:"database",size:"small"}))):null)}}],t.showDetailModal=function(e){var a=e.id,l=e.previewCode,r=e.reviewerConfirm,n=e.principalConfirm;t.setState({detailID:a,previewCode:l,RPType:{reviewerConfirm:r,principalConfirm:n}}),t.handleModalVisible(!0)},t.placeOnFile=function(e){var a=La()(t);T.a.confirm({title:"系统提示",content:"确定通过签批吗？",onOk:function(){var t=a.props.dispatch,l=a.state,r=l.pageBean,n=l.formValues,i=l.baseQuery;t({type:"DynamicLaw/batchPass",payload:{previewCode:e},callback:function(){ie.a.success("操作成功"),a.getList({pageBean:r,querys:i.concat(n)})}})}})},t.jzUploadFile=function(e){var a=t.props.dispatch,l=t.state,r=l.pageBean,n=l.formValues,i=l.baseQuery;a({type:"DynamicLaw/jzUpload",payload:{previewCode:e},callback:function(){ie.a.success("上传成功"),t.getList({pageBean:r,querys:i.concat(n)})}})},t.getList=function(e){(0,t.props.dispatch)({type:"DynamicLaw/getBusDynamicLawCase",payload:oe()({},e,{sorter:[{direction:"DESC",property:"closeTime"}]})})},t.handleStandardTableChange=function(e){var a=t.state,l=a.formValues,r=a.baseQuery,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:r.concat(l)};t.getList(n)},t.handleFormReset=function(){var e=t.props.form,a=t.state,l=a.pageBean,r=a.baseQuery;e.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:l,querys:r})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l=t.state,r=l.pageBean,n=l.baseQuery,i=a.overLoadRateStart,s=a.overLoadRateEnd,o=a.totalLoadStart,c=a.totalLoadEnd;if(!i&&!s||Object(_.F)(i)&&Object(_.F)(s))if(!o&&!c||Object(_.F)(o)&&Object(_.F)(c)){var d=[{property:"limited",value:i&&s?[i/100,s/100]:"",group:"main",operation:"BETWEEN",relation:"OR"},{property:"axisNum",value:"other"===a.axisNum?6:a.axisNum||"",group:"main",operation:"other"===a.axisNum?"GREAT":"EQUAL",relation:"OR"},{property:"weight",value:o&&c?[1e3*o,1e3*c]:"",group:"main",operation:"BETWEEN",relation:"OR"},{property:"caseReason",value:a.caseReason||"",group:"main",operation:"LIKE",relation:"OR"}].filter(function(e){return e.value});t.setState({formValues:d}),t.getList({pageBean:r,querys:n.concat(d)})}else ie.a.error("总重请输入数字");else ie.a.error("超限幅度请输入数字")}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.importClick=function(){t.setState({importLoading:!0});var e=t.props.dispatch,a=t.state,l=a.pageBean,r=a.baseQuery,n=a.formValues;e({type:"DynamicLaw/exportBusDynamicLawCase",payload:{pageBean:l,querys:r.concat(n)},callback:function(e){404===e&&ie.a.error("暂无数据"),t.setState({importLoading:!1})}})},t.modalSuccess=function(){ie.a.success("操作成功");var e=t.state,a=e.pageBean,l=e.formValues,r=e.baseQuery;t.getList({pageBean:a,querys:r.concat(l)})},t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){var e=this.state,a=e.pageBean,t=e.baseQuery;this.getList({pageBean:a,querys:t})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,a=this.state.importLoading;return Q.a.createElement(pe.a,{onSubmit:this.handleSearch,layout:"inline"},Q.a.createElement($.a,{gutter:16},Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(ae.a.Group,{compact:!0},Q.a.createElement(Ia,{style:{display:"inline-block",width:"60%"}},e("overLoadRateStart")(Q.a.createElement(ae.a,{className:"".concat(De.a.inputGroupRightRadius," ").concat(De.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),Q.a.createElement(Ia,{style:{display:"inline-block",width:"40%"}},e("overLoadRateEnd")(Q.a.createElement(ae.a,{className:De.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),Q.a.createElement(Ia,{style:{flex:1}},e("axisNum")(Q.a.createElement(ue.a,{className:De.a.inputGroupLeftRadius,placeholder:"请选择"},Q.a.createElement(Ra,{value:""},"全部轴数"),Q.a.createElement(Ra,{value:2},"2"),Q.a.createElement(Ra,{value:3},"3"),Q.a.createElement(Ra,{value:4},"4"),Q.a.createElement(Ra,{value:5},"5"),Q.a.createElement(Ra,{value:6},"6"),Q.a.createElement(Ra,{value:"other"},"其他")))))),Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(ae.a.Group,{compact:!0},Q.a.createElement(Ia,{style:{display:"inline-block",width:"50%"}},e("totalLoadStart")(Q.a.createElement(ae.a,{className:"".concat(De.a.inputGroupRightRadius," ").concat(De.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),Q.a.createElement(Ia,{style:{display:"inline-block",width:"50%"}},e("totalLoadEnd")(Q.a.createElement(ae.a,{className:De.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement(Ia,null,e("caseReason")(Q.a.createElement(ae.a,{addonBefore:"车牌号",placeholder:"请输入"})))),Q.a.createElement(te.a,{md:6,sm:24},Q.a.createElement("div",{style:{overflow:"hidden"}},Q.a.createElement("div",{style:{float:"right",marginBottom:24}},Q.a.createElement(ce.a,{type:"primary",htmlType:"submit"},"查询"),Q.a.createElement(ce.a,{className:De.a.import,icon:"import",onClick:this.importClick,loading:a,disabled:a,style:{marginLeft:8}},"导出"),Q.a.createElement(ce.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.DynamicLaw.data,t=e.loading,l=this.state,r=l.modalVisible,n=l.detailID,i=l.previewCode,s=l.RPType,o={handleModalVisible:this.handleModalVisible,detailID:n,previewCode:i,RPType:s,modalSuccess:this.modalSuccess};return Q.a.createElement(q.Fragment,null,Q.a.createElement("div",{className:ve.a.tableList},Q.a.createElement("div",{className:ve.a.tableListForm},this.renderSimpleForm()),Q.a.createElement(fe.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange})),r&&n?Q.a.createElement(Fa,Z()({},o,{modalVisible:r})):null)}}]),a}(q.PureComponent))||C)||C,Ta=t("k5DC"),Ma=["/lawment/dynamic/filepige/upload","/lawment/dynamic/penalty"],Ba=pe.a.Item,Ua=ue.a.Option,Aa=Object(K.connect)(function(e){var a=e.DynamicLaw,t=e.loading;return{system:e.system,currentUser:e.user.currentUser,DynamicLaw:a,loading:t.models.DynamicLaw}})(N=pe.a.create()(N=function(e){function a(){var e,t;B()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=P()(this,(e=Y()(a)).call.apply(e,[this].concat(r)))).state={modalVisible:!1,formValues:[],detailID:0,previewCode:"",importLoading:!1,pageBean:{page:1,pageSize:10,showTotal:!0},baseQuery:[{property:"isArchive",value:1,group:"main",operation:"EQUAL",relation:"AND"},{property:"closCase",value:2,group:"main",operation:"EQUAL",relation:"AND"}]},t.columns=[{title:"案卷号",dataIndex:"caseNo"},{title:"当事人",dataIndex:"partyName"},{title:"车牌号",dataIndex:"caseReason",render:function(e){return e?e.split(",")[0]:""}},{title:"总重(t)",dataIndex:"weight",render:function(e){return(e/1e3).toFixed(2)}},{title:"超重(t)",dataIndex:"limited",render:function(e){return e>0?Q.a.createElement(de.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"处罚金额",dataIndex:"punishMoney"},{title:"结案日期",dataIndex:"closeTime"},{title:"承办人",dataIndex:"undertaker"},{title:"状态",dataIndex:"isArchive",render:function(){return"已签批"}},{title:"操作",width:140,render:function(e,a){return Q.a.createElement(q.Fragment,null,Q.a.createElement(me.a,{placement:"left",title:"查看详情"},Q.a.createElement(ce.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),Object(_.c)(Ma[0])?Q.a.createElement(q.Fragment,null,Q.a.createElement(ke.a,{type:"vertical"}),Q.a.createElement(me.a,{placement:"left",title:"案卷上传"},Q.a.createElement(ce.a,{disabled:!!a.isUpload,onClick:function(){return t.jzUploadFile(a.previewCode)},type:"primary",shape:"circle",icon:"upload",size:"small"}))):null,Object(_.c)(Ma[1])&&2!==a.isArchive?Q.a.createElement(q.Fragment,null," ",Q.a.createElement(ke.a,{type:"vertical"}),Q.a.createElement(me.a,{placement:"left",title:"确认归档"},Q.a.createElement(ce.a,{onClick:function(){return t.placeOnFile(a.previewCode)},type:"primary",shape:"circle",icon:"database",size:"small"}))):null)}}],t.showDetailModal=function(e){t.setState({detailID:e.id,previewCode:e.previewCode}),t.handleModalVisible(!0)},t.placeOnFile=function(e){var a=La()(t);T.a.confirm({title:"系统提示",content:"确定归档吗？",onOk:function(){var t=a.props.dispatch,l=a.state,r=l.pageBean,n=l.formValues,i=l.baseQuery;t({type:"DynamicLaw/caseArchive",payload:{previewCode:e},callback:function(){ie.a.success("操作成功"),a.getList({pageBean:r,querys:i.concat(n)})}})}})},t.jzUploadFile=function(e){var a=t.props.dispatch,l=t.state,r=l.pageBean,n=l.formValues,i=l.baseQuery;a({type:"DynamicLaw/jzUpload",payload:{previewCode:e},callback:function(){ie.a.success("上传成功"),t.getList({pageBean:r,querys:i.concat(n)})}})},t.getList=function(e){(0,t.props.dispatch)({type:"DynamicLaw/getBusDynamicLawCase",payload:oe()({},e,{sorter:[{direction:"DESC",property:"closeTime"}]})})},t.handleStandardTableChange=function(e){var a=t.state,l=a.formValues,r=a.baseQuery,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:r.concat(l)};t.getList(n)},t.handleFormReset=function(){var e=t.props.form,a=t.state,l=a.pageBean,r=a.baseQuery;e.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:l,querys:r})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l=t.state,r=l.pageBean,n=l.baseQuery,i=a.overLoadRateStart,s=a.overLoadRateEnd,o=a.totalLoadStart,c=a.totalLoadEnd;if(!i&&!s||Object(_.F)(i)&&Object(_.F)(s))if(!o&&!c||Object(_.F)(o)&&Object(_.F)(c)){var d=[{property:"limited",value:i&&s?[i/100,s/100]:"",group:"main",operation:"BETWEEN",relation:"OR"},{property:"axisNum",value:"other"===a.axisNum?6:a.axisNum||"",group:"main",operation:"other"===a.axisNum?"GREAT":"EQUAL",relation:"OR"},{property:"weight",value:o&&c?[1e3*o,1e3*c]:"",group:"main",operation:"BETWEEN",relation:"OR"},{property:"caseReason",value:a.caseReason||"",group:"main",operation:"LIKE",relation:"OR"}].filter(function(e){return e.value});t.setState({formValues:d}),t.getList({pageBean:r,querys:n.concat(d)})}else ie.a.error("总重请输入数字");else ie.a.error("超限幅度请输入数字")}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.importClick=function(){t.setState({importLoading:!0});var e=t.props.dispatch,a=t.state,l=a.pageBean,r=a.baseQuery,n=a.formValues;e({type:"DynamicLaw/exportBusDynamicLawCase",payload:{pageBean:l,querys:r.concat(n)},callback:function(e){404===e&&ie.a.error("暂无数据"),t.setState({importLoading:!1})}})},t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){var e=this.state,a=e.pageBean,t=e.baseQuery;this.getList({pageBean:a,querys:t})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,a=this.state.importLoading;return Q.a.createElement(pe.a,{onSubmit:this.handleSearch,layout:"inline"},Q.a.createElement($.a,{gutter:16},Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(ae.a.Group,{compact:!0},Q.a.createElement(Ba,{style:{display:"inline-block",width:"60%"}},e("overLoadRateStart")(Q.a.createElement(ae.a,{className:"".concat(De.a.inputGroupRightRadius," ").concat(De.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),Q.a.createElement(Ba,{style:{display:"inline-block",width:"40%"}},e("overLoadRateEnd")(Q.a.createElement(ae.a,{className:De.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),Q.a.createElement(Ba,{style:{flex:1}},e("axisNum")(Q.a.createElement(ue.a,{className:De.a.inputGroupLeftRadius,placeholder:"请选择"},Q.a.createElement(Ua,{value:""},"全部轴数"),Q.a.createElement(Ua,{value:2},"2"),Q.a.createElement(Ua,{value:3},"3"),Q.a.createElement(Ua,{value:4},"4"),Q.a.createElement(Ua,{value:5},"5"),Q.a.createElement(Ua,{value:6},"6"),Q.a.createElement(Ua,{value:"other"},"其他")))))),Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(ae.a.Group,{compact:!0},Q.a.createElement(Ba,{style:{display:"inline-block",width:"50%"}},e("totalLoadStart")(Q.a.createElement(ae.a,{className:"".concat(De.a.inputGroupRightRadius," ").concat(De.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),Q.a.createElement(Ba,{style:{display:"inline-block",width:"50%"}},e("totalLoadEnd")(Q.a.createElement(ae.a,{className:De.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement(Ba,null,e("caseReason")(Q.a.createElement(ae.a,{addonBefore:"车牌号",placeholder:"请输入"})))),Q.a.createElement(te.a,{md:6,sm:24},Q.a.createElement("div",{style:{overflow:"hidden"}},Q.a.createElement("div",{style:{float:"right",marginBottom:24}},Q.a.createElement(ce.a,{type:"primary",htmlType:"submit"},"查询"),Q.a.createElement(ce.a,{className:De.a.import,icon:"import",onClick:this.importClick,loading:a,disabled:a,style:{marginLeft:8}},"导出"),Q.a.createElement(ce.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.DynamicLaw.data,t=e.loading,l=this.state,r=l.modalVisible,n=l.detailID,i=l.previewCode,s={handleModalVisible:this.handleModalVisible,detailID:n,previewCode:i};return Q.a.createElement(q.Fragment,null,Q.a.createElement("div",{className:ve.a.tableList},Q.a.createElement("div",{className:ve.a.tableListForm},this.renderSimpleForm()),Q.a.createElement(fe.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange})),r&&n?Q.a.createElement(Ta.a,Z()({},s,{modalVisible:r})):null)}}]),a}(q.PureComponent))||N)||N,Oa=(t("bP8k"),t("gFTJ")),Pa=["/lawment/dynamic/casehand/focusData"],Ha=Object(K.connect)(function(e){return{DynamicLaw:e.DynamicLaw,loading:e.loading.models.DynamicLaw}})(S=function(e){function a(e){var t;return B()(this,a),(t=P()(this,Y()(a).call(this,e))).state={registerInfo:{},busDynamicLawDate:{},openRecord:[],busStaticData:{},focusDataVisible:!1},t.handleFocusModalVisible=function(e){t.setState({focusDataVisible:!!e})},t.modalSuccess=function(){(0,t.props.handleModalVisible)()},t.modalTitle=function(){var e=t.state.busDynamicLawDate;return Q.a.createElement("div",{className:Pe.a.modalHeader},Q.a.createElement("div",{className:Pe.a.title},Q.a.createElement("span",{className:Pe.a.value},e.carNo),Q.a.createElement("span",{className:Pe.a.time},Ee()(e.previewTime).format("YYYY-M-D HH:mm:ss"))),Q.a.createElement("div",null,Object(_.c)(Pa[0])?Q.a.createElement(ce.a,{style:oe()({background:"#f1a325",borderColor:"#f1a325"},{color:"#fff"}),onClick:function(){return t.focusDataClick()}},"重点关注"):null))},t.focusDataClick=function(){t.handleFocusModalVisible(!0)},t.getBusDynamicLawDataByPreviewCode=function(){var e=t.props;(0,e.dispatch)({type:"DynamicLaw/busDynamicLawDataByPreviewCode",payload:{previewCode:e.previewCode},callback:function(e){if(e){var a=e.registerInfo||{};t.setState({registerInfo:a,busDynamicLawDate:e.busDynamicLawDate,openRecord:e.openRecord,busStaticData:e.busStaticData||{}})}}})},t.renderCarMsg=function(){var e=t.state,a=e.registerInfo,l=e.busDynamicLawDate;return Q.a.createElement(Oa.a,{bordered:!0,size:"small",column:4},Q.a.createElement(Oa.a.Item,{label:"车辆所属",span:4},1===a.truckBelong?"个人":"企业"),Q.a.createElement(Oa.a.Item,{label:"车牌号码"},a.carNo||l.carNo),Q.a.createElement(Oa.a.Item,{label:"车主姓名"},a.vehicleOwner),Q.a.createElement(Oa.a.Item,{label:"车辆类型"},a.carType),Q.a.createElement(Oa.a.Item,{label:"核定载重(kg)"},a.weightLimited),Q.a.createElement(Oa.a.Item,{label:"手机号码"},a.phone),2===a.truckBelong?Q.a.createElement(Oa.a.Item,{label:"统一信用码"},a.creditCode):Q.a.createElement(Oa.a.Item,{label:"身份证号"},a.idCard),Q.a.createElement(Oa.a.Item,{label:"外廓尺寸"},a.externalDimensions),Q.a.createElement(Oa.a.Item,{label:"车辆总重(kg)"},a.totalWeight),Q.a.createElement(Oa.a.Item,{label:"车辆厂牌"},a.brandName),2===a.truckBelong?Q.a.createElement(Oa.a.Item,{label:"法人姓名"},a.legalRepresentative):Q.a.createElement(Oa.a.Item,{style:{display:"none"}}),2===a.truckBelong?Q.a.createElement(Oa.a.Item,{label:"注册地址"},a.registAddr):Q.a.createElement(Oa.a.Item,{label:"车主地址"},a.vehicleOwnerAddr))},t.columns=[{title:"操作员",dataIndex:"executor"},{title:"办理时间",dataIndex:"executorTime"},{title:"状态",dataIndex:"logType"},{title:"原因",dataIndex:"remark"}],t.myCarousel=Q.a.createRef(),t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){this.getBusDynamicLawDataByPreviewCode()}},{key:"render",value:function(){var e=this.props,a=e.loading,t=e.modalVisible,l=e.handleModalVisible,r=this.state,n=r.busDynamicLawDate,i=r.openRecord,s=r.focusDataVisible,o=r.registerInfo,c=r.busStaticData,d={handleModalVisible:this.handleFocusModalVisible,modalSuccess:this.modalSuccess,detail:{busDynamicLawDate:n,registerInfo:o}};return Q.a.createElement(q.Fragment,null,Q.a.createElement(T.a,{destroyOnClose:!0,className:Pe.a.modalStyle,title:this.modalTitle(),visible:t,onCancel:function(){return l()},width:1150,footer:null},Q.a.createElement(xe.a,{spinning:a},Q.a.createElement("div",{className:Pe.a.detailMsg},Q.a.createElement("div",{className:Pe.a.detailMsgTitle},Q.a.createElement(Me.a,{type:"profile"})," 车辆基本信息",Q.a.createElement(ce.a,{style:{float:"right"},size:"small",href:"http://www.gsxt.gov.cn/index.html",target:"_blank"},"企业法人查询")),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderCarMsg())),Q.a.createElement(Be.a,{detail:n,isTitle:!0}),"{}"!==JSON.stringify(c)?Q.a.createElement(Ue.a,{detail:c}):null,Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle},Q.a.createElement(Me.a,{type:"table"})," 操作记录"),Q.a.createElement("div",{className:Pe.a.recordList,style:{padding:"0 20px 20px"}},Q.a.createElement(Ae.a,{loading:a,list:i,columns:this.columns}))))),s?Q.a.createElement(ze.a,Z()({},d,{modalVisible:s})):null)}}]),a}(q.PureComponent))||S,Ya=pe.a.Item,za=ue.a.Option,ja=Object(K.connect)(function(e){var a=e.system,t=e.DynamicLaw,l=e.loading;return{Site:e.Site,system:a,DynamicLaw:t,loading:l.models.DynamicLaw}})(V=pe.a.create()(V=function(e){function a(){var e,t;B()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=P()(this,(e=Y()(a)).call.apply(e,[this].concat(r)))).state={modalVisible:!1,previewCode:"",formValues:[],siteList:[],importLoading:!1,pageBean:{page:1,pageSize:10,showTotal:!0},organCode:""},t.columns=[{title:"检测站",dataIndex:"siteName"},{title:"车牌号",dataIndex:"carNo"},{title:"检测时间",width:170,dataIndex:"previewTime",render:function(e){return Ee()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"轴数",dataIndex:"axleNumber"},{title:"总重(t)",dataIndex:"totalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"overLoadRate",render:function(e){return e?(100*e).toFixed(2):e}},{title:"承办人",dataIndex:"createBy"},{title:"作废时间",width:170,dataIndex:"createTime"},{title:"作废理由",dataIndex:"reson"},{title:"操作",width:70,render:function(e,a){return Q.a.createElement(q.Fragment,null,Q.a.createElement(me.a,{placement:"left",title:"查看详情"},Q.a.createElement(ce.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})))}}],t.showDetailModal=function(e){t.setState({previewCode:e.previewCode}),t.handleModalVisible(!0)},t.getList=function(e){(0,t.props.dispatch)({type:"DynamicLaw/getBusInvalidData",payload:e})},t.getSiteIN=function(){return[{property:"siteCode",value:t.state.siteList.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}]},t.handleStandardTableChange=function(e){var a=t.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a.length?a:t.getSiteIN()};t.getList(l)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean,l=Object(_.z)("organId");e.resetFields(),t.setState({formValues:[],organCode:""});t.getSite(l,function(){t.getList({pageBean:a,querys:t.getSiteIN()})})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l=t.state,r=l.pageBean,n=(l.organCode,Object(_.z)("organId").toString(),a.overLoadRateStart),i=a.overLoadRateEnd,s=a.totalLoadStart,o=a.totalLoadEnd;if(!n&&!i||Object(_.F)(n)&&Object(_.F)(i))if(!s&&!o||Object(_.F)(s)&&Object(_.F)(o)){var c=[a.siteCode?{property:"siteCode",value:a.siteCode||"",group:"main",operation:"EQUAL",relation:"AND"}:t.getSiteIN()[0].value.length?t.getSiteIN()[0]:{},{property:"overLoadRate",value:n&&i?[n/100,i/100]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"axleNumber",value:"other"===a.axleNumber?6:a.axleNumber||"",group:"main",operation:"other"===a.axleNumber?"GREAT":"EQUAL",relation:"AND"},{property:"previewTime",value:a.previewTime?[Ee()(a.previewTime[0]).format("YYYY-MM-DD HH:mm:ss"),Ee()(a.previewTime[1]).format("YYYY-MM-DD HH:mm:ss")]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"totalLoad",value:s&&o?[1e3*s,1e3*o]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"carNo",value:a.carNo||"",group:"main",operation:"LIKE",relation:"AND"}].filter(function(e){return e.value});t.setState({formValues:c}),t.getList({pageBean:r,querys:c})}else ie.a.error("总重请输入数字");else ie.a.error("超限幅度请输入数字")}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.getSite=function(e,a){var l=t.props;(0,l.dispatch)({type:"Site/siteByUserSite",payload:{organId:e,siteIds:l.siteList.map(function(e){return e.code})},callback:function(e){var l=e.map(function(e){return"1"===e.siteType?{code:e.siteCode,name:e.siteName}:""});t.setState({siteList:l},function(){a&&a(l)})}})},t.treeSelectChange=function(e){t.props.form.setFieldsValue({siteCode:""}),t.getSite(e),t.setState({organCode:e})},t.importClick=function(){t.setState({importLoading:!0});var e=t.props.dispatch,a=t.state,l=a.pageBean,r=a.formValues;e({type:"DynamicLaw/exportBusInvalid",payload:{pageBean:l,querys:r.length?r:t.getSiteIN()},callback:function(e){404===e&&ie.a.error("暂无数据"),t.setState({importLoading:!1})}})},t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean,a=this.props.siteList,t=[{property:"siteCode",value:a.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}];this.getList({pageBean:e,querys:t}),this.setState({siteList:a})}},{key:"renderSimpleForm",value:function(){var e=this.props,a=e.system.treeList,t=e.form.getFieldDecorator,l=this.state,r=l.siteList,n=l.importLoading,i=Object(_.z)("organId").toString();return Q.a.createElement(pe.a,{onSubmit:this.handleSearch,layout:"inline"},Q.a.createElement($.a,{gutter:16},Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),Q.a.createElement(Ya,{style:{flex:1}},t("name")(Q.a.createElement(le.a,{className:De.a.inputGroupLeftRadius,treeData:a,treeDefaultExpandedKeys:[i],style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测点"),Q.a.createElement(Ya,{style:{flex:1}},t("siteCode")(Q.a.createElement(ue.a,{dropdownMatchSelectWidth:!1,className:De.a.inputGroupLeftRadius,placeholder:"请选择"},r.map(function(e){return Q.a.createElement(za,{key:e.code,value:e.code},e.name)})))))),Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(ae.a.Group,{compact:!0},Q.a.createElement(Ya,{style:{display:"inline-block",width:"60%"}},t("overLoadRateStart")(Q.a.createElement(ae.a,{className:"".concat(De.a.inputGroupRightRadius," ").concat(De.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),Q.a.createElement(Ya,{style:{display:"inline-block",width:"40%"}},t("overLoadRateEnd")(Q.a.createElement(ae.a,{className:De.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),Q.a.createElement(Ya,{style:{flex:1}},t("axleNumber")(Q.a.createElement(ue.a,{className:De.a.inputGroupLeftRadius,placeholder:"请选择"},Q.a.createElement(za,{value:""},"全部轴数"),Q.a.createElement(za,{value:2},"2"),Q.a.createElement(za,{value:3},"3"),Q.a.createElement(za,{value:4},"4"),Q.a.createElement(za,{value:5},"5"),Q.a.createElement(za,{value:6},"6"),Q.a.createElement(za,{value:"other"},"其他")))))),Q.a.createElement(te.a,{md:6,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),Q.a.createElement(Ya,{style:{flex:1}},t("previewTime")(Q.a.createElement(ee.a.RangePicker,{className:De.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[Ee()("00:00:00","HH:mm:ss"),Ee()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})))))),Q.a.createElement($.a,{gutter:16},Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(ae.a.Group,{compact:!0},Q.a.createElement(Ya,{style:{display:"inline-block",width:"50%"}},t("totalLoadStart")(Q.a.createElement(ae.a,{className:"".concat(De.a.inputGroupRightRadius," ").concat(De.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),Q.a.createElement(Ya,{style:{display:"inline-block",width:"50%"}},t("totalLoadEnd")(Q.a.createElement(ae.a,{className:De.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement(Ya,null,t("carNo")(Q.a.createElement(ae.a,{addonBefore:"车牌号",placeholder:"请输入"})))),Q.a.createElement(te.a,{md:10,sm:24,offset:5},Q.a.createElement("div",{style:{overflow:"hidden"}},Q.a.createElement("div",{style:{float:"right",marginBottom:24}},Q.a.createElement(ce.a,{type:"primary",htmlType:"submit"},"查询"),Q.a.createElement(ce.a,{className:De.a.import,icon:"import",onClick:this.importClick,loading:n,disabled:n,style:{marginLeft:8}},"导出"),Q.a.createElement(ce.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.DynamicLaw.data,t=e.loading,l=this.state,r=l.modalVisible,n=l.previewCode,i={handleModalVisible:this.handleModalVisible,previewCode:n};return Q.a.createElement(q.Fragment,null,Q.a.createElement("div",{className:ve.a.tableList},Q.a.createElement("div",{className:ve.a.tableListForm},this.renderSimpleForm()),Q.a.createElement(fe.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange})),r?Q.a.createElement(Ha,Z()({},i,{modalVisible:r})):null)}}]),a}(q.PureComponent))||V)||V,Ga=t("Py4S"),qa=t.n(Ga),Qa=["/lawment/dynamic/casehand/focusData"],Ja=Object(K.connect)(function(e){return{DynamicLaw:e.DynamicLaw,loading:e.loading.models.DynamicLaw}})(F=function(e){function a(e){var t;return B()(this,a),(t=P()(this,Y()(a).call(this,e))).state={registerInfo:{},busDynamicLawDate:{},openRecord:[],busStaticData:{},focusDataVisible:!1},t.getBusDynamicLawDataByPreviewCode=function(){var e=t.props;(0,e.dispatch)({type:"DynamicLaw/busDynamicLawDataByPreviewCode",payload:{previewCode:e.previewCode},callback:function(e){if(e){var a=e.registerInfo||{};t.setState({registerInfo:a,busDynamicLawDate:e.busDynamicLawDate,openRecord:e.openRecord,busStaticData:e.busStaticData||{}})}}})},t.renderCarMsg=function(){var e=t.state,a=e.registerInfo,l=e.busDynamicLawDate;return Q.a.createElement(Oa.a,{bordered:!0,size:"small",column:4},Q.a.createElement(Oa.a.Item,{label:"车辆所属",span:4},1===a.truckBelong?"个人":"企业"),Q.a.createElement(Oa.a.Item,{label:"车牌号码"},a.carNo||l.carNo),Q.a.createElement(Oa.a.Item,{label:"车主姓名"},a.vehicleOwner),Q.a.createElement(Oa.a.Item,{label:"车辆类型"},a.carType),Q.a.createElement(Oa.a.Item,{label:"核定载重(kg)"},a.weightLimited),Q.a.createElement(Oa.a.Item,{label:"手机号码"},a.phone),2===a.truckBelong?Q.a.createElement(Oa.a.Item,{label:"统一信用码"},a.creditCode):Q.a.createElement(Oa.a.Item,{label:"身份证号"},a.idCard),Q.a.createElement(Oa.a.Item,{label:"外廓尺寸"},a.externalDimensions),Q.a.createElement(Oa.a.Item,{label:"车辆总重(kg)"},a.totalWeight),Q.a.createElement(Oa.a.Item,{label:"车辆厂牌"},a.brandName),2===a.truckBelong?Q.a.createElement(Oa.a.Item,{label:"法人姓名"},a.legalRepresentative):Q.a.createElement(Oa.a.Item,{style:{display:"none"}}),2===a.truckBelong?Q.a.createElement(Oa.a.Item,{label:"注册地址"},a.registAddr):Q.a.createElement(Oa.a.Item,{label:"车主地址"},a.vehicleOwnerAddr))},t.modalSuccess=function(){(0,t.props.handleModalVisible)()},t.modalTitle=function(){var e=t.state.busDynamicLawDate;return Q.a.createElement("div",{className:Pe.a.modalHeader},Q.a.createElement("div",{className:Pe.a.title},Q.a.createElement("span",{className:Pe.a.value},e.carNo),Q.a.createElement("span",{className:Pe.a.time},Ee()(e.previewTime).format("YYYY-M-D HH:mm:ss"))),Q.a.createElement("div",null,Object(_.c)(Qa[0])?Q.a.createElement(ce.a,{style:oe()({background:"#f1a325",borderColor:"#f1a325"},{color:"#fff"}),onClick:function(){return t.focusDataClick()}},"重点关注"):null))},t.focusDataClick=function(){t.handleFocusModalVisible(!0)},t.handleFocusModalVisible=function(e){t.setState({focusDataVisible:!!e})},t.renderImg=function(e,a){return Q.a.createElement("div",{style:{overflow:"hidden",width:100,height:100}},Q.a.createElement(qa.a,{backdrop:"rgba(255,255,255,.3)",src:_.E+e,alt:a,style:{height:"100px"}}))},t.columns=[{title:"操作员",dataIndex:"executor"},{title:"办理时间",dataIndex:"executorTime"},{title:"状态",dataIndex:"logType"},{title:"原因",dataIndex:"remark"}],t.myCarousel=Q.a.createRef(),t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){this.getBusDynamicLawDataByPreviewCode()}},{key:"render",value:function(){var e=this.props,a=e.loading,t=e.modalVisible,l=e.handleModalVisible,r=e.enclosureList,n=this.state,i=n.busDynamicLawDate,s=n.openRecord,o=n.focusDataVisible,c=n.registerInfo,d=n.busStaticData,m={handleModalVisible:this.handleFocusModalVisible,modalSuccess:this.modalSuccess,detail:{busDynamicLawDate:i,registerInfo:c}};return Q.a.createElement(q.Fragment,null,Q.a.createElement(T.a,{destroyOnClose:!0,title:this.modalTitle(),visible:t,onCancel:function(){return l()},width:1100,footer:null,className:Pe.a.modalStyle},Q.a.createElement(xe.a,{spinning:a},Q.a.createElement("div",{className:Pe.a.detailMsg},Q.a.createElement("div",{className:Pe.a.detailMsgTitle},Q.a.createElement(Me.a,{type:"profile"})," 车辆基本信息",Q.a.createElement(ce.a,{style:{float:"right"},size:"small",href:"http://www.gsxt.gov.cn/index.html",target:"_blank"},"企业法人查询")),Q.a.createElement("div",{style:{padding:"0 20px 20px"}},this.renderCarMsg())),Q.a.createElement(Be.a,{detail:i,isTitle:!0}),"{}"!==JSON.stringify(d)?Q.a.createElement(Ue.a,{detail:d}):null,Q.a.createElement("div",{className:Pe.a.detailMsg,style:{padding:20,marginTop:16}},Q.a.createElement("div",{className:De.a.modalTitle},Q.a.createElement(Me.a,{type:"file"})," 附件记录"),Q.a.createElement(Oa.a,{layout:"vertical",bordered:!0,size:"small",column:4},Q.a.createElement(Oa.a.Item,{label:"委托代理人身份证照片"},this.renderImg(r.agentIdcardUrl,"委托代理人身份证照片")),Q.a.createElement(Oa.a.Item,{label:"撤销凭证照片"},this.renderImg(r.cancelProofUrl,"委托代理人身份证照片")),Q.a.createElement(Oa.a.Item,{label:"当事人身份证/企业营业执照"},this.renderImg(r.cardUrl,"当事人身份证/企业营业执照")),Q.a.createElement(Oa.a.Item,{label:"车辆行驶证图片"},this.renderImg(r.driveLicenseUrl,"车辆行驶证图片")))),Q.a.createElement("div",{className:Pe.a.detailMsg,style:{marginTop:16}},Q.a.createElement("div",{className:Pe.a.detailMsgTitle},Q.a.createElement(Me.a,{type:"table"})," 操作记录"),Q.a.createElement("div",{className:Pe.a.recordList,style:{padding:"0 20px 20px"}},Q.a.createElement(Ae.a,{loading:a,list:s,columns:this.columns}))))),o?Q.a.createElement(ze.a,Z()({},m,{modalVisible:o})):null)}}]),a}(q.PureComponent))||F,Ka=pe.a.Item,Wa=ue.a.Option,_a=["/lawment/dynamic/penalty/info"],Xa=Object(K.connect)(function(e){return{system:e.system,DynamicLaw:e.DynamicLaw,loading:e.loading.models.DynamicLaw}})(k=pe.a.create()(k=function(e){function a(){var e,t;B()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=P()(this,(e=Y()(a)).call.apply(e,[this].concat(r)))).state={modalVisible:!1,formValues:[],siteList:[],importLoading:!1,pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"车牌号",dataIndex:"carNo"},{title:"检测时间",width:170,dataIndex:"previewTime",render:function(e){return Ee()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"轴数",dataIndex:"axleNumber"},{title:"总重(t)",dataIndex:"totalLoad",render:function(e){return(e/1e3).toFixed(2)}},{title:"超限重(t)",dataIndex:"overLoad",render:function(e){return e>0?Q.a.createElement(de.a,{color:"#f5222d"},(e/1e3).toFixed(2)):(e/1e3).toFixed(2)}},{title:"超重比(%)",dataIndex:"overLoadRate",render:function(e){return e?(100*e).toFixed(2):e}},{title:"承办人",dataIndex:"createBy"},{title:"撤销时间",width:170,dataIndex:"createTime"},{title:"撤销理由",dataIndex:"reason",render:function(e){return e}},Object(_.c)(_a[0])?{title:"操作",width:70,render:function(e,a){return Q.a.createElement(q.Fragment,null,Q.a.createElement(me.a,{placement:"left",title:"查看详情"},Q.a.createElement(ce.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})))}}:""].filter(function(e){return e}),t.showDetailModal=function(e){t.setState({previewCode:e.previewCode,enclosureList:{agentIdcardUrl:e.agentIdcardUrl,cancelProofUrl:e.cancelProofUrl,cardUrl:e.cardUrl,driveLicenseUrl:e.driveLicenseUrl}}),t.handleModalVisible(!0)},t.getList=function(e){(0,t.props.dispatch)({type:"DynamicLaw/getBusPenaltyData",payload:oe()({},e,{sorter:[{direction:"DESC",property:"previewTime"}]})})},t.getSiteIN=function(){return[{property:"siteCode",value:t.state.siteList.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}]},t.handleStandardTableChange=function(e){var a=t.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a.length?a:t.getSiteIN()};t.getList(l)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields();var l=Object(_.z)("organId");t.setState({formValues:[]}),t.getSite(l,function(){t.getList({pageBean:a,querys:t.getSiteIN()})})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l=t.state.pageBean,r=a.overLoadRateStart,n=a.overLoadRateEnd,i=a.totalLoadStart,s=a.totalLoadEnd;if(!r&&!n||Object(_.F)(r)&&Object(_.F)(n))if(!i&&!s||Object(_.F)(i)&&Object(_.F)(s)){var o=[a.siteCode?{property:"siteCode",value:a.siteCode||"",group:"main",operation:"EQUAL",relation:"AND"}:t.getSiteIN()[0].value.length?t.getSiteIN()[0]:{},{property:"overLoadRate",value:r&&n?[r/100,n/100]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"axleNumber",value:"other"===a.axleNumber?6:a.axleNumber||"",group:"main",operation:"other"===a.axleNumber?"GREAT":"EQUAL",relation:"AND"},{property:"previewTime",value:a.previewTime?[Ee()(a.previewTime[0]).format("YYYY-MM-DD HH:mm:ss"),Ee()(a.previewTime[1]).format("YYYY-MM-DD HH:mm:ss")]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"totalLoad",value:i&&s?[1e3*i,1e3*s]:"",group:"main",operation:"BETWEEN",relation:"AND"},{property:"carNo",value:a.carNo||"",group:"main",operation:"LIKE",relation:"AND"}].filter(function(e){return e.value});t.setState({formValues:o}),t.getList({pageBean:l,querys:o})}else ie.a.error("总重请输入数字");else ie.a.error("超限幅度请输入数字")}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.getSite=function(e,a){var l=t.props;(0,l.dispatch)({type:"Site/siteByUserSite",payload:{organId:e,siteIds:l.siteList.map(function(e){return e.code})},callback:function(e){var l=e.map(function(e){return"1"===e.siteType?{code:e.siteCode,name:e.siteName}:""});t.setState({siteList:l},function(){a&&a(l)})}})},t.treeSelectChange=function(e){t.props.form.setFieldsValue({siteCode:""}),t.getSite(e)},t.importClick=function(){t.setState({importLoading:!0});var e=t.props.dispatch,a=t.state,l=a.pageBean,r=a.formValues;e({type:"DynamicLaw/exportBusPenalty",payload:{pageBean:l,querys:r.length?r:t.getSiteIN()},callback:function(e){404===e&&ie.a.error("暂无数据"),t.setState({importLoading:!1})}})},t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean,a=this.props.siteList,t=[{property:"siteCode",value:a.map(function(e){return e.code}),group:"main",operation:"IN",relation:"AND"}];this.getList({pageBean:e,querys:t}),this.setState({siteList:a})}},{key:"renderSimpleForm",value:function(){var e=this.props,a=e.system.treeList,t=e.form.getFieldDecorator,l=this.state.importLoading,r=this.state.siteList,n=Object(_.z)("organId").toString();return Q.a.createElement(pe.a,{onSubmit:this.handleSearch,layout:"inline"},Q.a.createElement($.a,{gutter:16},Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),Q.a.createElement(Ka,{style:{flex:1}},t("name")(Q.a.createElement(le.a,{className:De.a.inputGroupLeftRadius,treeData:a,treeDefaultExpandedKeys:[n],style:{width:"100%"},placeholder:"请选择",onChange:this.treeSelectChange}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"65px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测点"),Q.a.createElement(Ka,{style:{flex:1}},t("siteCode")(Q.a.createElement(ue.a,{dropdownMatchSelectWidth:!1,className:De.a.inputGroupLeftRadius,placeholder:"请选择"},r.map(function(e){return Q.a.createElement(Wa,{key:e.code,value:e.code},e.name)})))))),Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(ae.a.Group,{compact:!0},Q.a.createElement(Ka,{style:{display:"inline-block",width:"60%"}},t("overLoadRateStart")(Q.a.createElement(ae.a,{className:"".concat(De.a.inputGroupRightRadius," ").concat(De.a.inputGroupRightborder),addonBefore:"超限幅度(%)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),Q.a.createElement(Ka,{style:{display:"inline-block",width:"40%"}},t("overLoadRateEnd")(Q.a.createElement(ae.a,{className:De.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"轴数"),Q.a.createElement(Ka,{style:{flex:1}},t("axleNumber")(Q.a.createElement(ue.a,{className:De.a.inputGroupLeftRadius,placeholder:"请选择"},Q.a.createElement(Wa,{value:""},"全部轴数"),Q.a.createElement(Wa,{value:2},"2"),Q.a.createElement(Wa,{value:3},"3"),Q.a.createElement(Wa,{value:4},"4"),Q.a.createElement(Wa,{value:5},"5"),Q.a.createElement(Wa,{value:6},"6"),Q.a.createElement(Wa,{value:"other"},"其他")))))),Q.a.createElement(te.a,{md:6,sm:24},Q.a.createElement("div",{className:De.a.inputMain},Q.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),Q.a.createElement(Ka,{style:{flex:1}},t("previewTime")(Q.a.createElement(ee.a.RangePicker,{className:De.a.inputGroupLeftRadius,style:{width:"100%"},showTime:{defaultValue:[Ee()("00:00:00","HH:mm:ss"),Ee()(new Date,"HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})))))),Q.a.createElement($.a,{gutter:16},Q.a.createElement(te.a,{md:5,sm:24},Q.a.createElement(ae.a.Group,{compact:!0},Q.a.createElement(Ka,{style:{display:"inline-block",width:"50%"}},t("totalLoadStart")(Q.a.createElement(ae.a,{className:"".concat(De.a.inputGroupRightRadius," ").concat(De.a.inputGroupRightborder),addonBefore:"总重(t)",placeholder:"请输入",style:{width:"100%",borderRight:0}}))),Q.a.createElement(Ka,{style:{display:"inline-block",width:"50%"}},t("totalLoadEnd")(Q.a.createElement(ae.a,{className:De.a.inputGroupRadiusAddon,addonBefore:"至",placeholder:"请输入",style:{width:"100%"}}))))),Q.a.createElement(te.a,{md:4,sm:24},Q.a.createElement(Ka,null,t("carNo")(Q.a.createElement(ae.a,{addonBefore:"车牌号",placeholder:"请输入"})))),Q.a.createElement(te.a,{md:10,sm:24,offset:5},Q.a.createElement("div",{style:{overflow:"hidden"}},Q.a.createElement("div",{style:{float:"right",marginBottom:24}},Q.a.createElement(ce.a,{type:"primary",htmlType:"submit"},"查询"),Q.a.createElement(ce.a,{className:De.a.import,icon:"import",onClick:this.importClick,loading:l,disabled:l,style:{marginLeft:8}},"导出"),Q.a.createElement(ce.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置"))))))}},{key:"render",value:function(){var e=this.props,a=e.DynamicLaw.data,t=e.loading,l=this.state,r=l.modalVisible,n=l.previewCode,i=l.enclosureList,s={handleModalVisible:this.handleModalVisible,previewCode:n,enclosureList:i};return Q.a.createElement(q.Fragment,null,Q.a.createElement("div",{className:ve.a.tableList},Q.a.createElement("div",{className:ve.a.tableListForm},this.renderSimpleForm()),Q.a.createElement(fe.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange})),r?Q.a.createElement(Ja,Z()({},s,{modalVisible:r})):null)}}]),a}(q.PureComponent))||k)||k,Za=G.a.Group,$a=["/lawment/dynamic"],et=Object(K.connect)(function(e){var a=e.user;return{system:e.system,currentUser:a.currentUser}})(I=function(e){function a(){var e,t;B()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=P()(this,(e=Y()(a)).call.apply(e,[this].concat(r)))).state={tabKey:"",siteList:[],radioButtonList:[]},t.tabChange=function(e){t.setState({tabKey:e.target.value})},t.renderChildrenByTabKey=function(e,a){var t="";switch(e){case"/traffic/lawment/dynamic/check":t=Q.a.createElement(Fe,{siteList:a});break;case"/traffic/lawment/dynamic/casehand":t=Q.a.createElement(Da,{siteList:a});break;case"/traffic/lawment/dynamic/archive":t=Q.a.createElement(xa,{siteList:a});break;case"/traffic/lawment/dynamic/filepige":t=Q.a.createElement(Aa,{siteList:a});break;case"/traffic/lawment/dynamic/invalid":t=Q.a.createElement(ja,{siteList:a});break;case"/traffic/lawment/dynamic/penalty":t=Q.a.createElement(Xa,{siteList:a});break;default:t=null}return t},t.renderTitle=function(){var e=t.state,a=e.tabKey,l=e.radioButtonList;if(a)return Q.a.createElement("div",{style:{clear:"both"}},Q.a.createElement("span",{style:{display:"inline-block",lineHeight:"32px"}},"动态执法"),Q.a.createElement(Za,{defaultValue:a,style:{float:"right"},buttonStyle:"solid",onChange:t.tabChange},l.length?l.map(function(e){return Q.a.createElement(G.a.Button,{key:e.path,value:e.path},e.name)}):null))},t}return j()(a,e),A()(a,[{key:"componentDidMount",value:function(){var e=this;if(Object(_.c)($a[0])){var a=Object(_.K)(this.props.match.url);this.setState({radioButtonList:a,tabKey:a.length?a[0].path:""}),(0,this.props.dispatch)({type:"system/userSite",payload:{siteType:1},callback:function(a){if(a.length){var t=a.map(function(e,a){var t=Object.keys(e);return{index:a+1,code:t[0],name:e[t[0]],direction:[e[t[1]],e[t[2]]]}});e.setState({siteList:t})}else T.a.error({title:"提示",content:"您没有绑定站点！！！"})}})}}},{key:"render",value:function(){var e=this.state,a=e.tabKey,t=e.siteList;return Q.a.createElement(J.GridContent,null,Object(_.c)($a[0])?Q.a.createElement(R.a,{bordered:!1,title:this.renderTitle()},t.length?this.renderChildrenByTabKey(a,t):Q.a.createElement(x.a,{image:x.a.PRESENTED_IMAGE_SIMPLE})):Q.a.createElement(W.a,{to:"/exception/403"}))}}]),a}(q.PureComponent))||I;a.default=et}}]);