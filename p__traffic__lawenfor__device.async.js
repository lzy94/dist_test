(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{ZOxJ:function(e,t,a){"use strict";a.r(t);var n,l=a("pVnL"),i=a.n(l),r=(a("IzEo"),a("bx4M")),s=(a("14J3"),a("BMrR")),o=(a("5NDa"),a("5rEg")),c=(a("jCWc"),a("kPKH")),d=a("MVZn"),m=a.n(d),u=(a("5Dmo"),a("3S7+")),p=(a("+L6B"),a("2/Rp")),f=a("lwsE"),h=a.n(f),g=a("W8MJ"),E=a.n(g),b=a("a1gu"),y=a.n(b),v=a("Nsbk"),S=a.n(v),w=a("7W2i"),M=a.n(w),I=(a("2qtc"),a("kLXV")),L=(a("bP8k"),a("gFTJ")),V=(a("OaEy"),a("2fM7")),k=(a("y8nQ"),a("Vl3Y")),C=a("q1tI"),N=a.n(C),x=a("MuoO"),B=a("mf+E"),O=a("CkN6"),F=a("+n12"),q=a("9zHi"),D=a.n(q),U=a("ns75"),z=a.n(U),J=a("ZP6J"),P=a.n(J),R=k.a.Item,T=V.a.Option,j=["APP","PC","执法仪","其它"],A=["/lawenfor/device"],H=k.a.create()(function(e){var t=e.modalVisible,a=e.handleModalVisible,n=e.userSite,l=e.detail;return N.a.createElement(I.a,{destroyOnClose:!0,title:"设备详情",className:P.a.myModal+" "+P.a.modalbody,visible:t,onCancel:function(){return a()},footer:null},N.a.createElement("div",{className:P.a.detailMsg},N.a.createElement("div",{style:{padding:20}},N.a.createElement(L.a,{bordered:!0,column:1,size:"small"},N.a.createElement(L.a.Item,{label:"设备名称"},l.equipmentName),N.a.createElement(L.a.Item,{label:"设备编码"},l.equipmentCode),N.a.createElement(L.a.Item,{label:"所属人员"},l.userId),N.a.createElement(L.a.Item,{label:"站点名称"},function(e){for(var t="",a=0;a<n.length;a++)if(e===n[a].code){t=n[a].name;break}return t}(l.siteCode)),N.a.createElement(L.a.Item,{label:"设备类型"},j[parseInt(l.type)-1])))))}),W=Object(x.connect)(function(e){return{system:e.system,LawenforDevice:e.LawenforDevice,loading:e.loading.models.LawenforDevice}})(n=k.a.create()(n=function(e){function t(){var e,a;h()(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=y()(this,(e=S()(t)).call.apply(e,[this].concat(l)))).state={updateModalVisible:!1,formValues:[],userSite:[],detail:{},fieldSite:[],pageBean:{page:1,pageSize:10,showTotal:!0}},a.columns=[{title:"设备名称",dataIndex:"equipmentName"},{title:"设备编码",dataIndex:"equipmentCode"},{title:"设备类型",dataIndex:"type",render:function(e){return j[parseInt(e)-1]}},{title:"站点名称",dataIndex:"siteName"},{title:"责任人",dataIndex:"userId"},{title:"操作",width:70,render:function(e,t){return N.a.createElement(C.Fragment,null,N.a.createElement(u.a,{placement:"left",title:"详情"},N.a.createElement(p.a,{onClick:function(){return a.showUpdateModal(t)},type:"primary",shape:"circle",icon:"eye",size:"small"})))}}],a.getList=function(e){(0,a.props.dispatch)({type:"LawenforDevice/fetch",payload:e})},a.showUpdateModal=function(e){a.setState({detail:e,fieldSite:[e.siteCode,e.siteName]},function(){a.handleUpdateModalVisible(!0)})},a.getUserSite=function(e,t){(0,a.props.dispatch)({type:"system/userSite",payload:{siteType:e},callback:function(e){var a=e.map(function(e,t){var a=Object.keys(e);return{index:t+1,code:a[0],name:e[a[0]],direction:[e[a[1]],e[a[2]]]}});t(a)}})},a.handleStandardTableChange=function(e){var t=a.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:t};a.getList(n)},a.handleFormReset=function(){var e=a.props.form,t=a.state.pageBean;e.resetFields(),a.setState({formValues:[]}),a.getList({pageBean:t})},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=a.state.pageBean,l=m()({},t),i=Object.keys(l).map(function(e){return l[e]?{property:e,value:l[e],group:"main",operation:"LIKE",relation:"OR"}:""}).filter(function(e){return e});a.setState({formValues:i}),a.getList({pageBean:n,querys:i})}})},a.handleUpdateModalVisible=function(e){a.setState({updateModalVisible:!!e}),e||a.setState({detail:{}})},a}return M()(t,e),E()(t,[{key:"componentDidMount",value:function(){var e=this;if(Object(F.c)(A[0])){var t=this.state.pageBean;this.getList({pageBean:t}),this.getUserSite(1,function(t){e.getUserSite(2,function(a){e.setState({userSite:t.concat(a)})})})}}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.userSite;return N.a.createElement(k.a,{onSubmit:this.handleSearch,layout:"inline"},N.a.createElement(s.a,{gutter:{md:8,lg:16,xl:16}},N.a.createElement(c.a,{md:5,sm:24},N.a.createElement("div",{className:z.a.inputMain},N.a.createElement("span",{style:{width:"60px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"站点"),N.a.createElement(R,{style:{flex:1}},e("siteCode")(N.a.createElement(V.a,{className:z.a.inputGroupLeftRadius,placeholder:"请选择"},t.map(function(e,t){return N.a.createElement(T,{key:t,value:e.code},e.name)})))))),N.a.createElement(c.a,{md:5,sm:24},N.a.createElement(R,null,e("equipmentName")(N.a.createElement(o.a,{addonBefore:"设备名称",placeholder:"请输入"})))),N.a.createElement(c.a,{md:5,sm:24},N.a.createElement(R,null,e("equipmentCode")(N.a.createElement(o.a,{addonBefore:"设备编码",placeholder:"请输入"})))),N.a.createElement(c.a,{md:5,sm:24},N.a.createElement("span",{className:D.a.submitButtons},N.a.createElement(p.a,{type:"primary",htmlType:"submit"},"查询"),N.a.createElement(p.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,t=e.LawenforDevice.data,a=e.loading,n=this.state,l=n.userSite,s=n.updateModalVisible,o=n.detail,c={handleUpdate:this.handleUpdate,userSite:l,detail:o,handleModalVisible:this.handleUpdateModalVisible};return N.a.createElement(C.Fragment,null,Object(F.c)(A[0])?null:N.a.createElement(B.a,{to:"/exception/403"}),N.a.createElement(r.a,{bordered:!1},N.a.createElement("div",{className:D.a.tableList},N.a.createElement("div",{className:D.a.tableListForm},this.renderSimpleForm()),N.a.createElement(O.a,{size:"middle",selectedRows:0,rowSelection:null,loading:a,data:t,tableAlert:!1,columns:this.columns,onChange:this.handleStandardTableChange}))),s&&"{}"!==JSON.stringify(o)?N.a.createElement(H,i()({},c,{modalVisible:s})):null)}}]),t}(C.PureComponent))||n)||n;t.default=W}}]);