(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{yOlA:function(e,a,t){"use strict";t.r(a);var l,n=t("pVnL"),r=t.n(n),i=(t("IzEo"),t("bx4M")),c=(t("miYZ"),t("tsqr")),d=(t("P2fV"),t("NJEC")),o=(t("/zsF"),t("PArb")),s=(t("5Dmo"),t("3S7+")),m=t("lwsE"),u=t.n(m),p=t("W8MJ"),E=t.n(p),h=t("a1gu"),g=t.n(h),f=t("Nsbk"),b=t.n(f),y=t("7W2i"),v=t.n(y),V=(t("2qtc"),t("kLXV")),M=(t("14J3"),t("BMrR")),k=(t("7Kak"),t("9yH6")),F=(t("jCWc"),t("kPKH")),N=(t("5NDa"),t("5rEg")),w=(t("+L6B"),t("2/Rp")),x=(t("OaEy"),t("2fM7")),B=(t("y8nQ"),t("Vl3Y")),D=t("q1tI"),S=t.n(D),C=t("MuoO"),q=t("CkN6"),L=t("+n12"),z=t("9zHi"),P=t.n(z),O=t("ZP6J"),A=t.n(O),I=t("ns75"),U=t.n(I),J=B.a.Item,T=x.a.Option,R=B.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleAdd,n=e.handleModalVisible,r=e.loading;return S.a.createElement(V.a,{destroyOnClose:!0,title:"添加从业人员",className:A.a.formModal,visible:a,width:800,onCancel:function(){return n()},footer:[S.a.createElement(w.a,{key:"back",onClick:function(){return n()}},"取消"),S.a.createElement(w.a,{key:"submit",type:"primary",loading:r,onClick:function(){t.validateFields(function(e,a){e||l(a,function(){return t.resetFields()})})}},"确定")]},S.a.createElement("div",{className:A.a.formModalBody},S.a.createElement(M.a,{gutter:40},S.a.createElement(F.a,{md:12,sm:24},S.a.createElement(J,{label:"姓名"},t.getFieldDecorator("name",{rules:[{required:!0,message:"请输入姓名"}]})(S.a.createElement(N.a,{placeholder:"请输入"})))),S.a.createElement(F.a,{md:12,sm:24},S.a.createElement(J,{label:"性别"},t.getFieldDecorator("sex",{rules:[{required:!0,message:"请选择性别"}]})(S.a.createElement(k.a.Group,null,S.a.createElement(k.a,{value:1},"男"),S.a.createElement(k.a,{value:2},"女"))))),S.a.createElement(F.a,{md:12,sm:24},S.a.createElement(J,{label:"身份证号码"},t.getFieldDecorator("idcard",{rules:[{required:!0,validator:L.d}]})(S.a.createElement(N.a,{placeholder:"请输入"})))),S.a.createElement(F.a,{md:12,sm:24},S.a.createElement(J,{label:"职位"},t.getFieldDecorator("post",{rules:[{required:!0,message:"请输入职位"}]})(S.a.createElement(N.a,{placeholder:"请输入"})))),S.a.createElement(F.a,{md:12,sm:24},S.a.createElement(J,{label:"所属单位"},t.getFieldDecorator("companyName",{rules:[{required:!0,message:"请输入所属单位"}]})(S.a.createElement(N.a,{placeholder:"请输入"})))),S.a.createElement(F.a,{md:12,sm:24},S.a.createElement(J,{label:"资格证编号"},t.getFieldDecorator("certificateNo",{rules:[{required:!0,message:"请输入资格证编号"}]})(S.a.createElement(N.a,{placeholder:"请输入"})))))))}),j=B.a.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleUpdate,n=e.handleModalVisible,r=e.loading,i=e.detail;return S.a.createElement(V.a,{destroyOnClose:!0,title:"编辑从业人员",className:A.a.formModal,visible:a,width:800,onCancel:function(){return n()},footer:[S.a.createElement(w.a,{key:"back",onClick:function(){return n()}},"取消"),S.a.createElement(w.a,{key:"submit",type:"primary",loading:r,onClick:function(){t.validateFields(function(e,a){e||l(a,function(){return t.resetFields()})})}},"确定")]},S.a.createElement("div",{className:A.a.formModalBody},S.a.createElement(M.a,{gutter:40},S.a.createElement(F.a,{md:12,sm:24},S.a.createElement(J,{label:"姓名"},t.getFieldDecorator("name",{initialValue:i.name,rules:[{required:!0,message:"请输入姓名"}]})(S.a.createElement(N.a,{placeholder:"请输入"})))),S.a.createElement(F.a,{md:12,sm:24},S.a.createElement(J,{label:"性别"},t.getFieldDecorator("sex",{initialValue:i.sex,rules:[{required:!0,message:"请选择性别"}]})(S.a.createElement(k.a.Group,null,S.a.createElement(k.a,{value:1},"男"),S.a.createElement(k.a,{value:2},"女"))))),S.a.createElement(F.a,{md:12,sm:24},S.a.createElement(J,{label:"身份证号码"},t.getFieldDecorator("idcard",{initialValue:i.idcard,rules:[{required:!0,validator:L.d}]})(S.a.createElement(N.a,{placeholder:"请输入"})))),S.a.createElement(F.a,{md:12,sm:24},S.a.createElement(J,{label:"职位"},t.getFieldDecorator("post",{initialValue:i.post,rules:[{required:!0,message:"请输入职位"}]})(S.a.createElement(N.a,{placeholder:"请输入"})))),S.a.createElement(F.a,{md:12,sm:24},S.a.createElement(J,{label:"所属单位"},t.getFieldDecorator("companyName",{initialValue:i.companyName,rules:[{required:!0,message:"请输入所属单位"}]})(S.a.createElement(N.a,{placeholder:"请输入"})))),S.a.createElement(F.a,{md:12,sm:24},S.a.createElement(J,{label:"资格证编号"},t.getFieldDecorator("certificateNo",{initialValue:i.certificateNo,rules:[{required:!0,message:"请输入资格证编号"}]})(S.a.createElement(N.a,{placeholder:"请输入"})))))))}),H=Object(C.connect)(function(e){return{MaritimePeople:e.MaritimePeople,loading:e.loading.models.MaritimePeople}})(l=B.a.create()(l=function(e){function a(){var e,t;u()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(t=g()(this,(e=b()(a)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,updateModalVisible:!1,formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"姓名",dataIndex:"name"},{title:"身份证号码",dataIndex:"idcard",width:180},{title:"性别",dataIndex:"sex",width:80,render:function(e){return 1===e?"男":"女"}},{title:"职位",dataIndex:"post"},{title:"资格证编号",dataIndex:"certificateNo"},{title:"所属单位",dataIndex:"companyName"},{title:"操作",width:100,render:function(e,a){return S.a.createElement(D.Fragment,null,S.a.createElement(s.a,{placement:"left",title:"编辑"},S.a.createElement(w.a,{onClick:function(){return t.editData(a)},type:"primary",shape:"circle",icon:"edit",size:"small"})),S.a.createElement(o.a,{type:"vertical"}),S.a.createElement(d.a,{title:"是否删除数据?",onConfirm:function(){return t.dataDel(a.id_)},okText:"确定",cancelText:"取消"},S.a.createElement(s.a,{placement:"left",title:"删除"},S.a.createElement(w.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.getList=function(e){(0,t.props.dispatch)({type:"MaritimePeople/fetch",payload:e})},t.dataDel=function(e){(0,t.props.dispatch)({type:"MaritimePeople/remove",payload:{id:e},callback:function(){c.a.success("删除成功"),t.getList({pageBean:t.state.pageBean})}})},t.editData=function(e){t.setState({detail:e},function(){return t.handleUpdateModalVisible(!0)})},t.handleStandardTableChange=function(e){var a=t.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(l)},t.handleFormReset=function(){t.props.form.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:t.state.pageBean})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var l=t.state.pageBean,n={post:a.zw,certificateNo:a.zgzh,companyName:a.ssdw,sex:a.xb},r=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"sex"===e?"EQUAL":"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:r}),t.getList({pageBean:l,querys:r})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e}),e||t.setState({detail:{}})},t.handleAdd=function(e,a){(0,t.props.dispatch)({type:"MaritimePeople/add",payload:e,callback:function(){c.a.success("添加成功"),t.handleModalVisible(),t.getList({pageBean:t.state.pageBean}),a()}})},t.handleUpdate=function(e,a){var l=t.props.dispatch,n=t.state,r=n.detail,i=n.pageBean,d=JSON.parse(JSON.stringify(r));for(var o in e)d[o]=e[o];t.setState({detail:d}),l({type:"MaritimePeople/update",payload:d,callback:function(){c.a.success("编辑成功"),t.handleUpdateModalVisible(),t.getList({pageBean:i}),a()}})},t}return v()(a,e),E()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return S.a.createElement(B.a,{onSubmit:this.handleSearch,layout:"inline"},S.a.createElement(M.a,{gutter:{md:8,lg:16,xl:32}},S.a.createElement(F.a,{md:5,sm:24},S.a.createElement(J,null,e("zw")(S.a.createElement(N.a,{addonBefore:"职位",placeholder:"请输入"})))),S.a.createElement(F.a,{md:5,sm:24},S.a.createElement(J,null,e("zgzh")(S.a.createElement(N.a,{addonBefore:"资格证号",placeholder:"请输入"})))),S.a.createElement(F.a,{md:5,sm:24},S.a.createElement(J,null,e("ssdw")(S.a.createElement(N.a,{addonBefore:"所属单位",placeholder:"请输入"})))),S.a.createElement(F.a,{md:5,sm:24},S.a.createElement("div",{className:U.a.inputMain},S.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"性别"),S.a.createElement(J,{style:{flex:1}},e("xb")(S.a.createElement(x.a,{placeholder:"请选择",style:{width:"100%"}},S.a.createElement(T,{value:1},"男"),S.a.createElement(T,{value:2},"女")))))),S.a.createElement(F.a,{md:4,sm:24},S.a.createElement("span",{className:P.a.submitButtons},S.a.createElement(w.a,{type:"primary",htmlType:"submit"},"查询"),S.a.createElement(w.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.MaritimePeople.data,l=a.loading,n=this.state,c=n.modalVisible,d=n.updateModalVisible,o=n.detail,s={loading:l,handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},m={loading:l,detail:o,handleModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate};return S.a.createElement(D.Fragment,null,S.a.createElement(i.a,{bordered:!1},S.a.createElement("div",{className:P.a.tableList},S.a.createElement("div",{className:P.a.tableListForm},this.renderSimpleForm()),S.a.createElement("div",{className:P.a.tableListOperator},S.a.createElement(w.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建")),S.a.createElement(q.a,{rowKey:"id_",size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:l,data:t,columns:this.columns,onChange:this.handleStandardTableChange}))),S.a.createElement(R,r()({},s,{modalVisible:c})),d&&Object.keys(o).length?S.a.createElement(j,r()({},m,{modalVisible:d})):null)}}]),a}(D.PureComponent))||l)||l;a.default=H}}]);