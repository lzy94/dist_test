(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{nAkH:function(e,a,t){"use strict";t.r(a);t("T2oS");var n,r=t("W9HT"),i=(t("IzEo"),t("bx4M")),l=(t("14J3"),t("BMrR")),o=(t("+L6B"),t("2/Rp")),c=(t("jCWc"),t("kPKH")),s=t("MVZn"),m=t.n(s),p=(t("R9oj"),t("ECub")),u=t("lwsE"),d=t.n(u),f=t("W8MJ"),h=t.n(f),E=t("a1gu"),g=t.n(E),y=t("Nsbk"),T=t.n(y),b=t("7W2i"),v=t.n(b),x=(t("iQDF"),t("+eQT")),M=(t("OaEy"),t("2fM7")),C=(t("y8nQ"),t("Vl3Y")),A=t("q1tI"),L=t.n(A),S=t("MuoO"),Y=t("mf+E"),V=t("wd/R"),w=t.n(V),N=t("zT9C"),D=t.n(N),P=t("cVA7"),I=t.n(P),O=t("ns75"),R=t.n(O),k=t("9zHi"),G=t.n(k),_=t("qB80"),B=t.n(_),F=t("+n12"),H=["/datavideo/mobile"],W=C.a.Item,z=M.a.Option,j=x.a.MonthPicker,J=["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],q={color:J,title:{text:"",textStyle:{fontSize:"15",fontWeight:300}},tooltip:{trigger:"item",formatter:"{b}: {c}"},legend:{orient:"vertical",right:0,data:[]},series:[{name:"",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!0,position:"center",fontSize:"18",color:"green",formatter:0}},labelLine:{normal:{show:!1}},data:[]}]},Q=Object(S.connect)(function(e){return{TrafficApiV2Count:e.TrafficApiV2Count,loading:e.loading.models.TrafficApiV2Count}})(n=C.a.create()(n=function(e){function a(){var e,t;d()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=g()(this,(e=T()(a)).call.apply(e,[this].concat(r)))).state={isopen:!1,dateType:1,formValues:{dateType:1,dayValue:w()(new Date).format("YYYY-MM-DD")}},t.getList=function(e){(0,t.props.dispatch)({type:"TrafficApiV2Count/mobileCount",payload:e})},t.handlePanelChange=function(e){t.props.form.setFieldsValue({dayValue:e}),t.setState({isopen:!1})},t.handleOpenChange=function(e){e?t.setState({isopen:!0}):t.setState({isopen:!1})},t.dateTypeChange=function(e){t.setState({dateType:e})},t.pieCompletion=function(e,a){for(var t=a.map(function(e){return{value:0,name:e}}),n=0;n<e.length;n+=1){t[e[n].CHECKSTATUS].value=e[n].TOTAL}return t},t.getCheckChart=function(){var e=t.props.TrafficApiV2Count.mobileData.checkTotal,a=["待审核","已审核","待签批","已签批"],n=D()(q);return n.title.text="审核状态",n.legend.data=a,n.series[0].label.normal.formatter="总数\n\n".concat(e.map(function(e){return e.TOTAL}).reduce(function(e,a){return e+a},0)),n.series[0].data=t.pieCompletion(e,a),e.length?L.a.createElement(I.a,{option:n,style:{height:"100%"}}):L.a.createElement(p.a,{image:p.a.PRESENTED_IMAGE_SIMPLE})},t.getAxleChart=function(){var e=t.props.TrafficApiV2Count.mobileData.axleTotal,a=D()(q);return a.title.text="轴型统计",a.legend.data=e.map(function(e){return"".concat(e.AXLE,"轴")}),a.series[0].label.normal.formatter="总数\n\n".concat(e.map(function(e){return e.TOTAL}).reduce(function(e,a){return e+a},0)),a.series[0].data=e.map(function(e){var a=e.TOTAL,t=e.AXLE;return{value:a,name:"".concat(t,"轴")}}),e.length?L.a.createElement(I.a,{option:a,style:{height:"100%"}}):L.a.createElement(p.a,{image:p.a.PRESENTED_IMAGE_SIMPLE})},t.getLineChart=function(){var e=t.props.TrafficApiV2Count.mobileData.countByDayValue,a=t.state.formValues.dateType-1,n=["","日","月"],r=e.map(function(e){return"".concat(e.DAYVALUE).concat(n[a])}),i=[{name:"检测数",type:"bar",smooth:!0,barMaxWidth:13,data:e.map(function(e){return e.TOTAL})}],l={color:J,title:{text:"",textStyle:{fontSize:"15",fontWeight:300}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{right:"0"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",axisTick:{alignWithLabel:!0},data:r},yAxis:{type:"value",name:"检测数"},series:i};return e.length?L.a.createElement(I.a,{option:l,style:{height:"100%"}}):L.a.createElement(p.a,{image:p.a.PRESENTED_IMAGE_SIMPLE})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=m()({},a),r="YYYY-MM-DD";2===n.dateType?r="YYYY-MM":3===n.dateType&&(r="YYYY"),n.dayValue=w()(n.dayValue).format(r),t.setState({formValues:n}),t.getList(n)}})},t.renderForm=function(){var e=t.props.form.getFieldDecorator,a=t.state,n=a.dateType,r=a.isopen;return L.a.createElement(C.a,{onSubmit:t.handleSearch,layout:"inline"},L.a.createElement(l.a,{gutter:{md:8}},L.a.createElement(c.a,{md:5,sm:24},L.a.createElement("div",{className:R.a.inputMain},L.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"时间类型"),L.a.createElement(W,{style:{flex:1,marginBottom:0}},e("dateType",{initialValue:1})(L.a.createElement(M.a,{className:R.a.inputGroupLeftRadius,placeholder:"请选择",onChange:t.dateTypeChange},L.a.createElement(z,{value:1},"天"),L.a.createElement(z,{value:2},"月"),L.a.createElement(z,{value:3},"年")))))),L.a.createElement(c.a,{md:5,sm:24},1===n?L.a.createElement("div",{className:R.a.inputMain},L.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"日期选择"),L.a.createElement(W,{style:{flex:1,marginBottom:0}},e("dayValue")(L.a.createElement(x.a,{className:R.a.inputGroupLeftRadius,style:{width:"100%"}})))):null,2===n?L.a.createElement("div",{className:R.a.inputMain},L.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"月份选择"),L.a.createElement(W,{style:{flex:1,marginBottom:0}},e("dayValue")(L.a.createElement(j,{format:"YYYY-MM",className:R.a.inputGroupLeftRadius,style:{width:"100%"}})))):null,3===n?L.a.createElement("div",{className:R.a.inputMain},L.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"年份选择"),L.a.createElement(W,{style:{flex:1,marginBottom:0}},e("dayValue")(L.a.createElement(x.a,{open:r,mode:"year",format:"YYYY",style:{width:"100%"},className:R.a.inputGroupLeftRadius,onOpenChange:t.handleOpenChange,onPanelChange:t.handlePanelChange})))):null),L.a.createElement(c.a,{md:14,sm:24},L.a.createElement("div",{style:{overflow:"hidden"}},L.a.createElement("div",{style:{float:"right"}},L.a.createElement(o.a,{type:"primary",htmlType:"submit"},"查询"),L.a.createElement(o.a,{style:{marginLeft:8},onClick:t.handleFormReset},"重置"))))))},t}return v()(a,e),h()(a,[{key:"componentDidMount",value:function(){if(Object(F.c)(H[0])){var e=this.state.formValues;this.getList(e)}}},{key:"render",value:function(){var e=this.props.loading,a={width:"50%",height:"50%"};return L.a.createElement(L.a.Fragment,null,Object(F.c)(H[0])?null:L.a.createElement(Y.a,{to:"/exception/403"}),L.a.createElement(i.a,{bordered:!1},L.a.createElement("div",{className:G.a.tableListForm},this.renderForm())),L.a.createElement(i.a,{className:B.a.cardMain,bordered:!1},L.a.createElement(i.a.Grid,{style:a},e?L.a.createElement(r.a,{spinning:e},L.a.createElement(p.a,{image:p.a.PRESENTED_IMAGE_SIMPLE})):this.getCheckChart()),L.a.createElement(i.a.Grid,{style:a},e?L.a.createElement(r.a,{spinning:e},L.a.createElement(p.a,{image:p.a.PRESENTED_IMAGE_SIMPLE})):this.getAxleChart()),L.a.createElement(i.a.Grid,{style:m()({},a,{width:"100%"})},e?L.a.createElement(r.a,{spinning:e},L.a.createElement(p.a,{image:p.a.PRESENTED_IMAGE_SIMPLE})):this.getLineChart())))}}]),a}(A.PureComponent))||n)||n;a.default=Q},qB80:function(e,a,t){e.exports={cardMain:"antd-pro-pages-traffic-datavideo-mobile-index-cardMain"}}}]);