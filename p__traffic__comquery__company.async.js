(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{Z15n:function(e,a,t){"use strict";t.r(a);var n,l=t("pVnL"),r=t.n(l),i=(t("IzEo"),t("bx4M")),o=(t("14J3"),t("BMrR")),d=(t("5NDa"),t("5rEg")),m=(t("jCWc"),t("kPKH")),s=(t("nRaC"),t("5RzL")),c=t("MVZn"),p=t.n(c),u=(t("5Dmo"),t("3S7+")),h=(t("+L6B"),t("2/Rp")),E=t("lwsE"),g=t.n(E),f=t("W8MJ"),b=t.n(f),y=t("a1gu"),I=t.n(y),C=t("Nsbk"),v=t.n(C),M=t("7W2i"),w=t.n(M),L=(t("2qtc"),t("kLXV")),V=(t("bP8k"),t("gFTJ")),N=(t("y8nQ"),t("Vl3Y")),S=t("q1tI"),k=t.n(S),x=t("MuoO"),B=t("wd/R"),R=t.n(B),F=t("mf+E"),D=t("CkN6"),z=t("+n12"),T=t("9zHi"),J=t.n(T),O=t("ns75"),U=t.n(O),P=t("ZP6J"),j=t.n(P),q=N.a.Item,Y=["/comquery/company"],A=["身份证","执法证","军官证","护照","其他"],H=N.a.create()(function(e){var a=e.modalVisible,t=e.handleUpdateModalVisible,n=e.detail;return k.a.createElement(L.a,{destroyOnClose:!0,title:"货运企业详情",className:j.a.myModal+" "+j.a.modalbody,visible:a,onCancel:function(){return t()},footer:null,width:800},k.a.createElement("div",{className:j.a.detailMsg},k.a.createElement("div",{style:{padding:20}},k.a.createElement(V.a,{bordered:!0,size:"small",column:2},k.a.createElement(V.a.Item,{label:"企业名称"},n.companyName),k.a.createElement(V.a.Item,{label:"企业号码"},n.companyPhone),k.a.createElement(V.a.Item,{label:"企业地址"},n.address),k.a.createElement(V.a.Item,{label:"法人代表"},n.legalRepresent),k.a.createElement(V.a.Item,{label:"法人代表证件类型"},A[parseInt(n.idCardType)-1]),k.a.createElement(V.a.Item,{label:"法人代表证件号码"},n.idCardNo),k.a.createElement(V.a.Item,{label:"道路运输证号"},n.transportCode),k.a.createElement(V.a.Item,{label:"发证日期"},R()(n.getLicenceDate).format("YYYY-MM-DD")),k.a.createElement(V.a.Item,{label:"承运人名称"},n.carrier),k.a.createElement(V.a.Item,{label:"承运人地址"},n.carrierAddr),k.a.createElement(V.a.Item,{label:"承运人邮编"},n.carrierMail),k.a.createElement(V.a.Item,{label:"备注"},n.remark)))))}),K=Object(x.connect)(function(e){var a=e.system,t=e.Company,n=e.loading;return{treeList:a.treeList,Company:t,loading:n.models.Company}})(n=N.a.create()(n=function(e){function a(){var e,t;g()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=I()(this,(e=v()(a)).call.apply(e,[this].concat(l)))).state={updateModalVisible:!1,formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"企业名称",dataIndex:"companyName"},{title:"企业号码",dataIndex:"companyPhone"},{title:"地址",dataIndex:"address"},{title:"法人代表",dataIndex:"legalRepresent"},{title:"道路运输证号",dataIndex:"transportCode"},{title:"承运人名称",dataIndex:"carrier"},{title:"承运人地址",dataIndex:"carrierAddr"},{title:"操作",width:70,render:function(e,a){return k.a.createElement(S.Fragment,null,k.a.createElement(u.a,{placement:"left",title:"详情"},k.a.createElement(h.a,{onClick:function(){return t.showModal(a.id)},type:"primary",shape:"circle",icon:"eye",size:"small"})))}}],t.showModal=function(e){(0,t.props.dispatch)({type:"Company/detail",payload:e,callback:function(e){t.setState({detail:e}),t.handleUpdateModalVisible(!0)}})},t.getList=function(e){(0,t.props.dispatch)({type:"Company/fetch",payload:e})},t.handleStandardTableChange=function(e,a,n){var l=t.state.formValues,r={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:l};t.getList(r)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:a})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.state.pageBean,l=p()({},a),r=Object.keys(l).map(function(e){return l[e]?{property:e,value:l[e],group:"main",operation:"organCode"===e?"RIGHT_LIKE":"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:r}),t.getList({pageBean:n,querys:r})}})},t.handleUpdateModalVisible=function(e,a){t.setState({updateModalVisible:!!e})},t}return w()(a,e),b()(a,[{key:"componentDidMount",value:function(){if(Object(z.b)(Y[0])){var e=this.state.pageBean;this.getList({pageBean:e})}}},{key:"renderSimpleForm",value:function(){var e=this.props,a=e.treeList,t=e.form.getFieldDecorator;return k.a.createElement(N.a,{onSubmit:this.handleSearch,layout:"inline"},k.a.createElement(o.a,{gutter:{md:8,lg:16,xl:32}},k.a.createElement(m.a,{md:5,sm:24},k.a.createElement("div",{className:U.a.inputMain},k.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"所属机构"),k.a.createElement(q,{style:{flex:1}},t("organCode")(k.a.createElement(s.a,{className:U.a.inputGroupLeftRadius,treeData:a,style:{width:"100%"},placeholder:"请选择"}))))),k.a.createElement(m.a,{md:5,sm:24},k.a.createElement(q,null,t("companyName")(k.a.createElement(d.a,{addonBefore:"企业名称"})))),k.a.createElement(m.a,{md:5,sm:24},k.a.createElement(q,null,t("legalRepresent")(k.a.createElement(d.a,{addonBefore:"法人代表"})))),k.a.createElement(m.a,{md:5,sm:24},k.a.createElement(q,null,t("transportCode")(k.a.createElement(d.a,{addonBefore:"道路运输证号"})))),k.a.createElement(m.a,{md:4,sm:24},k.a.createElement("span",{className:J.a.submitButtons},k.a.createElement(h.a,{type:"primary",htmlType:"submit"},"查询"),k.a.createElement(h.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,a=e.Company.data,t=e.loading,n=this.state,l=n.updateModalVisible,o=n.detail,d={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate,detail:o};return k.a.createElement(S.Fragment,null,Object(z.b)(Y[0])?null:k.a.createElement(F.a,{to:"/exception/403"}),k.a.createElement(i.a,{bordered:!1},k.a.createElement("div",{className:J.a.tableList},k.a.createElement("div",{className:J.a.tableListForm},this.renderSimpleForm()),k.a.createElement(D.a,{size:"middle",selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange}))),l&&"{}"!==JSON.stringify(o)?k.a.createElement(H,r()({},d,{modalVisible:l})):null)}}]),a}(S.PureComponent))||n)||n;a.default=K}}]);