(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"7PZo":function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAElElEQVRIS7WVTWhcVRTHz7n3vvvefCXTqUmKjZgG06SNVkFQQdBiSIvSlVjF7kahKipUEApu7LLgoi4s0i4aN1oUd6KbCu1CkSKCVJO2pDStpiUftmY+MvM+7j1H7rRJ2mQy7WIcuLzHncPvnfs/538uwu0fH39gDzBsBgALQDDw85E3Z+L8MwJ4KWT5SYCwSZd+mXz2wAkAAcCgAOAavv3Pd7gURce76xiXAjBRY+ux345OXUl6t6wH7POmp/548t0tjWDlA+vOSOyfC5aB/JnP8dD+qtn8AqAN1SsnO/7+4c9wQCxHrCRKDPDSo8Hkt6+XH2IZGHX9NOiJY1l8P8IV4KfAtZEvq9G2fUokoM6OT58/M3EDZBMgM8Bz2zfC08O920iD8SdOmvSP+7L4AawC7jxRjweLGuKyBIDYElsn4VoVAZREF6NBd1h9cSxOn3kjhQeaAHmoGHw/l5wvWZm8mK/1ziYy+qkazAbIggHQAkgmQPedbk1yT5caxAtj4bpAGir6Z27EV8tG0vMdtcLNRCa/1vSCxkZGd1QauKCs3LlRPywujEXrAuPBoqcxVCgEJGEEKAUordeeGwHYWog5MPriWLI+cFtRe5O/L0B90dgtW/OwWE3UtSsVlmpVeRgg0+ElA0/k9fkWGkY7ikHuk4Pn5Mx0Un3v4141dTFMfXV0ltO5u44MZNn2bfUqHx5+3D/XQsPYZTh+NsQ4AtM/JLFWZTk9RbA6QybmVAaS7U8FLTN0GiqMFaIAE4XgtJTaX2M/t0FkwbJurSENFYNTC1OXZk0SvpztHpw2Yel0ePMvH+SqKjP3e0HHzs6+ftGqbXCo6B+eO3f1uon8g/n+YCKumi/K0zotpEBAKxCc2dkwy36dDj/q3tHL92oblVQaJTXMIAAb9mvmFrdnvNw92mawqDkshS5WCOxkhoSIygCwxtVCYAB+p9/Semao6M/OzEwl1sqeDZlCGJvFf8v1Kq5yCjNw4Cvs7tnUp1odORks6oWbc7G1nOrM+guJJa9aizO4MkduVZzBdVJtQ6Hb95oOhyPAi6NfV+LhV32ZgG60hZsGeGs1FdGNdw9iPf5NlDn1Wu6u8UWfdzJ1DlhK9Qhk22QKNm1FYJQs6rMkSpNSvFNaOQcd65oEih5BMs0K2py2dB8JhSD8S+Kt+YH7zqQl8Y4//zdgu8CMhw4dEuPj48vAy5cvi/s9Xi6X466urmXNh4eHGffu3avn5+dFLpcTURRhHMeYSqUa0Hq9vgaulGLP87hcLnMmkyEXV6lUKJ/PUzabZdy1a1eGiBQzu9tfCSGkc4UxRhARaq3RPYVwdxSAMYbcOxFZt1KplK1UKoaZTaFQsLh79+4CAPjWWo+ZAyLylFKeMaYBFkIsZ2mtZaWUdVxENEmSJJ7nxcaYWCmVxO54IyMjPdbalNY6MMakpZQpItLM7AkhvFuDlAQisltLMGaO3CKiGiKGROTGWoijo6MPJkmSRsSMUipLRGmXqRDCQdWdQ4GZnWaGiGIppYPVAaDKzItSyrr7QPszbLuGba9y2/uw7U65bbO2efk/1CZFai5HzlcAAAAASUVORK5CYII="},"8Waa":function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAD0ElEQVQ4T31UW2hcVRTd+5xzz517JzOTyWTyMJKaio/6pij4kQQVRbB+BBEfIFRR1PjR+uGXgp/6qzaOUURQjApVQRFBLDSKD6pY/FBqXmCLJQ/TzvvOnXPuOVvuzJgmbZIN9zIDm3X3XnuthQAA5p2+D1jUyEOzKkBA8PzcUyPTaxM3Sm6BgY1bNioCDl1UKf65/8mTOR5GIAW3bs8qf3rtsbgJ4xdNdxO5PWBSV4FIuvDiz7euvfr79SmIyANGWwDBIuzJNc/8ct/R4Z6EBQxXgJcWACeLLaw24BuOjoYPiOD2VypeNud/faJ0unBsGc5VlSs42zqhtnDXDdniC/dftjeRkugsfmG875/rwkOq1dgGfJ0pvfchp37HdEMmM56p1utLq9VyoIxNMOCtpk5ZSzCU83imu7svdHnk/vW58r99OIGHI74JkCs1MuHQ2JRdwv7K2aBZ3peyaQ9RzIVOWRNZBoCWEAGBKQPgksabsl6fnP9Q+7NPSDy0DaAYn4IfooGzJ87blTu7w/5uRvJYxVutGTACW2xi/EQE1CssPDAo9smFGe0ff9y9BFCPTDjN0SOqkhykqgGTMQ0hyGLJSUYmRsEOPwDxXcgxBno4l3J+RvuzOwAGYwUlWBfK2ppWiaQ0yJgb1kOMiWvT3S4kIObwRnZI7DzhFRNO7cD74P740z/uVzPL4cTBAZvtld5n761gtajRcS+cO4rADlwuas++dJ1c/DTyjx+8lMN45fo97xoxf7rqnPyurm8b9ymZZs6vsw1sBAC8dcR2kSGbymLz3kfycvETtSOH9dGppvTyrqdDCMBCvKjPObDN63YwtbUQyGS0I4exbOxowS7JVOlUcG7tFukPeYDOb1FwJiQbccANz1gA2895183+4FAHcHvZyPFpOmrMysfFxcpkek82xxw4Uvo7KhrNXM6JAShAsMoSGxZu9PLg/j2JhY+0t5NswtGCqro9rK6KmEYHOCCVSXNLgLFsYsW0KARAAWCyXi/sLpvRNxUm8ihUrWkY+kTAGFEtDqT/bbqhHAaulmkh52fUtjqMOdTjBVs06fVqab2cTfm9jCMVK2HRGAPAOjO25yTpcOztHxje3SljhahCGV0rrfN0V0Jxxkyl3vSNpc1wrZ0Zx0YuP+DJhe0mfI0rdeWjTnD3VECJTAJ1y7dxFMQGwYsytuMWABKg5dyXYfKbB5N4WF9IG/tWRpHX50TZay0wlzEy8RBtl22Krot/WuTEg2XLzv+BbLK8CfDt/Cmg6Gq0Or7h1oiO/+2CShjnkFxkz/x7TfzB/wCQ+Acz9jCtIQAAAABJRU5ErkJggg=="},Ujjq:function(e,a){e.exports="data:image/png;base64,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"},W9CC:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAELUlEQVQ4T32UbWwUVRSGn3tnZmd3u9tS6NcWoRgRIaKYKiDGKEWJVqUEKiKKgQRDwg9qjCIJPwx/FBVj/AgxSBNNJBo10VBCQFQoNqKoCVQSov7ho60tdNuy3c5Od76umYnUVpCT3OTO5NxnzrnveUcwLlTHveWkyt9yek+uL/R2EyuVJOsaQEhAQOBhdR3DHfZJZKZi1tx1GDe3VSxoP3UFI65s1PElU9H5GT1Z61w8xWh/N0a6hMTUuycAC3/9hDdSIF45jVjVHeBa4bfuFwuOfB+y/gWeWPIlsIJYimLPCey+i8TKNJJ1i0Fo/1ToMnKhHW84IFFTg1m7EJx8yOkXC49U/QfYcAlpVIZANdLLaPY8RrocfcotUatRCA1v8HfcfI54xQxEKgPOCAQuiCAjFrT3RRWq0w9sQNdbVXYI3ymAlKAcVKBQ3iioIMwCqSE0E4RAyBj4PnoiCZMmQaH4hpjfsTUCnv+q/oms5bbOrRlMu4M9IQvDgMAH1xl3MQpiZoTG80GY4GrpoNuecXTOrNrXjPlffyvU0e1654Cz8uSZc+8++ejsalO3UMUhpOGAb+OP2qB8UAqh6ch4ElSMwDcRJZX09oniL7/1716+dO4BcVvLYaH++KQCw+hH11BDRYSZgESCjZvfp3JKmldeXw9DeYjp+K7Pmo27WFQ/k+e3rYa+AVAuVOswWEDMfkYIpZTgdGuTUsEGEMuQAjRJe8cZEmaMhYtmIzwVvfMdh2+OnaamspR59TPBLiJS0uvLBfvWttmt321/7tDY2IR3GXTu6UWpmlAEUTUJNA2ylwmGc5HIsnwyVJXDsIUayCNKdCgRB8X0Zx+5arAjtTv3bFCo1mhCDB1rKE/uYpayinSkfO5SjtKqyaTKy8AIVYGXDtqLd7a0HLsmMIL++VEzrvcqiFnK8xjo6cdVIhqVmPIoq61CL9VQefv46raRF794eduP4+07oeUJvj67dx2uuxSNZfhaaaS0IbqQ8jAyaBPT17eNz//fCscn7di14+FMsffjdZmeKUFRE+9k6874SjVs2fLmpWvBJlgvfFi1alUi6xUbCwX7HtdX9TfNublBTyZ5TO9SWU/nuJgmcufPujmPQ7c++MAJnOCH1s2b2q/Z8vKnmh9SKvhQSplRKDzXIxE3EZpGdz7A1ASZlMR2PNzhHIFtIU2TwPN/nbbpheYPmpouTKhwxdrHzxUsq043DGKxGEopPM+L/Cx1LXKK7/tomhatMFzHwc5dpnrene99uvPtljFgY2OjGa9I9Y9aVjpQipJUKjp8vdB0HSufR0qBrhv793+2r2kMuPLplTf4iq6wqlHbJpFMXhcWHRSCgmWRwMOrvrHjwO49940Bm9Y03y6E6pSaxsjwMEbYdjyOCsLf1tUhpMQpFqOW0yVJPGlcaNv7eV2Y+TeuFs8kgaTb0QAAAABJRU5ErkJggg=="},"fk/G":function(e,a,t){e.exports={legend:"antd-pro-pages-conserve-inspection-contingency-plan-index-legend",statistics:"antd-pro-pages-conserve-inspection-contingency-plan-index-statistics",header:"antd-pro-pages-conserve-inspection-contingency-plan-index-header",body:"antd-pro-pages-conserve-inspection-contingency-plan-index-body",list:"antd-pro-pages-conserve-inspection-contingency-plan-index-list",listBody:"antd-pro-pages-conserve-inspection-contingency-plan-index-listBody",buttonGroup:"antd-pro-pages-conserve-inspection-contingency-plan-index-buttonGroup",readModal:"antd-pro-pages-conserve-inspection-contingency-plan-index-readModal",content:"antd-pro-pages-conserve-inspection-contingency-plan-index-content",leftList:"antd-pro-pages-conserve-inspection-contingency-plan-index-leftList",rightBody:"antd-pro-pages-conserve-inspection-contingency-plan-index-rightBody",detail:"antd-pro-pages-conserve-inspection-contingency-plan-index-detail",liContent:"antd-pro-pages-conserve-inspection-contingency-plan-index-liContent",pC:"antd-pro-pages-conserve-inspection-contingency-plan-index-pC",state:"antd-pro-pages-conserve-inspection-contingency-plan-index-state",stateOne:"antd-pro-pages-conserve-inspection-contingency-plan-index-stateOne",stateTow:"antd-pro-pages-conserve-inspection-contingency-plan-index-stateTow"}},oFdo:function(e,a,t){"use strict";t.r(a);var n,l,r,o,i=t("pVnL"),s=t.n(i),c=(t("+L6B"),t("2/Rp")),d=(t("sRBo"),t("kaz8")),m=t("MVZn"),p=t.n(m),u=(t("miYZ"),t("tsqr")),g=t("RIqP"),h=t.n(g),f=t("lwsE"),y=t.n(f),E=t("W8MJ"),v=t.n(E),A=t("a1gu"),b=t.n(A),C=t("Nsbk"),k=t.n(C),M=t("7W2i"),S=t.n(M),V=(t("2qtc"),t("kLXV")),N=(t("bP8k"),t("gFTJ")),w=(t("fV52"),t("3I+P")),O=(t("y8nQ"),t("Vl3Y")),I=t("q1tI"),B=t.n(I),x=t("7DBZ"),D=t("MuoO"),L=t("wd/R"),P=t.n(L),R=t("zH15"),W=t.n(R),F=t("dNE1"),G=t.n(F),T=(t("DZo9"),t("8z0m")),Q=(t("14J3"),t("BMrR")),U=(t("iQDF"),t("+eQT")),z=(t("5NDa"),t("5rEg")),K=(t("jCWc"),t("kPKH")),j=(t("Pwec"),t("CtXQ")),J=(t("OaEy"),t("2fM7")),q=t("+n12"),Y=t("ZP6J"),H=t.n(Y),Z=t("z1x1"),X=(t("5Dmo"),t("3S7+")),_=t("CkN6"),$=t("9zHi"),ee=t.n($),ae=O.a.Item,te=Object(D.connect)(function(e){return{ConserveCompany:e.ConserveCompany,loading:e.loading.models.ConserveCompany}})(n=O.a.create()(n=function(e){function a(){var e,t;y()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=b()(this,(e=k()(a)).call.apply(e,[this].concat(l)))).state={formValues:[],pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"企业名称",dataIndex:"companyName"},{title:"法人代表",dataIndex:"companyHeader"},{title:"联系方式",dataIndex:"companyTel"},{title:"标签",dataIndex:"conserveCategoryName"},{title:"操作",render:function(e,a){return B.a.createElement(I.Fragment,null,B.a.createElement(X.a,{placement:"left",title:"选择"},B.a.createElement(c.a,{type:"primary",shape:"circle",icon:"check",size:"small",onClick:function(){return t.selectData(a)}})))}}],t.getList=function(e){(0,t.props.dispatch)({type:"ConserveCompany/fetch",payload:e})},t.selectData=function(e){var a=t.props,n=a.selectData,l=a.handleModalVisible;n(e),l()},t.handleStandardTableChange=function(e){var a=t.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(n)},t.handleFormReset=function(){t.props.form.resetFields(),t.setState({formValues:[]}),t.getList({pageBean:t.state.pageBean})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=p()({},a),l=t.state.pageBean,r=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:r}),t.getList({pageBean:l,querys:r})}})},t}return S()(a,e),v()(a,[{key:"componentDidMount",value:function(){this.getList({pageBean:this.state.pageBean})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return B.a.createElement(O.a,{onSubmit:this.handleSearch,layout:"inline"},B.a.createElement(Q.a,{gutter:{md:8,lg:16,xl:32}},B.a.createElement(K.a,{md:8,sm:24},B.a.createElement(ae,null,e("companyHeader")(B.a.createElement(z.a,{addonBefore:"法人代表",placeholder:"请输入"})))),B.a.createElement(K.a,{md:8,sm:24},B.a.createElement(ae,null,e("companyName")(B.a.createElement(z.a,{addonBefore:"企业名称",placeholder:"请输入"})))),B.a.createElement(K.a,{md:6,sm:24},B.a.createElement("span",{className:ee.a.submitButtons},B.a.createElement(c.a,{type:"primary",htmlType:"submit"},"查询"),B.a.createElement(c.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,a=e.ConserveCompany.data,t=e.loading,n=e.modalVisible,l=e.handleModalVisible;return B.a.createElement(V.a,{destroyOnClose:!0,title:"选择公司",className:H.a.myModal,visible:n,width:1e3,onCancel:function(){return l()},footer:null},B.a.createElement("div",{className:ee.a.tableList},B.a.createElement("div",{className:ee.a.tableListForm},this.renderSimpleForm()),B.a.createElement(_.a,{size:"middle",tableAlert:!1,selectedRows:0,rowSelection:null,loading:t,data:a,columns:this.columns,onChange:this.handleStandardTableChange})))}}]),a}(I.PureComponent))||n)||n,ne=O.a.Item,le=J.a.Option,re=Object(D.connect)(function(e){var a=e.RoadWorkOrdes;return{system:e.system,RoadWorkOrdes:a,ContingencyPlan:e.ContingencyPlan,loading:e.loading.models.ContingencyPlan}})(l=O.a.create()(l=function(e){function a(){var e,t;y()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=b()(this,(e=k()(a)).call.apply(e,[this].concat(l)))).state={departmentUserList:[],curinger:"",companyModalVisible:!1,value:"",lnglat:[],fileList:[],companyName:"",companyId:""},t.getDepartmentUser=function(){(0,t.props.dispatch)({type:"system/departmentUser",payload:{menuType:-2},callback:function(e){t.setState({departmentUserList:e})}})},t.companyHandleModalVisible=function(e){t.setState({companyModalVisible:!!e})},t.selectDataCate=function(e){t.setState({companyId:e.id,companyName:e.companyName})},t.curingerChange=function(e,a){t.setState({curinger:a.props.children})},t.parentAddress=function(e,a){t.setState({value:e,lnglat:a})},t.inputValue=function(e){t.setState({value:e})},t.handleChange=function(e){var a=e.fileList;return t.setState({fileList:a})},t.uploadConfig=function(){return{name:"files",action:"/result/api/file/v1/fileUpload",listType:"picture-card",accept:".jpg,.jpeg,.png",data:{type:9},headers:{Authorization:"Bearer ".concat(Object(q.w)("token")[0]),"x-requested-with":"XMLHttpRequest"},beforeUpload:q.A,onChange:t.handleChange}},t.save=function(){var e=t.props,a=e.form,n=e.dispatch,l=e.handleModalVisible;e.modalSuccess;a.validateFields(function(e,a){if(!e){var r=t.state,o=r.lnglat,i=r.curinger,s=r.fileList,c=r.companyId,d=r.value;if(!s.length)return u.a.error("请选择图片");var m=p()({},a);if(m.checkTime>m.endTime)return u.a.error("限定完成时间应大于开始时间");if(m.curinger=i,m.longlat=o.join(),d&&o.join()){m.curingAddr=d,m.state=1;var g=s.map(function(e){return e.response.filePath});m.imgUrl=g.join(),m.companyId=c,n({type:"RoadWorkOrdes/saveData",payload:m,callback:function(){u.a.success("下发成功"),l()}})}else u.a.error("请获取位置")}})},t.cancelModal=function(){(0,t.props.handleModalVisible)(),t.setState({fileList:[]})},t}return S()(a,e),v()(a,[{key:"componentDidMount",value:function(){this.getDepartmentUser()}},{key:"render",value:function(){var e=this,a=this.props,t=a.form,n=a.modalVisible,l=a.loading,r=this.state,o=r.departmentUserList,i=r.fileList,d=r.companyModalVisible,m=r.companyName,p={selectData:this.selectDataCate,handleModalVisible:this.companyHandleModalVisible},u=B.a.createElement("div",null,B.a.createElement(j.a,{type:"plus"}),B.a.createElement("div",{className:"ant-upload-text"},"请选择图片"));return B.a.createElement(I.Fragment,null,B.a.createElement(V.a,{destroyOnClose:!0,title:"新建养护工单",className:H.a.formModal,visible:n,onCancel:this.cancelModal,width:800,footer:[B.a.createElement(c.a,{key:"back",onClick:this.cancelModal},"取消"),B.a.createElement(c.a,{key:"submit",type:"primary",loading:l,onClick:this.save},"下发任务")]},B.a.createElement("div",{className:H.a.formModalBody},B.a.createElement(Q.a,{gutter:40},B.a.createElement(K.a,{md:12,sm:24},B.a.createElement(ne,{label:"巡查人员"},t.getFieldDecorator("curingerId",{rules:[{required:!0,message:"请选择巡查人员！"}]})(B.a.createElement(J.a,{placeholder:"请选择",style:{width:"100%"},onChange:this.curingerChange},o.map(function(e){return B.a.createElement(le,{key:e.id,value:e.id},e.fullname)}))))),B.a.createElement(K.a,{md:12,sm:24},B.a.createElement(ne,{label:"养护企业"},t.getFieldDecorator("companyName",{initialValue:m,rules:[{required:!0,message:"请选择养护企业！"}]})(B.a.createElement(z.a,{readOnly:!0,placeholder:"请选择养护企业",onClick:function(){return e.companyHandleModalVisible(!0)}})))),B.a.createElement(K.a,{md:12,sm:24},B.a.createElement(ne,{label:"开始时间"},t.getFieldDecorator("checkTime",{rules:[{required:!0,message:"请选择开始时间！"}]})(B.a.createElement(U.a,{style:{width:"100%"},placeholder:"请选择"})))),B.a.createElement(K.a,{md:12,sm:24},B.a.createElement(ne,{label:"限定完成时间"},t.getFieldDecorator("endTime",{rules:[{required:!0,message:"请选择限定完成时间！"}]})(B.a.createElement(U.a,{style:{width:"100%"},placeholder:"请选择"})))),B.a.createElement(K.a,{md:12,sm:24},B.a.createElement(ne,{label:"养护原因"},t.getFieldDecorator("curingContent",{rules:[{required:!0,message:"请输入养护原因！"}]})(B.a.createElement(z.a.TextArea,{autosize:!0,placeholder:"请输入"})))),B.a.createElement(K.a,{md:12,sm:24},B.a.createElement(ne,{label:"工作内容"},t.getFieldDecorator("workContent",{rules:[{required:!0,message:"请输入工作内容！"}]})(B.a.createElement(z.a.TextArea,{autosize:!0,placeholder:"请输入"})))),B.a.createElement(K.a,{md:24,sm:24},B.a.createElement(Z.a,{parentAddress:this.parentAddress,getInputValue:this.inputValue})))),B.a.createElement("div",{className:H.a.formModalBody,style:{marginTop:10}},B.a.createElement("h3",null,"上传照片"),B.a.createElement("div",{className:"clearfix"},B.a.createElement(ne,null,t.getFieldDecorator("imgUrl",{rules:[{required:!0,message:"请上传照片！"}]})(B.a.createElement(T.a,s()({},this.uploadConfig(),{fileList:i}),i.length>=3?null:u)))))),d?B.a.createElement(te,s()({modalVisible:d},p)):null)}}]),a}(I.PureComponent))||l)||l,oe=t("5PMe"),ie=(t("DjyN"),t("NUBc")),se=(t("T2oS"),t("W9HT")),ce=(t("R9oj"),t("ECub")),de=t("Py4S"),me=t.n(de),pe=t("fk/G"),ue=t.n(pe),ge=t("15hv"),he=t.n(ge),fe=O.a.Item,ye=O.a.create()(function(e){var a=e.form,t=e.detail,n=e.save,l=e.renderImg,r=e.companyName,o=e.companyHandleModalVisible;return B.a.createElement("div",{className:ue.a.rightBody},B.a.createElement("div",{className:"".concat(ue.a.header," ").concat(ue.a.detail)},B.a.createElement("h3",null,B.a.createElement("span",null),"详情信息")),B.a.createElement("div",{style:{height:610,overflowY:"auto",paddingRight:24}},B.a.createElement(O.a,{onSubmit:function(){a.validateFields(function(e,t){e||(a.resetFields(),n(t))})}},Object.keys(t).length?B.a.createElement("div",{style:{paddingLeft:12}},B.a.createElement("div",{style:{overflow:"hidden"}},l()," "),B.a.createElement(fe,{label:"所在位置",style:{marginBottom:0}},a.getFieldDecorator("curingAddr",{initialValue:t.truobleAddr})(B.a.createElement(z.a,{readOnly:!0}))),B.a.createElement(fe,{label:"创建时间",style:{marginBottom:0}},a.getFieldDecorator("createTime",{initialValue:t.createTime})(B.a.createElement(z.a,{readOnly:!0}))),B.a.createElement(fe,{label:"养护原因",style:{marginBottom:0}},a.getFieldDecorator("curingContent",{initialValue:t.truobleContent})(B.a.createElement(z.a,null))),1===t.state&&B.a.createElement(I.Fragment,null,B.a.createElement(fe,{label:"养护企业",style:{marginBottom:0}},a.getFieldDecorator("companyName",{initialValue:r,rules:[{required:!0,message:"请选择养护企业！"}]})(B.a.createElement(z.a,{readOnly:!0,placeholder:"请选择养护企业",onClick:function(){return o(!0)}}))),B.a.createElement(fe,{label:"限定完成时间",style:{marginBottom:0}},a.getFieldDecorator("endTime",{rules:[{required:!0,message:"请选择限定完成时间！"}]})(B.a.createElement(U.a,{style:{width:"100%"},placeholder:"请选择"}))),B.a.createElement(fe,{label:"工作内容",style:{marginBottom:0}},a.getFieldDecorator("workContent",{rules:[{required:!0,message:"请输入工作内容！"}]})(B.a.createElement(z.a.TextArea,{autosize:!0,placeholder:"请输入"}))),B.a.createElement(c.a,{style:{margin:"10px 0 0 130px "},type:"primary",htmlType:"submit"},"同意保养"))):null)))}),Ee=Object(D.connect)(function(e){return{RoadWorkOrdes:e.RoadWorkOrdes,ContingencyPlan:e.ContingencyPlan,loading:e.loading.models.ContingencyPlan}})(r=O.a.create()(r=function(e){function a(){var e,t;y()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=b()(this,(e=k()(a)).call.apply(e,[this].concat(l)))).state={companyName:"",companyId:"",detail:{},companyModalVisible:!1,pageBean:{page:1,pageSize:6,showTotal:!0}},t.companyHandleModalVisible=function(e){t.setState({companyModalVisible:!!e})},t.getList=function(e){(0,t.props.dispatch)({type:"ContingencyPlan/fetch",payload:e})},t.renderState=function(e){return 1===e?B.a.createElement("span",{className:"".concat(ue.a.state," ").concat(ue.a.stateOne)},"未处理"):2===e?B.a.createElement("span",{className:"".concat(ue.a.state," ").concat(ue.a.stateTow)},"已处理"):""},t.showImg=function(e){if(e){var a=e.split(",");return q.B+a[0]}return he.a},t.handleStandardTableChange=function(e,a){var n={pageBean:{page:e,pageSize:a,showTotal:!0},querys:t.state.formValues};t.getList(n)},t.listClick=function(e){(0,t.props.dispatch)({type:"ContingencyPlan/detail",payload:e.id,callback:function(e){t.setState({detail:e})}})},t.renderList=function(e){return e.list.length?e.list.map(function(e,a){return B.a.createElement("li",{key:a,onClick:function(){return t.listClick(e)}},B.a.createElement("img",{src:t.showImg(e.imgUrl),alt:"",onError:function(e){e.target.onerror=null,e.target.src=he.a}}),B.a.createElement("div",{className:ue.a.liContent},B.a.createElement("h3",null,e.truobleAddr),B.a.createElement("p",{className:ue.a.pC},e.truobleContent),B.a.createElement("p",null,e.createTime)),t.renderState(e.state))}):B.a.createElement(ce.a,{image:ce.a.PRESENTED_IMAGE_SIMPLE})},t.renderImg=function(){var e=t.state.detail.imgUrl;return e?e.split(",").map(function(e,a){return B.a.createElement("div",{key:a,style:{overflow:"hidden",width:125,height:125,float:"left",marginRight:10}},B.a.createElement(me.a,{backdrop:"rgba(255,255,255,.3)",src:q.B+e,alt:"图片",style:{width:"100%",height:"125px"}}))}):""},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.state.pageBean,l={truobleContent:a.name},r=Object.keys(l).map(function(e){return l[e]?{property:e,value:l[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.getList({pageBean:n,querys:r})}})},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.getList({pageBean:a})},t.selectDataCate=function(e){t.setState({companyId:e.id,companyName:e.companyName})},t.changeState=function(e){(0,t.props.dispatch)({type:"ContingencyPlan/change",payload:{id:e},callback:function(){u.a.success("下发成功"),t.getList({pageBean:t.state.pageBean})}})},t.save=function(e){var a=t.props.dispatch,n=p()({},e),l=t.state,r=l.detail,o=l.companyName,i=t.state.companyId;n.companyName=o,n.curinger=r.creater,n.curingerId=r.createBy,n.longitude=r.longitude,n.latitudel=r.latitude,n.companyId=i,n.curingAddr=r.truobleAddr,n.curingContent=r.truobleContent,n.imgUrl=r.imgUrl,a({type:"RoadWorkOrdes/saveData",payload:n,callback:function(){t.changeState(r.id)}})},t}return S()(a,e),v()(a,[{key:"componentDidMount",value:function(){this.getList({pageBean:this.state.pageBean})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return B.a.createElement(O.a,{onSubmit:this.handleSearch,layout:"inline",style:{float:"right"}},B.a.createElement(Q.a,null,B.a.createElement(K.a,{md:12,sm:24},B.a.createElement(fe,null,e("name")(B.a.createElement(z.a,{placeholder:"养护名称"})))),B.a.createElement(K.a,{md:12,sm:24},B.a.createElement("span",{className:ee.a.submitButtons},B.a.createElement(c.a,{type:"primary",htmlType:"submit"},"查询"),B.a.createElement(c.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,a=e.ContingencyPlan.data,t=e.modalVisible,n=e.handleModalVisible,l=e.loading,r=this.state,o=r.companyModalVisible,i=r.detail,c=r.companyName,d={selectData:this.selectDataCate,handleModalVisible:this.companyHandleModalVisible};return B.a.createElement(I.Fragment,null,B.a.createElement(V.a,{title:null,visible:t,onCancel:function(){return n()},className:ue.a.readModal,width:1100,footer:null},B.a.createElement("div",{className:ue.a.content},B.a.createElement("div",{className:ue.a.leftList},B.a.createElement("div",{className:ue.a.header},B.a.createElement("h3",null,B.a.createElement("span",null),"全部工单"),B.a.createElement("div",{className:ue.a.search,style:{overflow:"hidden"}},this.renderSimpleForm())),B.a.createElement("div",{style:{height:610}},B.a.createElement(se.a,{spinning:l},B.a.createElement("ul",{className:ue.a.list},this.renderList(a)))),B.a.createElement(ie.a,{style:{float:"right"},size:"small",total:a.pagination.total,pageSize:5,onChange:this.handleStandardTableChange})),B.a.createElement(ye,{companyName:c,detail:i,save:this.save,renderImg:this.renderImg,companyHandleModalVisible:this.companyHandleModalVisible}))),o?B.a.createElement(te,s()({modalVisible:o},d)):null)}}]),a}(I.PureComponent))||r)||r,ve=t("W9CC"),Ae=t.n(ve),be=t("Ujjq"),Ce=t.n(be),ke=t("8Waa"),Me=t.n(ke),Se=t("7PZo"),Ve=t.n(Se),Ne=t("2c/C"),we=t.n(Ne),Oe=null,Ie=O.a.create()(function(e){var a=e.modalVisible,t=e.handleModalVisible,n=e.detail,l=(n.imgUrl?n.imgUrl.split(","):[]).map(function(e){return{src:q.B+e,alt:""}});return B.a.createElement(V.a,{destroyOnClose:!0,title:"工单信息",className:H.a.myModal+" "+H.a.modalbody,visible:a,onCancel:function(){return t()},footer:null},B.a.createElement("div",{className:H.a.detailMsg},B.a.createElement("div",{style:{padding:20}},B.a.createElement("div",{className:we.a.myCarousel},B.a.createElement(w.a,{autoplay:!0},l.length?l.map(function(e,a){return B.a.createElement("div",{style:{height:200},key:a},B.a.createElement(me.a,{backdrop:"rgba(255,255,255,.3)",defaultPage:a,style:{width:"100%",height:200},src:e.src,set:l}))}):B.a.createElement("img",{className:we.a.notImg,src:he.a,alt:""}))),B.a.createElement(N.a,{bordered:!0,size:"small",column:1},B.a.createElement(N.a.Item,{label:"公司名称"},n.companyName),B.a.createElement(N.a.Item,{label:"地址"},n.curingAddr),B.a.createElement(N.a.Item,{label:"负责人"},n.curinger),B.a.createElement(N.a.Item,{label:"限定完成时间"},P()(n.endTime).format("YYYY-MM-DD")),B.a.createElement(N.a.Item,{label:"养护内容"},n.curingContent),B.a.createElement(N.a.Item,{label:"工作内容"},n.workContent)))))}),Be=Object(D.connect)(function(e){return{system:e.system,RoadWorkOrdes:e.RoadWorkOrdes,ConserveCompany:e.ConserveCompany,loading:e.loading.models.ConserveCompany}})(o=function(e){function a(e){var t;return y()(this,a),(t=b()(this,k()(a).call(this,e))).state={roadInfoVisible:!1,roadInfoLngLat:null,roadInfoMsg:{},colors:[],markers:[],infoLngLat:null,orderWinVisible:!1,orderVisible:!0,orderWinInfo:{},modalVisible:!1,troubleModalVisible:!1,longitudeandlatitude:[],peopleMarkes:[],peopleInfoLngLat:null,peopleMarkersInfoVisible:!1,peopleMsg:{},center:null,oldAddress:"",peopleVisible:!0,pageBean:{page:1,pageSize:1e4,showTotal:!0}},t.getLngLatByAddress=function(e,a){t.mapInstance.plugin("AMap.Geocoder",function(){new AMap.Geocoder({}).getLocation(e,function(e,t){if("complete"===e&&t.geocodes.length){var n=t.geocodes[0].location;a(n)}})})},t.initWebSocket=function(){t.connection()},t.onMessage=function(e){var a=t.state.peopleMarkes,n=JSON.parse(e.body),l=h()(a);n.forEach(function(e){var a=JSON.parse(e),n=a.mobileId,r=a.longlatitude,o=a.userName,i=a.phone,s=r?r.split(","):[0,0],c={position:{longitude:s[0],latitude:s[1]},userName:o,phone:i};if(t.propleMobile.includes(n)){var d=t.propleMobile.indexOf(n);l[d]=c}else t.propleMobile.push(n),l.push(c)}),t.setState({peopleMarkes:l})},t.connection=function(){var e=new W.a(q.k);(Oe=G.a.over(e)).debug=null,Oe.connect({Authorization:""},function(){Oe.subscribe("/topic/mobilePhone",t.onMessage)},function(e){u.a.error("socket连接失败")})},t.modalSuccess=function(){t.getOrderByState()},t.getOrderByState=function(){(0,t.props.dispatch)({type:"RoadWorkOrdes/orderByState",callback:function(e){t.formatMarkers(e)}})},t.formatMarkers=function(e){var a=e.map(function(e){if(e.longlat){var a=e.longlat.split(",");return p()({position:{longitude:a[0],latitude:a[1]}},e)}return p()({position:null},e)});t.setState({markers:a})},t.getList=function(e){(0,t.props.dispatch)({type:"ConserveCompany/getAllRoadCompanyConserveData",payload:e,callback:function(e){for(var a=[],n=0;n<e.length;n++)a.push("#".concat(Object(q.z)()));t.setState({longitudeandlatitude:e,colors:a})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.troubleHandleModalVisible=function(e){t.setState({troubleModalVisible:!!e})},t.renderOrderMarkers=function(e){return B.a.createElement("img",{src:Ve.a})},t.handleOrderWinVisible=function(e){t.setState({orderWinVisible:!!e})},t.orderMarkersEvent=function(){return{click:function(e,a){var n=a.getExtData();t.setState({orderWinInfo:n}),t.handleOrderWinVisible(!0)},mouseout:function(){t.handleOrderWinVisible(),t.setState({orderWinInfo:{}})}}},t.peopleMarkersEvent=function(){return{click:function(e,a){var n=a.getExtData(),l=n.position;t.setState({peopleMsg:n,peopleInfoLngLat:l,peopleMarkersInfoVisible:!0})},mouseout:function(){t.setState({peopleMsg:{},peopleInfoLngLat:null,peopleMarkersInfoVisible:!1})}}},t.renderPeopleMarkers=function(e){return B.a.createElement("img",{src:Ce.a,style:{width:20},alt:""})},t.amapEvents=function(){return{created:function(e){t.mapInstance=e}}},t.peopleChange=function(e){t.setState({peopleVisible:e.target.checked})},t.orderChange=function(e){t.setState({orderVisible:e.target.checked})},t.polylineEvent=function(){return{click:function(e){var a=e.target.getExtData(),n=e.lnglat;t.setRoadInfoWindow(!0,a,{longitude:n.lng,latitude:n.lat})},mouseout:function(e){t.setRoadInfoWindow()}}},t.setRoadInfoWindow=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.setState({roadInfoVisible:e,roadInfoMsg:a,roadInfoLngLat:n})},t.mapInstance=null,t.propleMobile=[],t}return S()(a,e),v()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e}),this.getOrderByState(),this.initWebSocket()}},{key:"componentWillReceiveProps",value:function(e){var a=this,t=e.system.address;this.state.oldAddress!==t&&setTimeout(function(){try{a.getLngLatByAddress(t,function(e){a.setState({center:e,oldAddress:t})})}catch(e){}},3e3)}},{key:"componentWillUnmount",value:function(){if(this.setState=function(e,a){},Oe){try{Oe.disconnect()}catch(e){}Oe=null}}},{key:"render",value:function(){var e=this,a=this.state,t=a.modalVisible,n=a.troubleModalVisible,l=a.longitudeandlatitude,r=a.colors,o=a.orderVisible,i=a.markers,m=a.orderWinVisible,u=(a.infoLngLat,a.orderWinInfo),g=a.peopleMarkes,h=a.peopleVisible,f=a.peopleInfoLngLat,y=a.peopleMarkersInfoVisible,E=a.peopleMsg,v=a.roadInfoVisible,A=a.roadInfoLngLat,b=a.roadInfoMsg,C=a.center,k=l.length?l.map(function(a,t){return B.a.createElement(x.Polyline,{style:{isOutline:!0,outlineColor:"#000",borderWeight:2,strokeWeight:6,strokeColor:r[t],lineJoin:"round",showDir:!0,extData:p()({},a)},key:t,path:JSON.parse(a.longitudeandlatitude||"[]"),events:e.polylineEvent()})}):null,M=B.a.createElement(x.Markers,{key:"markersDOM",markers:o?i:[],render:this.renderOrderMarkers,events:this.orderMarkersEvent()}),S=B.a.createElement(x.Markers,{key:"markersPeopleDOM",markers:h?g:[],render:this.renderPeopleMarkers,events:this.peopleMarkersEvent()}),V=B.a.createElement(x.InfoWindow,{position:f,visible:y,isCustom:!0,showShadow:!0,offset:[1,-30],key:"markersPeopleInfoDOM"},B.a.createElement("div",{style:{width:200}},B.a.createElement("p",null,"姓名：",E.userName),B.a.createElement("p",null,"电话：",E.phone))),N=B.a.createElement(x.InfoWindow,{position:A,visible:v,isCustom:!0,showShadow:!0,key:"roadInfoWindowDom"},B.a.createElement("p",null,"路段名称：",b.roadName),B.a.createElement("p",null,"里程：",b.roadMileage," km"),B.a.createElement("p",null,"起点：",b.startAddr),B.a.createElement("p",null,"终点：",b.endAddr),B.a.createElement("p",null,"内容：",b.content)),w={modalSuccess:this.modalSuccess,handleModalVisible:this.handleModalVisible},O={handleModalVisible:this.troubleHandleModalVisible};return B.a.createElement("div",{style:{height:"calc(100vh - 140px)",margin:"-20px -20px -20px -20px",background:"#fff",position:"relative"}},B.a.createElement("div",{className:ue.a.legend},B.a.createElement("div",{className:ue.a.header},"图例"),B.a.createElement("div",{className:ue.a.body},B.a.createElement("div",{className:ue.a.list},B.a.createElement("p",null,B.a.createElement("img",{src:Ae.a,alt:""})," 巡查人员"),B.a.createElement(d.a,{checked:h,onChange:this.peopleChange})),B.a.createElement("div",{className:ue.a.list},B.a.createElement("p",null,B.a.createElement("img",{src:Me.a,alt:""})," 进行中"),B.a.createElement(d.a,{checked:o,onChange:this.orderChange})))),B.a.createElement("div",{className:ue.a.statistics},B.a.createElement("div",{className:ue.a.header},"统计"),B.a.createElement("div",{className:ue.a.body},B.a.createElement("div",{className:ue.a.list},B.a.createElement("h3",null,"巡查人员"),B.a.createElement("p",null,"当前共有",g.length,"人在巡查")),B.a.createElement("div",{className:ue.a.list},B.a.createElement("h3",null,"养护记录"),B.a.createElement("div",{className:ue.a.listBody},B.a.createElement("p",null,"进行中",B.a.createElement("span",null,"(",i.length,")")))))),B.a.createElement("div",{className:ue.a.buttonGroup},B.a.createElement(c.a,{type:"primary",icon:"profile",onClick:function(){return e.troubleHandleModalVisible(!0)}},"巡查上报记录"),"  ",B.a.createElement(c.a,{type:"primary",icon:"plus",onClick:function(){return e.handleModalVisible(!0)}},"下达任务")),B.a.createElement(oe.a,{amapEvents:this.amapEvents(),center:C,children:[N,k,M,S,V]}),m&&Object.keys(u).length?B.a.createElement(Ie,{modalVisible:m,detail:u,handleModalVisible:this.handleOrderWinVisible}):null,B.a.createElement(re,s()({},w,{modalVisible:t})),n?B.a.createElement(Ee,s()({},O,{modalVisible:n})):null)}}]),a}(I.PureComponent))||o;a.default=Be}}]);