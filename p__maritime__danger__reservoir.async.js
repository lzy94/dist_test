(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{MgOb:function(e,t,a){"use strict";a.r(t);var l=a("pVnL"),n=a.n(l),r=(a("IzEo"),a("bx4M")),i=(a("14J3"),a("BMrR")),o=(a("jCWc"),a("kPKH")),c=(a("5NDa"),a("5rEg")),s=a("MVZn"),m=a.n(s),d=(a("miYZ"),a("tsqr")),u=(a("2qtc"),a("kLXV")),p=(a("P2fV"),a("NJEC")),h=(a("/zsF"),a("PArb")),b=(a("5Dmo"),a("3S7+")),f=(a("+L6B"),a("2/Rp")),E=a("lwsE"),g=a.n(E),y=a("W8MJ"),v=a.n(y),I=a("a1gu"),M=a.n(I),S=a("Nsbk"),w=a.n(S),R=a("7W2i"),V=a.n(R),k=(a("y8nQ"),a("Vl3Y")),z=a("q1tI"),B=a.n(z),D=a("MuoO"),L=a("wd/R"),C=a.n(L),F=a("CkN6"),T=(a("bP8k"),a("gFTJ")),P=a("Py4S"),N=a.n(P),O=a("+n12"),x=a("ZP6J"),J=a.n(x),Y=function(e){function t(){var e,a;g()(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=M()(this,(e=w()(t)).call.apply(e,[this].concat(n)))).renderImg=function(e){return B.a.createElement(N.a,{backdrop:"rgba(255,255,255,.3)",src:"".concat(O.E).concat(e),alt:"图片",style:{width:"200px",height:"200px"}})},a}return V()(t,e),v()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.handleModalVisible,l=e.detail,n={marginTop:5};return B.a.createElement(u.a,{destroyOnClose:!0,title:"详情",className:J.a.formModal,visible:t,onCancel:function(){return a()},footer:null,width:1e3},B.a.createElement(r.a,{bordered:!1},B.a.createElement(T.a,{title:"机构",column:1,size:"small",layout:"vertical",bordered:!0},B.a.createElement(T.a.Item,{label:"有专门的机构、配备了专门管理人员、人员职责明确、人员的经费有保障"},l.proOrgan))),B.a.createElement(r.a,{bordered:!1,style:n},B.a.createElement(T.a,{title:"基础台账",column:1,size:"small",layout:"vertical",bordered:!0},B.a.createElement(T.a.Item,{label:"辖区渡口、船舶、船员记录台账"},l.recordLedger))),B.a.createElement(r.a,{bordered:!1,style:n},B.a.createElement(T.a,{title:"安全制度",column:1,size:"small",layout:"vertical",bordered:!0},B.a.createElement(T.a.Item,{label:"建立了船舶管理机构安全责任制，与船主、村（居委会）、签单员签订安全目标管理责任书"},l.managementRespon),B.a.createElement(T.a.Item,{label:"建立了安全检查制度，并有相关检查工作台账记录"},l.securitySystem),B.a.createElement(T.a.Item,{label:"建立隐患整改制度，并严格执行"},l.rectificaSystem),B.a.createElement(T.a.Item,{label:"建立客渡船舶签单发航管理制度，并严格执行"},l.shipManagementSystem),B.a.createElement(T.a.Item,{label:"建立安全值守制度，并有相关值守工作记录"},l.safeDutySystem),B.a.createElement(T.a.Item,{label:"建立安全教育培训制度，并有相关教育培训工作记录"},l.educationTrainingSystem),B.a.createElement(T.a.Item,{label:"建立信息传递机制，并有相关气象水文传递信息记录"},l.informationTransferMechanism))),B.a.createElement(r.a,{bordered:!1,style:n},B.a.createElement(T.a,{title:"应急与演练",column:1,size:"small",layout:"vertical",bordered:!0},B.a.createElement(T.a.Item,{label:"制定了安全与防污染应急预案"},l.emergencyPlan),B.a.createElement(T.a.Item,{label:"有应急演练记录与总结"},l.recordSummary))),B.a.createElement(r.a,{bordered:!1,style:n},B.a.createElement(T.a,{title:"日常安全管理",column:1,size:"small",layout:"vertical",bordered:!0},B.a.createElement(T.a.Item,{label:"有年度安全资金投入记录"},l.safeMoney),B.a.createElement(T.a.Item,{label:"配置了一定量的安全应急物资"},l.safetyEmergencySupplies),B.a.createElement(T.a.Item,{label:"水域分布图、组织体系图、工作岗位职责、船舶动态情况、安全制度上墙情况"},l.institutionalWall),B.a.createElement(T.a.Item,{label:"每月召开一次安全例会，船管站人员、村（社）干部、签单员参加，有相应记录"},l.regularMeeting),B.a.createElement(T.a.Item,{label:"安全档案齐备"},l.securityFile),B.a.createElement(T.a.Item,{label:"积极开展安全教育宣传"},l.safetyEducation))),B.a.createElement(r.a,{bordered:!1,style:n},B.a.createElement(T.a,{column:2,size:"small",layout:"vertical",bordered:!0},B.a.createElement(T.a.Item,{label:"督查人员签字"},this.renderImg(l.inspectors)),B.a.createElement(T.a.Item,{label:"管船机构签字"},this.renderImg(l.inspectedPerson)))))}}]),t}(z.PureComponent);Y.defaultProps={detail:{},modalVisible:!1,handleModalVisible:function(){}};a("ns75");var j,q=a("9zHi"),A=a.n(q),W=k.a.Item,U=Object(D.connect)(function(e){return{MaritimeReservoir:e.MaritimeReservoir,loading:e.loading.models.MaritimeReservoir}})(j=k.a.create()(j=function(e){function t(){var e,a;g()(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=M()(this,(e=w()(t)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},a.columns=[{title:"机构",dataIndex:"proOrgan"},{title:"负责人",dataIndex:"principal"},{title:"电话",dataIndex:"phone"},{title:"创建时间",dataIndex:"createTime"},{title:"操作",width:90,render:function(e,t){return B.a.createElement(z.Fragment,null,B.a.createElement(b.a,{placement:"left",title:"详情"},B.a.createElement(f.a,{onClick:function(){return a.showDetailModal(t)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),B.a.createElement(h.a,{type:"vertical"}),B.a.createElement(p.a,{title:"是否删除数据?",onConfirm:function(){return a.dataDel(t.id)},okText:"确定",cancelText:"取消"},B.a.createElement(b.a,{placement:"left",title:"删除"},B.a.createElement(f.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],a.getList=function(e){(0,a.props.dispatch)({type:"MaritimeReservoir/fetch",payload:e})},a.showDetailModal=function(e){a.setState({detail:e},function(){return a.handleModalVisible(!0)})},a.dataDel=function(e){a.delUtil(e)},a.batchDel=function(){var e=a.state.selectedRows;e.length&&u.a.confirm({title:"提示",content:"是否删除数据？",onOk:function(){var t=e.map(function(e){return e.id});a.delUtil(t.join(),function(){a.setState({selectedRows:[]})})}})},a.delUtil=function(e,t){(0,a.props.dispatch)({type:"MaritimeReservoir/remove",payload:{ids:e},callback:function(){d.a.success("删除成功");var e=a.state.pageBean;a.getList({pageBean:e}),t&&t()}})},a.handleStandardTableChange=function(e){var t=a.state.formValues,l={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:t};a.getList(l)},a.handleFormReset=function(){var e=a.props.form,t=a.state.pageBean;e.resetFields(),a.setState({formValues:[],selectedRows:[]}),a.getList({pageBean:t})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var l=a.state.pageBean,n=m()({},t,{createTime:t.time&&C()(t.time).format("YYYY-MM-DD")});delete n.time;var r=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});a.setState({formValues:r}),a.getList({pageBean:l,querys:r})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a}return V()(t,e),v()(t,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return B.a.createElement(k.a,{onSubmit:this.handleSearch,layout:"inline"},B.a.createElement(i.a,{gutter:16},B.a.createElement(o.a,{md:6,sm:24},B.a.createElement(W,null,e("principal")(B.a.createElement(c.a,{addonBefore:"负责人",placeholder:"请输入"})))),B.a.createElement(o.a,{md:6,sm:24},B.a.createElement(W,null,e("phone")(B.a.createElement(c.a,{addonBefore:"电话",placeholder:"请输入"})))),B.a.createElement(o.a,{md:6,sm:24},B.a.createElement("span",{className:A.a.submitButtons},B.a.createElement(f.a,{type:"primary",htmlType:"submit"},"查询"),B.a.createElement(f.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,t=e.MaritimeReservoir.data,a=e.loading,l=this.state,i=l.selectedRows,o=l.modalVisible,c=l.detail,s={detail:c,handleModalVisible:this.handleModalVisible};return B.a.createElement(z.Fragment,null,B.a.createElement(r.a,{bordered:!1},B.a.createElement("div",{className:A.a.tableList},B.a.createElement("div",{className:A.a.tableListForm},this.renderSimpleForm()),B.a.createElement("div",{className:A.a.tableListOperator},i.length>0&&B.a.createElement(f.a,{type:"danger",onClick:this.batchDel},"批量删除")),B.a.createElement(F.a,{size:"middle",tableAlert:!1,selectedRows:i,loading:a,data:t,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),o&&Object.keys(c).length?B.a.createElement(Y,n()({},s,{modalVisible:o})):null)}}]),t}(z.PureComponent))||j)||j;t.default=U}}]);