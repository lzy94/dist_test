(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{ayEu:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,l=a("bx4M"),o=a("pVnL"),i=a.n(o),s=(a("14J3"),a("BMrR")),r=(a("jCWc"),a("kPKH")),c=(a("5NDa"),a("5rEg")),d=a("MVZn"),m=a.n(d),p=(a("5Dmo"),a("3S7+")),u=(a("+L6B"),a("2/Rp")),h=a("lwsE"),g=a.n(h),f=a("W8MJ"),E=a.n(f),y=a("a1gu"),b=a.n(y),w=a("Nsbk"),v=a.n(w),x=a("PJYZ"),T=a.n(x),S=a("7W2i"),I=a.n(S),k=(a("2qtc"),a("kLXV")),L=(a("bP8k"),a("gFTJ")),M=(a("iQDF"),a("+eQT")),B=(a("y8nQ"),a("Vl3Y")),V=a("q1tI"),N=a.n(V),R=a("MuoO"),C=a("wd/R"),O=a.n(C),F=a("mf+E"),D=a("CkN6"),j=a("+n12"),Y=a("9zHi"),z=a.n(Y),J=a("ns75"),P=a.n(J),H=a("ZP6J"),q=a.n(H),A=B.a.Item,W=M.a.RangePicker,Q=[],U=["/system/logs","/system/logs/info","/system/logs/delete","/conserve/data/logs","/maritime/data/logs","/transport/system/logs"],Z=B.a.create()(function(e){var t=e.modalVisible,a=e.handleModalVisible,n=e.detail;return N.a.createElement(k.a,{destroyOnClose:!0,title:"日志详情",className:q.a.myModal+" "+q.a.modalbody,visible:t,onCancel:function(){return a()},footer:null,width:800},N.a.createElement("div",{className:q.a.detailMsg},N.a.createElement("div",{style:{padding:20}},N.a.createElement(L.a,{bordered:!0,column:2,size:"small"},N.a.createElement(L.a.Item,{label:"执行人"},n.executor),N.a.createElement(L.a.Item,{label:"模块"},n.moduleType),N.a.createElement(L.a.Item,{label:"日志类型"},n.logType),N.a.createElement(L.a.Item,{label:"操作名称"},n.opeName),N.a.createElement(L.a.Item,{label:"请求url地址"},n.reqUrl),N.a.createElement(L.a.Item,{label:"操作时间"},n.executionTime),N.a.createElement(L.a.Item,{label:"IP",span:2},n.ip),N.a.createElement(L.a.Item,{label:"操作内容",span:2},n.opeContent)))))}),K=Object(R.connect)(function(e){return{Logs:e.Logs,loading:e.loading.models.Logs}})(n=B.a.create()(n=function(e){function t(e){var a;return g()(this,t),(a=b()(this,v()(t).call(this,e))).state={modalVisible:!1,formValues:[],detail:{},selectedRows:[],pageBean:{page:1,pageSize:10,showTotal:!0}},a.columns=[{title:"执行人",dataIndex:"executor"},{title:"模块",dataIndex:"moduleType"},{title:"日志类型",dataIndex:"logType"},{title:"操作名称",dataIndex:"opeName"},{title:"操作时间",dataIndex:"executionTime"},{title:"IP",dataIndex:"ip"},Object(j.c)(Q[1])?{title:"操作",width:"70px",render:function(e,t){return N.a.createElement(V.Fragment,null,N.a.createElement(p.a,{placement:"left",title:"详情"},N.a.createElement(u.a,{onClick:function(){return a.showModal(t.id)},type:"primary",shape:"circle",icon:"eye",size:"small"})))}}:""].filter(function(e){return e}),a.delBatch=function(){var e=a.state.selectedRows;if(e){var t=T()(a);k.a.confirm({title:"批量删除",content:"您确定要批量删除吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){t.delUtil(e.map(function(e){return e.id}).join())},onCancel:function(){}})}},a.delUtil=function(e){var t=a.props.dispatch,n=a.state.pageBean;t({type:"Logs/remove",payload:{ids:e},callback:function(){a.setState({selectedRows:[]}),t({type:"Logs/fetch",payload:{pageBean:n}})}})},a.showModal=function(e){(0,a.props.dispatch)({type:"Logs/detail",payload:e,callback:function(e){a.handleModalVisible(!0),a.setState({detail:e})}})},a.handleStandardTableChange=function(e){var t=a.props.dispatch,n=a.state.formValues;t({type:"Logs/fetch",payload:{pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:n}})},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch,l=a.state.pageBean;t.resetFields(),a.setState({formValues:[]}),n({type:"Logs/fetch",payload:{pageBean:l}})},a.handleSearch=function(e){e.preventDefault();var t=a.props,n=t.dispatch,l=t.form,o=a.state.pageBean;l.validateFields(function(e,t){if(!e){var l=m()({},t),i=Object.keys(l).map(function(e){return l[e]?{property:e,value:"executionTime"===e?l.executionTime?[O()(l.executionTime[0]).format("YYYY-MM-DD HH:mm:ss"),O()(l.executionTime[1]).format("YYYY-MM-DD HH:mm:ss")]:"":l[e],group:"main",operation:"executionTime"===e?"BETWEEN":"LIKE",relation:"AND"}:""}).filter(function(e){return e});a.setState({formValues:i}),n({type:"Logs/fetch",payload:{pageBean:o,querys:i}})}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},Q=Object(j.I)(U),a}return I()(t,e),E()(t,[{key:"componentDidMount",value:function(){Object(j.c)(Q[0])&&(0,this.props.dispatch)({type:"Logs/fetch",payload:{pageBean:this.state.pageBean}})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return N.a.createElement(B.a,{onSubmit:this.handleSearch,layout:"inline"},N.a.createElement(s.a,{gutter:{md:8,lg:16,xl:16}},N.a.createElement(r.a,{md:5,sm:24},N.a.createElement(A,null,e("executor")(N.a.createElement(c.a,{addonBefore:"执行人",placeholder:"请输入"})))),N.a.createElement(r.a,{md:5,sm:24},N.a.createElement(A,null,e("moduleType")(N.a.createElement(c.a,{addonBefore:"模块",placeholder:"请输入"})))),N.a.createElement(r.a,{md:7,sm:24},N.a.createElement("div",{className:P.a.inputMain},N.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"操作时间"),N.a.createElement(A,{style:{flex:1}},e("executionTime")(N.a.createElement(W,{showTime:!0,className:P.a.inputGroupLeftRadius,style:{width:"100%"}}))))),N.a.createElement(r.a,{md:7,sm:24},N.a.createElement("span",{className:z.a.submitButtons},N.a.createElement(u.a,{type:"primary",htmlType:"submit"},"查询"),N.a.createElement(u.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.Logs.data,n=t.loading,o=this.state,s=o.modalVisible,r=o.detail,c=o.selectedRows,d={detail:r,handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},m={loading:n,data:a,size:"middle",columns:this.columns,onChange:this.handleStandardTableChange};return N.a.createElement(V.Fragment,null,Object(j.c)(Q[0])||Object(j.c)(Q[3])?null:N.a.createElement(F.a,{to:"/exception/403"}),N.a.createElement(l.a,{bordered:!1},N.a.createElement("div",{className:z.a.tableList},N.a.createElement("div",{className:z.a.tableListForm},this.renderSimpleForm()),N.a.createElement("div",{className:z.a.tableListOperator},c.length>0&&N.a.createElement("span",null,N.a.createElement(u.a,{onClick:function(){return e.delBatch()},type:"danger"},"批量删除"))),Object(j.c)(Q[2])?N.a.createElement(D.a,i()({tableAlert:!0,selectedRows:c,onSelectRow:this.handleSelectRows},m)):N.a.createElement(D.a,i()({selectedRows:0,rowSelection:null},m)))),s&&"{}"!==JSON.stringify(r)?N.a.createElement(Z,i()({},d,{modalVisible:s})):null)}}]),t}(V.PureComponent))||n)||n;t.default=K}}]);