(window.webpackJsonp=window.webpackJsonp||[]).push([[213],{LcSm:function(t,e,a){t.exports={ellipsis:"antd-pro-pages-transport-data-v-index-ellipsis",leftContainerTop:"antd-pro-pages-transport-data-v-index-leftContainerTop",leftContainerBottom:"antd-pro-pages-transport-data-v-index-leftContainerBottom",centerPad:"antd-pro-pages-transport-data-v-index-centerPad",centerContainerTop:"antd-pro-pages-transport-data-v-index-centerContainerTop",centerContainerTopChart:"antd-pro-pages-transport-data-v-index-centerContainerTopChart",centerContainerBottom:"antd-pro-pages-transport-data-v-index-centerContainerBottom",centerContainerBottomItem:"antd-pro-pages-transport-data-v-index-centerContainerBottomItem",rightContainerTop:"antd-pro-pages-transport-data-v-index-rightContainerTop",rightContainerBottom:"antd-pro-pages-transport-data-v-index-rightContainerBottom"}},MP38:function(t,e,a){"use strict";a.r(e);var n,r,o,i,l,c,s=a("lwsE"),u=a.n(s),d=a("W8MJ"),m=a.n(d),p=a("a1gu"),h=a.n(p),f=a("Nsbk"),y=a.n(f),v=a("7W2i"),g=a.n(v),C=a("q1tI"),I=a.n(C),E=a("Ywv0"),x=a("wd/R"),T=a.n(x),S=(a("R9oj"),a("ECub")),L=a("MuoO"),b=a("sw7f"),O=a.n(b),F=Object(L.connect)(function(t){return{TransportDataV:t.TransportDataV,loading:t.loading.models.TransportDataV}})(n=function(t){function e(){var t,a;u()(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=h()(this,(t=y()(e)).call.apply(t,[this].concat(r)))).state={data:[]},a.getList=function(){(0,a.props.dispatch)({type:"TransportDataV/corporateInfo",callback:function(t){a.formatData(t)}})},a.formatData=function(t){var e=t.map(function(t){return['<span style="color:#01D4F9" title=\''.concat(t.companyName,"'>").concat(t.companyName,"</span>"),'<span style="color:#01D4F9">'.concat(t.carNumber,"</span>"),'<span style="color:#01D4F9">'.concat(t.staffNumber,"</span>"),'<span style="color:#01D4F9">'.concat(t.concacts,"</span>"),'<span style="color:#01D4F9" title=\''.concat(t.concactsTel,"'>").concat(t.concactsTel,"</span>")]});a.setState({data:e})},a.renderScrollBoard=function(){var t=a.state.data;return t.length?I.a.createElement(E.f,{config:{header:["企业名称","车辆数量","员工数量","负责人","联系电话"],data:t,headerBGC:"",oddRowBGC:"",evenRowBGC:"",waitTime:"3000"},style:{width:"100%",height:"100%"}}):I.a.createElement(S.a,{className:O.a.empty,image:S.a.PRESENTED_IMAGE_SIMPLE})},a}return g()(e,t),m()(e,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var t=this.props.loading;return I.a.createElement(E.a,{color:["#48A2B3"]},I.a.createElement("div",{className:O.a.itemTitle},"企业信息"),I.a.createElement("div",{className:O.a.chartPanel},I.a.createElement(E.c,{color:["#019EFF"]},t?I.a.createElement(E.e,null,I.a.createElement("span",{style:{color:"#fff"}},"Loading...")):this.renderScrollBoard())))}}]),e}(C.PureComponent))||n,B=a("zT9C"),w=a.n(B),A=a("m0dn"),D=a("lTPH"),N=a("LcSm"),H=a.n(N),k=Object(L.connect)(function(t){return{ChartStatistics:t.ChartStatistics,loading:t.loading.models.ChartStatistics}})(r=function(t){function e(t){var a;return u()(this,e),(a=h()(this,y()(e).call(this,t))).getInitialState=function(){return{chartOption:a.getChartOption()}},a.getChartOption=function(){return{color:D.g,tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{textStyle:{color:"#fff"},data:["检测数","货车总数","货车超限数","货车超限率"]},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,axisLabel:{color:"#5EC4FF"},axisLine:{show:!0,lineStyle:{color:"#5EC4FF"}},splitLine:{show:!0,lineStyle:{color:"#48A2B3",type:"dashed"}},data:[]},yAxis:[{type:"value",name:"超限数",nameTextStyle:{color:"#5EC4FF"},axisLabel:{color:"#5EC4FF"},splitLine:{lineStyle:{color:"#48A2B3"}},axisLine:{show:!0,lineStyle:{color:"#5EC4FF"}}},{type:"value",name:"超限率",axisLabel:{color:"#5EC4FF",formatter:"{value}%"},nameTextStyle:{color:"#5EC4FF"},splitLine:{lineStyle:{color:"#48A2B3"}},axisLine:{show:!0,lineStyle:{color:"#5EC4FF"}}}],series:[]}},a.getList=function(){(0,a.props.dispatch)({type:"ChartStatistics/overLimitCount",payload:{dateOfCount:T()(new Date).format("YYYY"),dateType:3,siteCode:null},callback:function(){a.formatData()}})},a.formatData=function(){var t=a.props.ChartStatistics.overRunData.overLimit,e=a.state.chartOption,n=w()(e),r=t.map(function(t){return"".concat(t.MONTH,"月")});n.xAxis.data=r;var o=[{name:"检测数",type:"bar",smooth:!0,barMaxWidth:13,data:t.map(function(t){return t.TOTAL})},{name:"货车总数",type:"bar",smooth:!0,barMaxWidth:13,data:t.map(function(t){return t.TRUCKTOTAL})},{name:"货车超限数",type:"bar",smooth:!0,barMaxWidth:13,data:t.map(function(t){return t.TRUCKOVERTOTAL})},{name:"货车超限率",type:"line",smooth:!0,data:t.map(function(t){return t.TRUCKTOTAL?(t.TRUCKOVERTOTAL/t.TRUCKTOTAL*100).toFixed(2):0}),yAxisIndex:1}];n.series=o,a.setState({chartOption:n},function(){return setTimeout(function(){return a.autoChart()},2e3)})},a.autoChart=function(){var t=a.state.chartOption,e=a.myChart.current;if(a.autoTimeInterval&&clearInterval(a.autoTimeInterval),e){var n=t.series[0].data.length;a.autoTimeInterval=setInterval(function(){e.getEchartsInstance().dispatchAction({type:"downplay",seriesIndex:0,dataIndex:a.faultByHourIndex}),a.faultByHourIndex=(a.faultByHourIndex+1)%n,e.getEchartsInstance().dispatchAction({type:"highlight",seriesIndex:0,dataIndex:a.faultByHourIndex}),e.getEchartsInstance().dispatchAction({type:"showTip",seriesIndex:0,dataIndex:a.faultByHourIndex})},3e3)}},a.state=a.getInitialState(),a.autoTimeInterval=null,a.faultByHourIndex=-1,a.myChart=I.a.createRef(),a}return g()(e,t),m()(e,[{key:"componentDidMount",value:function(){this.getList()}},{key:"componentWillUnmount",value:function(){this.autoTimeInterval&&clearInterval(this.autoTimeInterval)}},{key:"render",value:function(){var t=this.props.loading,e=this.state.chartOption;return I.a.createElement(E.a,{color:["#48A2B3"]},I.a.createElement("div",{className:O.a.search},I.a.createElement("div",{className:O.a.itemTitle},"超限统计")),I.a.createElement("div",{className:O.a.chartPanel},I.a.createElement(E.c,{color:["#019EFF"]},t?I.a.createElement(E.e,null,I.a.createElement("span",{style:{color:"#fff"}},"Loading...")):I.a.createElement(A.a,{ref:this.myChart,option:e}))))}}]),e}(C.PureComponent))||r,M=Object(L.connect)(function(t){return{ChartStatistics:t.ChartStatistics,loading:t.loading.models.ChartStatistics}})(o=function(t){function e(t){var a;return u()(this,e),(a=h()(this,y()(e).call(this,t))).getInitialState=function(){return{chartOption:a.getChartOption()}},a.getList=function(){(0,a.props.dispatch)({type:"ChartStatistics/overRangeCount",payload:{dateOfCount:T()().format("YYYY"),dateType:3},callback:function(){a.setChartOption()}})},a.getCount=function(t,e){for(var a=0,n=0;n<e.length;n+=1)a+=e[n][t];return a},a.setChartOption=function(){var t=a.props.ChartStatistics.overRangeList,e=a.state.chartOption,n=[["10%以下","10%~20%","20%~30%","30%~40%","40%~50%","50%~100%","100%以上"],["LEVEL01","LEVEL12","LEVEL23","LEVEL34","LEVEL45","LEVEL510","LEVEL6"],w()(e)],r=n[0],o=n[1],i=n[2];i.legend.data=r;var l=o.map(function(e,n){return{value:a.getCount(e,t),name:r[n]}});i.series.data=l,a.setState({chartOption:i},function(){return setTimeout(function(){return a.autoChart()},2e3)})},a.autoChart=function(){var t=a.state.chartOption.series.data.length,e=a.myChart.current;a.autoTimeInterval&&clearInterval(a.autoTimeInterval),e&&(a.autoTimeInterval=setInterval(function(){e.getEchartsInstance().dispatchAction({type:"downplay",seriesIndex:0,dataIndex:a.faultByHourIndex}),a.faultByHourIndex=(a.faultByHourIndex+1)%t,e.getEchartsInstance().dispatchAction({type:"highlight",seriesIndex:0,dataIndex:a.faultByHourIndex}),e.getEchartsInstance().dispatchAction({type:"showTip",seriesIndex:0,dataIndex:a.faultByHourIndex})},3e3))},a.getChartOption=function(){return{color:D.g,tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{data:[],textStyle:{color:"#fff"}},series:{name:"超限比例",type:"pie",radius:["45%","65%"],avoidLabelOverlap:!1,label:{show:!1,position:"center",formatter:"{b}\n{c}"},labelLine:{show:!1},center:["50%","65%"],data:[],emphasis:{label:{show:!0,fontSize:"25",fontWeight:"bold"},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}}},a.state=a.getInitialState(),a.autoTimeInterval=null,a.faultByHourIndex=-1,a.myChart=I.a.createRef(),a}return g()(e,t),m()(e,[{key:"componentDidMount",value:function(){this.getList()}},{key:"componentWillUnmount",value:function(){this.autoTimeInterval&&clearInterval(this.autoTimeInterval)}},{key:"render",value:function(){var t=this.props.loading,e=this.state.chartOption;return I.a.createElement(E.c,{color:["#019EFF"]},t?I.a.createElement(E.e,null,I.a.createElement("span",{style:{color:"#fff"}},"Loading...")):I.a.createElement(A.a,{ref:this.myChart,option:e}))}}]),e}(C.PureComponent))||o,P=Object(L.connect)(function(t){return{ChartStatistics:t.ChartStatistics,loading:t.loading.models.ChartStatistics}})(i=function(t){function e(t){var a;return u()(this,e),(a=h()(this,y()(e).call(this,t))).getInitialState=function(){return{chartOption:a.getChartOption()}},a.getList=function(){(0,a.props.dispatch)({type:"ChartStatistics/axleCount",payload:{dateType:3,dateOfCount:T()().format("YYYY")},callback:function(){a.formatData()}})},a.formatData=function(){var t=a.props.ChartStatistics.overRunData,e=t.overLimit,n=t.total,r=a.state.chartOption,o=w()(r),i=n.map(function(t){return"".concat(t.AXLE,"轴")});o.yAxis.data=i;var l=[{name:"检测数",type:"bar",smooth:!0,barMaxWidth:13,data:n.map(function(t){return t.TOTAL})},{name:"超限数",type:"bar",smooth:!0,barMaxWidth:13,data:e.map(function(t){return t.TOTAL})}];o.series=l,a.setState({chartOption:o},function(){return setTimeout(function(){return a.autoChart()},2e3)})},a.getChartOption=function(){return{color:D.g,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:"3%",left:"3%",right:"0",bottom:"2%",containLabel:!0},xAxis:{name:"检测数",type:"value",boundaryGap:[0,.01],axisLabel:{color:"#5EC4FF"},axisLine:{show:!0,lineStyle:{color:"#5EC4FF"}},splitLine:{show:!0,lineStyle:{color:"#48A2B3",type:"dashed"}}},yAxis:{name:"轴数",type:"category",data:[],nameTextStyle:{color:"#5EC4FF"},axisLabel:{color:"#5EC4FF"},splitLine:{lineStyle:{color:"#48A2B3"}},axisLine:{show:!0,lineStyle:{color:"#5EC4FF"}}},series:[]}},a.autoChart=function(){var t=a.state.chartOption,e=a.myChart.current,n=t.series[0].data.length;a.autoTimeInterval&&clearInterval(a.autoTimeInterval),e&&(a.autoTimeInterval=setInterval(function(){e.getEchartsInstance().dispatchAction({type:"downplay",seriesIndex:0,dataIndex:a.faultByHourIndex}),a.faultByHourIndex=(a.faultByHourIndex+1)%n,e.getEchartsInstance().dispatchAction({type:"highlight",seriesIndex:0,dataIndex:a.faultByHourIndex}),e.getEchartsInstance().dispatchAction({type:"showTip",seriesIndex:0,dataIndex:a.faultByHourIndex})},3e3))},a.state=a.getInitialState(),a.autoTimeInterval=null,a.faultByHourIndex=-1,a.myChart=I.a.createRef(),a}return g()(e,t),m()(e,[{key:"componentDidMount",value:function(){this.getList()}},{key:"componentWillUnmount",value:function(){this.autoTimeInterval&&clearInterval(this.autoTimeInterval)}},{key:"render",value:function(){var t=this.props.loading,e=this.state.chartOption;return I.a.createElement(E.c,{color:["#019EFF"]},t?I.a.createElement(E.e,null,I.a.createElement("span",{style:{color:"#fff"}},"Loading...")):I.a.createElement(A.a,{ref:this.myChart,option:e}))}}]),e}(C.PureComponent))||i,R=Object(L.connect)(function(t){return{TransportDataV:t.TransportDataV,loading:t.loading.models.TransportDataV}})(l=function(t){function e(t){var a;return u()(this,e),(a=h()(this,y()(e).call(this,t))).getInitialState=function(){return{chartOption:a.getChartOption()}},a.getList=function(){(0,a.props.dispatch)({type:"TransportDataV/companySort",callback:function(t){a.setOption(t)}})},a.setOption=function(t){var e=a.state.chartOption,n=w()(e),r=t.map(function(t){return t.companyName});n.xAxis.data=r,n.legend.data=["总数","完成数"];var o=[{name:"总数",type:"bar",smooth:!0,barMaxWidth:13,data:t.map(function(t){return t.count})},{name:"完成数",type:"bar",smooth:!0,barMaxWidth:13,data:t.map(function(t){return t.statusCount})}];n.series=o,a.setState({chartOption:n},function(){return setTimeout(function(){return a.autoChart()},2e3)})},a.getChartOption=function(){return{color:D.g,tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{textStyle:{color:"#fff"},data:[]},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,axisLabel:{color:"#5EC4FF"},axisLine:{show:!0,lineStyle:{color:"#5EC4FF"}},splitLine:{show:!0,lineStyle:{color:"#48A2B3",type:"dashed"}},data:[]},yAxis:[{type:"value",name:"督查数",nameTextStyle:{color:"#5EC4FF"},axisLabel:{color:"#5EC4FF"},splitLine:{lineStyle:{color:"#48A2B3"}},axisLine:{show:!0,lineStyle:{color:"#5EC4FF"}}}],series:[]}},a.autoChart=function(){var t=a.state.chartOption,e=a.myChart.current,n=t.series[0].data.length;a.autoTimeInterval&&clearInterval(a.autoTimeInterval),e&&(a.autoTimeInterval=setInterval(function(){e.getEchartsInstance().dispatchAction({type:"downplay",seriesIndex:0,dataIndex:a.faultByHourIndex}),a.faultByHourIndex=(a.faultByHourIndex+1)%n,e.getEchartsInstance().dispatchAction({type:"highlight",seriesIndex:0,dataIndex:a.faultByHourIndex}),e.getEchartsInstance().dispatchAction({type:"showTip",seriesIndex:0,dataIndex:a.faultByHourIndex})},3e3))},a.state=a.getInitialState(),a.myChart=I.a.createRef(),a.autoTimeInterval=null,a.faultByHourIndex=-1,a}return g()(e,t),m()(e,[{key:"componentDidMount",value:function(){this.getList()}},{key:"componentWillUnmount",value:function(){this.autoTimeInterval&&clearInterval(this.autoTimeInterval)}},{key:"render",value:function(){var t=this.props.loading,e=this.state.chartOption;return I.a.createElement(E.a,{color:["#48A2B3"]},I.a.createElement("div",{className:O.a.itemTitle},"企业排名"),I.a.createElement("div",{className:O.a.chartPanel},I.a.createElement(E.c,{color:["#019EFF"]},t?I.a.createElement(E.e,null,I.a.createElement("span",{style:{color:"#fff"}},"Loading...")):I.a.createElement(A.a,{ref:this.myChart,option:e}))))}}]),e}(C.PureComponent))||l,Y=a("e+tS"),W=a("0o8U"),V=a.n(W),U=a("MT78"),G=a.n(U),j=a("+n12"),z=(a("z9xO"),Object(L.connect)(function(t){var e=t.RoadProductionCategory;return{ConserveGIS:t.ConserveGIS,RoadProductionCategory:e,loading:t.loading.models.ConserveGIS}})(c=function(t){function e(t){var n;return u()(this,e),(n=h()(this,y()(e).call(this,t))).getInitialState=function(){return{mapOption:n.initOption()}},n.formatData=function(t){for(var e=[],a=0;a<n.cateIds.length;a+=1){for(var r=[],o=0;o<t.length;o+=1)n.cateIds[a]===t[o].categoryId.toString()&&r.push({name:t[o].productionName,value:[t[o].longitude,t[o].latitude]});e.push(r)}return e},n.getOption=function(t){var e=n.state.mapOption,a=w()(e);a.color=n.colors,a.legend.data=n.legendData;var r=t.map(function(t,e){return{name:n.legendData[e],type:"effectScatter",coordinateSystem:"geo",data:t,symbolSize:12,label:{normal:{show:!0,position:"bottom",formatter:"{b}",textStyle:{fontSize:17}},emphasis:{show:!0,position:"right",formatter:"{b}",textStyle:{color:"#000",padding:5,backgroundColor:"#fff"}}},showEffectOn:"render"}});a.series=r,n.setState({mapOption:a})},n.getArea=function(){var t="".concat(n.organCode,".json");return a("Avmo")("./".concat(t))},n.initOption=function(){return{legend:{y:"bottom",itemWidth:15,data:[],textStyle:{color:"#fff"}},geo:{show:!0,map:"areaMap",label:{normal:{show:!0,color:"#BFF4FF",fontSize:15,fontWeight:500},emphasis:{show:!0,textStyle:{color:"#BFF4FF"}}},roam:!0,itemStyle:{normal:{color:"#053750",borderColor:"#01BDE5",borderWidth:1},emphasis:{areaColor:"rgba(5,55,80,0.7)"}}}}},n.organCode=Object(j.z)("organId")||51,n.state=n.getInitialState(),n.colors=[],n.cateIds=[],n.legendData=[],n}return g()(e,t),m()(e,[{key:"componentDidMount",value:function(){var t=this.getArea();G.a.registerMap("areaMap",t)}},{key:"componentWillUnmount",value:function(){this.setState=function(t,e){}}},{key:"render",value:function(){var t=this.state.mapOption;return I.a.createElement("div",{style:{height:"100%",position:"relative"}},I.a.createElement(A.a,{option:t}))}}]),e}(I.a.Component))||c),K=function(t){function e(t){var a;return u()(this,e),(a=h()(this,y()(e).call(this,t))).state={time:T()().format("YYYY-MM-DD HH:mm")},a.timeInterval=null,a}return g()(e,t),m()(e,[{key:"componentDidMount",value:function(){var t=this;this.timeInterval=setInterval(function(){var e=T()().format("YYYY-MM-DD HH:mm");t.setState({time:e})},6e4)}},{key:"componentWillUnmount",value:function(){this.timeInterval&&clearInterval(this.timeInterval)}},{key:"render",value:function(){this.state.time;return I.a.createElement(E.d,null,I.a.createElement("div",{className:O.a.main},I.a.createElement("div",{className:O.a.header},I.a.createElement("div",{className:O.a.logo},I.a.createElement("img",{src:V.a,alt:""})),I.a.createElement("div",{className:O.a.title},"综合交通执法管理平台"),I.a.createElement("div",{className:O.a.btns})),I.a.createElement("div",{className:O.a.chartMain},I.a.createElement("div",{className:O.a.leftContainer},I.a.createElement("div",{className:H.a.leftContainerBottom},I.a.createElement(F,null)),I.a.createElement("div",{className:H.a.leftContainerTop},I.a.createElement(R,null))),I.a.createElement("div",{className:"".concat(O.a.centerContainer," ").concat(H.a.centerPad)},I.a.createElement("div",{className:H.a.centerContainerTop},I.a.createElement(z,null)),I.a.createElement("div",{className:H.a.centerContainerBottom},I.a.createElement("div",{className:H.a.centerContainerBottomItem},I.a.createElement("div",{className:O.a.itemTitle},"超限比例"),I.a.createElement("div",{className:O.a.chartPanel},I.a.createElement(M,null))),I.a.createElement("div",{className:H.a.centerContainerBottomItem},I.a.createElement("div",{className:O.a.itemTitle},"车型占比"),I.a.createElement("div",{className:O.a.chartPanel},I.a.createElement(P,null))))),I.a.createElement("div",{className:O.a.rightContainer},I.a.createElement("div",{className:H.a.rightContainerTop},I.a.createElement(k,null)),I.a.createElement("div",{className:H.a.rightContainerBottom},I.a.createElement(Y.a,{type:-4}))))))}}]),e}(C.PureComponent);e.default=K}}]);