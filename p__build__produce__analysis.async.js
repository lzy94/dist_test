(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{z4Xp:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r=a("bx4M"),i=(a("14J3"),a("BMrR")),s=(a("+L6B"),a("2/Rp")),l=(a("jCWc"),a("kPKH")),o=(a("iQDF"),a("+eQT")),c=a("lwsE"),m=a.n(c),d=a("W8MJ"),u=a.n(d),p=a("a1gu"),h=a.n(p),y=a("Nsbk"),f=a.n(y),g=a("7W2i"),Y=a.n(g),v=(a("y8nQ"),a("Vl3Y")),x=a("q1tI"),E=a.n(x),D=a("wd/R"),M=a.n(D),b=a("MuoO"),w=a("zT9C"),A=a.n(w),k=a("cVA7"),P=a.n(k),B=a("YP4+"),R=a("ns75"),S=a.n(R),j=a("9zHi"),F=a.n(j),T=v.a.Item,C=Object(b.connect)(function(e){return{BuildProduceAnalysis:e.BuildProduceAnalysis,loading:e.loading.models.BuildProduceAnalysis}})(n=v.a.create()(n=function(e){function t(){var e,a;m()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=h()(this,(e=f()(t)).call.apply(e,[this].concat(r)))).state={},a.initData=function(){var e={startTime:M()().format("YYYY-MM-DD"),endTime:M()().add(1,"days").format("YYYY-MM-DD")};a.getRawmaterails(e),a.getUnitproject(e)},a.getRawmaterails=function(e){(0,a.props.dispatch)({type:"BuildProduceAnalysis/rawmaterails",payload:e})},a.getUnitproject=function(e){(0,a.props.dispatch)({type:"BuildProduceAnalysis/unitproject",payload:e})},a.handleFormReset=function(){a.props.form.resetFields(),a.initData()},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n={startTime:M()().format("YYYY-MM-DD"),endTime:M()().add(1,"days").format("YYYY-MM-DD")};t.time&&(n={startTime:M()(t.time[0]).format("YYYY-MM-DD"),endTime:M()(t.time[1]).format("YYYY-MM-DD")}),a.getRawmaterails(n),a.getUnitproject(n)}})},a.getOption=function(){return{title:{text:"",left:"center"},color:["#2498E4"],grid:{top:"10%",left:"0",right:"3%",bottom:"5%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{top:30,left:"center",data:["隐患个数"],itemWidth:14},xAxis:{type:"value",minInterval:1,min:function(e){var t=e.min,a=e.max;return t||a?0:5}},yAxis:{type:"category",data:[]},series:[{name:"隐患个数",data:[],type:"bar",barMaxWidth:50}]}},a.getSeries=function(e,t){var a=e.map(function(){return 0});if(!Object.keys(t).length)return a;for(var n=Object.keys(t),r=0;r<n.length;r+=1){a[e.indexOf(n[r])]=t[n[r]]}return a},a.renderChart1=function(e){var t=A()(a.getOption());return t.yAxis.data=B.c[0],t.title.text="安全基础管理类隐患分析",t.series[0].data=a.getSeries(B.c[0],e),E.a.createElement(P.a,{option:t,style:{height:"100%"}})},a.renderChart2=function(e){var t=A()(a.getOption());return t.yAxis.data=B.c[1],t.title.text="施工现场安全管理隐患分析",t.series[0].data=a.getSeries(B.c[1],e),E.a.createElement(P.a,{option:t,style:{height:"100%"}})},a}return Y()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.initData()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return E.a.createElement(v.a,{onSubmit:this.handleSearch,layout:"inline"},E.a.createElement(i.a,{gutter:16},E.a.createElement(l.a,{md:6,sm:24},E.a.createElement("div",{className:S.a.inputMain},E.a.createElement("span",{style:{width:"80px",lineHeight:"30px",height:"32px"},className:"ant-input-group-addon"},"检测时间"),E.a.createElement(T,{style:{flex:1,marginBottom:0}},e("time")(E.a.createElement(o.a.RangePicker,{className:S.a.inputGroupLeftRadius,style:{width:"100%"},format:"YYYY-MM-DD"}))))),E.a.createElement(l.a,{md:6,sm:24},E.a.createElement("span",{className:F.a.submitButtons},E.a.createElement(s.a,{type:"primary",htmlType:"submit"},"查询"),E.a.createElement(s.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props.BuildProduceAnalysis,t=e.rawmaterails,a=e.unitproject,n={height:"100%"},i={flex:1,height:"100%"};return E.a.createElement(r.a,{bordered:!1,style:{height:"calc(100vh - 175px)"},bodyStyle:n},E.a.createElement("div",{className:F.a.tableList,style:n},E.a.createElement("div",{className:F.a.tableListForm},this.renderSimpleForm()),E.a.createElement("div",{style:{display:"flex",height:"calc(100% - 56px)"}},E.a.createElement("div",{style:i},this.renderChart1(t)),E.a.createElement("div",{style:i},this.renderChart2(a)))))}}]),t}(x.PureComponent))||n)||n;t.default=C}}]);