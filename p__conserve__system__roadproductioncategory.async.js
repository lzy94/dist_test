(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{IYq0:function(e,a,t){"use strict";t.r(a);var n,l=t("pVnL"),o=t.n(l),r=(t("IzEo"),t("bx4M")),i=(t("14J3"),t("BMrR")),d=(t("jCWc"),t("kPKH")),s=t("MVZn"),c=t.n(s),u=(t("miYZ"),t("tsqr")),m=(t("P2fV"),t("NJEC")),p=(t("/zsF"),t("PArb")),g=(t("5Dmo"),t("3S7+")),h=(t("+L6B"),t("2/Rp")),f=t("lwsE"),y=t.n(f),b=t("W8MJ"),E=t.n(b),v=t("a1gu"),V=t.n(v),C=t("Nsbk"),k=t.n(C),B=t("PJYZ"),M=t.n(B),S=t("7W2i"),R=t.n(S),w=(t("2qtc"),t("kLXV")),N=(t("5NDa"),t("5rEg")),F=(t("y8nQ"),t("Vl3Y")),L=t("q1tI"),D=t.n(L),P=t("MuoO"),O=t("CkN6"),q=t("9zHi"),J=t.n(q),T=t("ZP6J"),z=t.n(T),x=F.a.Item,A=F.a.create()(function(e){var a=e.modalVisible,t=e.form,n=e.handleAdd,l=e.handleModalVisible;return D.a.createElement(w.a,{destroyOnClose:!0,title:"新建分类",className:z.a.formModal,visible:a,onOk:function(){t.validateFields(function(e,a){e||n(a,function(){return t.resetFields()})})},onCancel:function(){return l()}},D.a.createElement("div",{className:z.a.formModalBody},D.a.createElement(x,{label:"分类名称"},t.getFieldDecorator("categoryName",{rules:[{required:!0,message:"请输入分类名称！"}]})(D.a.createElement(N.a,{placeholder:"请输入"}))),D.a.createElement(x,{label:"分类编码"},t.getFieldDecorator("categoryCode",{rules:[{required:!0,message:"请输入分类编码！"}]})(D.a.createElement(N.a,{placeholder:"请输入"})))))}),U=F.a.create()(function(e){var a=e.modalVisible,t=e.form,n=e.handleUpdate,l=e.handleModalVisible,o=e.detail;return D.a.createElement(w.a,{destroyOnClose:!0,title:"编辑分类",className:z.a.formModal,visible:a,onOk:function(){t.validateFields(function(e,a){e||n(a,function(){return t.resetFields()})})},onCancel:function(){return l()}},D.a.createElement("div",{className:z.a.formModalBody},D.a.createElement(x,{label:"分类名称"},t.getFieldDecorator("categoryName",{initialValue:o.categoryName,rules:[{required:!0,message:"请输入分类名称！"}]})(D.a.createElement(N.a,{placeholder:"请输入"}))),D.a.createElement(x,{label:"分类编码"},t.getFieldDecorator("categoryCode",{initialValue:o.categoryCode,rules:[{required:!0,message:"请输入分类编码！"}]})(D.a.createElement(N.a,{placeholder:"请输入"})))))}),I=Object(P.connect)(function(e){return{RoadProductionCategory:e.RoadProductionCategory,loading:e.loading.models.RoadProductionCategory}})(n=F.a.create()(n=function(e){function a(){var e,t;y()(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(t=V()(this,(e=k()(a)).call.apply(e,[this].concat(l)))).state={modalVisible:!1,updateModalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"编号",dataIndex:"categoryCode"},{title:"名称",dataIndex:"categoryName"},{title:"操作",width:100,render:function(e,a){return D.a.createElement(L.Fragment,null,D.a.createElement(g.a,{placement:"left",title:"编辑"},D.a.createElement(h.a,{onClick:function(){return t.editData(a)},type:"primary",shape:"circle",icon:"edit",size:"small"})),D.a.createElement(p.a,{type:"vertical"}),D.a.createElement(m.a,{title:"是否删除数据?",onConfirm:function(){return t.dataDel(a.id)},okText:"确定",cancelText:"取消"},D.a.createElement(g.a,{placement:"left",title:"删除"},D.a.createElement(h.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.getList=function(e){(0,t.props.dispatch)({type:"RoadProductionCategory/fetch",payload:e})},t.editData=function(e){(0,t.props.dispatch)({type:"RoadProductionCategory/detail",payload:e.id,callback:function(e){t.setState({detail:e},function(){return t.handleUpdateModalVisible(!0)})}})},t.dataDel=function(e){(0,t.props.dispatch)({type:"RoadProductionCategory/remove",payload:e,callback:function(){u.a.success("删除成功"),t.getList({pageBean:t.state.pageBean})}})},t.delBatch=function(){var e=t.state,a=e.selectedRows,n=e.pageBean,l=t.props.dispatch;if(a){var o=M()(t);w.a.confirm({title:"提示",content:"您确定要批量删除吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){l({type:"RoadProductionCategory/removes",payload:{ids:a.map(function(e){return e.id}).join()},callback:function(){u.a.success("删除成功"),o.getList({pageBean:n}),o.setState({selectedRows:[]})}})}})}},t.handleStandardTableChange=function(e){var a=t.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(n)},t.handleFormReset=function(){t.props.form.resetFields(),t.setState({formValues:[],selectedRows:[]}),t.getList({pageBean:t.state.pageBean})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=c()({},a),l=Object.keys(n).map(function(e){return n[e]?{property:e,value:n[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:l}),t.getList({pageBean:t.state.pageBean,querys:l})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e){t.setState({updateModalVisible:!!e})},t.handleAdd=function(e){(0,t.props.dispatch)({type:"RoadProductionCategory/saveData",payload:e,callback:function(){u.a.success("添加成功"),t.handleModalVisible(),t.getList({pageBean:t.state.pageBean})}})},t.handleUpdate=function(e){var a=t.props.dispatch,n=t.state,l=n.pageBean,o=n.detail,r=JSON.parse(JSON.stringify(o));for(var i in e)r[i]=e[i];t.setState({detail:r}),a({type:"RoadProductionCategory/saveData",payload:r,callback:function(){u.a.success("编辑成功"),t.handleUpdateModalVisible(),t.getList({pageBean:l})}})},t}return R()(a,e),E()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return D.a.createElement(F.a,{onSubmit:this.handleSearch,layout:"inline"},D.a.createElement(i.a,{gutter:{md:8,lg:24,xl:48}},D.a.createElement(d.a,{md:6,sm:24},D.a.createElement(x,null,e("categoryCode")(D.a.createElement(N.a,{addonBefore:"编号",placeholder:"请输入"})))),D.a.createElement(d.a,{md:6,sm:24},D.a.createElement(x,null,e("categoryName")(D.a.createElement(N.a,{addonBefore:"名称",placeholder:"请输入"})))),D.a.createElement(d.a,{md:6,sm:24},D.a.createElement("span",{className:J.a.submitButtons},D.a.createElement(h.a,{type:"primary",htmlType:"submit"},"查询"),D.a.createElement(h.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.RoadProductionCategory.data,n=a.loading,l=this.state,i=l.selectedRows,d=l.modalVisible,s=l.updateModalVisible,c=l.detail,u={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},m={handleModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate,detail:c};return D.a.createElement(L.Fragment,null,D.a.createElement(r.a,{bordered:!1},D.a.createElement("div",{className:J.a.tableList},D.a.createElement("div",{className:J.a.tableListForm},this.renderSimpleForm()),D.a.createElement("div",{className:J.a.tableListOperator},D.a.createElement(h.a,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"新建"),i.length>0&&D.a.createElement(h.a,{type:"danger",onClick:this.delBatch},"批量删除")),D.a.createElement(O.a,{size:"middle",tableAlert:!0,selectedRows:i,loading:n,data:t,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),D.a.createElement(A,o()({},u,{modalVisible:d})),s&&"{}"!==JSON.stringify(c)?D.a.createElement(U,o()({modalVisible:s},m)):null)}}]),a}(L.PureComponent))||n)||n;a.default=I}}]);