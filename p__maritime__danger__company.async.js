(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{"4fML":function(e,a,t){"use strict";t.r(a);var n=t("pVnL"),l=t.n(n),r=(t("IzEo"),t("bx4M")),i=(t("14J3"),t("BMrR")),o=(t("jCWc"),t("kPKH")),c=(t("5NDa"),t("5rEg")),s=t("MVZn"),m=t.n(s),d=(t("miYZ"),t("tsqr")),u=(t("2qtc"),t("kLXV")),p=(t("P2fV"),t("NJEC")),h=(t("/zsF"),t("PArb")),f=(t("5Dmo"),t("3S7+")),g=(t("+L6B"),t("2/Rp")),b=t("lwsE"),E=t.n(b),y=t("W8MJ"),v=t.n(y),I=t("a1gu"),w=t.n(I),M=t("Nsbk"),S=t.n(M),C=t("7W2i"),D=t.n(C),V=(t("y8nQ"),t("Vl3Y")),k=t("q1tI"),R=t.n(k),B=t("MuoO"),L=t("wd/R"),N=t.n(L),T=t("CkN6"),z=(t("bP8k"),t("gFTJ")),F=t("Py4S"),P=t.n(F),x=t("+n12"),O=t("ZP6J"),J=t.n(O),j=function(e){function a(){var e,t;E()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=w()(this,(e=S()(a)).call.apply(e,[this].concat(l)))).renderImg=function(e){return R.a.createElement(P.a,{backdrop:"rgba(255,255,255,.3)",src:"".concat(x.E).concat(e),alt:"图片",style:{width:"200px",height:"200px"}})},t}return D()(a,e),v()(a,[{key:"render",value:function(){var e=this.props,a=e.modalVisible,t=e.handleModalVisible,n=e.detail,l={marginTop:5};return R.a.createElement(u.a,{destroyOnClose:!0,title:"详情",className:J.a.formModal,visible:a,onCancel:function(){return t()},footer:null,width:1e3},R.a.createElement(r.a,{bordered:!1},R.a.createElement(z.a,{column:3,size:"small",layout:"vertical",bordered:!0},R.a.createElement(z.a.Item,{label:"单面名称"},n.companyName),R.a.createElement(z.a.Item,{label:"法人代表"},n.legalRepresentative),R.a.createElement(z.a.Item,{label:"联系方式"},n.phone))),R.a.createElement(r.a,{bordered:!1,style:l},R.a.createElement(z.a,{title:"检查详情",column:1,size:"small",layout:"vertical",bordered:!0},R.a.createElement(z.a.Item,{label:"企业安全生产主体责任落实情况，所经营的船舶是否发生安全责任事故"},n.securityIncident),R.a.createElement(z.a.Item,{label:"企业安全生产投入、安全生产培训及效果情况"},n.safeProduction),R.a.createElement(z.a.Item,{label:"企业所设立的满足经营资质需要和安全管理要求的组织机构和人员是否保持"},n.enterpriseOrgan),R.a.createElement(z.a.Item,{label:"企业所经营的船舶是否签订安全责任书并对船物履行安全生产指导"},n.safetyGuidance),R.a.createElement(z.a.Item,{label:"是否接受船舶非法挂靠的经营行为"},n.illegalCall),R.a.createElement(z.a.Item,{label:"企业是否按国家有关规定要求建立、实施并保持安全管理体系"},n.managementSystem),R.a.createElement(z.a.Item,{label:"对所属船舶提供资源和岸基支持情况"},n.resourceShore),R.a.createElement(z.a.Item,{label:"主要管理人员的资质保持情况"},n.personnelQualification),R.a.createElement(z.a.Item,{label:"所属船舶是否持有运政部门核发的《船舶营业运输证》且是否有效"},n.shipBusinessLicense),R.a.createElement(z.a.Item,{label:"安全教育培训制度及落实情况"},n.educationTraining),R.a.createElement(z.a.Item,{label:"隐患排查记录整改情况"},n.hiddenTroubleHooting),R.a.createElement(z.a.Item,{label:"发生事故重大险情或者被滞留情况"},n.majorDanger),R.a.createElement(z.a.Item,{label:"应急预案及演习情况"},n.emergencyPlan))),R.a.createElement(r.a,{bordered:!1,style:l},R.a.createElement(z.a,{column:2,size:"small",layout:"vertical",bordered:!0},R.a.createElement(z.a.Item,{label:"检查人员签字"},this.renderImg(n.inspectors)),R.a.createElement(z.a.Item,{label:"被检查人员签字"},this.renderImg(n.inspectedPerson)))))}}]),a}(k.PureComponent);j.defaultProps={detail:{},modalVisible:!1,handleModalVisible:function(){}};var Y,q=t("9zHi"),A=t.n(q),H=(t("ns75"),V.a.Item),U=Object(B.connect)(function(e){return{MaritimeDangerCompany:e.MaritimeDangerCompany,loading:e.loading.models.MaritimeDangerCompany}})(Y=V.a.create()(Y=function(e){function a(){var e,t;E()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=w()(this,(e=S()(a)).call.apply(e,[this].concat(l)))).state={modalVisible:!1,selectedRows:[],formValues:[],detail:{},pageBean:{page:1,pageSize:10,showTotal:!0}},t.columns=[{title:"企业名称",dataIndex:"companyName"},{title:"法人代表",dataIndex:"legalRepresentative"},{title:"联系方式",dataIndex:"phone"},{title:"创建时间",dataIndex:"createTime"},{title:"操作",width:90,render:function(e,a){return R.a.createElement(k.Fragment,null,R.a.createElement(f.a,{placement:"left",title:"详情"},R.a.createElement(g.a,{onClick:function(){return t.showDetailModal(a)},type:"primary",shape:"circle",icon:"file-search",size:"small"})),R.a.createElement(h.a,{type:"vertical"}),R.a.createElement(p.a,{title:"是否删除数据?",onConfirm:function(){return t.dataDel(a.id)},okText:"确定",cancelText:"取消"},R.a.createElement(f.a,{placement:"left",title:"删除"},R.a.createElement(g.a,{type:"danger",shape:"circle",icon:"delete",size:"small"}))))}}],t.getList=function(e){(0,t.props.dispatch)({type:"MaritimeDangerCompany/fetch",payload:e})},t.showDetailModal=function(e){t.setState({detail:e},function(){return t.handleModalVisible(!0)})},t.dataDel=function(e){t.delUtil(e)},t.batchDel=function(){var e=t.state.selectedRows;e.length&&u.a.confirm({title:"提示",content:"是否删除数据？",onOk:function(){var a=e.map(function(e){return e.id});t.delUtil(a.join(),function(){t.setState({selectedRows:[]})})}})},t.delUtil=function(e,a){(0,t.props.dispatch)({type:"MaritimeDangerCompany/remove",payload:{ids:e},callback:function(){d.a.success("删除成功");var e=t.state.pageBean;t.getList({pageBean:e}),a&&a()}})},t.handleStandardTableChange=function(e){var a=t.state.formValues,n={pageBean:{page:e.current,pageSize:e.pageSize,showTotal:!0},querys:a};t.getList(n)},t.handleFormReset=function(){var e=t.props.form,a=t.state.pageBean;e.resetFields(),t.setState({formValues:[],selectedRows:[]}),t.getList({pageBean:a})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.state.pageBean,l=m()({},a,{createTime:a.time&&N()(a.time).format("YYYY-MM-DD")}),r=Object.keys(l).map(function(e){return l[e]?{property:e,value:l[e],group:"main",operation:"LIKE",relation:"AND"}:""}).filter(function(e){return e});t.setState({formValues:r}),t.getList({pageBean:n,querys:r})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e}),e||t.setState({detail:{}})},t}return D()(a,e),v()(a,[{key:"componentDidMount",value:function(){var e=this.state.pageBean;this.getList({pageBean:e})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return R.a.createElement(V.a,{onSubmit:this.handleSearch,layout:"inline"},R.a.createElement(i.a,{gutter:16},R.a.createElement(o.a,{md:5,sm:24},R.a.createElement(H,null,e("companyName")(R.a.createElement(c.a,{addonBefore:"单位名称",placeholder:"请输入"})))),R.a.createElement(o.a,{md:5,sm:24},R.a.createElement(H,null,e("legalRepresentative")(R.a.createElement(c.a,{addonBefore:"法人代表",placeholder:"请输入"})))),R.a.createElement(o.a,{md:5,sm:24},R.a.createElement(H,null,e("phone")(R.a.createElement(c.a,{addonBefore:"联系方式",placeholder:"请输入"})))),R.a.createElement(o.a,{md:4,sm:24},R.a.createElement("span",{className:A.a.submitButtons},R.a.createElement(g.a,{type:"primary",htmlType:"submit"},"查询"),R.a.createElement(g.a,{style:{marginLeft:8},onClick:this.handleFormReset},"重置")))))}},{key:"render",value:function(){var e=this.props,a=e.MaritimeDangerCompany.data,t=e.loading,n=this.state,i=n.selectedRows,o=n.modalVisible,c=n.detail,s={detail:c,handleModalVisible:this.handleModalVisible};return R.a.createElement(k.Fragment,null,R.a.createElement(r.a,{bordered:!1},R.a.createElement("div",{className:A.a.tableList},R.a.createElement("div",{className:A.a.tableListForm},this.renderSimpleForm()),R.a.createElement("div",{className:A.a.tableListOperator},i.length>0&&R.a.createElement(g.a,{type:"danger",onClick:this.batchDel},"批量删除")),R.a.createElement(T.a,{size:"middle",tableAlert:!1,selectedRows:i,loading:t,data:a,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),o&&Object.keys(c).length?R.a.createElement(j,l()({},s,{modalVisible:o})):null)}}]),a}(k.PureComponent))||Y)||Y;a.default=U}}]);